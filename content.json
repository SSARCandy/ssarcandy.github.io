{"meta":{"title":"SSARCandy's Blog","subtitle":"","description":"ssarcandy's blog. There is always more than one solution.","author":"John Doe","url":"https://ssarcandy.tw","root":"/"},"pages":[{"title":"","date":"2025-10-22T00:51:26.809Z","updated":"2025-10-22T00:51:26.809Z","comments":true,"path":"web-app-manifest.json","permalink":"https://ssarcandy.tw/web-app-manifest.json","excerpt":"","text":"{\"name\":\"ssarcandy\",\"start_url\":\"/\",\"display\":\"standalone\",\"orientation\":\"natural\"}"},{"title":"About","date":"2025-10-22T00:51:26.606Z","updated":"2025-10-22T00:51:26.606Z","comments":false,"path":"about/index.html","permalink":"https://ssarcandy.tw/about/index.html","excerpt":"","text":"I am Andy Hsu, graduated student of CMLab, National Taiwan University.Interested in programming and actively share various projects on GitHub, trying to make the world better (or just make my life easier).Also interested in Astronomyâ­, Machine LearningğŸ’», Web DevelopmentğŸŒ, and PhotographicğŸ“¸."},{"title":"Projects","date":"2025-10-22T00:51:26.809Z","updated":"2025-10-22T00:51:26.809Z","comments":false,"path":"projects/index.html","permalink":"https://ssarcandy.tw/projects/index.html","excerpt":"","text":"Here listed my open source projects."},{"title":"","date":"2025-10-22T00:51:26.604Z","updated":"2025-10-22T00:51:26.604Z","comments":true,"path":"GAv3-pageview.json","permalink":"https://ssarcandy.tw/GAv3-pageview.json","excerpt":"","text":"{\"visitor_count\":92046,\"pv_map\":{\"travian-article-submission\":81,\"setting-up-opencv-using-cmake-gui\":948,\"hello-world\":2,\"bot-battle\":410,\"hexo-auto-deploy\":490,\"vim-plugin-manager\":4202,\"python-note\":723,\"pbrt-heightfield\":525,\"debug-using-vdb\":286,\"pbrt-realistic-camera\":739,\"cml-fb-bot\":624,\"pbrt-mediancut-environment-light\":297,\"policyd\":966,\"msauto\":4583,\"pbrt-light-field-camera\":685,\"from-react-to-react-native\":864,\"prevent-mail-server-sending-spam\":2963,\"setup-x11-forwarding-on-debian\":990,\"high-dynamic-range-imaging\":3392,\"migrate-to-gmail-using-migration-tool\":410,\"migrate-to-gmail-migration-strategy\":361,\"panorama-image-stitching\":4553,\"coherent-line-drawing\":2518,\"about-taking-case\":453,\"multi-server-gpu-status-monitor\":1361,\"using-pytorch-in-windows\":1876,\"deep-coral\":5359,\"javascript-prototype-chain\":536,\"use-pytorch-to-solve-fizzbuzz\":2176,\"mbpr2015-repair\":1671,\"parallel-computing-using-slurm\":5,\"setup-slurm-cluster\":1030,\"monitoring-from-handcraft-to-prometheus\":275,\"ways-to-access-internal-network\":245,\"game-design-from-perspective-of-hacker\":550,\"timing-attack\":432,\"develop-hexo-plugin\":503,\"build-a-high-performance-computing-cluster-on-gcp\":547,\"photographing-solar-eclipse-with-only-a-smartphone\":358,\"setup-couchdb-using-docker-swarm\":536,\"share-storage-comparison\":457,\"optimizing-compile-time\":126}}"}],"posts":[{"title":"Run Unix-like Server on Android","slug":"run-unix-server-on-android","date":"2023-04-09T09:56:43.000Z","updated":"2025-10-22T00:51:26.606Z","comments":true,"path":"2023/04/09/run-unix-server-on-android/","link":"","permalink":"https://ssarcandy.tw/2023/04/09/run-unix-server-on-android/","excerpt":"æ‰‹æ©Ÿçš„ç¡¬é«”ä½œç‚ºä¼ºæœå™¨å…¶å¯¦ç›¸ç•¶å¤ ç”¨ã€‚","text":"æ‰‹æ©Ÿçš„ç¡¬é«”ä½œç‚ºä¼ºæœå™¨å…¶å¯¦ç›¸ç•¶å¤ ç”¨ã€‚ æœ€è¿‘æ­£å¥½æ±°æ›ä¸‹ä¾†ä¸€å° Pixel 4aï¼Œæ­£åœ¨æƒ³è¾¦æ³•å°‡ä»–çš„å‰©é¤˜åƒ¹å€¼ç™¼æ®åˆ°æœ€å¤§åŒ–ã€‚å‰ç¯‡ æŠŠèˆŠçš„ Pixel æ”¹é€ æˆç„¡é™ç…§ç‰‡ä¸Šå‚³æ©Ÿ å·²ç¶“ç™¼æ®äº†ä¸€äº›åƒ¹å€¼ï¼Œä½†æ˜¯ä¸å¤ ï¼é€™æ¬¡æˆ‘è¦ç”¨é€™å€‹æ‰‹æ©Ÿä¾†å–ä»£æ‰æˆ‘é•·ä¹…ä»¥ä¾†ç§Ÿçš„é›²ç«¯è™›æ“¬æ©Ÿï¼ŒæŠŠæœˆç§Ÿè²»çœä¸‹ä¾†ã€‚ é¸æ“‡å®‰è£æ–¹æ³•è¦ç”¨æ‰‹æ©Ÿä¾†å–ä»£é›²ç«¯è™›æ“¬æ©Ÿå™¨ï¼Œå…¶å¯¦é‚„æ˜¯æœ‰ä¸€äº›å›°é›£ï¼Œé¦–å…ˆå®¶è£¡ä¸¦æ²’æœ‰å›ºå®š IPï¼Œä¹Ÿå°±æ˜¯èªªç”¨æ‰‹æ©Ÿä¾†ç•¶ä½œä¼ºæœå™¨çš„è©±æ²’è¾¦æ³•åœ¨å¤–é¢å­˜å–ï¼Œå¦‚æœæœ‰æ¶è¨­ç¶²ç«™çš„éœ€æ±‚çš„è©±é‚£é€™è‚¯å®šæ˜¯è¡Œä¸é€šã€‚ä¸éæˆ‘çš„æƒ…æ³å‰›å¥½ä¸éœ€è¦å›ºå®š IPï¼Œæˆ‘è¦çš„å…¶å¯¦æ˜¯ä¸€å€‹é–‹ç™¼æ©Ÿå…¼æ°¸ä¸åœæ©Ÿçš„ä¼ºæœå™¨è®“æˆ‘å¯ä»¥åœ¨ä¸Šé¢è·‘ä¸€äº›å®šæ™‚çš„å·¥ä½œæˆ–è€…æ˜¯è·‘ä¸€äº›éœ€è¦é•·æ™‚é–“é‹ä½œçš„ç¨‹å¼ã€‚ é‚£æ¥ä¸‹ä¾†å°±æ˜¯è¦ä¾†æ€è€ƒæˆ‘éœ€è¦ä»€éº¼ï¼Œä¸»æµåœ¨å®‰å“è¨­å‚™ä¸Šé¢è·‘ Unix Server æœ‰å…©ç¨®æ–¹å¼ï¼Œä¸€ç¨®æ˜¯ä½¿ç”¨ Termux[1]ï¼Œå¦ä¸€ç¨®æ˜¯ç›´æ¥å®‰è£å®Œæ•´çš„ç³»çµ±åœ¨æ‰‹æ©Ÿä¸Š[2]ã€‚Termux çš„å¥½è™•æ˜¯å®‰è£ååˆ†å®¹æ˜“ä¹Ÿä¸éœ€è¦ rootï¼Œå£è™•æ˜¯ä»–é›–ç„¶æ˜¯ Unix-like çš„ç³»çµ±ï¼Œä½†æ˜¯ç®—æ˜¯é–¹å‰²ç‰ˆï¼Œå¯èƒ½æœ‰å°‘æ•¸ä¸€äº›æŒ‡ä»¤æˆ–è€… package æ˜¯æ²’è¾¦æ³•ä½¿ç”¨çš„ï¼›åä¹‹ï¼Œç›´æ¥å®‰è£å®Œæ•´çš„ç³»çµ±é‚£ç•¶ç„¶å¯ä»¥ç²å¾—æœ€åƒæ˜¯ Ubuntu çš„é«”é©—ï¼Œä½†ç›¸å°ä¾†è¬›æ¯”è¼ƒé›£è£è¼ƒè¤‡é›œï¼Œå¯èƒ½ä¹Ÿå…ä¸äº†éœ€è¦å–å¾— rootã€‚ è€ƒé‡åˆ°åŸºæœ¬ä¸Šæˆ‘åªéœ€è¦æœ‰å¯ä»¥é–‹ç™¼åŠéƒ¨å±¬ Python, node.js, C++ çš„æ‡‰ç”¨ç¨‹å¼ï¼Œæ‰€ä»¥æˆ‘é¸æ“‡ä½¿ç”¨ Termux å°±å¥½äº†ã€‚ æˆ‘çš„éœ€æ±‚æˆ‘çš„éœ€æ±‚å¯ä»¥ç°¡å–®åˆ—å‡ºï¼š å¯ä»¥é€é ssh å­˜å– æœ‰ Python, node.js, C++ é–‹ç™¼ç’°å¢ƒ å¯ä»¥ç”¨ vscode é–‹ç™¼ Termux çœŸçš„ååˆ†å¼·å¤§ï¼Œå¤§éƒ¨åˆ†çš„æŒ‡ä»¤éƒ½è·Ÿåœ¨ä½¿ç”¨ Ubuntu ä¸€æ¨£ç°¡å–®ï¼Œä½†æˆ‘é‚„æ˜¯é‡åˆ°äº†ä¸€äº›å‘ï¼Œç‰¹æ­¤ç´€éŒ„ä¸€ä¸‹ã€‚ sshTermux å®‰è£å¥½å¾Œï¼Œé‚„éœ€è¦å®‰è£ openssh ç­‰æ±è¥¿æ‰èƒ½ä½¿æˆ‘å¯ä»¥å¾å¤–éƒ¨ ssh é€²å»ã€‚ 1234$ pkg install openssh$ vim $&#123;PREFIX&#125;/etc/ssh/sshd_config# PasswordAuthentication yes$ sshd sshd ä¹Ÿå¯ä»¥ç”¨ screen ç­‰ç­‰çš„æŒ‡ä»¤åŸ·è¡ŒèƒŒæ™¯ï¼Œå°±ä¸æœƒå ç”¨å‰æ™¯ã€‚å¦å¤–ä¹Ÿå¯ä»¥ç”¨ ssh key çš„æ–¹å¼ç™»å…¥ï¼Œå°±ä¸éœ€è¦æ¯æ¬¡æ‰“å¯†ç¢¼ã€‚è€Œ $PREFIX æ˜¯ Termux çš„æ ¹ç›®éŒ„ï¼Œä¸€èˆ¬å¸¸è¦‹çš„ /usr, /etc ç­‰ç­‰è·¯å¾‘åœ¨ Termux åº•ä¸‹å°±æœƒè¢«å°æ‡‰è‡³ $PREFIX/usr, $PREFIX/etc Dev Environments12345678# python$ pkg install python3# node.js$ pkg install nodejs-lts# C++$ pkg install glib cmake gdb ä¸‰è¡ŒæŒ‡ä»¤å°±å®‰è£å®Œçµ•å¤§éƒ¨åˆ†éœ€è¦çš„å·¥å…·ã€‚å¦å¤–é–‹ç™¼ C++ æ™‚ç¶“å¸¸éœ€è¦ libboostï¼Œå¾ˆå¯æƒœæ²’æœ‰è¾¦æ³•ç›´æ¥é€é pkg install ï¼Œä½†å¯ä»¥ç”¨åŸå§‹ç¢¼ç·¨è­¯ï¼š 123456789$ wget https://boostorg.jfrog.io/artifactory/main/release/1.81.0/source/boost_1_81_0.tar.gz$ tar xvf boost_1_81_0.tar.gz$ cd boost_1_81_0$ ./bootstrap.sh --prefix=$PREFIX$ ./b2# Copy header &amp; library to right place$ cp -a boost /data/data/com.termux/files/usr/include$ cp -a stage/lib/* /data/data/com.termux/files/usr/lib/ å®‰è£å®Œå¾Œå°±å¯ä»¥ç”¨ cmake æ‰¾åˆ° libboost. vscodevscode å°±ç›¸ç•¶å¤šå‘äº†â€¦é¦–å…ˆï¼Œvscode ç„¡æ³•é€é Remote-SSH å¥—ä»¶é€£ç·šåˆ° Termuxï¼Œå› ç‚ºç¼ºå°‘å¿…è¦çš„ä¸€äº›æ±è¥¿ (libstdc++, glibc æ˜¯é–¹å‰²ç‰ˆ)[3][4]ã€‚æ‰€ä»¥å¯ä»¥æ”¹å®‰è£ code-serverã€‚code-server æ˜¯ä¸€å€‹ Web ç‰ˆçš„ vscodeï¼Œå¾ä»‹é¢åˆ°ä½¿ç”¨æ–¹å¼éƒ½èˆ‡åŸç”Ÿ vscode ååˆ†ç›¸ä¼¼ï¼Œæ‰€ä»¥ç”¨é€™å€‹ä¹Ÿæ˜¯å®Œå…¨å¯ä»¥æ¥å—çš„è§£æ±ºæ–¹å¼ã€‚ ä½†è¦å®‰è£ code-server ååˆ†ä¹‹å›°é›£ï¼Œæˆ‘å¾Œä¾†æ‰¾çš„ä¸€å€‹å…¨æ˜¯éŸ“æ–‡çš„å½±ç‰‡æ‰é †åˆ©å®‰è£æˆåŠŸï¼š 1234567$ pkg install nodejs-lts python yarn binutils$ v=$(node -v); v=$&#123;v#v&#125;; v=$&#123;v%%.*&#125;;$ FORCE_NODE_VERSION=&quot;$v&quot; yarn global add code-server@4.6.0 --ignore-engines;# after installation done, launch it in screen$ screen -S code-server$ code-server --bind-addr 0.0.0.0:8080 --disable-telemetry ç„¶å¾Œå°±å¯ä»¥æ‰“é–‹ç€è¦½å™¨ PRIVATE_IP:8080 å³å¯çœ‹è¦‹ç†Ÿæ‚‰çš„ vscode ç•«é¢ã€‚ ä½†æ˜¯äº‹æƒ…æ²’æœ‰é€™éº¼ç°¡å–®â€¦é€™ vscode å£æ‰çš„åœ°æ–¹å¯ä¸å°‘ï¼Œä»– built-in Terminal æ‰“ä¸é–‹ï¼Œæœå°‹åŠŸèƒ½ç„¡æ³•ä½¿ç”¨ï¼ŒSource Control è£æ­»â€¦.ç¶“éä¸€ç³»åˆ—ç ”ç©¶åŠå˜—è©¦å¾Œ[5]ï¼Œçµ‚æ–¼æŠŠå…¨éƒ¨éƒ½è§£æ±ºäº†â€¦ 1234567891011121314151617### bulit-in Terminal cannot open# [IPC Library: Pty Host] Unknown channel: ptyHost# rejected promise not handled within 1 second: Unknown channel: Channel name &#x27;ptyHost&#x27; timed out after 1000ms$ sed -i -e &#x27;s|switch(process.platform)|switch(&quot;linux&quot;)|&#x27; /data/data/com.termux/files/home/.config/yarn/global/node_modules/code-server/lib/vscode/out/vs/platform/terminal/node/ptyHostMain.js### Search not working# ...@vscode/ripgrep/bin/rg&#x27;: No such file or directory$ pkg install ripgrep$ cp /data/data/com.termux/files/usr/bin/rg .config/yarn/global/node_modules/code-server/lib/vscode/node_modules/@vscode/ripgrep/bin/rg.config/yarn/global/node_modules/code-server/lib/vscode/node_modules/@vscode/ripgrep/bin/rg### Source Control not working# The folder currently open doesn&#x27;t have a git repository$ pkg install git$ vim ~/.local/share/code-server/Machine/settings.json&#123; &quot;git.path&quot;: &quot;/data/data/com.termux/files/usr/bin/git&quot;&#125; é€™äº›æ”¹å®Œä»¥å¾Œï¼Œè¨˜å¾—é‡å•Ÿ code-serverã€‚ å…¶ä»–æœ‰ç”¨çš„è¨£ç«…Monitor CPU Loadinghtop åœ¨ non-root Termux æ˜¯åŠæ®˜çš„ï¼Œçœ‹ä¸åˆ° CPU loadingï¼Œé€™æ˜¯ç”±æ–¼ Android ç³»çµ±ç´šåˆ¥çš„è¨­å®šï¼Œè®“ä¸€èˆ¬æ‡‰ç”¨ç¨‹å¼ (Termux ä¹Ÿç®—æ‡‰ç”¨ç¨‹å¼) ç„¡æ³•å­˜å–åˆ° /procã€‚æ‰€ä»¥å¯ä»¥æ”¹å®‰è£ pkg install neofetchï¼Œä»–å¯ä»¥æ­£ç¢ºå±•ç¤º CPU ä½¿ç”¨é‡ (å¦‚æœ¬æ–‡é¦–åœ–)ï¼Œä¸çŸ¥æ€è¾¦åˆ°çš„ å“ˆå“ˆã€‚ Turn off System Task Killeråœ¨å®‰è£å¥½æ‰€æœ‰æ±è¥¿ä»¥å¾Œï¼Œéš”å¤©æˆ‘å°±ç™¼ç¾ç„¡æ³• ssh åˆ°æ‰‹æ©Ÿä¸Šäº†ï¼Œä¸€çœ‹æ‰ç™¼ç¾è¢«ç³»çµ±æ®ºæ‰äº†ã€‚ç¾åœ¨æ¯”è¼ƒæ–°ç‰ˆæœ¬çš„ Android OS (12+) éƒ½æœ‰åš´æ ¼çš„åŸ·è¡Œç·’é™åˆ¶ï¼Œæ‡‰è©²æ˜¯ 32 å·¦å³ï¼Œé€™æ•¸å­—å¤ªå°äº†æœƒå°è‡´ Termux ç¶“å¸¸è¢«æ®ºæ‰ã€‚æ‰€ä»¥éœ€è¦é€é adb å»æŠŠé€™å€‹æ±è¥¿é—œæ‰[6]ï¼š 12345# For Android 12L &amp; Android 13:./adb shell &quot;settings put global settings_enable_monitor_phantom_procs false&quot;# For Android 12ï¼š./adb shell &quot;/system/bin/device_config set_sync_disabled_for_tests persistent; /system/bin/device_config put activity_manager max_phantom_processes 2147483647&quot; Adjust System TimeServer é€šå¸¸éƒ½è¦æ˜¯ UTC æ™‚é–“æœƒæ¯”è¼ƒæ–¹ä¾¿ï¼Œçµæœé€™å…¶å¯¦ä¸éœ€è¦åœ¨ Termux å…§ç”¨æŒ‡ä»¤èª¿æ•´ï¼Œåªéœ€è¦å»æ‰‹æ©Ÿ è¨­å®š&gt;æ™‚é–“&gt;é¸æ“‡æ™‚å€ å³å¯ã€‚ Bind MAC address to Private IPç”±æ–¼æ‰‹æ©Ÿæ˜¯é€é WiFi é€£ä¸Šå®¶ç”¨ç¶²è·¯ï¼Œprivate IP æ˜¯é€é DHCP åˆ†é…ï¼Œä½†å¦‚æœ IP ç¶“å¸¸æ”¹è®Šå¾ˆä¸æ–¹ä¾¿ã€‚å¯ä»¥é€šéå®¶ç”¨ router å»è¨­å®š mac address ç¶å®šåˆ†é…çš„ private IP ä¾†é¿å… IP è·‘æ‰ã€‚(ASUS router æœ‰é€™åŠŸèƒ½[7]ï¼Œä¸ç¢ºå®šå…¶ä»–å» ç‰Œæœ‰æ²’æœ‰) Compare with Cloud VMæˆ‘åŸå…ˆåœ¨ç”¨çš„æ˜¯ Nanode 1 GB (1 shared CPU + 1GB RAM)ã€‚è¨˜æ†¶é«”åªæœ‰ 1GB æœ‰æ™‚å€™æœƒ Out of Memory å¾ˆä¸é–‹å¿ƒï¼Œæ•ˆèƒ½æ–¹é¢æˆ‘å€’æ˜¯è¦ºå¾—å ªç”¨ã€‚åƒ¹æ ¼æ–¹é¢å‰‡æ˜¯ä¸€å€‹æœˆ $5 USDï¼Œæ˜¯ Linode æä¾›çš„è™›æ“¬æ©Ÿä¸­æœ€ä¾¿å®œçš„é¸æ“‡[9]ã€‚åšäº†ä¸€äº›ç°¡å–®çš„æ•ˆèƒ½æ¸¬è©¦ï¼Œçœ‹çœ‹ Nanode 1 GB v.s. Pixel 4a æ˜¯èª°è´ï¼Ÿ 1234567[Task1. Compile libboost v1.81.0]Nanode = 705.27s user 48.27s system 96% cpu 12:57.18 totalPixel4a= 4236.25s user 218.47s system 691% cpu 10:44.36 total[Task2. Python check prime number]Nanode = 19.27s user 0.00s system 99% cpu 19.305 totalPixel4a= 25.62s user 0.01s system 99% cpu 25.681 total Task1 æ¸¬è©¦çš„æ‰€æœ‰ CPU éƒ½æ»¿è¼‰æ™‚çš„æ•ˆèƒ½ï¼Œå¾ˆåˆç†çš„ Pixel4a æœ‰å¤šé¡† CPU è‡ªç„¶æœƒè´é Nanode;Task2 æ˜¯ç”¨ Python å¯«çš„ is_prime script[10] ï¼Œç”¨æ–¼æ¸¬è©¦å–®ä¸€ CPU çš„æ€§èƒ½ï¼Œå°±å¯ä»¥ç™¼ç¾å…¶å¯¦æ‰‹æ©Ÿçš„ CPU é‚„æ˜¯åçˆ›ï¼Œæœ‰å·®åˆ° 30% References Termux Wiki é€£ç­†é›»éƒ½æ‡¶å¾—å¸¶? é‚£å°±åœ¨ Android ä¸Šè·‘ VS Code å§! | Termux , PRoot , VS Code Server Remote host prerequisites SSH to Termux not working. [Bug]: Terminal is not working on Termux. Fix [Process completed (signal 9) - press Enter] for Termux on Android 12+ devices [Wireless Router] How to manually assign IP around the DHCP list? Akamaiâ€™s Cloud Computing Services: Pricing Update Linode Pricing List Python check prime number h1+ol { list-style-type: none; counter-reset: list-counter; padding-left: 0; } h1+ol li { position: relative; padding-left: 3em; } h1+ol li::before { counter-increment: list-counter; content: \"[\" counter(list-counter) \"] \"; position: absolute; left: 0; width: 25px; text-align: right; }","categories":[],"tags":[{"name":"unix","slug":"unix","permalink":"https://ssarcandy.tw/tags/unix/"},{"name":"note","slug":"note","permalink":"https://ssarcandy.tw/tags/note/"},{"name":"trashtalk","slug":"trashtalk","permalink":"https://ssarcandy.tw/tags/trashtalk/"}]},{"title":"æŠŠèˆŠçš„ Pixel æ”¹é€ æˆç„¡é™ç…§ç‰‡ä¸Šå‚³æ©Ÿ","slug":"make-old-pixel-as-photo-uploader","date":"2023-04-08T07:48:18.000Z","updated":"2025-10-22T00:51:26.605Z","comments":true,"path":"2023/04/08/make-old-pixel-as-photo-uploader/","link":"","permalink":"https://ssarcandy.tw/2023/04/08/make-old-pixel-as-photo-uploader/","excerpt":"è‡ªå¾ Google Photos é¤Šå¥—æ®ºï¼Œå–æ¶ˆé«˜ç•«è³ªç„¡é™ä¸Šå‚³ä»¥å¾Œ[1]ï¼Œå°æ–¼æˆ‘é€™ç¨®ç¿’æ…£ä½¿ç”¨ Google Photos çš„äººç„¡ç–‘æ˜¯é‡å¤§æ‚²åŠ‡ï¼Œç©ºé–“ç”¨å®ŒæŒ‡æ—¥å¯å¾…ã€‚ç›®å‰ Google Photos çš„é«˜ç•«è³ªç„¡é™å…è²»ä¸Šå‚³æ˜¯å°ˆé–€çµ¦ Pixel 2~5 çš„å„ªå¾…ï¼Œåªè¦æ˜¯ç”±é€™äº›å‹è™Ÿçš„è£ç½®ä¸Šå‚³çš„ç…§ç‰‡ï¼Œå°±å¯ä»¥äº«æœ‰é€™é …ç¦åˆ©ï¼Œä¸¦ä¸é™åˆ¶ç…§ç‰‡éœ€ä½¿ç”¨é€™äº›è£ç½®æ‹æ”æ‰€å¾—ã€‚ç‚ºäº†è¹­ Pixel èˆŠè£ç½®å¯ä»¥ä»¥â€œé«˜ç•«è³ªâ€ç„¡é™å…è²»ä¸Šå‚³ Google Photosï¼Œå³ä½¿æ›äº†æ–°æ‰‹æ©Ÿï¼Œä¹Ÿæ‡‰è©²æƒ³è¾¦æ³•ç”±èˆŠè£ç½®ä¾†ä¸Šå‚³ç›¸ç‰‡ã€‚","text":"è‡ªå¾ Google Photos é¤Šå¥—æ®ºï¼Œå–æ¶ˆé«˜ç•«è³ªç„¡é™ä¸Šå‚³ä»¥å¾Œ[1]ï¼Œå°æ–¼æˆ‘é€™ç¨®ç¿’æ…£ä½¿ç”¨ Google Photos çš„äººç„¡ç–‘æ˜¯é‡å¤§æ‚²åŠ‡ï¼Œç©ºé–“ç”¨å®ŒæŒ‡æ—¥å¯å¾…ã€‚ç›®å‰ Google Photos çš„é«˜ç•«è³ªç„¡é™å…è²»ä¸Šå‚³æ˜¯å°ˆé–€çµ¦ Pixel 2~5 çš„å„ªå¾…ï¼Œåªè¦æ˜¯ç”±é€™äº›å‹è™Ÿçš„è£ç½®ä¸Šå‚³çš„ç…§ç‰‡ï¼Œå°±å¯ä»¥äº«æœ‰é€™é …ç¦åˆ©ï¼Œä¸¦ä¸é™åˆ¶ç…§ç‰‡éœ€ä½¿ç”¨é€™äº›è£ç½®æ‹æ”æ‰€å¾—ã€‚ç‚ºäº†è¹­ Pixel èˆŠè£ç½®å¯ä»¥ä»¥â€œé«˜ç•«è³ªâ€ç„¡é™å…è²»ä¸Šå‚³ Google Photosï¼Œå³ä½¿æ›äº†æ–°æ‰‹æ©Ÿï¼Œä¹Ÿæ‡‰è©²æƒ³è¾¦æ³•ç”±èˆŠè£ç½®ä¾†ä¸Šå‚³ç›¸ç‰‡ã€‚ é€™é‚Šæ‰€è¬‚ â€é«˜ç•«è³ªâ€ (Storage Saver) å…¶å¯¦æ˜¯æœ‰å£“ç¸®çš„ï¼Œç›®å‰åªæœ‰ Pixel 1 å¯ä»¥å…è²» â€åŸå§‹ç•«è³ªâ€ (Original) ä¸Šå‚³ï¼Œä½†å°æˆ‘è€Œè¨€æœ‰å…è²»é«˜ç•«è³ªå°±å¾ˆå¥½äº†ï¼Œç›´æ¥çœä¸‹è¨‚é–± Google One çš„è²»ç”¨ã€‚ å¦‚ä½•é”æˆé€™å€‹ä»»å‹™å‘¢ï¼ŸåŸºæœ¬ä¸Šçš„æµç¨‹æœƒæ˜¯ä»¥ä¸‹ä¸‰å€‹æ­¥é©Ÿï¼š æ–°æ‰‹æ©Ÿæ‹æ”ç…§ç‰‡ æ–°æ‰‹æ©Ÿå°‡ç…§ç‰‡åŒæ­¥è‡³èˆŠæ‰‹æ©Ÿ èˆŠæ‰‹æ©Ÿè‡ªå‹•å‚™ä»½è‡³ Google Photos ä½†åœ¨é€™è£¡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ–°æ‰‹æ©Ÿä¸è¦é–‹å•Ÿ Google Photos å‚™ä»½åŠŸèƒ½ï¼Œä»¥å…ä½”ç”¨é›²ç«¯ç©ºé–“ã€‚ æ¥ä¸‹ä¾†ï¼Œæˆ‘å€‘éœ€è¦å°‹æ‰¾ä¸€å€‹é›²ç«¯ç›¸ç‰‡åŒæ­¥æœå‹™ä¾†ç•¶ä½œä¸­ç¹¼ç«™ï¼Œè®“æ–°æ‰‹æ©Ÿæ‹æ”çš„ç…§ç‰‡åŒæ­¥è‡³èˆŠæ‰‹æ©Ÿçš„æš«å­˜ç©ºé–“ï¼Œä»¥åˆ©å¾ŒçºŒçš„å‚™ä»½ã€‚åœ¨æˆ‘çš„å¯¦ä½œä¸­ï¼Œæˆ‘é¸æ“‡äº† Mega å’Œ MegaSyncã€‚ æµç¨‹åœ–ã€‚ ä¸Šé¢æµç¨‹åœ–ç°¡å–®çš„å±•ç¤ºäº†æ•´å€‹æµç¨‹ï¼Œæ¥ä¸‹ä¾†å°±æ˜¯æŠŠéœ€è¦çš„æ±è¥¿æº–å‚™å¥½ï¼š Pixel 5 or an earlier device Google Photos éœ€å®‰è£æ–¼æ–°ã€èˆŠæ‰‹æ©Ÿ Mega éœ€å®‰è£æ–¼æ–°ã€èˆŠæ‰‹æ©Ÿ MegaSync éœ€å®‰è£æ–¼èˆŠæ‰‹æ©Ÿ Mega æ˜¯ä¸€å€‹é›²ç«¯å„²å­˜æœå‹™ï¼Œæä¾›å…è²»çš„ 50GB å„²å­˜ç©ºé–“[2]ï¼Œè¨»å†Šä¸”ä¸‹è¼‰è‡³æ–°æ‰‹æ©Ÿä»¥å¾Œä»¥å¾Œï¼Œåªè¦é–‹å•Ÿ Camera Upload [3] åŠŸèƒ½å³å¯ã€‚ç©ºé–“æ–¹é¢ä¹Ÿä¸ç”¨æ“”å¿ƒè€—ç›¡ï¼Œä¸€æ–¹é¢æ˜¯ä»–æœ‰ 50 GBï¼Œå¦ä¸€æ–¹é¢æ˜¯æˆ‘åªæ˜¯è¦å°‡å®ƒç•¶ä½œä¸€å€‹æš«å­˜ä¸­ç¹¼ç«™ï¼Œåªè¦å¾ŒçºŒå‚™ä»½å®Œæˆï¼Œé€™é‚Šçš„ç…§ç‰‡å³å¯æ¸…ç©ºã€‚ è€Œ MegaSync æ˜¯ä¸€å€‹ç¬¬ä¸‰æ–¹ appï¼ŒåŠŸèƒ½é¡ä¼¼æ–¼ rsync ï¼Œå¯ä»¥å°‡ Mega ä¸Šé¢çš„æŒ‡å®šè³‡æ–™å¤¾ä¸‹çš„æª”æ¡ˆåŒæ­¥è‡³æ‰‹æ©Ÿåœ°ç«¯ï¼Œæ‰€ä»¥åªè¦è¨­å®šå¥½è¦åŒæ­¥ Camera Upload è³‡æ–™å¤¾ï¼Œå°±å¯ä»¥åˆ©ç”¨é€™å€‹æ©Ÿåˆ¶å»ä¸‹è¼‰æˆ‘æ–°æ‰‹æ©Ÿæ‰€æ‹æ”çš„ç…§ç‰‡åˆ°èˆŠæ‰‹æ©Ÿä¸Šã€‚ è‡³æ­¤ï¼Œæ–°æ‰‹æ©Ÿæ‹æ”çš„ç›¸ç‰‡å·²ç¶“åŒæ­¥è‡³èˆŠæ‰‹æ©Ÿï¼Œé€™æ™‚å€™åªéœ€è¦åœ¨èˆŠæ‰‹æ©Ÿçš„ Google Photos é–‹å•Ÿ â€œé«˜ç•«è³ªâ€ å‚™ä»½é¸é …ï¼Œä¸€åˆ‡å°±å¤§åŠŸå‘Šæˆã€‚ å¦å¤–ç‚ºäº†ç¶­æŒæ•´å€‹æµç¨‹ç©©å®šï¼Œæœ€å¥½è¦æŠŠ èˆŠæ‰‹æ©Ÿä¸Šå°‡ MegaSync çš„é›»æ± æœ€ä½³åŒ–é—œé–‰ï¼Œ æ–°æ‰‹æ©Ÿä¸Šå°‡ Mega çš„é›»æ± æœ€ä½³åŒ–é—œé–‰ æ‰ä¸æœƒè¢«ç³»çµ±é™åˆ¶å°è‡´ç„¡æ³•åœ¨èƒŒæ™¯åŸ·è¡Œé€™äº›ç¨‹å¼ã€‚ ç¸½çµä¾†èªªï¼Œé€éé€™æ¨£çš„æ”¹é€ ï¼Œæˆ‘å€‘å¯ä»¥è¼•é¬†åœ°äº«æœ‰ Google Photos çš„é«˜ç•«è³ªç„¡é™å…è²»ä¸Šå‚³åŠŸèƒ½ï¼Œä¸¦ä¸”ä¹Ÿèƒ½è³¦äºˆèˆŠè£ç½®ä¸€å€‹æ–°çš„åŠŸèƒ½è€Œéæ“ºåœ¨æŠ½å±œé–’ç½®ã€‚åªè¦æŒ‰ç…§ä»¥ä¸Šçš„æ­¥é©Ÿé€²è¡Œæ“ä½œï¼Œå°±å¯ä»¥è¼•é¬†åœ°å®Œæˆä¸€å°ç„¡é™ç…§ç‰‡ä¸Šå‚³æ©Ÿçš„æ”¹é€ ã€‚ References Google ç›¸ç°¿å„²å­˜ç©ºé–“æ”¿ç­–æ›´æ–° 2020 å¹´ä»¥å¾Œè¨»å†Šçš„æ–°å¸³æˆ¶ï¼Œå…è²»ç©ºé–“æ”¹ç‚º 20GBï¼Œå¯é€éä¸€äº›ä»»å‹™å‡ç´šè‡³ 50GB How to use camera uploads? h1+ol { list-style-type: none; counter-reset: list-counter; padding-left: 0; } h1+ol li { position: relative; padding-left: 3em; } h1+ol li::before { counter-increment: list-counter; content: \"[\" counter(list-counter) \"] \"; position: absolute; left: 0; width: 25px; text-align: right; }","categories":[],"tags":[{"name":"trashtalk","slug":"trashtalk","permalink":"https://ssarcandy.tw/tags/trashtalk/"},{"name":"automation","slug":"automation","permalink":"https://ssarcandy.tw/tags/automation/"}]},{"title":"Optimizing C++ Compile Time","slug":"optimizing-compile-time","date":"2022-06-11T10:26:10.000Z","updated":"2025-10-22T00:51:26.605Z","comments":true,"path":"2022/06/11/optimizing-compile-time/","link":"","permalink":"https://ssarcandy.tw/2022/06/11/optimizing-compile-time/","excerpt":"ç·¨è­¯æ˜¯éœæ…‹èªè¨€ä¸å¯é¿å…çš„æ­¥é©Ÿã€‚å°æ–¼é–‹ç™¼è€…è€Œè¨€ï¼Œç·¨è­¯æ˜¯å€‹åˆæ„›åˆæ¨çš„æ±è¥¿ï¼Œå¥½è™•æ˜¯ä»–å¯ä»¥å¹«åŠ©åœ¨ç·¨è­¯æ™‚æœŸæ‰¾å‡ºéƒ¨åˆ†çš„éŒ¯èª¤åˆå¯ä»¥å¹«å¿™æœ€ä½³åŒ–ï¼Œä½†æ˜¯å£è™•å‰‡æ˜¯ç·¨è­¯è¦æ™‚é–“ï¼Œç•¶å°ˆæ¡ˆè¶Šä¾†è¶Šå¤§æ™‚ï¼Œå°å°æ”¹å€‹æª”æ¡ˆå¯èƒ½å°±è¦èŠ±æ•¸åˆ†é˜å»ç­‰ç·¨è­¯ã€‚ source: https://xkcd.com/303/","text":"ç·¨è­¯æ˜¯éœæ…‹èªè¨€ä¸å¯é¿å…çš„æ­¥é©Ÿã€‚å°æ–¼é–‹ç™¼è€…è€Œè¨€ï¼Œç·¨è­¯æ˜¯å€‹åˆæ„›åˆæ¨çš„æ±è¥¿ï¼Œå¥½è™•æ˜¯ä»–å¯ä»¥å¹«åŠ©åœ¨ç·¨è­¯æ™‚æœŸæ‰¾å‡ºéƒ¨åˆ†çš„éŒ¯èª¤åˆå¯ä»¥å¹«å¿™æœ€ä½³åŒ–ï¼Œä½†æ˜¯å£è™•å‰‡æ˜¯ç·¨è­¯è¦æ™‚é–“ï¼Œç•¶å°ˆæ¡ˆè¶Šä¾†è¶Šå¤§æ™‚ï¼Œå°å°æ”¹å€‹æª”æ¡ˆå¯èƒ½å°±è¦èŠ±æ•¸åˆ†é˜å»ç­‰ç·¨è­¯ã€‚ source: https://xkcd.com/303/ éš¨è‘— C++ çš„ç™¼å±•ï¼Œç¾åœ¨ modern C++ å¦‚ C++14, 17 ç­‰ç­‰ï¼Œæ–°å¢äº†æ›´å¤šæ–¹å¼è®“é–‹ç™¼è€…åœ¨ç·¨è­¯æ™‚æœŸå®Œæˆæ›´å¤šäº‹æƒ…ï¼Œæ¯”å¦‚èªªæ›´æ–¹ä¾¿çš„if contexprç­‰ç­‰åŠŸèƒ½ã€‚è€Œé€™å…¶å¯¦ä¹Ÿæ˜¯è¢«é¼“å‹µçš„ï¼Œå› ç‚ºèƒ½åœ¨ç·¨è­¯æ™‚æœŸå°±è™•ç†å®Œçš„è©±å°±å¯ä»¥è®“ runtime åŸ·è¡Œå¾—æ›´å¿«ï¼ ä½†ç•¶å¤§é‡ä½¿ç”¨ template æˆ–å¼•ç”¨æ›´å¤šçš„ library ä¹Ÿè®“ compiler çš„å·¥ä½œè¶Šä¾†è¶Šå¤šï¼Œè€Œå¦‚æœæ¯æ”¹å¹¾è¡Œå°±è¦ç­‰å¾…ç·¨è­¯å¹¾åˆ†é˜æ‰èƒ½çŸ¥é“åŸ·è¡Œçµæœçš„è©±ï¼Œå°æ–¼ä¸€å¤©è¦ç·¨è­¯æ•¸ç™¾æ¬¡çš„é–‹ç™¼è€…è€Œè¨€å¯¦åœ¨æ˜¯å¤ªæµªè²»ç”Ÿå‘½äº†ã€‚ æœ¬ç¯‡æ–‡ç« å°±è¦ä¾†æ¢è¨å„ç¨®åŠ é€Ÿ C++ Compile Time çš„æ–¹å¼ï¼Œå¤§éƒ¨åˆ†çš„æ–¹æ³•éƒ½æ˜¯ Stack Overflow æœåˆ®ä¾†ï¼Œç„¶å¾Œç”±æˆ‘è‡ªè¡Œå¯¦æ¸¬ã€‚æ¸¬è©¦ç’°å¢ƒå¦‚ä¸‹ï¼š Ubuntu 18.04 LTS GCC 9 CMake 3.23 Ninja 1.8 Project LOC ~20k Use ccacheå¼•å…¥ ccache çµ•å°æ˜¯æ•ˆç›Šæœ€é«˜çš„åŠ é€Ÿæ–¹å¼ï¼Œå®Œå…¨ä¸ç”¨æ”¹ç¨‹å¼å°±å¯ä»¥æ¸›å°‘å¤§é‡çš„ç·¨è­¯æ™‚é–“ã€‚ccache æ˜¯ä¸€å€‹å…¨åŸŸçš„ compiler cacheï¼Œè—‰ç”±å¿«å–ç·¨è­¯çš„ä¸­ç¹¼æª”ä¾†ç¯€çœé‡æ–°ç·¨è­¯çš„æ™‚é–“ã€‚å®‰è£å¥½ä»¥å¾Œåªè¦åœ¨ CMakeLists.txt ä¸­åŠ å…¥: 12# CMakeLists.txtSET_PROPERTY(GLOBAL PROPERTY RULE_LAUNCH_COMPILE ccache) å³å¯ä½¿ç”¨ccacheï¼Œå¦‚æœå°ˆæ¡ˆæ²’ä½¿ç”¨ build tools çš„è©±ï¼Œå‰‡æ˜¯ç›´æ¥åœ¨gccæŒ‡ä»¤å‰åŠ ä¸Šccache 1234# before$ /usr/bin/gcc main.cpp# after$ ccache /usr/bin/gcc main.cpp ä½¿ç”¨ ccache ä¹‹å¾Œæ•´é«”ç·¨è­¯é€Ÿåº¦å¤§ç´„å¯ä»¥æå‡å…©å€ä»¥ä¸Šï¼Œååˆ†è®šï¼ Use forward declaration as more as possibleC++ çš„ #include é—œéµå­—å…¶å¯¦å°±æ˜¯è¤‡è£½è²¼ä¸Šï¼Œæ‰€ä»¥ç•¶ä½ åœ¨ A.h include äº† B.hï¼Œåœ¨é è™•ç†éšæ®µç·¨è­¯å™¨æœƒæŠŠ B.h å…§å®¹è¤‡è£½åˆ° A.hï¼Œè€Œå¦‚æœä¸å¹¸çš„ B.h åˆ include ä¸€å †æª”æ¡ˆï¼Œé‚£ä¹Ÿæœƒé€šé€šå±•é–‹ã€‚æ‰€ä»¥å¦‚æœå¼•ç”¨å¤ªå¤šæª”æ¡ˆï¼Œé™¤äº†æœƒé€ æˆé è™•ç†ä¹‹å¾Œæª”æ¡ˆè‚¥å¤§ä»¥å¤–ï¼Œä¹Ÿæœƒé€ æˆæª”æ¡ˆä¹‹é–“ç›¸ä¾æ€§æ··äº‚ï¼Œé–“æ¥å°è‡´æ¯æ¬¡ç·¨è­¯è¦é‡æ–°ç·¨è­¯ä¸å¿…è¦çš„æª”æ¡ˆã€‚ é™¤äº†å°‡æ²’ç”¨çš„ include æ¸…ä¹¾æ·¨ä»¥å¤–ï¼Œé‚„å¯ä»¥æ›´æ¿€é€²çš„é¿å…åœ¨ header include æ±è¥¿ï¼Œé‚£å°±æ˜¯åˆ©ç”¨ forward declarationã€‚ include tree è©¦æƒ³ä»¥ä¸Šæƒ…å¢ƒï¼Œç•¶ä½ è®Šæ›´ A.h æ™‚ï¼ŒA B C éƒ½å¿…é ˆé‡æ–°ç·¨è­¯ï¼Œå› ç‚ºå…§å®¹æ”¹è®Šäº†ï¼Œä½†å¯¦éš›ä¸Š C ä¸¦æœªä½¿ç”¨åˆ° Aï¼Œå…¶å¯¦æ‡‰è©²å¯ä»¥é¿å…é‡æ–°ç·¨è­¯ Cã€‚ ç”±æ–¼ C æœƒé‡æ–°ç·¨è­¯æ˜¯å› ç‚º B.h å…§å®¹æ”¹è®Šäº†ï¼Œè€Œ B.h å…§å®¹æ”¹è®Šçš„åŸå› å‰‡æ˜¯å› ç‚º A.h æ›´æ–°äº†ã€‚é€™æ™‚å€™å¯ä»¥æª¢è¦–ç‚ºç”šéº¼ B.h éœ€è¦å¼•ç”¨ A.hï¼Œçœ‹çœ‹æ˜¯å¦å¯ä»¥é¿å…å¼•ç”¨ã€‚ 12345678/// B.h#include &quot;A.h&quot;class B &#123; // ...skip private: const A&amp; a;&#125;; ä»¥ä¸Šæ˜¯å¸¸è¦‹çš„ä½¿ç”¨æƒ…å¢ƒï¼ŒB å­˜äº†ä¸€å€‹ class A çš„åƒè€ƒA&amp; aã€‚ æˆ‘å€‘å¯ä»¥æ”¹å¯«æˆé€™æ¨£ï¼Œå°‡ include ç§»è‡³ B.cpp å¯¦ä½œæª”ä¸­ã€‚é€™æ˜¯å› ç‚ºA&amp;, A*ç­‰é€™é¡æ±è¥¿çš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥åœ¨å®šç¾©æ™‚ä¸éœ€è¦çŸ¥é“å¯¦éš› class A çš„å¤§å°ï¼Œåªéœ€å…ˆå‘ŠçŸ¥ compiler æœ‰é€™å€‹ class å³å¯ã€‚ 12345678910/// B.hclass A; //&lt; forward declare !class B &#123; // ...skip private: const A&amp; a;&#125;;/// B.cpp#include &quot;A.h&quot; å¦‚æ­¤ä¸€ä¾†ï¼Œç•¶ä½ è®Šæ›´ A.h æ™‚ï¼ŒB.h å…§å®¹ä¸¦ä¸æœƒæ”¹è®Šï¼Œä¹Ÿå°±ä¸æœƒè§¸ç™¼ C éœ€è¦é‡æ–°ç·¨è­¯æ‹‰ï¼Œå¯å–œå¯è³€~ åœ¨å¤§é‡ä½¿ç”¨é€™å€‹æŠ€å·§ä»¥å¾Œï¼Œæˆ‘æ‰€æ¸¬è©¦çš„å°ˆæ¡ˆé€²æ­¥å¹…åº¦ä¹Ÿæ˜¯éå¸¸æ˜é¡¯ï¼Œæ›´å‹• A.h åŸæœ¬æœƒç‰½å‹• 54 å€‹æª”æ¡ˆéœ€è¦é‡ç·¨è­¯ï¼Œæ”¹å®Œä»¥å¾Œå‰‡åªæœƒç‰½å‹• 29 å€‹æª”æ¡ˆï¼Œè‡ªç„¶ç·¨è­¯é€Ÿåº¦ä¹Ÿå°±è®Šå¿«äº†ã€‚ 12345# before use fwd v.s. after use fwd# -j 6 incremental build, w/o ccache, unit in second[touch A.h]before = 303 (trigger 54 files rebuild)after = 178 (trigger 29 files rebuild) Unity BuildUnity build åˆç¨± Jumbo build, Mega buildï¼Œå…¶åŸç†æ˜¯é€éå°‡*.cppå½™æ•´æˆä¸€å€‹all.cppå†ä¸€èµ·åŸ·è¡Œç·¨è­¯ï¼Œé€™æ¨£å°±æ˜¯çœä¸‹ N å€‹æª”æ¡ˆçš„ç·¨è­¯æ™‚é–“ (å…·é«”è€Œè¨€æ˜¯çœä¸‹å¦‚ template å±•é–‹ç­‰åŸæœ¬æ¯å€‹ Translate Unit éƒ½è¦åšçš„äº‹æƒ…)ã€‚ CMake v3.16 é–‹å§‹å°±æ”¯æ´ Unity Build çš„è¨­å®šï¼Œä»–æ”¯æ´å°‡ batch size å€‹æª”æ¡ˆå…ˆåŒ¯ç¸½æˆall_x.cppä¹‹å¾Œå†é€²è¡Œç·¨è­¯ã€‚ ä¸éé€™æ–¹æ³•æœƒé‡åˆ°ä¸€äº›å•é¡Œï¼Œç”±æ–¼é€™æ–¹æ³•ä¹‹åŸç†èªªç™½äº†å°±æ˜¯cat *.cpp &gt; all.cppå¦‚æ­¤æš´åŠ›ï¼Œå¦‚æœå°ˆæ¡ˆæœ¬èº«å¸¸å¸¸ä½¿ç”¨å…¨åŸŸè®Šæ•¸çš„è©±ï¼Œé€™æœƒå¾ˆå®¹æ˜“å°è‡´ ODR (One definition rule) éŒ¯èª¤ã€‚æ‰€ä»¥ä¹Ÿæœ‰å¯èƒ½ä¸å®¹æ˜“å¼•å…¥ Unity Buildã€‚ é€™å€‹æŠ€å·§æˆ‘èªç‚ºä¹Ÿæ˜¯ CP å€¼ååˆ†ä¹‹é«˜çš„æ–¹æ³•ï¼Œå¹¾ä¹ä¸ç”¨æ”¹ç¨‹å¼ (å¦‚æœå°ˆæ¡ˆç”¨å¤ªå¤šå…¨åŸŸè®Šæ•¸å°±è¦æ”¹å¾ˆå¤šğŸ˜…) å»å¯ä»¥ç²å¾—å¤§å¹…çš„é€²æ­¥ã€‚æˆ‘æ¸¬è©¦çš„çµæœå¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°ç„¡è«–æ˜¯ incremental build é‚„æ˜¯ clean build éƒ½å–å¾— 50% ä»¥ä¸Šçš„é€²æ­¥ã€‚ 123456789# w/o unity build v.s. with unity build (batch_size=8)# using -j 6, w/o ccache, unit in seconds[touch A.h]before = 242 # 38 tasksafter = 167 # 18 tasks[clean build]before = 420 # 111 tasksafter = 224 # 47 tasks Better linkerç·¨è­¯çš„æœ€å¾Œéšæ®µæ˜¯ linkingï¼Œé€™éƒ¨åˆ†å¯ä»¥æ›¿æ›æˆæ¯”è¼ƒå²å®³çš„ linkerï¼Œå¸‚é¢ä¸Šç›®å‰æœ‰ä¸‰ç¨®è¼ƒæœ‰åçš„ linker ld (gcc default) gold lld è¦æ›¿æ›ä½¿ç”¨ linker åªéœ€è¦åœ¨ compile flag åŠ ä¸Šfuse-ld=&lt;linker_name&gt;å³å¯ã€‚è©³ç´°å¯åƒè€ƒ gcc documentã€‚è€Œæˆ‘å¯¦æ¸¬ä¸åŒ linker è¡¨ç¾å¦‚ä¸‹ï¼Œ 123456# rebuild using single thread, unit in second# [1/1] Linking CXX executable main[linker]ld = 25.4gold = 11.6lld = 5.8 ä½¿ç”¨æ›´å¼·çš„ linker é›–ç„¶ä½¿ linking time é€²æ­¥è¨±å¤šï¼Œä½†å°æ•´å€‹å°ˆæ¡ˆçš„ compile time è€Œè¨€å…¶å¯¦ä½”æ¯”ä¸æ˜¯å¾ˆå¤§ï¼Œç›¸è¼ƒæ–¼å‰é¢å¹¾å€‹ç« ç¯€ç®—æ˜¯é€²æ­¥è¼ƒå°çš„æŠ€å·§ã€‚(ä½† CP å€¼ä¹Ÿæ˜¯å¾ˆé«˜ï¼Œåªè¦æ”¹ä¸€å€‹ compile flag) Disable var-tracking for huge variable objectæˆ‘å€‘å¯ä»¥é€é gcc flag -ftime-reportä¾†å‰–æç·¨è­¯å„å€‹éšæ®µçš„è€—æ™‚ï¼Œç„¶å¾Œé‡å°å„å€‹è€—æ™‚å¤§çš„æ”¹å–„ã€‚ æˆ‘æ¸¬è©¦çš„å°ˆæ¡ˆä¸­ï¼Œæœ‰ä¸€å€‹ auto-generate çš„unordered_mapï¼Œè©²æª”æ¡ˆå‹•è¼’æ•¸è¬è¡Œï¼Œæ¯æ¬¡ç·¨è­¯è©²æª”æ¡ˆéƒ½æœƒæˆç‚ºç“¶é ¸ã€‚å¾-ftime-reportå¾—çŸ¥ç·¨è­¯è©²æª”æ¡ˆè€—æ™‚æœ€å¤§çš„éƒ¨åˆ†æ˜¯ var-trackingï¼Œvar-tracking æ˜¯è®“ debug info æœ‰æ›´å¤šè³‡è¨Šçš„åŠŸèƒ½ï¼Œä½†ç•¶å°ˆæ¡ˆä¸­æœ‰å·¨å¤§çš„è®Šæ•¸æ™‚ï¼Œé€™æœƒè®“ compiling é€Ÿåº¦å¤§å¹…è®Šæ…¢ã€‚ åœ¨å°æˆ‘é‚£å€‹æ•¸è¬è¡Œçš„unordered_mapæª”æ¡ˆæ‹¿æ‰ var-tracking ä¹‹å¾Œ (é‡å°è©²æª”æ¡ˆåŠ ä¸Šä¸€å€‹-fno-var-trackingflag) çµæœå¦‚ä¸‹ï¼Œ 123456789101112131415161718192021222324252627# gcc -ftime-report auto_gen.cpp# with var-tracking v.s. without var-tracking, sorted by usr time[before]Time variable usr sys wall GGC phase opt and generate : 122.95 ( 92%) 2.30 ( 35%) 125.26 ( 89%) 924305 kB ( 46%) var-tracking dataflow : 71.39 ( 53%) 0.15 ( 2%) 71.57 ( 51%) 3714 kB ( 0%) expand vars : 17.55 ( 13%) 0.03 ( 0%) 17.56 ( 12%) 8583 kB ( 0%) phase parsing : 8.09 ( 6%) 3.46 ( 53%) 11.55 ( 8%) 794986 kB ( 40%) alias stmt walking : 6.11 ( 5%) 0.08 ( 1%) 6.40 ( 5%) 678 kB ( 0%) template instantiation : 4.35 ( 3%) 1.58 ( 24%) 6.03 ( 4%) 443040 kB ( 22%) phase lang. deferred : 2.30 ( 2%) 0.72 ( 11%) 3.02 ( 2%) 232700 kB ( 12%) var-tracking emit : 2.87 ( 2%) 0.02 ( 0%) 2.95 ( 2%) 20420 kB ( 1%) |overload resolution : 3.18 ( 2%) 1.26 ( 19%) 4.50 ( 3%) 330116 kB ( 16%) TOTAL : 134.16 6.54 140.82 2005866 kB[after]Time variable usr sys wall GGC phase opt and generate : 44.61 ( 80%) 1.41 ( 27%) 46.03 ( 76%) 724840 kB ( 41%) expand vars : 18.45 ( 33%) 0.02 ( 0%) 18.46 ( 30%) 8567 kB ( 0%) phase parsing : 8.32 ( 15%) 3.12 ( 59%) 11.45 ( 19%) 794986 kB ( 45%) alias stmt walking : 6.39 ( 12%) 0.11 ( 2%) 6.52 ( 11%) 678 kB ( 0%) template instantiation : 4.38 ( 8%) 1.44 ( 27%) 5.93 ( 10%) 443040 kB ( 25%) |overload resolution : 3.27 ( 6%) 0.97 ( 18%) 4.51 ( 7%) 330116 kB ( 19%) phase lang. deferred : 2.27 ( 4%) 0.70 ( 13%) 2.97 ( 5%) 232700 kB ( 13%) parser (global) : 1.89 ( 3%) 0.90 ( 17%) 3.05 ( 5%) 211250 kB ( 12%) tree SSA incremental : 1.58 ( 3%) 0.01 ( 0%) 1.55 ( 3%) 259 kB ( 0%) TOTAL : 55.49 5.27 60.81 1761326 kB çµæœæ˜¯å¾åŸæœ¬è€—æ™‚ 134 ç§’é™ä½è‡³è€—æ™‚ 55 ç§’ï¼Œæ¸›å°‘è¶…é 50% çš„æ™‚é–“ã€‚é€™ä¹Ÿä½¿å¾—è©²æª”æ¡ˆä¸æœƒå†æ˜¯æ•´å€‹å°ˆæ¡ˆçš„ç“¶é ¸ã€‚ Summaryæœ¬æ–‡å˜—è©¦äº†è¨±å¤šæŠ€å·§ä¾†åŠ é€Ÿç·¨è­¯æ‰€éœ€çš„æ™‚é–“ï¼Œç¸½çµå„é»å¦‚ä¸‹åˆ—ï¼š Use ccache [big improvement] Use forward declaration as more as possible [big improvement] Unity Build [big improvement] Use LLVM linker [good improvement] Disable var-tracking for huge variable object [good improvement] Pre-compiled headers [no improvement] Explicit template instantiation [no improvement] åœ¨çˆ¬æ–‡æ™‚ç¶²å‹æåŠ pre-compiled headers ä»¥åŠ explicit (extern) template ä¹Ÿå°æ¸›å°‘ç·¨è­¯æ™‚é–“æœ‰å¹«åŠ©ï¼Œä½†å¯¦æ¸¬ä¸¦æœªæœ‰é¡¯è‘—å·®ç•°ï¼Œæ•…æœ¬æ–‡æœªæåŠï¼Œä¹Ÿè¨±å¯¦éš›ä¸Šæ˜¯æœ‰ç”¨åªæ˜¯å‰›å¥½ä¸é©ç”¨æ–¼æˆ‘çš„ç’°å¢ƒä¹‹é¡çš„ã€‚ References Improving Compilation Time of C&#x2F;C++ Projects â€œvariable trackingâ€ is eating my compile time! CMake Unity Build h1+ol { list-style-type: none; counter-reset: list-counter; padding-left: 0; } h1+ol li { position: relative; padding-left: 3em; } h1+ol li::before { counter-increment: list-counter; content: \"[\" counter(list-counter) \"] \"; position: absolute; left: 0; width: 25px; text-align: right; }","categories":[],"tags":[{"name":"c++","slug":"c","permalink":"https://ssarcandy.tw/tags/c/"},{"name":"cmake","slug":"cmake","permalink":"https://ssarcandy.tw/tags/cmake/"}]},{"title":"Share Storage Comparison","slug":"share-storage-comparison","date":"2021-05-10T07:36:52.000Z","updated":"2025-10-22T00:51:26.606Z","comments":true,"path":"2021/05/10/share-storage-comparison/","link":"","permalink":"https://ssarcandy.tw/2021/05/10/share-storage-comparison/","excerpt":"Share storageï¼Œè«¸å¦‚å®¶ç”¨ NAS æˆ–å·¥ä½œç«™å¸¸æœ‰çš„ç¶²è·¯ç¡¬ç¢Ÿ(NFS)ï¼Œæ˜¯ä¸€å€‹å¾ˆæ–¹ä¾¿åˆéš¨è™•å¯è¦‹çš„ä¸€ç¨®å­˜å„²ç©ºé–“ï¼Œæ–¹ä¾¿çš„é»åœ¨æ–¼å¯ä»¥å¾ä¸åŒæ©Ÿå™¨å­˜å–æˆ–ä¿®æ”¹åŒæ¨£çš„è³‡æ–™ã€é¿å…éœ€è¦ç¶­è­·é‡è¤‡çš„æ±è¥¿åœ¨ä¸åŒçš„æ©Ÿå™¨ä¸Šï¼›å¸¸è¦‹çš„ä½¿ç”¨æƒ…å¢ƒåƒæ˜¯æœƒå°‡ /home å®¶ç›®éŒ„æ”¾ç½®æ–¼ Share storage ä¸­ï¼Œç„¶å¾Œå†æ›è¼‰è‡³æ‰€æœ‰å·¥ä½œç«™çš„æ©Ÿå™¨ä¸Šï¼Œé€™æ¨£å°±å¯ä»¥è®“ä½¿ç”¨è€…ç„¡è«–æ˜¯ç™»å…¥å“ªä¸€å°å·¥ä½œç«™æ©Ÿå™¨ï¼Œéƒ½å¯ä»¥ä¿æŒåŒæ¨£çš„å®¶ç›®éŒ„ç’°å¢ƒï¼Œååˆ†æ–¹ä¾¿ã€‚","text":"Share storageï¼Œè«¸å¦‚å®¶ç”¨ NAS æˆ–å·¥ä½œç«™å¸¸æœ‰çš„ç¶²è·¯ç¡¬ç¢Ÿ(NFS)ï¼Œæ˜¯ä¸€å€‹å¾ˆæ–¹ä¾¿åˆéš¨è™•å¯è¦‹çš„ä¸€ç¨®å­˜å„²ç©ºé–“ï¼Œæ–¹ä¾¿çš„é»åœ¨æ–¼å¯ä»¥å¾ä¸åŒæ©Ÿå™¨å­˜å–æˆ–ä¿®æ”¹åŒæ¨£çš„è³‡æ–™ã€é¿å…éœ€è¦ç¶­è­·é‡è¤‡çš„æ±è¥¿åœ¨ä¸åŒçš„æ©Ÿå™¨ä¸Šï¼›å¸¸è¦‹çš„ä½¿ç”¨æƒ…å¢ƒåƒæ˜¯æœƒå°‡ /home å®¶ç›®éŒ„æ”¾ç½®æ–¼ Share storage ä¸­ï¼Œç„¶å¾Œå†æ›è¼‰è‡³æ‰€æœ‰å·¥ä½œç«™çš„æ©Ÿå™¨ä¸Šï¼Œé€™æ¨£å°±å¯ä»¥è®“ä½¿ç”¨è€…ç„¡è«–æ˜¯ç™»å…¥å“ªä¸€å°å·¥ä½œç«™æ©Ÿå™¨ï¼Œéƒ½å¯ä»¥ä¿æŒåŒæ¨£çš„å®¶ç›®éŒ„ç’°å¢ƒï¼Œååˆ†æ–¹ä¾¿ã€‚ é™¤äº†å‰è¨€æåˆ°çš„ä½¿ç”¨æƒ…å¢ƒä»¥å¤–ï¼Œå…¶å¯¦å¸¸è¦‹çš„ä½¿ç”¨æ–¹å¼ä¹Ÿæœ‰åƒæ˜¯æ‹¿ä¾†åšç‚ºå¹³è¡Œé‹ç®—å¯«å…¥çš„ä½ç½®ï¼Œæˆ–è€…ç”¨æ–¼å­˜æ”¾å¤§é‡è³‡æ–™é›†(dataset)çµ¦éœ€è¦çš„äººæ–¹ä¾¿è®€å–(åƒæ˜¯ä¹‹å‰ CML å°±æ˜¯é€™æ¨£ç”¨)ã€‚è€Œè«¸å¦‚æ­¤é¡çš„æ‡‰ç”¨å…¶å¯¦å°±å¾ˆè€ƒé©— Share storage çš„è®€å¯«æ€§èƒ½ï¼Œè‹¥æ€§èƒ½ä¸ä½³å¯èƒ½å¸¸å¸¸æœƒå£æ‰ï¼Œå°è‡´æ‰€æœ‰æœ‰æ›è¼‰çš„æ©Ÿå™¨éƒ½æœƒé™·å…¥ç„¡æ³•å­˜å–çš„çª˜å¢ƒã€‚ è€Œæœ¬ç¯‡ç›®çš„å°±æ˜¯æƒ³è¦æ¸¬æ¸¬çœ‹å¸‚é¢ä¸Šå¸¸è¦‹çš„ share storage è§£æ±ºæ–¹æ¡ˆä»¥åŠä»–å€‘å„è‡ªçš„å¯«å…¥æ€§èƒ½ï¼Œåšå€‹å¤§PKã€‚åº•ä¸‹åˆ—èˆ‰çš„å°±æ˜¯æˆ‘æ‰“ç®—è¦æ¸¬è©¦çš„å¹¾ç¨® share storage (ç”±æ–¼ç´”è®€å–é€šå¸¸æ•ˆèƒ½éƒ½å¾ˆå¥½ï¼Œæ‰€ä»¥é€™é‚Šåªæ¸¬å¯«å…¥æ•ˆèƒ½) Gluster file system v7 using SSD Ceph file system v13.2 using SSD Google Filestore (2T Premium Tier) IBM File Storage (6T Type Endurance) AWS EFS å…¶ä¸­å‰å…©å€‹(Gluster, Ceph)éœ€è¦è‡ªå»ºï¼Œå¾Œä¸‰å€‹(GCP, AWS, IBM)å‰‡æ˜¯ç›´æ¥ç”¨é›²ç«¯è§£æ±ºæ–¹æ¡ˆã€‚ æ¸¬è©¦çš„æ–¹å¼æˆ‘å°±ç”¨åŸå§‹åˆæœ‰æ•ˆçš„ dd æŒ‡ä»¤ä¾†è©¦å•¦ï¼ŒåŸºæœ¬ä¸Šè…³æœ¬é•·é€™æ¨£ï¼š 1234#!/bin/bashf=`hostname`rand=`head /dev/urandom | tr -dc A-Z | head -c 5 ; echo &#x27;&#x27;`sync &amp;&amp; dd if=/dev/zero of=/mnt/testfile_$&#123;f&#125;_$&#123;rand&#125; bs=10M count=100 oflag=direct 2&gt;&amp;1 | cat é€™è…³æœ¬æœ‰å¹¾å€‹åƒæ•¸å¯ä»¥èª¿æ•´ï¼š bs - block size æŒ‡å–®ä¸€å¯«å…¥å€å¡Šçš„å¤§å° count - å¯«å¹¾å€‹å€å¡Š of - å¯«åˆ°å“ªè£¡ï¼Œ/mnt/ å°±æ˜¯æˆ‘å€‘è¦æ¸¬è©¦çš„ share storage çš„ç›®éŒ„ bs*count å°±æ˜¯ç¸½å¯«å…¥å¤§å°ï¼Œæˆ‘é€™é‚Šå°±çµ±ä¸€ä½¿ç”¨ bs&#x3D;10MB, count&#x3D;100, ç¸½è¨ˆå¯«å…¥ 1GBã€‚ è€Œé€™å€‹è…³æœ¬åŸ·è¡Œçš„çµæœæœƒåƒæ˜¯é€™æ¨£: 123456$ bash test.sh100+0 records in100+0 records out1048576000 bytes (1.0 GB, 1000 MiB) copied, 4.59822 s, 128 MB/s # ^^^^^^^^# é€™å°±æ˜¯å¯«å…¥é€Ÿåº¦ ä½†é€™æ¨£é‚„ä¸å¤ ï¼Œè¦æ¸¬è©¦åˆ°æ¥µé™çš„è©±ï¼Œéœ€è¦å¹³è¡ŒåŒ–åŒæ™‚åŸ·è¡Œä¸€å †é€™å€‹è…³æœ¬ï¼Œå¯«çˆ† share storageï¼ Gluster Ceph GCP IBM AWS 100x10MB, 10 jobs 43 12 67 76 13 100x10MB, 20 jobs 12 6 29 66 6 100x10MB, 40 jobs 9 6 21 33 2 Gluster Ceph GCP IBM AWS 100x10MB, 10 jobs 43.6 12.1 67.2 76.5 13.6 100x10MB, 20 jobs 12.0 6.2 29.3 66.1 6.1 100x10MB, 40 jobs 9.0 6.0 21.1 33.9 2.8 â–² ä¸åŒ storage å¯«å…¥æ•ˆèƒ½æ¯”è¼ƒ[1][2] çµæœå¦‚ä¸Šåœ–æ‰€ç¤ºï¼Œè‡ªå»ºçš„ç³»çµ±å…¶å¯¦è¡¨ç¾éƒ½éœæ–¼é›²ç«¯æ–¹æ¡ˆ(å°¤å…¶æ˜¯åŒæ™‚å¹³è¡Œå¯«å…¥å¾ˆå¤šæ™‚)ï¼Œé€™ä¸æ’é™¤æ˜¯å› ç‚ºæˆ‘å®‰è£ Gluster &#x2F; Ceph æ™‚åŸºæœ¬ä¸Šéƒ½æ˜¯ç”¨é è¨­çš„è¨­å®šï¼Œæ²’æœ‰ç‰¹åˆ¥ç ”ç©¶æ€æ¨£æœ€ä½³åŒ–ğŸ˜±ï¼›è€Œ AWS EFS è¡¨ç¾å¥‡å·®ï¼Œé€™æœ‰åŸå› ï¼Œåº•ä¸‹è©³è¿°â€¦ã€‚é™¤æ­¤ä¹‹å¤–åˆç©©åˆå¿«çš„å°±æ˜¯ GCP Filestore ä»¥åŠ IBM File Storage äº†ï¼Œå…¶ä¸­ IBM File Storage åœ¨åŒæ™‚å¹³è¡Œå¯«å…¥å¾ˆå¤šæ™‚è¡¨ç¾æ¯”è¼ƒç©©å®šï¼Œæ‰€ä»¥åœ¨é€™é‚Šæ˜¯ IBM è¡¨ç¾æœ€ä½³ğŸ†ã€‚ AWS EFS AWS çš„ EFS çš„è®€å¯«æµé‡æ˜¯æœ‰åšé™åˆ¶çš„ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯å¦‚æœå­˜è¶Šå¤šè³‡æ–™åœ¨ EFS è£¡é¢ï¼Œå‰‡è®€å¯«æµé‡è¶Šé«˜ (bursting mode)ï¼Œé€™ä¹Ÿé€ æˆåŸºç¤æµé‡è¶…ä½ï¼Œå¦‚æœç”¨çš„å„²å­˜ç©ºé–“åªæœ‰ 100Gï¼Œå‰‡è®€å¯«æµé‡å¤§æ¦‚è½åœ¨ 5 MB&#x2F;sï¼Œæ¯å¢åŠ  100GB çš„ç©ºé–“ç”¨é‡æœƒå¢åŠ  5 MB&#x2F;s çš„é€Ÿåº¦[3]ï¼Œæ˜¯å€‹å¾ˆå¦™çš„è¨­è¨ˆã€‚åœ¨æˆ‘é€™æ¬¡çš„æ¸¬è©¦ä¸­ï¼Œç”±æ–¼ EFS åŸºæœ¬ä¸Šæ˜¯ç©ºçš„ï¼Œæ‰€ä»¥è®€å¯«æ•ˆèƒ½è‡ªç„¶ä½ä¸‹ã€‚ References å–®ä½ç‚º MB&#x2F;s jobs æ„æŒ‡åŒæ™‚åŸ·è¡Œå¹¾å€‹å¯«å…¥è…³æœ¬ï¼Œæ•…è‹¥åŒæ™‚åŸ·è¡Œ 10jobsï¼Œå¹³å‡å¯«å…¥å¯æœ‰ 20MBpsï¼Œå‰‡ç¬æ™‚å¯«å…¥é€Ÿåº¦ç‚º 200 MBps AWS EFS - Scale and performance table { font-size: 14px; } #mychart { margin-bottom: 30px; } #mychart .data { position: relative; top: -20px; } #mychart tr { height: 250px; margin: 0 auto; } #mychart .legend { flex-direction: row; justify-content: space-between; border: initial; } .charts-css.column.show-labels { --labels-size: 3rem; }","categories":[],"tags":[{"name":"unix","slug":"unix","permalink":"https://ssarcandy.tw/tags/unix/"},{"name":"cloud","slug":"cloud","permalink":"https://ssarcandy.tw/tags/cloud/"}]},{"title":"Setup CouchDB Cluster using Docker Swarm","slug":"setup-couchdb-using-docker-swarm","date":"2021-01-25T19:36:10.000Z","updated":"2025-10-22T00:51:26.606Z","comments":true,"path":"2021/01/25/setup-couchdb-using-docker-swarm/","link":"","permalink":"https://ssarcandy.tw/2021/01/25/setup-couchdb-using-docker-swarm/","excerpt":"CouchDBï¼Œä¸€å€‹ä¸»æ‰“å®‰è£å¥½ä¹‹å¾Œå°±å¯ä»¥ç›´æ¥æœ‰åŸç”Ÿ Http API é€²è¡Œ CRUD (æ–°å¢ã€è®€å–ã€ä¿®æ”¹ã€åˆªé™¤) çš„ NoSQL è³‡æ–™åº«ï¼Œå°æ–¼è¼ƒç°¡å–®çš„æ‡‰ç”¨ç¨‹å¼ç”šè‡³å°±ç›´æ¥å…å»å¾Œç«¯çš„é–‹ç™¼æˆæœ¬ï¼Œç›´æ¥å°æ¥ CouchDB Http API ä»‹é¢å³å¯ã€‚ é™¤æ­¤ä¹‹å¤–ï¼ŒCouchDB åŒæ™‚ä¹Ÿä¸»æ‰“æ‰€è¬‚çš„ muti-master cluster æ¶æ§‹ï¼Œå¯ä»¥è¼•æ˜“åœ°è¨­å®šå¤šå€‹ CouchDB instances ä¾†é”åˆ° HA çš„ç›®çš„ï¼Œç¢ºä¿æœå‹™ä¸æœƒå› ç‚ºä¼ºæœå™¨æ›æ‰è€Œç„¡æ³•å­˜å–ã€‚ è€Œæœ¬ç¯‡å°±æ˜¯åœ¨è¨˜éŒ„å¦‚ä½•é€é Docker Swarm ä¾†ä½ˆç½²è·¨æ©Ÿå™¨çš„ä¸‰å€‹ CouchDB ä¸¦ä¸”å°‡ä¹‹è¨­å®šç‚º cluster mode.","text":"CouchDBï¼Œä¸€å€‹ä¸»æ‰“å®‰è£å¥½ä¹‹å¾Œå°±å¯ä»¥ç›´æ¥æœ‰åŸç”Ÿ Http API é€²è¡Œ CRUD (æ–°å¢ã€è®€å–ã€ä¿®æ”¹ã€åˆªé™¤) çš„ NoSQL è³‡æ–™åº«ï¼Œå°æ–¼è¼ƒç°¡å–®çš„æ‡‰ç”¨ç¨‹å¼ç”šè‡³å°±ç›´æ¥å…å»å¾Œç«¯çš„é–‹ç™¼æˆæœ¬ï¼Œç›´æ¥å°æ¥ CouchDB Http API ä»‹é¢å³å¯ã€‚ é™¤æ­¤ä¹‹å¤–ï¼ŒCouchDB åŒæ™‚ä¹Ÿä¸»æ‰“æ‰€è¬‚çš„ muti-master cluster æ¶æ§‹ï¼Œå¯ä»¥è¼•æ˜“åœ°è¨­å®šå¤šå€‹ CouchDB instances ä¾†é”åˆ° HA çš„ç›®çš„ï¼Œç¢ºä¿æœå‹™ä¸æœƒå› ç‚ºä¼ºæœå™¨æ›æ‰è€Œç„¡æ³•å­˜å–ã€‚ è€Œæœ¬ç¯‡å°±æ˜¯åœ¨è¨˜éŒ„å¦‚ä½•é€é Docker Swarm ä¾†ä½ˆç½²è·¨æ©Ÿå™¨çš„ä¸‰å€‹ CouchDB ä¸¦ä¸”å°‡ä¹‹è¨­å®šç‚º cluster mode. Prerequisitesåœ¨é–‹å§‹ä¹‹å‰ï¼Œç”±æ–¼æˆ‘æ˜¯æ‰“ç®—è¦ç”¨ docker swarm åšè·¨æ©Ÿä½ˆç½²ï¼Œæ‰€ä»¥é¦–å…ˆè¦å…ˆæº–å‚™å¥½ç’°å¢ƒï¼š ä¸‰å°æœ‰ä¸åŒ Public IP çš„ Linux server ä¸‰å°éƒ½è£å¥½ docker ä¸‰å°æ©Ÿå™¨éƒ½è¨­ç‚º docker swarm mode å¦‚ä½•å°‡ docker è¨­å®šæˆ swarm mode å¯ä»¥åƒè€ƒæ–‡ä»¶ï¼ŒåŸºæœ¬ä¸Šå°±åªè¦ï¼š 12345# init swarm$ docker swarm init# add into existing swarm$ docker swarm join --token &lt;token&gt; è¨­å®šå¥½ä¹‹å¾Œå¯ä»¥ç”¨ docker node ls ç¢ºèªä¸€ä¸‹ï¼Œçµæœæœƒé¡ä¼¼å¦‚ä¸‹ï¼š 12345$ docker node lsID HOSTNAME STATUS AVAILABILITY MANAGER STATUS ENGINE VERSION2v2lb55cyes0rf3tbtqe2zp9x * docker-node-1 Ready Active Reachable 19.03.132gedpa6dac3c80ilr3f9ji3fw docker-node-2 Ready Active Leader 19.03.137zj2xk3up7ce34atj2nme9rf9 docker-node-3 Ready Active Reachable 19.03.13 Setup CouchDB as Single Nodeæˆ‘å€‘è¦ä½¿ç”¨çš„æœƒæ˜¯å®˜æ–¹çš„ docker image â€” couchdb:3.1.1 è¦ä½¿ç”¨å…¶å¯¦ä¸é›£ï¼Œé€™é‚Šå¯ä»¥ç¤ºç¯„ä¸€ä¸‹åœ¨æœ¬æ©Ÿä½ˆç½² single node çš„æ–¹å¼ï¼Œdocker-compose.yml 123456789101112131415version: &quot;3.8&quot; services: couchdb: environment: COUCHDB_USER: &quot;admin&quot; COUCHDB_PASSWORD: &quot;admin123&quot; COUCHDB_SECRET: 46d689495ca02e8c35c3a3f683000ef1 NODENAME: &quot;couchdb01&quot; ERL_FLAGS: &quot;-setcookie a20b37d83ef18efce400b3ace400036e&quot; image: couchdb:3.1.1 ports: - &quot;5984:5984&quot; - &quot;9100:9100&quot; - &quot;4369:4369&quot; å¯ä»¥é€é docker compose ä¾†å˜—è©¦åŸ·è¡Œé€™å€‹æª”æ¡ˆï¼š 12345$ docker-compose up -d$ docker-compose psName Command State Ports -----------------------------------------------------------------------------------------------------------------------------------couchdb_couchdb_1 tini -- /docker-entrypoint ... Up 0.0.0.0:4369-&gt;4369/tcp, 0.0.0.0:5984-&gt;5984/tcp, 0.0.0.0:9100-&gt;9100/tcp ç„¶å¾Œå°±å¯ä»¥è¨ªå• CouchDB å…§å»ºçš„ç®¡ç†ä»‹é¢: http://&lt;IP&gt;:5984/_utils/ï¼Œæ¥ä¸‹ä¾†åˆ° setup é é¢ä¾ç…§æŒ‡ç¤ºè¨­å®š single nodeï¼Œå³å¯ã€‚ å» Verify ä»‹é¢æ¸¬è©¦æ˜¯å¦å®Œæˆå®‰è£ã€‚ è‡³æ­¤å°±å®Œæˆ Single Node CouchDB çš„å®‰è£ï¼Œå¯å–œå¯è³€ã€‚ Deploy as CouchDB Cluster Modeå‰›å‰›å˜—è©¦äº†ä¸€éµä½ˆç½² single node çš„ CouchDBï¼Œé‚£æ¥ä¸‹ä¾†å°±ä¾†å˜—è©¦ä¸»è§’å§ â€” Cluster Mode CouchDB çš„ cluster mode è¨­å®šæ¯”èµ· single node ä¾†çš„è¤‡é›œéå¸¸å¤šï¼Œè€Œä¸”å­˜åœ¨è¨±å¤šå‘ (éƒ½ä¸æœƒæœ‰ error log çš„å‘)ï¼Œæˆ‘é€™é‚Šå°±æ˜¯ç´€éŒ„æˆ‘æ‘¸ç´¢ç„¡æ•¸å¤œæ™šå¾—å‡ºçš„çµæœğŸ˜µ é¦–å…ˆæˆ‘å…ˆåˆ—å‡ºè¦è¨­å®š cluster mode å¿…é ˆè¦æ»¿è¶³çš„æ¢ä»¶ï¼š æ¯å€‹ CouchDB å¿…é ˆè¦æœ‰ä¸€æ¨£çš„ admin &amp; password &amp; secret &amp; erl cookieï¼Œé€™å°æ‡‰åˆ° docker image çš„ COUCHDB_USER, COUCHDB_PASSWORD, COUCHDB_SECRET, ERL_FLAGS æ¯å€‹ CouchDB å¿…é ˆè¦å¯ä»¥é€é NODENAME ä¾†äº’ç›¸æºé€š æ¯å€‹ CouchDB å¿…é ˆè¦æœ‰åŒæ¨£çš„ uuid Prepare config.iniç‚ºäº†è¦ä¿è­‰å¤§å®¶çš„ Config ä¸€è‡´ï¼Œé€™é‚Šæˆ‘è¦ç”¨äº‹å…ˆæº–å‚™å¥½çš„ config.iniï¼Œè€Œéé€é yml çš„ environment å‚³åƒæ•¸ï¼Œé€™å€‹æ–¹æ³•ä¹Ÿæ˜¯å®˜æ–¹å»ºè­°çš„æ–¹æ³•[1]: The best way to provide configuration to the %%REPO%% image is to provide a custom ini file to CouchDB, preferably stored in the /opt/couchdb/etc/local.d/ directory. There are many ways to provide this file to the container (via short Dockerfile with FROM + COPY, via Docker Configs, via runtime bind-mount, etc), the details of which are left as an exercise for the reader. é‚£æ¥ä¸‹ä¾†å°±ä¾†æº–å‚™ config.iniï¼š 12345678[admins]admin = -pbkdf2-07fe7c8d94281cafdfa065c0f9dd9b6fae56b649,8a3bfe04b1f4294d89d9e9d250fce77a,10[couch_httpd_auth]secret = 46d689495ca02e8c35c3a3f683000ef1[couchdb]uuid = 7ff6dd245116a7288b798b003f00099e é€™é‚Šå°±æœ‰ä¸€å€‹å‘ï¼Œå°±æ˜¯ admin çš„ password å¿…é ˆè¦æ˜¯ hash ç‰ˆæœ¬çš„ï¼Œå¦‚æœé€™é‚Šæ˜¯ plain text çš„è©±ï¼Œåœ¨å•Ÿå‹•æ™‚ CouchDB æœƒè‡ªå‹•åš hashï¼Œç„¶å¾Œå°±æœƒå°è‡´ä¸‰å° CouchDB çš„ password ä¸ä¸€è‡´ (åŒæ¨£çš„å¯†ç¢¼ hash çš„çµæœæœƒä¸ä¸€æ¨£ï¼Œç›¸é—œæ–‡ç« ï¼š Timing Attack in String Compare )ï¼›å¯†ç¢¼ä¸ä¸€è‡´å°±æœƒå‡ºç¾ unable to sync admin passwords éŒ¯èª¤ã€‚ é‚£é—œæ–¼è¦å¦‚ä½•ç²å– hash éçš„å¯†ç¢¼ï¼Œå®˜æ–¹æ˜¯æ¨è–¦é€éå»ºç«‹ä¸€å€‹ dummy çš„ single nodeï¼Œç„¶å¾Œå»çœ‹ä»– hash å‡ºä¾†çš„å¯†ç¢¼é•·æ€æ¨£ï¼Œå† copy éä¾† (å¥½è ¢â€¦) é€™é‚Šæä¾›å¦ä¸€å€‹æ–¹æ³•ï¼Œå¦‚é€™ç¯‡æ–‡ç« [2]æ‰€èªªï¼Œå¯ä»¥é€é python script ç”¢ç”Ÿ hashed passwordï¼š 123$ PASS=&quot;admin123&quot; SALT=&quot;8a3bfe04b1f4294d89d9e9d250fce77a&quot; ITER=10 \\ python3 -c &quot;import os,hashlib; print(&#x27;-pbkdf2-%s,%s,%s&#x27; % (hashlib.pbkdf2_hmac(&#x27;sha1&#x27;,os.environ[&#x27;PASS&#x27;].encode(),os.environ[&#x27;SALT&#x27;].encode(),int(os.environ[&#x27;ITER&#x27;].encode())).hex(), os.environ[&#x27;SALT&#x27;], os.environ[&#x27;ITER&#x27;]))&quot;-pbkdf2-07fe7c8d94281cafdfa065c0f9dd9b6fae56b649,8a3bfe04b1f4294d89d9e9d250fce77a,10 Using same config across nodeså®˜æ–¹èªªäº†ä¸‰ç¨®æ–¹å¼æä¾› ini æª”ï¼š via Dockerfile COPY â€” é€™å¤ªè ¢äº†ï¼Œæ¯æ¬¡æ”¹ config éƒ½è¦é‡æ–° build via Docker Config â€” ok ğŸ‘ via runtime mount â€” åœ¨ docker swarm æ¯”è¼ƒä¸é©åˆï¼Œå› ç‚ºä¸æ˜¯æ‰€æœ‰ node éƒ½èƒ½å¤  mount æ‰€ä»¥å…¶å¯¦åªå‰©ä¸‹ Docker Config è¼ƒé©ç•¶ã€‚ docker config è¨­å®šæ–¹å¼å¦‚ä¸‹ï¼Œ 12345678910services: couchdb: # ...skip configs: - source: couchdb_conf target: /opt/couchdb/etc/local.d/config.ini configs: couchdb_conf: file: ./config.ini æˆ‘å€‘å°‡äº‹å…ˆæº–å‚™å¥½çš„ config.ini é€é docker config æ›è¼‰è‡³æ‰€æœ‰ CouchDB çš„ local.d è³‡æ–™å¤¾ã€‚ é€™è£¡æœ‰å¦ä¸€å€‹å‘ï¼Œæœ‰å¯èƒ½æœƒå‡ºç¾ CrashLoopBackOff çš„ç‹€æ³ï¼Œæˆ‘å˜—è©¦ç™¼ç¾æ ¹æœ¬æ²’è¾¦æ³•æ›è¼‰åˆ° /opt/couchdb/ åº•ä¸‹çš„ä»»ä½•ç›®éŒ„ï¼Œå¤§æ¦‚æ˜¯ bug å§ï¼Œé€™é‚Šæœ‰ç›¸é—œ GitHub issue[3]ã€‚ ç‚ºäº†ç¹éé€™å€‹ä¸èƒ½ mount çš„å•é¡Œï¼Œå¿…é ˆè¦è¦†å¯« entrypointï¼Œå…ˆæŠŠ config file copy åˆ°é©ç•¶çš„ä½ç½®å†åŸ·è¡ŒåŸæœ¬çš„ entrypointï¼Œæ‰€ä»¥æœƒæ”¹æˆé€™æ¨£ï¼š 12345678910services: couchdb: # ...skip entrypoint: /bin/bash -c &quot;cp -f /couchdb_conf /opt/couchdb/etc/local.d/couch.ini &amp;&amp; tini -- /docker-entrypoint.sh /opt/couchdb/bin/couchdb&quot; configs: - couchdb_conf configs: couchdb_conf: file: ./config.ini é€™æ¨£æ”¹æ„æ€æ˜¯å…ˆæŠŠ config æ›è¼‰è‡³åˆ¥çš„åœ°æ–¹ï¼Œç„¶å¾Œåœ¨åŸ·è¡Œ entrypoint æ™‚å…ˆ copy è‡³æ­£ç¢ºä½ç½®ä¹‹å¾Œå†åŸ·è¡ŒåŸæœ¬çš„æŒ‡ä»¤ã€‚ Join All CouchDB Instances as a Clusterè‡³æ­¤æˆ‘å€‘å·²ç¶“å¯ä»¥æ’°å¯«å‡ºå®Œæ•´çš„ docker-swarm.yml 1234567891011121314151617181920212223242526272829version: &quot;3.8&quot; services: couchdb: environment: NODENAME: &quot;&#123;&#123;.Service.Name&#125;&#125;.&#123;&#123;.Task.Slot&#125;&#125;.&#123;&#123;.Task.ID&#125;&#125;&quot; ERL_FLAGS: &quot;-setcookie a20b37d83ef18efce400b3ace400036e&quot; image: couchdb:3.1.1 deploy: mode: global networks: network: aliases: - couchdb ports: - &quot;5984:5984&quot; - &quot;9100:9100&quot; - &quot;4369:4369&quot; entrypoint: /bin/bash -c &quot;cp -f /couchdb_conf /opt/couchdb/etc/local.d/couch.ini &amp;&amp; tini -- /docker-entrypoint.sh /opt/couchdb/bin/couchdb&quot; configs: - source: couchdb_conf target: /opt/couchdb/etc/local.d/config.ini networks: network: configs: couchdb_conf: file: ./couchdb-conf.ini é€™é‚Šæˆ‘ç”¨ global mode æ˜¯å› ç‚ºæˆ‘å¸Œæœ›æ¯ä¸€å°æ©Ÿå™¨æ°å¥½åªæœ‰ä¸€å€‹ CouchDBã€‚(ä¸Šé¢çš„ yml æˆ‘ä¹Ÿæ²’æœ‰æ› volume æ‰€ä»¥è³‡æ–™æœƒåœ¨ container ä¸è¦‹æ™‚ä¸€èµ·æ¶ˆå¤±)ã€‚ NODENAME: \"{{.Service.Name}}.{{.Task.Slot}}.{{.Task.ID}}\" å‰‡æ˜¯å› ç‚ºé€é docker swarm ä½ˆç½²æ™‚ï¼Œä»–çš„å‘½åè¦å‰‡å°±æ˜¯é•·é€™æ¨£ï¼Œåœ¨ docker è£¡é¢æ˜¯å¯ä»¥é€éé€™å€‹ nodename ping åˆ°åˆ¥å°çš„ã€‚è¦æŸ¥è©¢ docker container name çš„è©±åªè¦ docker ps å°±å¯ä»¥çœ‹åˆ°ã€‚ æ¥ä¸‹ä¾†å°±ç›´æ¥ä½ˆç½²ï¼š 123456$ docker stack deploy -c docker-swarm.yaml test$ docker stack ps test ID NAME IMAGE NODE DESIRED STATE CURRENT STATE ynacuaj8tx35 test_couchdb.7zj2xk3up7ce34atj2nme9rf9 couchdb:3.1.1 docker-node-3 Running Running 25 seconds ago5p5w38jtjh7z test_couchdb.2v2lb55cyes0rf3tbtqe2zp9x couchdb:3.1.1 docker-node-1 Running Running 25 seconds agobekjdetq739z test_couchdb.2gedpa6dac3c80ilr3f9ji3fw couchdb:3.1.1 docker-node-2 Running Running 26 seconds ago æ¯å€‹ node éƒ½èµ·ä¾†ä¹‹å¾Œå°±å¯ä»¥å»åšæœ€å¾Œçš„è¨­å®šï¼ŒCouchDB è¨­å®š Cluster çš„æ–¹å¼æ˜¯é€é admin http api å»æŠŠå…¶ä»– CouchDB åŠ é€²æŸå°ã€‚ 12345678$ curl -X PUT &quot;http://admin:admin123@&lt;IP&gt;:5984/_node/_local/_nodes/couchdb@test_couchdb.2v2lb55cyes0rf3tbtqe2zp9x.strqjl8lsdm58tozn59mp8du7&quot; -d &#123;&#125;&#123;&quot;ok&quot;:true,&quot;id&quot;:&quot;couchdb@test_couchdb.2v2lb55cyes0rf3tbtqe2zp9x.strqjl8lsdm58tozn59mp8du7&quot;,&quot;rev&quot;:&quot;1-967a00dff5e02add41819138abb3284d&quot;&#125;$ curl -X PUT &quot;http://admin:admin123@&lt;IP&gt;:5984/_node/_local/_nodes/couchdb@test_couchdb.7zj2xk3up7ce34atj2nme9rf9.u5ce5bl7cmjlhkb2781cye7py&quot; -d &#123;&#125;&#123;&quot;ok&quot;:true,&quot;id&quot;:&quot;couchdb@test_couchdb.7zj2xk3up7ce34atj2nme9rf9.u5ce5bl7cmjlhkb2781cye7py&quot;,&quot;rev&quot;:&quot;1-967a00dff5e02add41819138abb3284d&quot;&#125;$ curl -X POST -H &quot;Content-Type: application/json&quot; &quot;http://admin:admin123@&lt;IP&gt;:5984/_cluster_setup&quot; -d &#x27;&#123;&quot;action&quot;: &quot;finish_cluster&quot;&#125;&#x27;&#123;&quot;ok&quot;:true&#125; éƒ½åŠ å¥½ä¹‹å¾Œï¼Œå¯ä»¥é€é /_membership æª¢æŸ¥æ˜¯å¦æ­£ç¢ºï¼š 12345678910111213$ curl &quot;http://admin:admin123@&lt;IP&gt;:5984/_membership&quot;&#123; &quot;all_nodes&quot;: [ &quot;couchdb@test_couchdb.2gedpa6dac3c80ilr3f9ji3fw.irqxr1k8e9v8xekae1xtuxxab&quot;, &quot;couchdb@test_couchdb.2v2lb55cyes0rf3tbtqe2zp9x.strqjl8lsdm58tozn59mp8du7&quot;, &quot;couchdb@test_couchdb.7zj2xk3up7ce34atj2nme9rf9.u5ce5bl7cmjlhkb2781cye7py&quot; ], &quot;cluster_nodes&quot;: [ &quot;couchdb@test_couchdb.2gedpa6dac3c80ilr3f9ji3fw.irqxr1k8e9v8xekae1xtuxxab&quot;, &quot;couchdb@test_couchdb.2v2lb55cyes0rf3tbtqe2zp9x.strqjl8lsdm58tozn59mp8du7&quot;, &quot;couchdb@test_couchdb.7zj2xk3up7ce34atj2nme9rf9.u5ce5bl7cmjlhkb2781cye7py&quot; ]&#125; é€™æ¨£å°±è¨­å®šå®Œæˆå•¦ğŸ‰ (è¨˜å¾—å†å»ç®¡ç†ä»‹é¢ verifyinstall æª¢æŸ¥ä¸€æ¬¡) Test High Availabilityè¨­å®šå¥½ cluster ä¹‹å¾Œå°±è¦ä¾†é©—è­‰ HA æ˜¯å¦æ­£å¸¸ï¼Œé€™é‚Šæ¸¬è©¦çš„æ–¹æ³•æœƒæ˜¯å…ˆåœ¨æŸå° CouchDB æ–°å¢è³‡æ–™ï¼Œç†è«–ä¸Šå…¶ä»–å°ä¹Ÿæœƒå¯ä»¥å­˜å–é€™ç­†è³‡æ–™ï¼š å…ˆå»ºç«‹ä¸€å€‹æ–° database ä»¥åŠä¸€å€‹æ–° documentï¼š 12345$ curl -X PUT &quot;http://admin:admin123@&lt;server01&gt;:5984/mydatabase&quot; &#123;&quot;ok&quot;:true&#125;$ curl -X PUT &quot;http://admin:admin123@&lt;server01&gt;:5984/mydatabase/01&quot; -d &#x27;&#123;&quot;key&quot;: &quot;val&quot;&#125;&#x27; &#123;&quot;ok&quot;:true,&quot;id&quot;:&quot;01&quot;,&quot;rev&quot;:&quot;1-00e36163fac5c61bb681fef0c52528e2&quot;&#125; æ¥ä¸‹ä¾†é€™å€‹ document æœƒè‡ªå‹• replicated åˆ°å…¶ä»–å…©å° CouchDBï¼Œå¯ä»¥é€éåˆ†åˆ¥ curl æ¯ä¸€å°ä¾†é©—è­‰æ˜¯å¦æœ‰ä¸€æ¨£çš„ documentï¼š 12345678$ curl &quot;http://admin:admin123@&lt;server01&gt;:5984/mydatabase/01&quot; &#123;&quot;_id&quot;:&quot;01&quot;,&quot;_rev&quot;:&quot;1-00e36163fac5c61bb681fef0c52528e2&quot;,&quot;key&quot;:&quot;val&quot;&#125;$ curl &quot;http://admin:admin123@&lt;server02&gt;:5984/mydatabase/01&quot;&#123;&quot;_id&quot;:&quot;01&quot;,&quot;_rev&quot;:&quot;1-00e36163fac5c61bb681fef0c52528e2&quot;,&quot;key&quot;:&quot;val&quot;&#125;$ curl &quot;http://admin:admin123@&lt;server03&gt;:5984/mydatabase/01&quot;&#123;&quot;_id&quot;:&quot;01&quot;,&quot;_rev&quot;:&quot;1-00e36163fac5c61bb681fef0c52528e2&quot;,&quot;key&quot;:&quot;val&quot;&#125; é€™æ¨£å³ä½¿ä»»æ„æ©Ÿå™¨æ›æ‰ï¼Œæ•´å€‹ç³»çµ±éƒ½é‚„æ˜¯å¯ä»¥ç¶­æŒé‹ä½œã€‚ (å¯¦å‹™ä¸Šå†å»ç–Šä¸€å±¤ Load Balancer è®“ Http endpoint çµ±ä¸€æœƒæ›´æ–¹ä¾¿) Conclusionè¨­å®š single node å¾ˆç°¡å–®ï¼Œä½†è¨­å®š cluster mode é —è¤‡é›œï¼Œæˆ‘å€‹äººè¦ºå¾— error log æ²’æœ‰éå¸¸å®Œæ•´ï¼Œå¾ˆå¤šå„å¼å„æ¨£çš„å‘éƒ½æœƒç›´æ¥æ­»æ‰æ ¹æœ¬ä¸æœƒæœ‰ä»»ä½• logï¼Œå¾ˆå´©æ½°â€¦ğŸ˜±ã€‚ References Configuring CouchDB How to generate password hash for CouchDB administrator Configuration from docker config or secret? #73 h1+ol { list-style-type: none; counter-reset: list-counter; padding-left: 0; } h1+ol li { position: relative; padding-left: 3em; } h1+ol li::before { counter-increment: list-counter; content: \"[\" counter(list-counter) \"] \"; position: absolute; left: 0; width: 25px; text-align: right; }","categories":[],"tags":[{"name":"unix","slug":"unix","permalink":"https://ssarcandy.tw/tags/unix/"},{"name":"docker","slug":"docker","permalink":"https://ssarcandy.tw/tags/docker/"}]},{"title":"ç”¨æ‰‹æ©Ÿæ‹æ”æ—¥é£Ÿåˆ°åº•å¯ä¸å¯è¡Œ","slug":"Photographing-Solar-Eclipse-with-only-a-Smartphone","date":"2020-06-28T10:01:05.000Z","updated":"2025-10-22T00:51:26.604Z","comments":true,"path":"2020/06/28/Photographing-Solar-Eclipse-with-only-a-Smartphone/","link":"","permalink":"https://ssarcandy.tw/2020/06/28/Photographing-Solar-Eclipse-with-only-a-Smartphone/","excerpt":"é€™æ¬¡å…­æœˆäºŒåä¸€æ—¥å°ç£æ­£å¥½æœ‰æ©Ÿæœƒè§€æ¸¬åˆ°é›£å¾—ä¸€è¦‹çš„æ—¥ç’°é£Ÿï¼Œæˆ‘ç•¶ç„¶ä¹Ÿæ˜¯å¿…ä¸ç¼ºå¸­ï¼Œç›´æ¥è·‘å»å˜‰ç¾©çš„é¦™æ¹–å…¬åœ’é¤èˆ‡é€™æ¬¡ç››æœƒã€‚é›–ç„¶æˆ‘ä¸€ç›´åœ¨è…¦ä¸­è¦åŠƒé€™æ¬¡è©²å¦‚ä½•è§€æ¸¬ï¼Œä½†å¯¦éš›è¦æ¡è³¼æ™‚é‚„æ˜¯å¤ªæ™šæ ¹æœ¬è²·ä¸åˆ°å·´å¾·è†œï¼Œæœ€å¾Œåªè²·åˆ°åå€‹æ—¥é£Ÿè§€æ¸¬çœ¼é¡â€¦.æ…˜â€¦ è€Œé€™éº¼å°çš„æ—¥é£Ÿè§€æ¸¬çœ¼é¡ä¹Ÿä¸å¤ªå®¹æ˜“ç›´æ¥å¥—åœ¨å–®çœ¼ç›¸æ©Ÿé¡é ­å‰ï¼Œæ‰€ä»¥æˆ‘æœ€å¾Œå°±ç´¢æ€§æ±ºå®šé€™æ¬¡åªä½¿ç”¨æˆ‘çš„æ‰‹æ©Ÿæ‹æ”ï¼Œé †ä¾¿ä¾†å¯¦æ¸¬çœ‹çœ‹ç”¨æ‰‹æ©Ÿæ‹æ”æ—¥é£Ÿåˆ°åº•å¯ä¸å¯è¡Œï¼Ÿ æ—¥ç’°é£Ÿæ™‚é–“åºåˆ—ï¼Œä¸‹æ’å·¦ä¸€ç®—æ˜¯æœ‰æ‹åˆ°è²é‡Œç ã€‚å™¨æï¼šGoogle Pixel 4 + å¤ªé™½æ¿¾é¡","text":"é€™æ¬¡å…­æœˆäºŒåä¸€æ—¥å°ç£æ­£å¥½æœ‰æ©Ÿæœƒè§€æ¸¬åˆ°é›£å¾—ä¸€è¦‹çš„æ—¥ç’°é£Ÿï¼Œæˆ‘ç•¶ç„¶ä¹Ÿæ˜¯å¿…ä¸ç¼ºå¸­ï¼Œç›´æ¥è·‘å»å˜‰ç¾©çš„é¦™æ¹–å…¬åœ’é¤èˆ‡é€™æ¬¡ç››æœƒã€‚é›–ç„¶æˆ‘ä¸€ç›´åœ¨è…¦ä¸­è¦åŠƒé€™æ¬¡è©²å¦‚ä½•è§€æ¸¬ï¼Œä½†å¯¦éš›è¦æ¡è³¼æ™‚é‚„æ˜¯å¤ªæ™šæ ¹æœ¬è²·ä¸åˆ°å·´å¾·è†œï¼Œæœ€å¾Œåªè²·åˆ°åå€‹æ—¥é£Ÿè§€æ¸¬çœ¼é¡â€¦.æ…˜â€¦ è€Œé€™éº¼å°çš„æ—¥é£Ÿè§€æ¸¬çœ¼é¡ä¹Ÿä¸å¤ªå®¹æ˜“ç›´æ¥å¥—åœ¨å–®çœ¼ç›¸æ©Ÿé¡é ­å‰ï¼Œæ‰€ä»¥æˆ‘æœ€å¾Œå°±ç´¢æ€§æ±ºå®šé€™æ¬¡åªä½¿ç”¨æˆ‘çš„æ‰‹æ©Ÿæ‹æ”ï¼Œé †ä¾¿ä¾†å¯¦æ¸¬çœ‹çœ‹ç”¨æ‰‹æ©Ÿæ‹æ”æ—¥é£Ÿåˆ°åº•å¯ä¸å¯è¡Œï¼Ÿ æ—¥ç’°é£Ÿæ™‚é–“åºåˆ—ï¼Œä¸‹æ’å·¦ä¸€ç®—æ˜¯æœ‰æ‹åˆ°è²é‡Œç ã€‚å™¨æï¼šGoogle Pixel 4 + å¤ªé™½æ¿¾é¡ ä¸€ç›´ä»¥ä¾†å¤©æ–‡æ”å½±éƒ½æ˜¯ä»¶æ˜‚è²´çš„èˆˆè¶£ï¼Œæˆ‘å€‹äººå…¶å¯¦é™¤äº†ä»¥å‰åœ¨å¤©æ–‡ç¤¾èƒ½å¤ æ¥è§¸åˆ°å²å®³çš„å™¨æä¹‹å¤–ï¼Œç•¢æ¥­ä¹‹å¾Œå…¶å¯¦è‡ªå·±ä¹Ÿæ²’æœ‰è‡ªè¡Œè³¼è²·å–®çœ¼æˆ–æœ›é é¡çš„è£å‚™ï¼Œç°¡å–®ä¾†èªªæˆ‘å™¨æéƒ½æ˜¯è¹­é£¯å€Ÿä¾†çš„â€¦ğŸ¤£ æ‰‹æ©Ÿé¡é ­è·Ÿå–®çœ¼é¡é ­å…¶å¯¦æœ€å¤§çš„å·®åˆ¥å°±æ˜¯é¡é ­å¤§å°ï¼Œé€™ç›´æ¥å½±éŸ¿äº†å¤©é«”çš„é€²å…‰äº®ï¼Œç•¶ç„¶ä¹Ÿç›´æ¥å½±éŸ¿è¨Šèºæ¯”ï¼Œé€™å€‹å·®åˆ¥åœ¨ä¸€èˆ¬çš„å¤©é«”æ”å½±æˆ–æ˜Ÿé‡æ”å½±éƒ½æ˜¯æ‰‹æ©Ÿé¡é ­å·¨å¤§çš„å¼±å‹¢ï¼Œä½†æ—¥é£Ÿå‰‡æ˜¯ä¾‹å¤–ï¼Œæˆ‘å€‘æ°¸é ä¸æœƒæ“”å¿ƒæ‹æ”å¤ªé™½çš„é€²å…‰äº®ä¸è¶³ï¼Œåªæ“”å¿ƒé€²å…‰äº®å¤ªè¶³ç‡’äº†æˆ‘çš„é¡é ­ğŸ”¥ã€‚ é›–ç„¶æ‰‹æ©Ÿé¡é ­å°å°æ‹æ”æ—¥é£Ÿå½±éŸ¿ä¸å¤§ï¼Œä½†è¦ç”¨æ‰‹æ©Ÿæ‹æ”å¤ªé™½é‚„æ˜¯å¿…é ˆè§£æ±ºè¨±å¤šå•é¡Œï¼Œæ¯”å¦‚èªªï¼š æ¸›å…‰ã€‚é¡é ­é›–å°ï¼Œå¤ªé™½é‚„æ˜¯æœ‰å¯èƒ½ç‡’å£æ‰‹æ©Ÿé¡é ­ã€‚ æ‰‹å‹•æ§åˆ¶æ‹ç…§åƒæ•¸ã€‚æ‰‹æ©Ÿè»Ÿé«”ä¸è¦‹å¾—æœƒæä¾›å°æ‰‹å‹•å°ç„¦åŠŸèƒ½ã€‚ é•·ç„¦æ”å½±ã€‚ä¸€èˆ¬æ‰‹æ©Ÿæ‹æ”è¦–è§’éƒ½åå»£ï¼Œå¦‚ä½•æ‹æ”æ¸…æ¥šçš„å¤ªé™½æ˜¯ä¹Ÿæ˜¯ä¸€å€‹å•é¡Œã€‚ é—œæ–¼é€™å¹¾å€‹å•é¡Œï¼Œæˆ‘å°±åˆ†äº«æˆ‘è‡ªå·±çš„åšæ³•ï¼š æ¸›å…‰å¤ªé™½æ˜¯å€‹ä¸–ç•Œäº®çš„æ±è¥¿ï¼Œä¸æ¸›å…‰è‚¯å®šä»€éº¼é¬¼éƒ½æ‹ä¸åˆ°ã€‚æœ€ç°¡å–®çš„æ¸›å…‰æ–¹å¼å°±æ˜¯æŠŠè·¯ä¸Šæœƒç™¼çš„æ—¥é£Ÿè§€æ¸¬çœ¼é¡å‰ªä¸‹ä¾†è²¼åœ¨æ‰‹æ©Ÿé¡é ­å‰é¢ï¼Œå°±å¯ä»¥äº†~ğŸ‰æˆ‘æ˜¯è²¼åœ¨æ‰‹æ©Ÿæ®¼ä¸Šé¢ï¼Œé€™æ¨£ä¹Ÿæ–¹ä¾¿æ‹†å¸ã€‚ åšå·¥å¾ˆé†œçš„æ¸›å…‰ç‰‡ã€‚ æ¸›å…‰å‰ã€‚ æ¸›å…‰å¾Œï¼Œå¤ªé™½è¶…å°ã€‚ æ‰‹å‹•æ§åˆ¶æ‹ç…§åƒæ•¸æ‰‹æ©Ÿç›¸æ©Ÿè»Ÿé«”é€šå¸¸éƒ½æ²’æœ‰æä¾›æ‰‹å‹•æ§åˆ¶å¿«é–€æ™‚é–“ã€å°ç„¦ã€ISO æˆ–å…¶ä»–åƒæ•¸ï¼Œé€™éƒ¨åˆ†ä¹Ÿæ˜¯æˆ‘ç„¡æ³•è§£æ±ºçš„éƒ¨åˆ†ï¼Œæˆ‘çš„ç›¸æ©Ÿæ˜¯ä¸æä¾›æ‰‹å‹•å°ç„¦çš„ï¼Œæ‰€ä»¥æˆ‘åªèƒ½æƒ³è¾¦æ³•æ”¾å¤§ä¸€é»ï¼Œç„¶å¾Œè·Ÿæ™ºéšœä¸€æ¨£ä¸€ç›´ç‹‚æŒ‰å¤ªé™½ç¥ˆç¦±ä»–æœƒå¿ƒè¡€ä¾†æ½®å°åˆ°ç„¦â€¦ã€‚æˆ‘å¤§æ¦‚æ‹æ”äº† 400 ä¾†å¼µï¼ŒçœŸçš„å¤ æ¸…æ™°çš„ä¸åˆ° 100 å¼µï¼Œæ…˜æ…˜æ…˜ã€‚ å¦å¤–å‡è¨­æ‰‹æ©Ÿæœ‰æ”¯æ´å„²å­˜ RAW æª”çš„è©±ä¸€å®šè¦å­˜ RAW æª”ï¼RAW æª”å¯ä»¥ä¿ç•™ç…§ç‰‡æ›´å¤šè³‡è¨ŠåŠç´°ç¯€ï¼Œåœ¨å¾Œé¢è¦åšå½±åƒçš„ç´°éƒ¨èª¿æ•´æˆ–æ‹‰æ›²ç·šç­‰ç­‰éƒ½è¼ƒä¸æ˜“å¤±çœŸã€‚ é•·ç„¦æ”å½±å¤ªé™½å…¶å¯¦åªæœ‰åŠåº¦çš„è¦–è§’ï¼Œä¸æ”¾å¤§æ ¹æœ¬åªå ç…§ç‰‡ä¸­å°å°ä¸€é¡†çš„ï¼Œå¦‚ä¸Šåœ–å³ä¸€ã€‚è¦é€éæ‰‹æ©Ÿæé«˜æœ‰æ•ˆç„¦é•·ï¼Œä¸€æ˜¯å¯ä»¥è³¼è²·é¡å¤–æ‰‹æ©Ÿæœ›é é…ä»¶ (æ„Ÿè¦ºé…ä»¶åº—ä¸å°‘é¡ä¼¼çš„ï¼Œä½†å“è³ªæœªçŸ¥ã€‚)ï¼›äºŒæ˜¯ç›®å‰ä¸å°‘æ‰‹æ©Ÿæœ‰é•·ç„¦é¡å¯ä»¥åšåˆ°å…‰å­¸æˆ–æ•¸ä½è®Šç„¦ (åƒæ˜¯ iPhone å¯ä»¥ 2x å…‰å­¸è®Šç„¦) ä¹Ÿæ˜¯å¯ä»¥æ¹Šåˆè‘—ç”¨ã€‚è€Œæˆ‘æ˜¯ç›´æ¥ç”¨ Pixel 4 æ•¸ä½è®Šç„¦åˆ°å…«å€ï¼Œé †ä¾¿æ¸¬æ¸¬ä»–å®£ç¨±çš„ super res zoom æ•ˆæœã€‚ æ”¾å¤§å¾Œæ•ˆæœé‚„ä¸éŒ¯ï¼Œè€Œä¸”ä¹Ÿæ¯”è¼ƒå¥½å°ç„¦ã€‚ å…¶ä»–çªç™¼ç‹€æ³å‰›å‰›ä¸Šé¢æåˆ°çš„å¹¾é»éƒ½æ˜¯å¯ä»¥é æƒ³åˆ°ä¸¦ä¸”å…ˆé ç·´éï¼Œä½†çœŸçš„ä¸Šå ´æ™‚é‚„æ˜¯é‡åˆ°å…¶ä»–çªç™¼ç‹€æ³ï¼Œåƒæ˜¯æˆ‘é–‹æ‹ä¸åˆ°åŠå°æ™‚æ‰‹æ©Ÿå°±ç›´æ¥ç†±åˆ°ç•¶æ©Ÿï¼Œç„¶å¾Œç›´æ¥é—œæ©Ÿæ°æ°â€¦.ã€‚åªå¥½è¶•ç·Šåœ¨æ—å°æ‰‹æ©Ÿæ§é¢¨å¹æ°£å¾…å®ƒé™æº«å†å¼·è¡Œé–‹æ©Ÿï¼Œæ—é‚Šçš„äººä¸€å®šè¦ºå¾—æˆ‘æ˜¯æ€ªäººğŸ˜‚ ç†±åˆ°ç•¶æ©Ÿé€™ç‹€æ³ç›´åˆ°é£Ÿåˆ†å¤ å¤§æ™‚ï¼Œæ°£æº«æ˜é¡¯ä¸‹é™å¾Œå°±æ”¹å–„è¨±å¤šå“ˆå“ˆã€‚ å°çµå°±æˆ‘é€™æ¬¡çš„æ‹æ”çµæœä¾†èªªï¼Œæˆ‘è¦ºå¾—å…¶å¯¦ç›®å‰çš„æ‰‹æ©Ÿå¾ˆå¤šæ‡‰è©²æœ‰è¾¦æ³•æ‹æ”åˆ°è·Ÿæœ¬ç¯‡åŒç­‰ç¨‹åº¦çš„ç…§ç‰‡ï¼Œé›–ç„¶é›¢å–®çœ¼æˆ–çœŸæ­£å°ˆæ¥­çš„å™¨ææ‰€æ‹å‡ºä¾†çš„é‚„æ˜¯æœ‰å·®è·ï¼Œä½†å°æ–¼ä¸€æ—¥å¤©æ–‡è¿·æˆ–æ²’éŒ¢çš„å¤©æ–‡è¿·ï¼Œå…¶å¯¦ç”¨è‡ªå·±çš„æ‰‹æ©Ÿä¹Ÿæ˜¯æœ‰è¾¦æ³•è¨˜éŒ„ä¸‹é€™äº›ç‰¹æ®Šå¤©è±¡çš„ã€‚æˆ‘å€‹äººè¦ºå¾—æœ€é›£å…‹æœçš„æœƒæ˜¯æ‰‹å‹•å°ç„¦åŠç†±åˆ°ç•¶æ©Ÿçš„å•é¡Œï¼Œé€™å…©è€…èƒ½è§£æ±ºå°±å¯ä»¥å¾ˆè¼•é¬†çš„æ‹æ”äº†ã€‚ æ—¥é£ŸçµæŸå¾Œä¸Š PTT ç™¼ç¾æœ‰é€™ç¯‡æ–‡ [å•å¦] æ‰‹æ©Ÿæ‹å¤ªé™½ï¼ï¼Ÿï¼ï¼Ÿ ï¼Œæœ¬æ–‡æ‡‰è©²ç®—èƒ½å¤ è§£ç­”é€™å•å¦~ æ—¥ç’°é£Ÿè·Ÿåé£Ÿå®Œå…¨æ˜¯ä¸åŒçš„é«”é©—ï¼Œåœ¨é£Ÿæ—¢åˆ°å¾©åœ“ä¹‹é–“ï¼Œå‘¨é­æ°£æº«ã€ç’°å¢ƒå…‰è®ŠåŒ–ååˆ†æ˜é¡¯ï¼Œæ„Ÿè¦ºå°±åƒæ˜¯çªç„¶è®Šé»ƒæ˜é‚£æ¨£æš—ä½†å¤©ç©ºå»æ²’æœ‰é»ƒæ˜çš„æ©˜è‰²ï¼Œå¾ˆé›£å½¢å®¹çš„å…‰ç·šï¼›æº«åº¦ä¹Ÿçªç„¶è®Šæ¶¼çˆ½ã€‚ä¸”æ¹–é¢ä¸Šé–ƒè€€è‘—æš—æš—çš„å…‰(?)ï¼Œæ•´å€‹ä¸–ç•Œéƒ½æ„Ÿè¦ºå¾ˆä¸è‡ªç„¶ã€‚ğŸ¤¯ ç’°é£Ÿé‚£åˆ»å…¨å ´æ­¡å‘¼ï¼Œæˆ‘ä¹Ÿè¦ªçœ¼è¦‹è­‰äº†é‚£ç¥å¥‡çš„ä¸€åˆ»ï¼Œçµ•å°æ¯”æˆ‘ä¹‹å‰çœ‹éçš„ä»»ä½•å¤©è±¡éƒ½ç¥å¥‡ï¼Œä¸æ‰è²»æˆ‘æ›¬çš„ 6 å°æ™‚çš„å¤ªé™½ã€‚","categories":[],"tags":[{"name":"trashtalk","slug":"trashtalk","permalink":"https://ssarcandy.tw/tags/trashtalk/"}]},{"title":"Build a High Performance Computing Cluster on GCP","slug":"Build-a-High-Performance-Computing-Cluster-on-GCP","date":"2020-04-21T19:26:24.000Z","updated":"2025-10-22T00:51:26.604Z","comments":true,"path":"2020/04/21/Build-a-High-Performance-Computing-Cluster-on-GCP/","link":"","permalink":"https://ssarcandy.tw/2020/04/21/Build-a-High-Performance-Computing-Cluster-on-GCP/","excerpt":"æ•å¸é•·ä¹…ä»¥ä¾†éƒ½æ˜¯è‡ªå»º Cluster ä¾†åšç‚ºæ—¥å¸¸é‹ç®—è³‡æºä½¿ç”¨çš„ï¼Œé•·æ™‚é–“ä¸€ç›´éƒ½è¢«æ“´å……æ€§ã€I&#x2F;O æ•ˆèƒ½æ‰€å¡ä½ï¼Œè‹¥æ˜¯å¡åœ¨é‹ç®—è³‡æºä¸å¤ å…‰æ˜¯æ¡è²·æ–°æ©Ÿå™¨å‹•è¼’è¦å¹¾å€‹æœˆï¼›è¢« share storage çš„ I&#x2F;O æ•ˆèƒ½å¡ä½æ›´æ…˜ï¼Œæ•´å€‹ç³»çµ±æœƒæ…¢åˆ°çˆ† job éƒ½å¡ä½â€¦æ‰€ä»¥æˆ‘å°±åœ¨æƒ³æœ‰æ²’æœ‰è¾¦æ³•åœ¨é›²ä¸Šå»ºç«‹é€™ç¨®é«˜æ•ˆèƒ½é‹ç®—å¢é›†ï¼Œæƒ³å‹•æ…‹æ“´å¼µå¹¾å°å°±å¹¾å°ï¼Œå†åŠ ä¸Šæˆ‘ç›¸ä¿¡ç„¡è«–æ˜¯ AWS, GCP ç­‰ç­‰å¤§å¹³å°æ‰€æä¾›çš„ NFS æœå‹™æ‡‰è©²éƒ½å·®ä¸åˆ°å“ªè£¡å»å§â€¦?","text":"æ•å¸é•·ä¹…ä»¥ä¾†éƒ½æ˜¯è‡ªå»º Cluster ä¾†åšç‚ºæ—¥å¸¸é‹ç®—è³‡æºä½¿ç”¨çš„ï¼Œé•·æ™‚é–“ä¸€ç›´éƒ½è¢«æ“´å……æ€§ã€I&#x2F;O æ•ˆèƒ½æ‰€å¡ä½ï¼Œè‹¥æ˜¯å¡åœ¨é‹ç®—è³‡æºä¸å¤ å…‰æ˜¯æ¡è²·æ–°æ©Ÿå™¨å‹•è¼’è¦å¹¾å€‹æœˆï¼›è¢« share storage çš„ I&#x2F;O æ•ˆèƒ½å¡ä½æ›´æ…˜ï¼Œæ•´å€‹ç³»çµ±æœƒæ…¢åˆ°çˆ† job éƒ½å¡ä½â€¦æ‰€ä»¥æˆ‘å°±åœ¨æƒ³æœ‰æ²’æœ‰è¾¦æ³•åœ¨é›²ä¸Šå»ºç«‹é€™ç¨®é«˜æ•ˆèƒ½é‹ç®—å¢é›†ï¼Œæƒ³å‹•æ…‹æ“´å¼µå¹¾å°å°±å¹¾å°ï¼Œå†åŠ ä¸Šæˆ‘ç›¸ä¿¡ç„¡è«–æ˜¯ AWS, GCP ç­‰ç­‰å¤§å¹³å°æ‰€æä¾›çš„ NFS æœå‹™æ‡‰è©²éƒ½å·®ä¸åˆ°å“ªè£¡å»å§â€¦? æœ¬æ–‡æ—¨åœ¨åœ¨ Google Cloud Platform ä¸Šå»ºç«‹ç”± Slurm[1] ç®¡ç†çš„é‹ç®—å¢é›†ï¼Œä¸¦ä¸”ä¹Ÿå»ºç«‹ä¸€å€‹ NFS è‡ªå‹•æ›è¼‰åœ¨æ‰€æœ‰ compute nodes ä¸Šé¢ä¾›å¤§å®¶è®€å–åŠå¯«å…¥ã€‚ åœ¨é–‹å§‹ä¹‹å‰è¦å…ˆé‡æ¸…é€™å€‹ cluster éœ€è¦çš„æ±è¥¿ï¼ŒåŸºæœ¬ä¸Šæ˜¯ä¸‹åˆ—ï¼š A client VM Slurm controller N nodes of Slurm computing node NFS that mount on all computing nodes æ•´é«”åœ–å¤§æ¦‚é•·é€™æ¨£ï¼ŒåŸºæœ¬ä¸Šåƒè€ƒ google çš„æ¶æ§‹[2]ï¼Œåªæ˜¯åŠ ä¸Šä¸€å€‹ NFS æ¶æ§‹åœ–ã€‚Client VM ä¹Ÿéœ€è¦æ›è¼‰ NFS Create a Share Storageé¦–å…ˆå…ˆä¾†å»ºç«‹ä¸€å€‹å„²å­˜ç©ºé–“ä¾†ç•¶ä½œ NFS ï¼Œç”¨æ–¼æ›è¼‰åœ¨æ‰€æœ‰ Nodes ä¸Šï¼Œé€™æ¨£æ‰å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹å­˜å–åŒæ¨£çš„è³‡æ–™ï¼Œæˆ‘é€™é‚Šé¸ç”¨ Google Filestore å› ç‚ºä»–çš„ I&#x2F;O æœƒæ¯”ä¸€èˆ¬ Google çš„ pd-standard æˆ– pd-ssd ä¾†çš„å¥½[3] å»ºç«‹é€™å€‹å°±ä¸å¤ªéœ€è¦ä»‹ç´¹äº†ï¼Œå°±è·‘å» GCP console æ¡ˆæ¡ˆæ¡ˆå°±å¥½äº†ï¼Œå…¶ä¸­ä¸€å€‹è¦æ³¨æ„çš„æ˜¯ authorized VPC network å¦‚æœæ²’ç‰¹åˆ¥éœ€è¦ï¼Œå¯ä»¥é¸ default æœƒæ¯”è¼ƒç°¡å–®ã€‚ æ¡ˆæ¡ˆæ¡ˆå°±æœƒå¾—åˆ°é€™å€‹ Setup Slurm Clusteræ¥ä¸‹ä¾†è¦ä¾†ä½ˆå±¬ Slurm controller, compute nodes, client VM åˆ° GCP ä¸Šï¼Œé€™é‚Šå…¶å¯¦å·²ç¶“æœ‰æ•´å€‹æ¨¡æ¿äº†ï¼Œgithub é€£çµã€‚é€™å€‹å¯ä»¥ç›´æ¥ç”¨ gcloud ä½ˆç½²ï¼Œä½†åœ¨æ­¤ä¹‹å‰éœ€è¦å…ˆæ”¹æ”¹ config ï¼Œä¸»è¦è¦æ”¹çš„æ˜¯ slurm-cluster.yaml cluster_name: æ„›å–å•¥å–å•¥ zone: æ—¢ç„¶åœ¨å°ç£å°±é¸ asia-east1-b vpc_net: é€™è¦å¡« defaultï¼Œä¸å¡«çš„è©±æœƒè‡ªå‹•å»ºç«‹ &#123;cluster_name&#125;-network çš„ VPC vpc_subnet: å¡« default å§ controller_machine_type: å¦‚æœ compute node æ‰“ç®—è¶…é 100 å°çš„è©±å¯ä»¥é¸å¥½ä¸€é» network_storage: é€™é‚Šè¦æ›è¼‰å‰›å‰›å»ºç«‹çš„ nfs å…¶ä»–å°±åƒè€ƒä»¥ä¸‹å§ 12345678910111213141516171819202122232425262728imports:- path: slurm.jinja resources:- name: slurm-cluster type: slurm.jinja properties: cluster_name: cloud-slurm zone: asia-east1-b vpc_net: default vpc_subnet: default controller_machine_type: n1-standard-8 controller_disk_type: pd-standard controller_disk_size_gb: 20 login_machine_type: n1-standard-2 network_storage: - server_ip: &lt;filestore ip&gt; remote_mount: /slurm_nfs local_mount: /j fs_type: nfs compute_image_machine_type: n1-standard-2 ompi_version: v3.1.x partitions: - name: fast machine_type: n1-standard-2 max_node_count: 100 zone: asia-east1-b vpc_subnet: default å¦å¤–ä¸€å€‹è¦æ”¹çš„æ˜¯ scripts/startup.sh ï¼Œé€™å€‹ script æ˜¯ VM å•Ÿå‹•æœƒåŸ·è¡Œçš„ï¼Œç”±æ–¼æˆ‘å€‘ç”¨åˆ° NFS æ‰€ä»¥è¦å®‰è£ nfs package: 12345678# scripts/startup.sh PACKAGES=( &#x27;bind-utils&#x27; # ... skip &#x27;yum-utils&#x27; &#x27;nfs-utils&#x27; # we need this one for mount nfs ) æˆ‘å€‹äººèªç‚ºæœ€å¤§çš„é›·å°±æ˜¯ filestore è·Ÿ slurm cluster å¿…é ˆåœ¨åŒä¸€å€‹ VPC æ‰èƒ½æ›è¼‰ï¼Œç„¶å¾Œé€™å€‹ slurm template ä¸æŒ‡å®š vpc ä»–æœƒå¹«ä½ å»ºä¸€å€‹ (ä¸æ˜¯ç”¨ default)ï¼Œæ‰€ä»¥æˆ‘ä¸€é–‹å§‹æä¸€ç›´ä¸åŒ vpc æ›ä¸èµ·ä¾†â€¦ Deploy &amp; Test Itè¨­å®šé€šé€šè§£æ±ºå¾Œæ¥ä¸‹ä¾†å°±æ˜¯ä½ˆç½²ä¸Š GCP äº†ï¼ŒåŸºæœ¬ä¸Šé€é gcloud å°±å¯ä»¥äº†:é€™é‚Šå¯ä»¥ clone æˆ‘æ”¹éçš„è¨­å®šæª” (è·Ÿä¸Šé¢èªªçš„è¨­å®šä¸€æ¨£)ï¼Œè¨˜å¾—è¦å¡« nfs IP 12345678910$ git clone https://github.com/SSARCandy/slurm-gcp.git$ cd slurm-gcp$ gcloud deployment-manager deployments create gcp-slurm --config slurm-cluster.yamlWaiting for create [operation-5a3cd5941e0b1-f13e780b-ba00af15]...done.Create operation operation-5a3cd5941e0b1-f13e780b-ba00af15 completed successfully.NAME TYPE STATE ERRORS INTENTcloud-slurm-asia-east1-router compute.v1.router COMPLETED []cloud-slurm-compute-0-image compute.v1.instance COMPLETED []cloud-slurm-controller compute.v1.instance COMPLETED []cloud-slurm-login0 compute.v1.instance COMPLETED [] æ¥ä¸‹ä¾†è¦ç­‰ä¸€ä¸‹å¤§æ¦‚äº”åˆ†é˜ï¼Œå› ç‚ºè¦å»ºç«‹ä¸€å€‹ compute node çš„ imageï¼Œä¹‹å¾Œè¦è‡ªå‹•æ“´å±• compute node æ™‚ä½¿ç”¨ã€‚ å®Œæˆå¾Œå¯ä»¥åœ¨ console ä¸Šçœ‹åˆ° å¾…ä¸€åˆ‡å°±åºä¹‹å¾Œå°±å¯ä»¥ç™»å…¥è©¦è©¦ï¼Œå¯ä»¥çœ‹åˆ° slurm_nfs ä¹Ÿæœ‰æ›è¼‰åœ¨ä¸Šé¢ï¼š 1234567891011121314$ gcloud compute ssh cloud-slurm-login0 --zone=asia-east1-b$ df -hFilesystem Size Used Avail Use% Mounted ondevtmpfs 3.6G 0 3.6G 0% /devtmpfs 3.6G 0 3.6G 0% /dev/shmtmpfs 3.6G 8.5M 3.6G 1% /runtmpfs 3.6G 0 3.6G 0% /sys/fs/cgroup/dev/sda2 20G 2.8G 18G 15% //dev/sda1 200M 12M 189M 6% /boot/eficloud-slurm-controller:/home 20G 4.4G 16G 22% /homecloud-slurm-controller:/apps 20G 4.4G 16G 22% /appscloud-slurm-controller:/etc/munge 20G 4.4G 16G 22% /etc/munge10.173.83.218:/slurm_nfs 2.5T 9.9G 2.4T 1% /jtmpfs 732M 0 732M 0% /run/user/1993390025 åˆ©ç”¨ sinfo å¯ä»¥æŸ¥çœ‹ slurm cluster statusï¼Œæœ‰ä¸€ç™¾å°ç­‰è‘—è¢«ä½¿ç”¨ã€‚é€™ä¸€ç™¾å°éƒ½æ˜¯å‡çš„ï¼Œè¦ç­‰åˆ°æœ‰äººçœŸçš„ç™¼ job æ‰æœƒå»ºç«‹ï¼Œç„¶å¾Œé–’ç½®å¤ªä¹…å°±æœƒè¢«é—œæ‰ï¼Œæ˜¯å€‹å¾ˆçœéŒ¢çš„æ–¹å¼å‘¢ï½ 123$ sinfo PARTITION AVAIL TIMELIMIT NODES STATE NODELISTfast* up infinite 100 idle~ cloud-slurm-compute-0-[0-99] ç™¼é€ jobs æ™‚æ‰æœƒå‹•æ…‹å»ºç«‹ computing nodesï¼Œé–’ç½®éä¹…æœƒåˆªæ‰ è©¦è©¦çœ‹ç™¼å¾ˆå¤šå€‹æœƒå¯«æª”åˆ° NFS çš„ jobï¼Œå…ˆå»ºç«‹å€‹ slurm_filewriter.shï¼Œé€™å€‹æª”æ¡ˆæœƒåŸ·è¡Œå¯«å…¥ 1GB çš„è³‡æ–™åˆ° NFS è£¡ã€‚ 12345678910#!/bin/bash##SBATCH --job-name=io-performannce#SBATCH --output=out_%j#SBATCH --ntasks=1#SBATCH --ntasks-per-node=1#SBATCH --cpus-per-task=1f=`hostname`rand=`head /dev/urandom | tr -dc A-Z | head -c 5 ; echo &#x27;&#x27;`sync &amp;&amp; dd if=/dev/zero of=/j/root/testfile_$&#123;f&#125;_$&#123;rand&#125; bs=10M count=100 oflag=direct 2&gt;&amp;1 | cat ç„¶å¾Œé€é sbatch ç™¼ jobsï¼Œé—œæ–¼ slurm ç”¨æ³•å¯åƒè€ƒé€™å€‹å°æŠ„ 123456789101112131415# send 5 parallel jobs that write file to NFS$ for i in `seq 5`; do sbatch slurm_filewriter.sh ; doneSubmitted batch job 203Submitted batch job 204Submitted batch job 205Submitted batch job 206Submitted batch job 207 # after squeue shows no job, can see that files has been written to NFS$ ls -1 /j/roottestfile_cloud-slurm-compute-0-0_CIDCRtestfile_cloud-slurm-compute-0-0_GKCQMtestfile_cloud-slurm-compute-0-0_XDIAQtestfile_cloud-slurm-compute-0-0_XJHTWtestfile_cloud-slurm-compute-0-2_VPSEW è‡³æ­¤æ•´å€‹ slurm cluster å°±ä½ˆç½²åˆ° GCP ä¸Šäº†ï¼Œå¯ä»¥é–‹å§‹é–‹å¿ƒä½¿ç”¨å•¦ï½é€™æ¨£çš„å„ªé»åŒ…å«å¯ä»¥ç„¡ä¸Šé™æ“´å……é‹ç®—è³‡æºï¼Œå†ä¹Ÿä¸ç”¨ç­‰å¾…ï¼NFS I&#x2F;O æ ¹æ“šæˆ‘çš„æ¸¬è©¦ä¹Ÿæ˜¯å®Œå‹è‡ªæ¶çš„åˆ†æ•£å¼å„²å­˜ç³»çµ±ï¼å£è™•å‰‡æ˜¯å¯èƒ½ä¹Ÿè¨±æœƒæœ‰äº›è²´â€¦(?) References https://slurm.schedmd.com/documentation.html https://codelabs.developers.google.com/codelabs/hpc-slurm-on-gcp https://cloud.google.com/compute/docs/disks h1+ol { list-style-type: none; counter-reset: list-counter; padding-left: 0; } h1+ol li { position: relative; padding-left: 3em; } h1+ol li::before { counter-increment: list-counter; content: \"[\" counter(list-counter) \"] \"; position: absolute; left: 0; width: 25px; text-align: right; } é›œè«‡ å™«ï¼å¥½äº†ï¼æˆ‘ç•¢æ¥­äº†ï¼","categories":[],"tags":[{"name":"unix","slug":"unix","permalink":"https://ssarcandy.tw/tags/unix/"},{"name":"slurm","slug":"slurm","permalink":"https://ssarcandy.tw/tags/slurm/"},{"name":"note","slug":"note","permalink":"https://ssarcandy.tw/tags/note/"},{"name":"cloud","slug":"cloud","permalink":"https://ssarcandy.tw/tags/cloud/"}]},{"title":"Develop a Plugin for Hexo","slug":"develop-hexo-plugin","date":"2020-02-09T05:42:04.000Z","updated":"2025-10-22T00:51:26.605Z","comments":true,"path":"2020/02/09/develop-hexo-plugin/","link":"","permalink":"https://ssarcandy.tw/2020/02/09/develop-hexo-plugin/","excerpt":"é€™é™£å­å¿ƒè¡€ä¾†æ½®èŠ±äº†é»æ™‚é–“æ•´ç†æ•éƒ¨è½æ ¼çš„åŸå§‹ç¢¼ï¼Œæ•´ç†çš„éç¨‹ç™¼ç¾å…¶å¯¦å¯ä»¥æŠŠä¸€äº›å°å·¥å…·ç¨ç«‹æˆæ¨¡çµ„ï¼Œä¸€æ–¹é¢å¯ä»¥è®“ codebase è®Šç²¾ç°¡ï¼Œå¦ä¸€æ–¹é¢å‰‡æ˜¯æŠ½å‡ºä¾†çš„æ¨¡çµ„ä¹Ÿå¯ä»¥çµ¦å…¶ä»– Hexo ä½¿ç”¨è€…ä½¿ç”¨ã€‚ä¸€é–‹å§‹æˆ‘ä»¥ç‚ºåªæ˜¯æ¬ç§»ä¸€ä¸‹ç¨‹å¼ã€å‰ªå‰ªè²¼è²¼å°±å¯ä»¥å®Œæˆï¼Œå¾Œä¾†è¶Šåšè¶Šä¸å°å‹â€¦åŸä¾†è¦åšä¸€å€‹ Hexo Plugin ä¹Ÿæ˜¯æ»¿å¤šåœ°æ–¹éœ€è¦æ³¨æ„çš„ã€‚æœ€å¾Œçš„æˆå“å«åš hexo-tag-photozoomï¼Œæœ‰èˆˆè¶£æ­¡è¿ç”¨ç”¨çœ‹ï½","text":"é€™é™£å­å¿ƒè¡€ä¾†æ½®èŠ±äº†é»æ™‚é–“æ•´ç†æ•éƒ¨è½æ ¼çš„åŸå§‹ç¢¼ï¼Œæ•´ç†çš„éç¨‹ç™¼ç¾å…¶å¯¦å¯ä»¥æŠŠä¸€äº›å°å·¥å…·ç¨ç«‹æˆæ¨¡çµ„ï¼Œä¸€æ–¹é¢å¯ä»¥è®“ codebase è®Šç²¾ç°¡ï¼Œå¦ä¸€æ–¹é¢å‰‡æ˜¯æŠ½å‡ºä¾†çš„æ¨¡çµ„ä¹Ÿå¯ä»¥çµ¦å…¶ä»– Hexo ä½¿ç”¨è€…ä½¿ç”¨ã€‚ä¸€é–‹å§‹æˆ‘ä»¥ç‚ºåªæ˜¯æ¬ç§»ä¸€ä¸‹ç¨‹å¼ã€å‰ªå‰ªè²¼è²¼å°±å¯ä»¥å®Œæˆï¼Œå¾Œä¾†è¶Šåšè¶Šä¸å°å‹â€¦åŸä¾†è¦åšä¸€å€‹ Hexo Plugin ä¹Ÿæ˜¯æ»¿å¤šåœ°æ–¹éœ€è¦æ³¨æ„çš„ã€‚æœ€å¾Œçš„æˆå“å«åš hexo-tag-photozoomï¼Œæœ‰èˆˆè¶£æ­¡è¿ç”¨ç”¨çœ‹ï½ History of this Featureæˆ‘é€™æ¬¡è¦æ¬ç§»çš„æ˜¯æˆ‘åŸæœ¬å¯¦ä½œåœ¨ theme è£¡é¢çš„åŠŸèƒ½ï¼Œå°±æ˜¯å¯ä»¥æŠŠå…§æ–‡åœ–ç‰‡æ”¾å¤§çš„åŠŸèƒ½ï¼Œéå¸¸åƒ Medium ç¶²ç«™ä¸ŠæŒ‰åœ–ç‰‡æœƒæœ‰çš„æ•ˆæœã€‚æ•ˆæœå¦‚ä¸‹ï¼š æŒ‰åœ–ç‰‡æœƒæœ‰è·Ÿ Medium ç¶²ç«™ä¸€æ¨£çš„æ•ˆæœ (å°è¢å¹•è£ç½®æ²’æœ‰) åŸæœ¬æˆ‘æ˜¯ç›´æ¥åœ¨ theme ä¸­ä½¿ç”¨ @nishanths çš„ zoom.jsï¼Œç›´æ¥å¼•ç”¨ä»–çš„ sciprtï¼Œä¸¦è‡ªå·±è¨»å†Šä¸€å€‹ Hexo tagï¼š title: layout.yml123&lt;!-- in theme layout file include external resource --&gt;&lt;script src=&quot;./js/zoom.js&quot;&gt;&lt;/script&gt;&lt;link rel=&quot;stylesheet&quot; href=&quot;./css/zoom.css&quot;&gt; title: scripts/helper.js12345678910/** * &#123;% zoom /path/to/image [/path/to/thumbnail] [title] %&#125; */ hexo.extend.tag.register(&#x27;zoom&#x27;, (args) =&gt; &#123; const &#123; thumbnail, original, title &#125; = parse(args); return ` &lt;div&gt; &lt;img src=&quot;$&#123;(thumbnail || original)&#125;&quot; alt=&quot;$&#123;title&#125;&quot; data-action=&quot;zoom&quot; class=&quot;photozoom&quot;&gt; &lt;/div&gt;`;&#125;); é€é hexo.extend.tag.register å¯ä»¥è¨»å†Šæ–°çš„ tag èªæ³•ï¼Œå¯ä»¥ç›´æ¥åœ¨æ–‡ç«  markdown ä¸­ä½¿ç”¨ï¼Œé€™å€‹ tag æœ¬èº«æŠŠ {% zoom %} è½‰æ›æˆå®Œæ•´çš„ html æ ¼å¼ï¼Œä¸¦ä¸”ç”±æ–¼å·²ç¶“åœ¨å‰ç«¯å¼•ç”¨ zoom.js libraryï¼Œæ‰€ä»¥å°±å¯ä»¥æ­£å¸¸é‹ä½œã€‚ Move to Seperate ModuleåŸæœ¬çš„ä½œæ³•æ˜¯ç›´æ¥åœ¨ layout ä¸­å¼•ç”¨ zoom.&#123;js,css&#125; libraryï¼Œé€™ç•¶ç„¶å¯è¡Œï¼Œä½†ç•¶è¦æŠŠé€™åŠŸèƒ½æ¨¡çµ„åŒ–æ™‚ï¼Œæ˜¯æ²’è¾¦æ³•ç›´æ¥æ¥è§¸ layout çš„ (é™¤éä½ è¦åœ¨ readme è£¡é¢å«ä½¿ç”¨è€…è‡ªå·±å¼•ç”¨â€¦)ï¼Œæ‰€ä»¥å¿…é ˆè¦æœ‰å€‹æ–¹å¼æŠŠé€™äº›å¿…è¦çš„å¤–éƒ¨è³‡æºå¡é€²å»ä½¿ç”¨è€…çš„ html è£¡é¢ã€‚é—œæ–¼é€™æ®µã€Œå¦‚ä½•æŠŠå¤–éƒ¨è³‡æºå¡åˆ°ä½¿ç”¨è€…çš„éœæ…‹æª”ä¸­ã€ï¼Œæˆ‘åƒè€ƒäº†å…¶ä»– plugin çš„åšæ³•ï¼Œç™¼ç¾å¤§éƒ¨ä»½éƒ½æ˜¯ä½¿ç”¨ hexo.extend.generator ä¾†é”æˆã€‚ä¸éæˆ‘æœ€å¾Œé¸æ“‡å…¶ä»–åšæ³•ä¾†å®Œæˆé€™ä»¶äº‹ã€‚ Use Hexo GeneratorHexo åœ¨ç·¨è­¯è³‡æºæ™‚ï¼Œæä¾›å¤šç¨®æ–¹å¼è¨»å†Šè‡ªå·±çš„ç¨‹å¼ï¼Œä¾†é”åˆ°é«˜åº¦å®¢è£½åŒ–ã€‚å…¶ä¸­ Generator æ˜¯ç”¨ä¾†ç”¢ç”Ÿæª”æ¡ˆå°æ‡‰çš„è·¯ç”±ï¼Œæ‰€ä»¥ Generator éƒ½æ˜¯å›å‚³ &#123; path: &#39;foo&#39;, data: &#39;foo&#39; &#125; çš„æ ¼å¼ï¼Œä»£è¡¨è‘— path å°æ‡‰çš„ data æ˜¯ä»€éº¼ã€‚é€é Generator å¯ä»¥åšåˆ° copy file çš„åŠŸèƒ½ï¼Œå®˜æ–¹ç¶²ç«™ä¹Ÿæœ‰æä¾›ç¯„ä¾‹ï¼Œå†æ­é…è¨»å†Š tag ï¼Œå°±å¯ä»¥é”æˆå‹•æ…‹æ’å…¥å¿…è¦çš„å¤–éƒ¨è³‡æºã€‚ 123456789101112131415161718192021// generator that create a virtual path to external filehexo.extend.generator.register(&#x27;asset&#x27;, function(locals)&#123; return [&#123; path: &#x27;zoom/zoom.js&#x27;, data: () =&gt; fs.createReadStream(&#x27;/path/to/zoom.js&#x27;), &#125;, &#123; path: &#x27;zoom/zoom.css&#x27;, data: () =&gt; fs.createReadStream(&#x27;/path/to/zoom.css&#x27;), &#125;];&#125;); // register tag that include generator&#x27;s pathhexo.extend.tag.register(&#x27;zoom&#x27;, (args) =&gt; &#123; const &#123; thumbnail, original, title &#125; = parse(args); return ` &lt;script src=&quot;/zoom/zoom.js&quot;&gt;&lt;/script&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;/zoom/zoom.css&quot;&gt; &lt;div&gt; &lt;img src=&quot;$&#123;(thumbnail || original)&#125;&quot; alt=&quot;$&#123;title&#125;&quot; data-action=&quot;zoom&quot; class=&quot;photozoom&quot;&gt; &lt;/div&gt;`;&#125;); å¦‚æ­¤ä¸€ä¾†ï¼Œæ¯ç•¶ä½¿ç”¨è€…æ’å…¥ {% zoom %} æ™‚ï¼Œå°±æœƒè¢«å±•é–‹æˆåŒ…å« include å¤–éƒ¨è³‡æºçš„ html codeï¼Œä¾†é”æˆç›®çš„ã€‚ Use Hexo Filter Inject Codeç„¶è€Œå‰›å‰›çš„æ–¹å¼æœ‰äº›å°ç¼ºé»ï¼Œæ¯”æ–¹èªªç•¶ä½¿ç”¨è€…æ’å…¥å¾ˆå¤š {% zoom %} çš„ tag æ™‚ï¼Œå°±æœƒå‡ºç¾å¾ˆå¤šé‡è¤‡å¼•ç”¨çš„ç¨‹å¼ç¢¼ï¼Œæ„Ÿè¦ºä¹Ÿæ˜¯æ€ªæ€ªçš„ã€‚æ‰€ä»¥æˆ‘æœ€å¾Œåˆ©ç”¨å¦ä¸€ç¨®æ–¹å¼é”åˆ°å¡ code çš„æ•ˆæœ ï¼ Filterã€‚ Hexo Filter æä¾›å¾ˆå¤š hook çš„è¨»å†Šé»ï¼Œæ¯”æ–¹èªªåœ¨æ¸²æŸ“ html ä¹‹å‰åŸ·è¡Œè¨»å†Šçš„ function â€¦ç­‰ç­‰ã€‚æˆ‘é€™é‚Šç”¨çš„æ˜¯ after_generateï¼Œå°±æ˜¯åœ¨å…¨éƒ¨æª”æ¡ˆç”¢ç”Ÿå®Œæˆä¹‹å¾ŒåŸ·è¡Œï¼Œè©³ç´° hook åç¨±è·Ÿæ„ç¾©å¯åƒè€ƒæ–‡ä»¶ é€é after_generate filter æˆ‘å¯ä»¥åœ¨æœ€å¾Œæ±ºå®šæ˜¯å¦è¦æ’å…¥å¤–éƒ¨è³‡æº zoom.&#123;js,css&#125;ï¼Œå¯¦ä½œå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425hexo.extend.filter.register(&#x27;after_generate&#x27;, () =&gt; &#123; const route = hexo.route; const routes = route.list().filter(path =&gt; path.endsWith(&#x27;.html&#x27;)); const map = routes.map(path =&gt; &#123; return new Promise((resolve, reject) =&gt; &#123; const html = route.get(path); let htmlTxt = &#x27;&#x27;; html.on(&#x27;data&#x27;, chunk =&gt; (htmlTxt += chunk)); html.on(&#x27;end&#x27;, () =&gt; &#123; const $ = cheerio.load(htmlTxt, &#123; decodeEntities: true &#125;); if ($(&#x27;.photozoom&#x27;).length) &#123; $(&#x27;body&#x27;).append(`&lt;script type=&quot;text/javascript&quot;&gt;$&#123;fetch_asset(ZOOMJS_PATH)&#125;&lt;/script&gt;`); $(&#x27;body&#x27;).append(`&lt;style&gt;$&#123;fetch_asset(ZOOMCSS_PATH)&#125;&lt;/style&gt;`); hexo.log.info(`[hexo-tag-photozoom] Injected assets to $&#123;path&#125;`); &#125; resolve(&#123; path, html: $.html() &#125;); &#125;); &#125;); &#125;); // update route return Promise.all(map).then(res =&gt; res.map(obj =&gt; &#123; route.set(obj.path, obj.html); &#125;), ); &#125;); æˆ‘å»æƒæ‰€æœ‰ html æª”æ¡ˆï¼Œä¸¦æœå°‹æœ‰æ²’æœ‰ div class name æ˜¯ photozoom çš„ï¼Œå¦‚æœæœ‰é‚£å°±ç›´æ¥åœ¨ html body æ’å…¥æ‰€éœ€çš„ javascript è·Ÿ css ç¨‹å¼ç¢¼ï¼Œéå¸¸æš´åŠ›ä½†é‚„ä¸éŒ¯ï½ä¸”é€™ä½œæ³•åŒæ™‚å…¼é¡§å¦‚æœæœ‰ä½¿ç”¨è€…æƒ³åœ¨éæ–‡ç« å…§å®¹çš„åœ°æ–¹ä½¿ç”¨ zoom.js çš„æ•ˆæœï¼Œåªéœ€è¦åœ¨ &lt;img&gt; ä¸­åŠ ä¸Š photozoom class nameï¼Œåœ¨æ¯æ¬¡ç·¨è­¯æ™‚éƒ½æœƒæƒåˆ°ä¸¦åœ¨éœ€è¦çš„åœ°æ–¹æ’å…¥ç¨‹å¼ç¢¼ã€‚ References Hexo Filter Develop a plugin for Hexo - Github Card h1+ol { list-style-type: none; counter-reset: list-counter; padding-left: 0; } h1+ol li { position: relative; padding-left: 3em; } h1+ol li::before { counter-increment: list-counter; content: \"[\" counter(list-counter) \"] \"; position: absolute; left: 0; width: 25px; text-align: right; }","categories":[],"tags":[{"name":"nodejs","slug":"nodejs","permalink":"https://ssarcandy.tw/tags/nodejs/"},{"name":"hexo","slug":"hexo","permalink":"https://ssarcandy.tw/tags/hexo/"},{"name":"javascript","slug":"javascript","permalink":"https://ssarcandy.tw/tags/javascript/"}]},{"title":"Timing Attack in String Compare","slug":"timing-attack","date":"2020-01-29T11:28:29.000Z","updated":"2025-10-22T00:51:26.606Z","comments":true,"path":"2020/01/29/timing-attack/","link":"","permalink":"https://ssarcandy.tw/2020/01/29/timing-attack/","excerpt":"ç¨‹å¼èªè¨€é€šå¸¸åœ¨åŸ·è¡Œçš„æ™‚å€™ï¼Œç‚ºäº†è¦æœ€ä½³åŒ–åŸ·è¡Œçš„é€Ÿåº¦ï¼Œå¸¸å¸¸æœƒåˆ©ç”¨æ‰€è¬‚çš„ Early Returnã€‚[1]æ¯”å¦‚èªªæ¢ä»¶å¼è£¡é¢ if (a &amp;&amp; b) é€™ç¨®åˆ¤æ–·å¼ï¼Œå‡è¨­å·²ç¶“çŸ¥é“ A == falseï¼Œé‚£å…¶å¯¦å°±å¯ä»¥ä¸éœ€è¦çŸ¥é“ b çš„å€¼ï¼Œå¦‚æ­¤å°±å¯ä»¥ç›´æ¥å¿½ç•¥ b è€Œé”åˆ°æ›´å¿«çš„çŸ¥é“é€™å€‹åˆ¤æ–·å¼æ˜¯å¦ç‚ºçœŸ[2]ã€‚åŒæ¨£çš„é€™ç¨®ä½œæ³•å…¶å¯¦æœƒç™¼ç”Ÿåœ¨å¾ˆå¤šåœ°æ–¹ï¼Œæ¯”æ–¹èªªåƒæ˜¯æ¯”å°å…©å€‹å­—ä¸²æ˜¯å¦ä¸€æ¨£ï¼šåœ¨å¾ˆå¤šç¨‹å¼èªè¨€ä¸­çš„å¯¦ä½œå…¶å¯¦å°±æ˜¯éæ­·å…©å€‹å­—ä¸²æ¯”å°æ¯ä¸€å€‹å­—å…ƒï¼Œé‚£åªè¦éç¨‹ä¸­æœ‰ä¸€å€‹å­—å…ƒä¸ä¸€æ¨£é‚£é€™å…©å€‹å­—ä¸²è‚¯å®šå°±æ˜¯ä¸ä¸€æ¨£ï¼Œå³å¯ææ—©è¿”å›çµæœã€‚","text":"ç¨‹å¼èªè¨€é€šå¸¸åœ¨åŸ·è¡Œçš„æ™‚å€™ï¼Œç‚ºäº†è¦æœ€ä½³åŒ–åŸ·è¡Œçš„é€Ÿåº¦ï¼Œå¸¸å¸¸æœƒåˆ©ç”¨æ‰€è¬‚çš„ Early Returnã€‚[1]æ¯”å¦‚èªªæ¢ä»¶å¼è£¡é¢ if (a &amp;&amp; b) é€™ç¨®åˆ¤æ–·å¼ï¼Œå‡è¨­å·²ç¶“çŸ¥é“ A == falseï¼Œé‚£å…¶å¯¦å°±å¯ä»¥ä¸éœ€è¦çŸ¥é“ b çš„å€¼ï¼Œå¦‚æ­¤å°±å¯ä»¥ç›´æ¥å¿½ç•¥ b è€Œé”åˆ°æ›´å¿«çš„çŸ¥é“é€™å€‹åˆ¤æ–·å¼æ˜¯å¦ç‚ºçœŸ[2]ã€‚åŒæ¨£çš„é€™ç¨®ä½œæ³•å…¶å¯¦æœƒç™¼ç”Ÿåœ¨å¾ˆå¤šåœ°æ–¹ï¼Œæ¯”æ–¹èªªåƒæ˜¯æ¯”å°å…©å€‹å­—ä¸²æ˜¯å¦ä¸€æ¨£ï¼šåœ¨å¾ˆå¤šç¨‹å¼èªè¨€ä¸­çš„å¯¦ä½œå…¶å¯¦å°±æ˜¯éæ­·å…©å€‹å­—ä¸²æ¯”å°æ¯ä¸€å€‹å­—å…ƒï¼Œé‚£åªè¦éç¨‹ä¸­æœ‰ä¸€å€‹å­—å…ƒä¸ä¸€æ¨£é‚£é€™å…©å€‹å­—ä¸²è‚¯å®šå°±æ˜¯ä¸ä¸€æ¨£ï¼Œå³å¯ææ—©è¿”å›çµæœã€‚ åº•ä¸‹æ˜¯ C çš„ strcmp ç¨‹å¼ç¢¼ç‰‡æ®µå¯¦ä½œæ¯”è¼ƒå…©å€‹å­—ä¸²æ˜¯å¦ä¸€æ¨£ï¼š 123456789101112131415int strcmp(const char *p1, const char *p2){ const unsigned char *s1 = (const unsigned char *) p1; const unsigned char *s2 = (const unsigned char *) p2; unsigned char c1, c2; do { c1 = (unsigned char) *s1++; c2 = (unsigned char) *s2++; if (c1 == '\\0') return c1 - c2; } while (c1 == c2); return c1 - c2;} å¾ä¸Šé¢çš„é‚è¼¯å¯ä»¥çœ‹å‡ºä¾†ï¼Œå¦‚æœç¬¬äºŒå€‹å­—å…ƒå°±ä¸ä¸€æ¨£çš„è©±ï¼Œé‚£æˆ‘å€‘é¦¬ä¸Šå°±å¯ä»¥çµæŸæ•´å€‹é‚è¼¯ç„¶å¾Œè¿”å›å…©å€‹å­—ä¸²ä¸ä¸€æ¨£çš„çµæœï¼Œå¦‚æ­¤å°±èƒ½æå‡ç¨‹å¼åŸ·è¡Œçš„é€Ÿåº¦ã€‚è€Œæœ¬æ–‡å°±æ˜¯è¦ä¾†æ¢è¨é€™ç¨®å­—ä¸²æ¯”å°çš„æ–¹å¼æ‰€è¡ç”Ÿçš„å…¶ä»–çš„å®‰å…¨æ€§å•é¡Œï¼Œä¹Ÿå°±æ˜¯æ‰€è¬‚çš„ Timing Attack Timing Attack Timing Attack å…¶å¯¦å°±æ˜¯æ‰€è¬‚çš„æ™‚é–“å·®æ”»æ“Šã€‚ 12345678do{ c1 = (unsigned char) *s1++; c2 = (unsigned char) *s2++; if (c1 == '\\0') return c1 - c2;}while (c1 == c2); å†ä¾†çœ‹ä¸€ä¸‹å‰›å‰›å­—ä¸²æ¯”å°çš„å¯¦ä½œä¸­çš„è¿´åœˆï¼Œç”±æ–¼é€™å€‹è¿´åœˆå¯¦ä½œçš„é—œä¿‚æˆ‘å€‘å¯ä»¥çŸ¥é“ä¸åŒå­—ä¸²æ¯”å°å…¶å¯¦æœƒèŠ±ä¸ä¸€æ¨£çš„æ™‚é–“ï¼Œé€™å¾ˆåˆç†å› ç‚ºæœ‰æ™‚å€™æ¯”è¼ƒå­—ä¸²åˆ°ä¸€åŠçš„æ™‚å€™æˆ‘å€‘å°±å·²ç¶“çŸ¥é“é€™å…©å€‹å­—ä¸²ä¸ä¸€æ¨£ï¼Œæ‰€ä»¥ææ—©è¿”å›çµæœã€‚é‚£é€™æ¨£åˆ°åº•æœ‰ä»€éº¼å®‰å…¨æ€§çš„å•é¡Œå‘¢ï¼Ÿ è©¦æƒ³ï¼Œä»Šå¤©åœ¨è¼¸å…¥å¯†ç¢¼çš„æ™‚å€™è¼¸å…¥éŒ¯äº†ï¼Œçµæœé›»è…¦å‘Šè¨´ä½ ï¼šã€Œå–”ä½ ç¬¬ä¸‰å€‹å­—å…ƒéŒ¯äº†ã€‚ã€é€™æ¨£å…¶å¯¦è »å¥‡æ€ªçš„å§ï¼Ÿé€™è¡¨ç¤ºå‡è¨­é§­å®¢æƒ³è¦çŒœä½ çš„å¯†ç¢¼ï¼ŒåŸºæœ¬ä¸Šä»–å°±å¯ä»¥å…ˆäº‚çŒœç¬¬ä¸€å€‹å­—å…ƒï¼ŒçŒœå°ä¹‹å¾Œå†ç¹¼çºŒçŒœä¸€å€‹å­—å…ƒâ€¦ä»¥æ­¤é¡æ¨ï¼Œé‚£å‹¢å¿…å¯ä»¥ç ´è§£å¯†ç¢¼ã€‚ é€™å€‹ä¾‹å­è·Ÿæˆ‘å€‘å‰›å‰›çš„å­—ä¸²æ¯”å°å…¶å¯¦åŸºæœ¬ä¸Šæ˜¯åŒä¸€ä»¶äº‹æƒ…ï¼Œå› ç‚ºå¦‚æœä½ è¼¸å…¥å¯†ç¢¼æ˜¯éŒ¯çš„å…¶å¯¦æœƒæ¯”è¼¸å…¥æ­£ç¢ºå¯†ç¢¼ä¾†çš„èŠ±æ›´å°‘çš„æ™‚é–“ï¼Œå› ç‚ºéŒ¯èª¤å¯†ç¢¼å¯èƒ½å‰å¹¾å€‹å­—å…ƒå°±éŒ¯æ‰€ä»¥ææ—©è¿”é‚„çµæœã€‚é›–ç„¶é€™æ™‚é–“ä¸Šçš„å·®ç•°å¹¾ä¹å¾®ä¹å…¶å¾®ï¼Œä½†æ˜¯åªè¦å¤šåšå¹¾æ¬¡ç„¶å¾Œå†å¹³å‡ä¸€ä¸‹ï¼Œé‚„æ˜¯å¯ä»¥å¾—å‡ºæœ‰æ„ç¾©çš„çµæœã€‚åº•ä¸‹æ˜¯ä¸€æ®µç¨‹å¼ç¢¼ä¾†è­‰æ˜ï¼Œåªè¦å¤šè·‘å¹¾æ¬¡å°±å¯ä»¥ç™¼ç¾å­—ä¸²ä¸­ä¸ä¸€æ¨£çš„é‚£å€‹å­—å…ƒå¦‚æœè¶Šå¾Œé¢å­—ä¸²æ¯”å°çš„æ™‚é–“å°±æœƒæ˜é¡¯æœ‰å·®ç•°ï¼Œåˆ©ç”¨é€™æ¨£çš„è³‡è¨Šå°±å¯ä»¥æ…¢æ…¢æ¨å‡ºç­”æ¡ˆçš„å­—ä¸²ã€‚ 12345678910111213141516std::vector&lt;std::string&gt; str{ \"x2345\", \"1x345\", \"12x45\", \"123x5\", \"1234x\",}; for (auto ss: str) { auto start = std::chrono::system_clock::now(); for (int i = 0; i &lt; 1e8; i++) { strcmp(\"12345\", ss.c_str()); } std::chrono::duration&lt;double&gt; diff{std::chrono::system_clock::now() - start}; std::cout &lt;&lt; ss &lt;&lt; \": \" &lt;&lt; diff.count() &lt;&lt; \" s\\n\";} é€™æ®µç¨‹å¼æœƒåå‡ºä»¥ä¸‹çš„çµæœï¼š 12345x2345: 4.07176 s1x345: 4.89044 s12x45: 5.79689 s123x5: 6.84836 s1234x: 7.37571 s å¯ä»¥ç™¼ç¾ï¼Œæ¯”è¼ƒçš„å­—ä¸²è¶Šå¾Œé¢æ‰ä¸ä¸€æ¨£ï¼ŒèŠ±è²»è¶Šé•·çš„æ™‚é–“ã€‚é€™å°±æ˜¯ Timing Attack çš„ä¸»è¦æ¦‚å¿µã€‚ In Real Worldé‚£åœ¨å¯¦å‹™ä¸Šé€™å€‹æ¼æ´æœƒå‡ºç¾åœ¨å“ªè£¡å‘¢ï¼Ÿå…¶å¯¦è¦å…ˆçŸ¥é“é€™å€‹æ¼æ´çš„æ„ç¾©ï¼šå¿…é ˆè¦æ˜¯é‚£å€‹ç­”æ¡ˆå­—ä¸²æ˜¯æ•æ„Ÿè³‡æ–™ï¼Œåƒæ˜¯å¯†ç¢¼ã€æˆ–è€…æŸç¨® Tokenã€‚ å¦‚æœä¸æ˜¯æ•æ„Ÿè³‡æ–™é‚£å°±ç®—å¯ä»¥é–“æ¥çŒœå‡ºä¾†ä¹Ÿæ˜¯æ²’æœ‰ä»€éº¼æ„ç¾©ã€‚ Account/Password Loginé‚£å°±å…ˆä¾†èªªèªªçœ‹æœ€å¸¸è¦‹çš„å¯†ç¢¼æ¯”å°å¥½äº†ï¼Œç¾åœ¨éš¨è™•å¯è¦‹ä»€éº¼å¸³è™Ÿå¯†ç¢¼ç™»å…¥ï¼Œé€™ç¨®æ±è¥¿æœƒä¸æœƒè¸©åˆ°é€™å€‹æ¼æ´å‘¢ï¼Ÿå°±æˆ‘çš„çŸ¥è­˜ä¾†è¬›ï¼šåŸºæœ¬ä¸Šæ˜¯ä¸æœƒã€‚å› ç‚ºå‡è¨­æ˜¯ä¸€å€‹æ­£å¸¸çš„å¾Œç«¯å·¥ç¨‹å¸«ï¼Œä»–å€‘ä¸æœƒå»åšæ‰€è¬‚çš„å¯†ç¢¼æ˜æ–‡å„²å­˜ã€‚å¯†ç¢¼é€™ç¨®æ±è¥¿å³ä½¿åœ¨è³‡æ–™åº«è£¡é¢ä¹Ÿä¸æœƒæ˜¯æ˜æ–‡å„²å­˜çš„ï¼Œå°‘èªªä¹Ÿæ˜¯æœƒç¶“éä¸€æ¬¡é›œæ¹Šè€Œä¸”é‚„è¦åŠ é¹½ã€‚[3] åœ¨è³‡æ–™åº«å­˜çš„æœƒæ˜¯ è€Œé ã€‚ ä½¿ç”¨è€…è¼¸å…¥å¸³è™Ÿå¯†ç¢¼çš„æ™‚å€™ï¼Œä¼ºæœå™¨ç«¯æœƒé€éåŒæ¨£çš„é›œæ¹Šé‚è¼¯ï¼Œå°±å¯ä»¥å¾—å‡ºè·Ÿè³‡æ–™åº«å„²å­˜çš„ä¸€æ¨£çš„é›œæ¹Šï¼Œé€™æ¨£å°±å®Œæˆä¸€å€‹æ­£å¸¸çš„å¯†ç¢¼é©—è­‰ã€‚ä¹Ÿç”±æ–¼ hashing æœƒè®“è¼¸å…¥çš„å­—ä¸²è·Ÿå¾—åˆ°çš„é›œæ¹Šæœ‰å¾ˆä¸ä¸€æ¨£çš„çµæœï¼Œå³ä½¿åªæ”¹è¼¸å…¥çš„å¯†ç¢¼ä¸€å€‹å­—å…ƒï¼Œå¾—åˆ°çš„ hash ä¹Ÿæœƒå®Œå…¨ä¸ä¸€æ¨£ã€‚é€™æ¨£çš„æ©Ÿåˆ¶å°è‡´ Timing Attack åœ¨é€™å€‹ä¾‹å­ä¸Šå°±å®Œå…¨æ²’æœ‰ç”¨äº†ï¼Œå› ç‚ºæ”»æ“Šè€…æ ¹æœ¬ä¸èƒ½é æœŸçœŸæ­£åœ¨åšå­—ä¸²æ¯”å°çš„é‚£å€‹é›œæ¹Šæ˜¯ä¸æ˜¯å¦‚æ”»æ“Šè€…é æœŸçš„ä¸€å€‹å­—å…ƒä¸€å€‹å­—å…ƒæ”¹è®Šï¼Œé‚£å¦‚æ­¤å³ä½¿æœ‰æ™‚é–“ä¸Šçš„å·®ç•°ï¼Œä¹Ÿè·Ÿç¬¬å¹¾å€‹å­—å…ƒæ¯”å°å¤±æ•—æ²’æœ‰ç›´æ¥çš„é—œä¿‚ã€‚ Request Signatureé‚£åˆ°åº•æœ‰æ²’æœ‰å…¶ä»–ä¾‹å­æ˜¯çœŸçš„æœƒéœ€è¦æ³¨æ„é€™å€‹æ¼æ´çš„å‘¢ï¼Ÿæˆ‘èƒ½æƒ³åˆ°çš„å¤§æ¦‚å°±æ˜¯åƒæ˜¯æŸäº›åŠ å¯†è²¨å¹£äº¤æ˜“æ‰€ï¼Œä»–å€‘çš„ API å¹¾ä¹éƒ½éœ€è¦åšæ‰€è¬‚çš„ç°½ç« ã€‚æ¦‚å¿µå¦‚ä¸‹ï¼šäº¤æ˜“æ‰€éœ€è¦é€é API key/secret ç¢ºä¿é€™å€‹è«‹æ±‚æ˜¯ä¾†è‡ªåˆæ³•çš„ä½¿ç”¨è€…ï¼Œæ‰€ä»¥æ¯å€‹è«‹æ±‚éƒ½å¿…é ˆé™„å¸¶ä¸Šç°½ç« ï¼Œå…¬å¼å¤§æ¦‚æ˜¯é€™æ¨£ï¼š é€™å€‹çš„ç”¨æ„æ˜¯ä½¿ç”¨è€…åˆ©ç”¨è‡ªå·±çš„ç§é‘°å»åŠ å¯†è«‹æ±‚çš„åƒæ•¸ï¼Œä¾†è­‰æ˜è‡ªå·±æ˜¯çœŸçš„è‡ªå·±ã€‚ä¼ºæœå™¨ç«¯å‰‡æœƒç”¨ä½¿ç”¨è€…æœ¬æ¬¡è«‹æ±‚çš„åƒæ•¸åŠ ä¸Šä½¿ç”¨è€…çš„ç§é‘°ä¾†å»é‡çµ„ Signatureï¼Œå‡è¨­ Signature è·Ÿè«‹æ±‚ç«¯é™„å¸¶çš„ä¸€æ¨£ï¼Œé‚£å°±æ˜¯åˆæ³•çš„è«‹æ±‚ã€‚åœ¨é§­å®¢çš„è§’åº¦ï¼Œç”±æ–¼æ²’æœ‰ä½¿ç”¨è€…çš„ç§é‘°æ‰€ä»¥æ²’æœ‰è¾¦æ³•ç”¨æ­£è¦é€”å¾‘å¾—åˆ° Signatureï¼Œä½†æ˜¯åˆ©ç”¨ Timing Attack é€™æ‹›å°±å¯ä»¥çŒœå‡ºæœ¬æ¬¡è«‹æ±‚æ‰€å°æ‡‰çš„ Signature å¾è€Œé”åˆ°å½é€ èº«ä»½çš„æ•ˆæœã€‚ä½†é€™æœ‰å¹¾å€‹ä¸å¯¦éš›çš„åœ°æ–¹ï¼š åˆ©ç”¨ Timing Attack éœ€è¦å¤§é‡çš„å˜—è©¦ï¼Œä½†é€šå¸¸ä¼ºæœå™¨ç«¯æœƒæœ‰ rate limitï¼Œæ ¹æœ¬æ²’è¾¦æ³•åœ¨åˆç†çš„æ™‚é–“çŒœåˆ°ç­”æ¡ˆã€‚ å†è€…ï¼Œé€™ç¨® Signature åŠ å¯†æ©Ÿåˆ¶éƒ½æœƒå†å¸¶ä¸€å€‹æ‰€è¬‚çš„ nonce[4]ï¼Œæ‰€ä»¥å…¶å¯¦å¯¦å‹™ä¸Šä¹Ÿå¾ˆé›£æœ‰è¾¦æ³•åˆ©ç”¨ Timing Attackã€‚ è¬›ç™½äº†é€™å€‹æ”»æ“Šæ‰‹æ®µæˆ‘å€‹äººè¦ºå¾—çœ‹èµ·ä¾†å¾ˆå²å®³ä½†å…¶å¯¦æ²’é€™éº¼å¯æ€•ã€‚é™¤éæ˜¯èœé³¥å·¥ç¨‹å¸«ï¼Œä¸ç„¶å¯¦å‹™ä¸Šä¸å¤ªå¯èƒ½åšå‡ºæœƒè¢«é€™å€‹æ”»æ“Šæ‰‹æ®µå½±éŸ¿çš„ç³»çµ±â€¦ References Return early and clearly https://arne-mertz.de/2016/12/early-return/ é€™å€‹ä¾‹å­å…¶å¯¦æ˜¯æ‰€è¬‚çš„ Order of evaluation, è·Ÿ Early return æœ‰ä¸€é»ä¸åŒã€‚https://en.cppreference.com/w/cpp/language/eval_order Adding Salt to Hashing: A Better Way to Store Passwords nonce å¯ä»¥æœ‰æ•ˆé¿å…é‡é€æ”»æ“Šã€‚ (é‡é€æ”»æ“Šæˆ‘å¸¸å¸¸ç”¨ï¼Œå¯åƒè€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç«  å¾å¥§å®¢ç©å®¶è¦–è§’çœ‹éŠæˆ²é˜²ç¦¦æ€§è¨­è¨ˆ) å¦å¤–è£œå……ä¸€ç¯‡ä¹Ÿæ˜¯åœ¨ä»‹ç´¹ Timing Attack çš„æ–‡ Using Node.js Event Loop for Timing Attacks h1+ol { list-style-type: none; counter-reset: list-counter; padding-left: 0; } h1+ol li { position: relative; padding-left: 3em; } h1+ol li::before { counter-increment: list-counter; content: \"[\" counter(list-counter) \"] \"; position: absolute; left: 0; width: 25px; text-align: right; }","categories":[],"tags":[{"name":"note","slug":"note","permalink":"https://ssarcandy.tw/tags/note/"},{"name":"c++","slug":"c","permalink":"https://ssarcandy.tw/tags/c/"}]},{"title":"å¾å¥§å®¢ç©å®¶è¦–è§’çœ‹éŠæˆ²é˜²ç¦¦æ€§è¨­è¨ˆ","slug":"game-design-from-perspective-of-hacker","date":"2019-10-02T15:31:16.000Z","updated":"2025-10-22T00:51:26.605Z","comments":true,"path":"2019/10/02/game-design-from-perspective-of-hacker/","link":"","permalink":"https://ssarcandy.tw/2019/10/02/game-design-from-perspective-of-hacker/","excerpt":"å¸¸å¸¸è½åˆ°æŸæŸéŠæˆ²å¤–æ›çŒ–ç—ï¼Œä½œå¼Šä»”æ²’å“ã€ç ´å£éŠæˆ²æ¨‚è¶£ç­‰ç­‰è¡Œå¾‘ã€‚èº«ç‚ºä¸€å€‹å¥½å¥‡å¯¶å¯¶ï¼Œç¸½æ˜¯å¾ˆæƒ³çŸ¥é“å…¶ä¸­å¥§ç§˜ï¼Œé›–ç„¶æˆ‘æ²’æœ‰å²å®³åˆ°é–‹ç™¼å‡ºä»€éº¼å¤–æ›ç¨‹å¼ï¼Œä½†é€™å¹¾å¹´ä¹Ÿé™¸çºŒç™¼ç¾å¤šæ¬¾éŠæˆ²è¨­è¨ˆä¸Šçš„ç¼ºé™·ï¼ŒæˆåŠŸç”¨éæ­£ç•¶çš„æ–¹å¼éŠç©éŠæˆ² (å¥½å«è“„â€¦XD)ã€‚çœ‹è‘—çœ‹è‘—ä¹Ÿç™¼ç¾å…¶å¯¦é€™äº›éŠæˆ²çš„é–‹ç™¼è€…ç†è«–ä¸Šæœ‰è¾¦æ³•é˜²æ­¢é€™é¡å‹çš„æ”»æ“Šï¼Œæ‰€ä»¥åªå¥½ç”¨æˆ‘ä¸å°ˆæ¥­çš„è¦‹è§£å¯«ä¸‹é€™ç¯‡æ–‡ç« ã€‚ å°æ²’éŒ¯æˆ‘å°±æ˜¯å¥§å®¢ç©å®¶ï¼ æœ¬æ–‡æåŠçš„éŠæˆ²åªä»£è¡¨æ›¾ç¶“å¯ä»¥ä½œå¼Šï¼Œä¸ä»£è¡¨ç¾åœ¨æˆ–æœªä¾†ä¹Ÿå¯ä»¥ã€‚","text":"å¸¸å¸¸è½åˆ°æŸæŸéŠæˆ²å¤–æ›çŒ–ç—ï¼Œä½œå¼Šä»”æ²’å“ã€ç ´å£éŠæˆ²æ¨‚è¶£ç­‰ç­‰è¡Œå¾‘ã€‚èº«ç‚ºä¸€å€‹å¥½å¥‡å¯¶å¯¶ï¼Œç¸½æ˜¯å¾ˆæƒ³çŸ¥é“å…¶ä¸­å¥§ç§˜ï¼Œé›–ç„¶æˆ‘æ²’æœ‰å²å®³åˆ°é–‹ç™¼å‡ºä»€éº¼å¤–æ›ç¨‹å¼ï¼Œä½†é€™å¹¾å¹´ä¹Ÿé™¸çºŒç™¼ç¾å¤šæ¬¾éŠæˆ²è¨­è¨ˆä¸Šçš„ç¼ºé™·ï¼ŒæˆåŠŸç”¨éæ­£ç•¶çš„æ–¹å¼éŠç©éŠæˆ² (å¥½å«è“„â€¦XD)ã€‚çœ‹è‘—çœ‹è‘—ä¹Ÿç™¼ç¾å…¶å¯¦é€™äº›éŠæˆ²çš„é–‹ç™¼è€…ç†è«–ä¸Šæœ‰è¾¦æ³•é˜²æ­¢é€™é¡å‹çš„æ”»æ“Šï¼Œæ‰€ä»¥åªå¥½ç”¨æˆ‘ä¸å°ˆæ¥­çš„è¦‹è§£å¯«ä¸‹é€™ç¯‡æ–‡ç« ã€‚ å°æ²’éŒ¯æˆ‘å°±æ˜¯å¥§å®¢ç©å®¶ï¼ æœ¬æ–‡æåŠçš„éŠæˆ²åªä»£è¡¨æ›¾ç¶“å¯ä»¥ä½œå¼Šï¼Œä¸ä»£è¡¨ç¾åœ¨æˆ–æœªä¾†ä¹Ÿå¯ä»¥ã€‚ èªªåˆ°é€™å¹¾å¹´é™¸çºŒçœ‹åˆ°æœ‰éš™å¯è¶çš„éŠæˆ²ï¼Œæ–¹æ³•ä¸å¤–ä¹æ˜¯å…©å€‹ï¼Œä¸€æ˜¯è—‰ç”±å°åŒ…æ””æˆªæŸ¥çœ‹å…§å®¹å†è—‰ç”±ä¿®æ”¹å°åŒ…è³‡è¨Šé‡é€ä¾†æ”»æ“Šï¼ŒäºŒæ˜¯ç›´æ¥æ›´æ”¹è¨˜æ†¶é«”ä½ç½®çš„å€¼ï¼Œé€™å…©å€‹æ–¹æ³•éƒ½æ˜¯éå¸¸ç›´æ¥æš´åŠ›ï¼Œæ¡ˆä¾‹å¾ˆå¤šï¼Œå®¹æˆ‘ä¸€ä¸€ä»‹ç´¹ã€‚ Metal Slug Attack é€™éŠæˆ²æ˜¯æˆ‘çš„å•Ÿè’™å°å¸«ï¼Œä»–æ•™æœƒæˆ‘å¥½å¤šç¶²è·¯å‚³è¼¸çŸ¥è­˜ã€‚é‡‘å¹£ 99999999+ æ˜¯åŸºæœ¬ å…¶å¯¦é€™éŠæˆ²æˆ‘å·²ç¶“å¯«éä¸€ç¯‡æ–‡ç« äº†ï¼Œä½†å®¹æˆ‘å†æ¬¡é­å± ğŸ¤£ é€™éŠæˆ²æ˜¯ååˆ†ç¶“å…¸åªè¦æœƒå¯Ÿçœ‹ç¶²è·¯å°åŒ…ï¼Œä¸€å®šæœ‰è¾¦æ³•ä½¿ç”¨é‡é€æ”»æ“Šã€‚åˆ°åº•ä»€éº¼æ˜¯æŸ¥çœ‹å°åŒ…å†é‡é€å‘¢ï¼Ÿä¾†çœ‹çœ‹ä»–çš„éŠæˆ²æ¨¡å¼ï¼šåŸºæœ¬ä¸Šæ˜¯é—œå¡åˆ¶å¡”é˜²éŠæˆ²ï¼Œå‹åˆ©å¯ä»¥æ‹¿åˆ°çå‹µã€‚æ‰€ä»¥ç•¶æˆ‘æ””æˆªåˆ°é–‹å§‹è·ŸçµæŸçš„å°åŒ…è¨Šæ¯ä¹‹å¾Œï¼Œæˆ‘å°±å¯ä»¥ç›´æ¥è‡ªå‹•åˆ·é—œäº†ã€‚ 12345678910echo \"Start event level=HELL......$i\"send_request \\ \"cover=1&amp;deck_no=12&amp;stage_id=$stage_id&amp;unit_ids[]=604&amp;unit_ids[]=485&amp;unit_level[]=50&amp;unit_level[]=50\" \\ \"https://msattack.snkplaymore.info/event/marathon2nd/battle_start/?kpi1=$stage_id\" &gt; /dev/nullsend_request \\ \"stage_id=$stage_id&amp;battle_time=25&amp;drop_num=$drop_num\" \\ \"https://msattack.snkplaymore.info/event/marathon2nd/battle_win/\" &gt; /dev/nullecho \"Win event level=HELL........$i\" å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„åƒæ•¸éƒ½æ˜¯é€éæ˜æ–‡å‚³è¼¸ï¼Œå”¯ä¸€çš„ä¿è­·æ˜¯æœ‰ä½¿ç”¨ httpsï¼Œä½†é€™æ¨£ä¸¦ç„¡æ³•é˜²æ­¢å°åŒ…è¢«æŸ¥çœ‹ï¼Œå› ç‚ºåªè¦å»ºç«‹ Proxy server ä¸¦è‡ªå·±ç°½ç½²ä¸€å€‹ SSL æ†‘è­‰ï¼Œé‚„æ˜¯å¯ä»¥å·çœ‹ https çš„å°åŒ…ã€‚é‚£å¦‚æœæˆ‘æ˜¯é–‹ç™¼è€…æˆ‘æœƒæ€éº¼æ”¹å–„å‘¢ï¼Ÿæ¯”è¼ƒåŸºæœ¬çš„æ˜¯åŠ ä¸Š nonce åœ¨ request è£¡é¢ä¸¦åŠ å¯†åƒæ•¸ã€‚nonce æœ¬èº«æ˜¯ä¸€å€‹éå¢æ•¸å­—ï¼Œä¼ºæœå™¨ç«¯é ˆæª¢æŸ¥ nonce å€¼è¦æ˜¯éå¢çš„ä¸ç„¶å°±éåˆæ³•ã€‚é€™ç¨®ä½œæ³•å¸¸è¦‹æ–¼åŠ å¯†è²¨å¹£äº¤æ˜“æ‰€çš„ API è¨­è¨ˆï¼Œé€™ä¹Ÿæ˜¯é˜²æ­¢é‡é€æ”»æ“Šå¸¸è¦‹çš„æ‰‹æ®µã€‚[1] éŠæˆ²ç‹ Duel Linksæ›¾ç¶“é¢¨é¡ä¸€é™£å­çš„éŠæˆ²ç‹å¡ç‰ŒéŠæˆ²ï¼ŒåŒæ™‚ä¹Ÿæ˜¯ä¼ºæœå™¨è¨­è¨ˆæœ‰åš´é‡ç¼ºé™·ï¼Œåš´é‡åˆ°æˆ‘è¦ºå¾—ä»–å€‘å·¥ç¨‹å¸«å¯ä»¥æ±è¥¿æ”¶ä¸€æ”¶çš„ç¨‹åº¦ã€‚é€™éŠæˆ²æˆ‘é–‹æœä¸‰å¤©å°±æŠŠå…¨è…³è‰²ç·´åˆ°æ»¿ç­‰ï¼ŒåŒæ™‚é›†é½Šç•¶æ™‚æ‰€æœ‰ UR SR å¡ç‰‡ï¼Œå…©å€‹ç¦®æ‹œå¾Œè¦ºå¾—å¤ªç„¡èŠç›´æ¥æ£„å‘ï¼Œå ªç¨±æˆ‘ç©éæ™‚é–“æœ€çŸ­çš„éŠæˆ²ã€‚ Blue Eyes White Dragon!! æˆ‘æœ‰ä¸€æ‰“!! å…¶å¯¦ä»–å€‘çŠ¯äº†å¸¸è¦‹çš„éŒ¯èª¤ï¼Œå°±æ˜¯æ‰€è¬‚ Atomic æ“ä½œåŸå‰‡ã€‚æœ‰äº›äº‹æƒ…æ˜¯å¿…é ˆä¸€èµ·å®Œæˆçš„ï¼Œå¦å‰‡å°±æ‡‰ç•¶å…¨éƒ¨éƒ½ä¸ç®—æ•¸ã€‚æ¯”å¦‚èªªï¼šã€Œæˆ‘ç”¨åå…ƒè²·äº†ä¸€æç­†ã€ï¼Œé‚£æˆ‘çš„éŒ¢åŒ…æ‡‰è©²è¦æ¸›å°‘åå…ƒï¼Œä¸¦ä¸”å¢åŠ ä¸€æç­†ã€‚é€™å…¶ä¸­æ¯å€‹å‹•ä½œç¼ºä¸€ä¸å¯ï¼šå¦‚æœéŒ¢åŒ…æ²’æ‰£éŒ¢ï¼Œå‰‡æ•´æ®µäº¤æ˜“æ‡‰è©²éƒ½è¦å¤±æ•—ä¸¦å›å¾©åˆ°åŸæœ¬çš„ç‹€æ…‹ã€‚é€™å¾ˆåŸºæœ¬å¾ˆåˆç†ã€‚æ­¤éŠæˆ²ä¸€æ¨£æ˜¯éŠç©æ‰£é«”åŠ›çš„æ©Ÿåˆ¶ï¼Œè—‰ç”±æœ‰é™é«”åŠ›ä¾†ä½¿ä¸€èˆ¬äººç„¡æ³•ç‹‚ç·´ç­‰ã€‚ä½†æŸ¥çœ‹å°åŒ…å¾Œç™¼ç¾ï¼Œä»–é–‹å§‹é—œå¡è·Ÿæ‰£é«”åŠ›æ˜¯å…©å€‹ä¸åŒçš„ APIï¼Œæ˜¯é€ééŠæˆ²å…ˆç™¼é€é–‹å§‹å†ç™¼é€æ‰£é«”åŠ›çš„è¨Šæ¯ï¼Œé€™æ¨£ä¸€ä¾†æˆ‘åªè¦ä¸€ç›´ç‹‚é‡é€é–‹å§‹ä½†ä¸é€æ‰£é«”åŠ›ï¼Œæˆ‘å°±å¯ä»¥ç„¡é™éŠç©åˆ·ç­‰ã€‚çœŸçš„å¤ªæ‰¯äº†â€¦.. å¦å¤–åœ¨è¨­è¨ˆ server side service æ™‚ï¼Œæœ‰ä¸€å€‹å¤§åŸå‰‡å°±æ˜¯ä¸å¯ä»¥ç›¸ä¿¡å®¢æˆ¶ç«¯é€ä¾†çš„è³‡æ–™ï¼Œæ°¸é å¿…é ˆåšé©—è­‰ã€‚ è€Œä¸”å®¢æˆ¶ç«¯ä¸è©²ç™¼é€çµæœï¼Œæ‡‰è©²åªç™¼é€æ¬²åŸ·è¡Œçš„æ“ä½œã€‚ç”¨å‰›å‰›çš„ä¾‹å­ä¾†èªªï¼šã€Œæˆ‘ç”¨åå…ƒè²·äº†ä¸€æç­†ï¼Œæˆ‘çš„éŒ¢åŒ…æ¸›å°‘åå…ƒï¼Œä¸¦ä¸”å¢åŠ ä¸€æç­†ã€‚ã€â†’ ç”±å®¢æˆ¶ç«¯è¨ˆç®—çµæœæ˜¯ä¸å¯ä»¥çš„ã€‚ã€Œæˆ‘è¦ç”¨åå…ƒè²·ä¸€æç­†ã€‚ã€â†’ åªç™¼é€æ¬²åŸ·è¡Œçš„æ“ä½œï¼Œå¯¦éš›çµæœæ‡‰ç”±ä¼ºæœå™¨ç«¯åŸ·è¡Œï¼Œæ‰èƒ½ç¢ºä¿åˆæ³•æ€§ã€‚ å”‰ï¼Œæœ¬éŠæˆ²çœŸçš„æ˜¯å¥‡è§€ã€‚ Messanger ç±ƒçƒã€è¶³çƒMessanger å…©å¹´å‰æ¨å‡ºå¯ä»¥åœ¨èŠå¤©å®¤å…§ç©ç±ƒçƒçš„å½©è›‹ï¼Œæµªè²»äº†æˆ‘ç„¡æ•¸å€‹å°æ™‚åœ¨é‚£é‚ŠæŠ•ç±ƒï¼Œå…¶å¯¦ä¹Ÿæ˜¯æœ‰è¾¦æ³•ä½œå¼Šçš„ã€‚å‰é¢æåˆ°æˆ‘ç›®å‰çŸ¥é“çš„æ–¹æ³•ä¸å¤–ä¹æ˜¯è—‰ç”±å°åŒ…æ””æˆªé‡é€ä¾†æ”»æ“Šæˆ–æ˜¯ç›´æ¥æ›´æ”¹è¨˜æ†¶é«”ä½ç½®çš„å€¼ï¼Œfacebook åœ¨ä¸­é–“äººæ”»æ“Šä¸‹äº†ä¸å°‘å·¥å¤«ï¼Œè‡³å°‘å°±æˆ‘çš„è§€å¯Ÿåªè¦ä½¿ç”¨ä»»ä½• Proxy server ä¼¼ä¹éƒ½æœƒç„¡æ³•æ­£å¸¸ä½¿ç”¨ Messangerï¼Œæ‰€ä»¥å°åŒ…æ””æˆªé‡é€é€™æ¢è·¯å°±å¾ˆé›£èµ°äº†ã€‚ å‰©ä¸‹è©¦è©¦ç›´æ¥æ›´æ”¹è¨˜æ†¶é«”ä½ç½®å§ï¼ŒåŸºæœ¬ä¸ŠåŸç†å°±æ˜¯æƒéå…¨éƒ¨æ­¤æ‡‰ç”¨ç¨‹å¼ç”¨åˆ°çš„è¨˜æ†¶é«”ä½ç½®ä¸¦å°‹æ‰¾æŒ‡å®šçš„æ•¸å€¼ã€‚æ¯”å¦‚èªªæŠ•ç±ƒå¥½äº†ï¼ŒæŠ•é€² 1 åˆ†æ™‚å…ˆå°‹æ‰¾è¨˜æ†¶é«”ä¸­æ•¸å€¼ç­‰æ–¼ 1 çš„ï¼Œå†æŠ•é€²ä¸€æ¬¡å°±é€²ä¸€æ­¥æœå°‹æ•¸å€¼ç­‰æ–¼ 2 çš„è¨˜æ†¶é«”ä½ç½®ï¼Œä»¥æ­¤é¡æ¨ç›´åˆ°ç²¾ç¢ºåœ°æ‰¾åˆ°ä»£è¡¨åˆ†æ•¸çš„è¨˜æ†¶é«”ä½ç½®ï¼Œå†ä¿®æ”¹å…¶å€¼ã€‚ æ‰¾åˆ°å°çš„è¨˜æ†¶é«”ä½ç½®ï¼Œæˆç‚ºçŒç±ƒé«˜æ‰‹ä¸æˆå•é¡Œï¼ å¾ˆéºæ†¾çš„æ˜¯å¦‚æœéŠæˆ²æ˜¯å–®æ©ŸéŠæˆ²ï¼ŒåŸºæœ¬ä¸Šæ˜¯ä¸å¯èƒ½é˜²æ­¢è¨˜æ†¶é«”ç«„æ”¹çš„[2]ï¼Œåªèƒ½è®“ä»–è®Šæ›´é›£ä¿®æ”¹æ²’è¾¦æ³•å®Œå…¨é˜²æ­¢ã€‚æ¯”è¼ƒå¸¸è¦‹çš„åšæ³•æ˜¯å¢åŠ ä¸€å€‹ dirty check çš„æª¢æŸ¥å€¼ï¼Œæ¯”å¦‚èªªåˆ†æ•¸çš„å¹³æ–¹ã€‚åœ¨é€™æ¨£çš„è¨­è¨ˆä¸‹ï¼Œç•¶ä½ çš„åˆ†æ•¸è¢«ç«„æ”¹æˆ æ™‚ï¼Œä½ çš„æª¢æŸ¥å€¼å¦‚æœä¸æ˜¯ ï¼Œé‚£å°±ä»£è¡¨æœ¬æ¬¡åˆ†æ•¸ä¸åˆæ³•ã€‚ä½†èªªå¯¦åœ¨çš„é€™ç¨®æ–¹å¼é˜²å›å­ä¸é˜²å°äººï¼ŒçœŸçš„æœ‰è€å¿ƒçš„é‚„æ˜¯æ‰¾å¾—å‡ºæª¢æŸ¥å€¼ä¸¦åŠ ä»¥ä¿®æ”¹â€¦ã€‚ ä¸éå…¶å¯¦é€™é¡çš„é˜²ç¦¦æ€§è¨­è¨ˆæœ‰æ™‚å€™æ ¹æœ¬ä¸è¦‹å¾—éœ€è¦ï¼Œä»¥æˆ‘ä¸Šè¿°æåˆ°çš„ä¾‹å­è€Œè¨€ï¼Œé™¤äº†éŠæˆ²ç‹ç¼ºé™·å¤ªåš´é‡ä»¥å¤–ï¼Œå…¶å¯¦å…¶ä»–çš„éƒ½ä¸è¦‹å¾—éœ€è¦åšæ”¹å–„ã€‚åƒæ˜¯ Metal Slug Attack ç„¡æ³•åšåˆ°æ•¸æ“šçš„ç¯¡æ”¹ï¼Œèƒ½åšåˆ°çš„åªæœ‰è‡ªå‹•èŠ±é«”åŠ›åˆ·é—œï¼›è€Œ Messanger çš„éŠæˆ²æ ¹æœ¬æ˜¯é¡å–®æ©ŸéŠæˆ²ï¼Œå°±ç®—æ‹¿é«˜åˆ†ä¹Ÿåªæ˜¯è‡ªçˆ½ã€‚ æ‰€ä»¥åˆ°é ­ä¾†ï¼Œæœ€æœ‰è¶£çš„é‚„æ˜¯å°‹æ‰¾ç³»çµ±ç¼ºå¤±çš„éç¨‹å§â€¦ğŸ˜… References Cryptographic nonce How do I prevent memory-modification cheats? h1+ol { list-style-type: none; counter-reset: list-counter; padding-left: 0; } h1+ol li { position: relative; padding-left: 3em; } h1+ol li::before { counter-increment: list-counter; content: \"[\" counter(list-counter) \"] \"; position: absolute; left: 0; width: 25px; text-align: right; }","categories":[],"tags":[{"name":"trashtalk","slug":"trashtalk","permalink":"https://ssarcandy.tw/tags/trashtalk/"}]},{"title":"Ways to Access Internal Network","slug":"Ways-to-Access-Internal-Network","date":"2019-08-11T19:02:06.000Z","updated":"2025-10-22T00:51:26.604Z","comments":true,"path":"2019/08/11/Ways-to-Access-Internal-Network/","link":"","permalink":"https://ssarcandy.tw/2019/08/11/Ways-to-Access-Internal-Network/","excerpt":"ä¸€èˆ¬çš„å…¬å¸æˆ–è€…å¯¦é©—å®¤éƒ½æœƒéš”é›¢å…§éƒ¨è³‡æºï¼Œåªç•™ä¸€å€‹çµ±ä¸€çš„å°å¤–å‡ºå£ä¾†é”åˆ°æ¯”è¼ƒé«˜çš„å®‰å…¨æ€§ä»¥åŠè®“ç³»çµ±ç®¡ç†è€…è¼ƒå¥½æ§ç®¡ã€‚ä½†æ˜¯è¼ƒé«˜çš„å®‰å…¨æ€§ç¸½æ˜¯æœƒå¸¶ä¾†ä¸ä¾¿ï¼Œé€™ç¨®éš”é›¢å…§éƒ¨è³‡æºçš„æ¶æ§‹å°è‡´æˆ‘å€‘ç„¡æ³•ç›´æ¥å­˜å–å…§éƒ¨è³‡æºï¼Œè¦é€éä¸€äº›æ‹å½æŠ¹è§’çš„æ–¹å¼ä¾†å­˜å–ã€‚","text":"ä¸€èˆ¬çš„å…¬å¸æˆ–è€…å¯¦é©—å®¤éƒ½æœƒéš”é›¢å…§éƒ¨è³‡æºï¼Œåªç•™ä¸€å€‹çµ±ä¸€çš„å°å¤–å‡ºå£ä¾†é”åˆ°æ¯”è¼ƒé«˜çš„å®‰å…¨æ€§ä»¥åŠè®“ç³»çµ±ç®¡ç†è€…è¼ƒå¥½æ§ç®¡ã€‚ä½†æ˜¯è¼ƒé«˜çš„å®‰å…¨æ€§ç¸½æ˜¯æœƒå¸¶ä¾†ä¸ä¾¿ï¼Œé€™ç¨®éš”é›¢å…§éƒ¨è³‡æºçš„æ¶æ§‹å°è‡´æˆ‘å€‘ç„¡æ³•ç›´æ¥å­˜å–å…§éƒ¨è³‡æºï¼Œè¦é€éä¸€äº›æ‹å½æŠ¹è§’çš„æ–¹å¼ä¾†å­˜å–ã€‚ å¾ä»¥å‰ç•¶ç¶²ç®¡åˆ°ç¾åœ¨å·¥ä½œä¸€é™£å­ä¹‹å¾Œï¼Œå› ç‚ºå¸¸å¸¸åœ¨å®¶å·¥ä½œ(åŠ ç­?)ï¼Œä¹Ÿç´¯ç©äº†ä¸å°‘å­˜å–å…§éƒ¨è³‡æºçš„æ–¹å¼ï¼Œæœ¬ç¯‡å°±æ˜¯ç´€éŒ„ä¸€ä¸‹é€™äº›æ–¹å¼ï¼Œä»¥å…æˆ‘é€™å€‹é‡‘é­šè…¦ä»¥å¾Œåˆå¿˜è¨˜â€¦. VPNä½¿ç”¨ VPN ä¾†å­˜å– LAN è³‡æºæˆ‘æƒ³æ˜¯æœ€ç°¡å–®ç›´è¦ºçš„äº†ï¼Œå‰ææ˜¯å…¬å¸æˆ–å¯¦é©—å®¤æœ‰æä¾› VPN server å˜¿ã€‚é˜¿å‡è¨­ä½ æ˜¯ç³»çµ±ç®¡ç†è€…ä¸”ä½ å€‘æƒ³æä¾› VPN æœå‹™ï¼Œæˆ‘æœƒæ¨è–¦ä½¿ç”¨ OpenVPN serverï¼Œç°¡å–®æ˜“ç”¨ã€‚ç„¶å¾Œæˆ‘ä¹‹å‰æœ‰çœ‹åˆ°ä¸€å€‹å¤§ç¥å¯«äº†å€‹ä¸€éµæ¶è¨­ VPN server çš„ scripté€™å€‹ script å¾å®‰è£ï¼Œæ–°å¢&#x2F;åˆªé™¤ä½¿ç”¨è€…ï¼Œ æ‡‰æœ‰ç›¡æœ‰ï¼Œå ªç¨±ç„¡æ•µ(?) OpenVPN client ç«¯è¨­å®šå¾ˆç°¡å–®ï¼Œåªè¦åŒ¯å…¥é å…ˆç”¢ç”Ÿçš„é‡‘é‘° (.ovpn) è‡³ client ç«¯æ‡‰ç”¨ç¨‹å¼å³å¯ã€‚OpenVPN client ç«¯æ‡‰ç”¨ç¨‹å¼ä¹Ÿæ˜¯ååˆ†å®Œå‚™ï¼Œç„¡è«– Windows&#x2F;Mac&#x2F;Android&#x2F;iOS å…¨éƒ½æœ‰ï¼çœŸçš„å¯ä»¥åšåˆ°éš¨æ™‚éš¨åœ°ï¼Œæ‰‹æ©Ÿæ‹¿èµ·ä¾†å°±å¯ä»¥å·¥ä½œâ€¦? SSHå¦‚æœæœ‰æ™‚å€™ä½ åªæ˜¯éœ€è¦å­˜å–æŸå°å…§éƒ¨ serverï¼Œåªéœ€è¦ terminal ç’°å¢ƒï¼Œé‚£å…¶å¯¦ç›´æ¥ä½¿ç”¨ ssh ç™»å…¥å³å¯ã€‚å¦‚åŒå¼•è¨€æ‰€èªªï¼Œã€Œé€šå¸¸ä¸€èˆ¬çš„å…¬å¸æˆ–è€…å¯¦é©—å®¤éƒ½æœƒéš”é›¢å…§éƒ¨è³‡æºï¼Œåªç•™ä¸€å€‹çµ±ä¸€çš„å°å¤–å‡ºå£ã€ï¼Œé‚£å…¶å¯¦å¯ä»¥é€éé‚£å°å°æœ›å‡ºå£ç•¶ä½œè·³æ¿ï¼Œä½¿ç”¨å…©æ¬¡ ssh ä¾†åšåˆ°ç™»å…¥ä½ æƒ³è¦ç”¨çš„æ©Ÿå™¨ã€‚ 12ssh -i ssh_key_path -p port username@office.domain.comssh username@my_computer å¦å¤–å¯ä»¥è¨­å®š ssh_config ä¾†çœå»æ¯æ¬¡éƒ½è¦æ‰“ä¸€é•·ä¸²çš„æŒ‡ä»¤ï¼Œè¨­å®šåƒé€™æ¨£ï¼š 123456789101112Host office User username HostName office.domain.com Port 56789 IdentityFile ssh_key_path Host my_computer_in_lan User username HostName 192.168.0.xx ProxyJump office # If is Windows: use ProxyCommand: # ssh.exe office -W %h:%p é€™æ¨£å°±åªéœ€è¦è¼¸å…¥ ssh my_computer_in_lan å³å¯ã€‚ ç„¶å¾Œçµ¦å€‹å°å»ºè­°ï¼Œç³»çµ±ç®¡ç†è€…åœ¨è¨­å®šå°å¤– ssh æœå‹™æ™‚ï¼Œç›¡é‡è¨­å®šæˆåªå…è¨± ssh-key ç™»å…¥ï¼Œä¸¦ä¸”æŠŠ ssh port æ”¹æˆåˆ¥çš„ (ä¸è¦ç”¨é è¨­ 22)ã€‚ç¶²è·¯ä¸–ç•Œå¾ˆå¯æ€• der~~ ç”¨é è¨­è¨­å®šå°±ä¸è¦æŠ±æ€¨å¤©å¤©è¢«æƒ port æˆ–è¢«æš´åŠ›ç ´è§£å¯†ç¢¼ (æƒ³ç•¶åˆå¯¦é©—å®¤æŸä¼ºæœå™¨ root å¸³è™Ÿè¢«æš´åŠ›ç ´è§£ï¼Œæœ€å¾Œåªå¥½é‡çŒQQ)ã€‚ SSH tunnel + browser proxyé‚£å‡è¨­ä½ å€‘çš„ç¶²ç®¡ä¸é¡˜æ„æä¾› VPN æœå‹™ï¼Œä½ åˆæƒ³å­˜å–å…§éƒ¨ç¶²é ä¹‹é¡çš„æœå‹™ï¼ŒåŒ¹å¦‚èªªå…§éƒ¨è‡ªæ¶çš„ GitLabï¼Œæ€è¾¦ï¼Ÿæ²’é—œä¿‚é‚„æ˜¯æœ‰æ‹›ï¼Œé€™æ‹›å«åšä½¿ç”¨ ssh tunnel + browser proxyã€‚è½èµ·ä¾†å¾ˆè¤‡é›œï¼Ÿå…¶å¯¦é‚„å¥½å•¦ï¼Œé€™æ–¹æ³•åˆ†ç‚ºå…©éƒ¨åˆ†ï¼š æ‰“é€š ssh tunnelssh å…¶å¯¦æ˜¯ä¸€å€‹å¾ˆå¼·å¤§çš„å·¥å…·ï¼Œè—‰ç”±ä»–å…¶å¯¦å¯ä»¥åšåˆ°æ‰“é–‹ä¸€å€‹é€šé“ï¼Œå¾ä½ çš„é›»è…¦é€£é€šé“çµ„ç¹”çš„å–®ä¸€çš„å°å¤–å‡ºå£ï¼Œè®Šæˆèªªåªè¦é€éé€™å€‹ tunnel ï¼Œå°±ç­‰åŒé€£çµåˆ°å…¬å¸çš„é‚£å°å°å¤–çš„é›»è…¦ä¸Šã€‚æŒ‡ä»¤å¦‚ä¸‹ï¼š 12345ssh -i ssh_key_path \\ # As usual, use ssh key to access is better -p 56789 \\ # Your ssh server port -vvv \\ # robust logging -NfD 12345 \\ # N: do nothing, f: in background, D: create socket5 proxy username@office.domain.com é€™ç¥å¥‡æŒ‡ä»¤å¹«ä½ æ‰“é€šä¸€å€‹ socket5 çš„é€šé“ï¼Œç„¶å¾Œå†è¨­å®šç€è¦½å™¨å»ä½¿ç”¨é€™å€‹ proxyï¼Œå°±å¯ä»¥é”æˆè·Ÿ vpn ä¸€æ¨£çš„æ•ˆæœï¼ è¨­å®šç€è¦½å™¨æˆ‘é€™é‚Šåˆ—å‡ºåœ¨ Mac è·Ÿ Windows ä¸Šè¨­å®š proxy çš„æ–¹å¼ï¼Œä½†æˆ‘æƒ³å…¶ä»–ç€è¦½å™¨ä¸€å®šä¹Ÿæœ‰å°æ‡‰çš„æ–¹å¼è¨­å®šã€‚ Mac: open -a &quot;Google Chrome&quot; --args --proxy-server=&quot;socks5://localhost:12345&quot; Windows: åœ¨ chrome ä¸Šæ¡ˆå³éµ &gt; å…§å®¹ &gt; ç›®æ¨™: &quot;C:\\Program Files (x86)\\Google\\Chrome\\Application\\chrome.exe&quot; --proxy-server=&quot;socks5://localhost:12345&quot; Use VSCode to access remote projectæœ‰æ™‚å€™å…¶å¯¦åªæ˜¯æƒ³ç”¨é ç«¯é›»è…¦å¯«ç¨‹å¼ï¼Œç”¨ ssh ç•¶ç„¶ä¹Ÿå¯ï¼Œåªæ˜¯å°±æ˜¯é™åˆ¶åªèƒ½ç”¨ vim ä¹‹é¡çš„ç·¨è¼¯å™¨ã€‚VSCode æœ€è¿‘æ¨å‡ºäº†å¯¦ç”¨çš„ remote-ssh åŠŸèƒ½ï¼Œè®“åœ¨å®¶ä¹Ÿå¯ä»¥ä½¿ç”¨é ç«¯é›»è…¦é–‹ç™¼ã€‚ å¯åƒè€ƒ ssh é‚£æ®µä¾†è¨­å®šå¥½ ssh_configï¼Œå…¶ä»–å°±å¦‚åŒå¹³å¸¸ä½¿ç”¨ vscode ä¸€æ¨£ï¼Œååˆ†æ–¹ä¾¿ã€‚ é›œè«‡: æœ€è¿‘å¾ˆå¤šæƒ³å¯«æƒ³ç•™å€‹ç´€éŒ„çš„æ±è¥¿ï¼Œä½†ç¸½æ˜¯æœ‰é»æ²’æ™‚é–“å¯« (æˆ–æ‡¶?) æœ¬ç«™æœ€è¿‘çªç ´å››è¬ç€è¦½å›‰ï½ï¼æ­å–œå››è¬äººæµªè²»äº†äº”åˆ†é˜ (å¹³å‡ç¶²é åœç•™æ™‚é–“)","categories":[],"tags":[{"name":"unix","slug":"unix","permalink":"https://ssarcandy.tw/tags/unix/"},{"name":"note","slug":"note","permalink":"https://ssarcandy.tw/tags/note/"}]},{"title":"Monitoring: from Handcraft to Prometheus","slug":"Monitoring-from-Handcraft-to-Prometheus","date":"2019-06-10T16:41:55.000Z","updated":"2025-10-22T00:51:26.604Z","comments":true,"path":"2019/06/10/Monitoring-from-Handcraft-to-Prometheus/","link":"","permalink":"https://ssarcandy.tw/2019/06/10/Monitoring-from-Handcraft-to-Prometheus/","excerpt":"èº«ç‚ºä¸€å€‹ç³»çµ±ç®¡ç†è€…ï¼Œæ™‚å¸¸è¦èŠ±æ™‚é–“ç¢ºä¿ç³»çµ±æ­£å¸¸é‹è¡Œï¼Œé€™æ™‚ä¸€å€‹å¥½çš„ç›£æ§ç³»çµ±å°±å¾ˆé‡è¦ï¼Œå°‡æ‰€æœ‰å¿…è¦çš„è³‡è¨Šçµ±æ•´åœ¨ä¸€å€‹ç•«é¢ä¸Šä¸€ç›®ç­ç„¶ï¼Œæ—¢èƒ½ç¯€çœæ™‚é–“ï¼Œç•¶æœ‰å•é¡Œæ™‚åˆèƒ½å¿«é€Ÿæ‰¾å‡ºå•é¡Œæ‰€åœ¨ï¼Œå¥½è™•å¤šå¤šã€‚","text":"èº«ç‚ºä¸€å€‹ç³»çµ±ç®¡ç†è€…ï¼Œæ™‚å¸¸è¦èŠ±æ™‚é–“ç¢ºä¿ç³»çµ±æ­£å¸¸é‹è¡Œï¼Œé€™æ™‚ä¸€å€‹å¥½çš„ç›£æ§ç³»çµ±å°±å¾ˆé‡è¦ï¼Œå°‡æ‰€æœ‰å¿…è¦çš„è³‡è¨Šçµ±æ•´åœ¨ä¸€å€‹ç•«é¢ä¸Šä¸€ç›®ç­ç„¶ï¼Œæ—¢èƒ½ç¯€çœæ™‚é–“ï¼Œç•¶æœ‰å•é¡Œæ™‚åˆèƒ½å¿«é€Ÿæ‰¾å‡ºå•é¡Œæ‰€åœ¨ï¼Œå¥½è™•å¤šå¤šã€‚ å¾å‰å¾å‰ï¼Œåœ¨æˆ‘é‚„å°çš„æ™‚å€™ï¼ˆå¤§æ¦‚ä¸‰å››å¹´å‰ï¼‰ï¼Œæˆ‘ç§Ÿäº†ä¸€å°å°çš„ Ubuntu cloud server ä¾†è·‘ä¸€äº›å°å°ˆæ¡ˆï¼Œå¾é‚£æ™‚å€™é–‹å§‹æˆ‘å°±ä¸€ç›´æƒ³è¦ä¸€å€‹å¯ä»¥ç›£æ§ç¨‹å¼æˆ–è€…ä¼ºæœå™¨çš„ç‹€æ…‹çš„æ±è¥¿ï¼Œé‚£æ™‚å€™æŸ¥åˆ°äº† pm2 monitor è·Ÿ netdata ï¼Œå…¶ä¸­ netdata é‚£æ™‚å€™æåŠå¤©å¼„ä¸å¥½ï¼ˆç¾åœ¨æœ‰äº† docker å¤§æ¦‚ä¸€ç§’å°±æå®šå§ï¼‰ï¼Œå†åŠ ä¸Šæˆ‘æ¯”è¼ƒåœ¨æ„æˆ‘çš„ node.js çš„ç¨‹å¼ç‹€æ…‹ï¼Œæœ€å¾Œé¸æ“‡ä½¿ç”¨ pm2 monitorã€‚ pm2 monitor screenshot éä¸€é™£å­å¾Œï¼Œæ­£å¥½æœ‰æ©Ÿæœƒæˆç‚º CMLab çš„ç¶²ç®¡ï¼Œä¸€ä¸‹å­è¦ç®¡çš„æ©Ÿå™¨å¾åŸæœ¬è‡ªå·±çš„ä¸€å°è®Šæˆè¶…éäºŒåå°ï¼Œåˆé‡æ–°è®“æˆ‘æ€è€ƒè©²æ€éº¼æ‰èƒ½å¥½å¥½ç›£æ§é€™äº›æ©Ÿå™¨çš„ç‹€æ…‹ã€‚é‚£æ™‚å€™å‰äººï¼ˆå­¸é•·å§Šå§?ï¼‰ç•™ä¸‹ä¾†çš„ä¸€å€‹ç¶²é ï¼Œæ¡ç”¨ snmp å”å®šå°‡å„å°è³‡æ–™å½™æ•´è‡³ web serverï¼Œå¯¦ä½œä¸Šä½¿ç”¨ perl å½™æ•´ä¸¦ç”¢ç”Ÿ HTML æª”ï¼Œå‘ˆç¾å¦‚ä¸‹ï¼š è€å¯¦èªªé›–ç„¶ç°¡é™‹ï¼Œä½†å®Œå…¨å¯ä»¥ä¸€ç›®ç­ç„¶å„å°æ©Ÿå™¨ç‹€æ³ï¼Œå¯ä»¥ç¨±åšä¸€å€‹ä¸éŒ¯çš„ç›£æ§ç³»çµ±äº†ï¼Œé‚£æ™‚å€™æˆ‘ä¹ŸåŸºæ–¼é€™å€‹ç¶²é å†å¯¦ä½œé¡å¤–çš„è‡ªå‹•è­¦å ±ç³»çµ±ï¼Œç•¶è¨˜æ†¶é«”æˆ– CPU ç”¨é‡éé«˜æ™‚ï¼Œç™¼è­¦è¨Šåˆ°æˆ‘çš„ Facebook Messanger ç¾¤çµ„ã€‚é †ä¾¿å‘¢ä¹Ÿå¯«äº†ä¸€ç¯‡æ–‡ç« è¨˜éŒ„ï¼š ç”¨ Facebook èŠå¤©æ©Ÿå™¨äººç•¶é€šçŸ¥ç³»çµ± å¾é‚£æ™‚å€™ä¹‹å¾Œæˆ‘å°±ç§‰æŒè‘—è¦å•¥è‡ªå·±å¹¹çš„åŸå‰‡ï¼Œåˆåˆ©ç”¨é¡ä¼¼ Pull Based çš„æ–¹å¼ç”±ä¸€å°æ©Ÿå™¨æ•´åˆçš„ä½œæ³•ï¼Œå¯¦ä½œå‡ºå¦ä¸€å¥—å°ˆé–€ç›£æ§å¤šå° GPU ä¼ºæœå™¨çš„ Multi-server GPU status monitorï¼Œå¯¦é©—å®¤å¤§å®¶çœ‹èµ·ä¾†ä¹Ÿæ˜¯æŒºå–œæ­¡é€™å€‹çš„ (é‚„æ›¾è¢«æ•™æˆé—œæ³¨è¡¨ç¤ºè®š ğŸ¥°)ï¼Œè‡³ä»Šä»åœ¨é‹ä½œä¹Ÿä»¤æˆ‘ç›¸ç•¶é–‹å¿ƒï½ Multi-server GPU status monitor æš¨ç”¨é‡æª¢èˆ‰ç³»çµ±ä¸€éš… æ™‚é–“å¿«è½‰åˆ°è¿‘æœŸï¼Œåˆé‡åˆ°ä¸€æ¨£çš„ç‹€æ³ï¼šåŒæ¨£æœ‰ä¸€å †æ©Ÿå™¨è¦ç›£æ§ã€‚æ–¼æ˜¯æˆ‘å°±åˆå†è‡ªå¹¹äº†ä¸€å¥—ï¼Œåªæ˜¯é€™æ¬¡å¯¦ä½œæ–¹å¼ä¸¦éæ˜¯å„è‡ªç”¢ç”Ÿè³‡æ–™å†ç”±ä¸€å°å½™æ•´çš„ä½œæ³•ï¼Œè€Œæ˜¯ä¸€å°æ©Ÿå™¨ä¸»å‹•å»å„å°é›»è…¦æ’ˆå–ç‹€æ…‹ã€‚ç•¶ç„¶ï¼Œé€™æ¬¡é‡ä½œçµ•å°æ˜¯åšå¾—æ¯”ä»¥å‰å¯¦é©—å®¤é‚£ç”¨ perl å¯«çš„ä¾†çš„å¥½ç¶­è­·è¨±å¤šï¼Œå¤–è§€ä¸Šä¹Ÿæ¯”è¼ƒæ¼‚äº®ï½ ç¤ºæ„åœ–ã€‚ä»»ä½•ç‹€æ…‹: æ©Ÿå™¨æ­»æ‰ã€é–’ç½®ã€ç›®å‰ä½¿ç”¨ç‹€æ³éƒ½é¡¯ç¤ºåœ¨åŒä¸€å€‹ç•«é¢ä¸Šã€‚ ä¾èˆŠæ˜¯è¦å•¥è‡ªå·±åšã€é«˜åº¦å®¢è£½åŒ–ï¼Œæ•´åˆæ‰€æœ‰æˆ‘æƒ³çŸ¥é“çš„äº‹æƒ…ï¼Œç¨å¾®ä¸ä¸€æ¨£çš„æ˜¯é€™æ¬¡æˆ‘å°‡å‰å¾Œåˆ†é›¢ï¼Œè³‡æ–™æœé›†å™¨è² è²¬è’é›†æˆ‘åœ¨æ„çš„è³‡æ–™ (metrics)ï¼Œå­˜æˆ JSON file ç›´æ¥ç”±å‰ç«¯æŠ“å–ï¼Œè³‡æ–™å½¢å¼å¤§è‡´å¦‚ä¸‹ï¼š 1234567891011121314151617181920[ &#123; &quot;Server&quot;: &quot;research01&quot;, &quot;Uptime&quot;: &quot;178 days&quot;, &quot;Users&quot;: &quot;2 users&quot;, &quot;1m Load&quot;: &quot;0.29&quot;, &quot;5m Load&quot;: &quot;0.34&quot;, &quot;15m Load&quot;: &quot;0.56&quot;, &quot;CPU cores&quot;: &quot;8&quot;, &quot;MemTotal&quot;: &quot;20440876&quot;, &quot;MemAvailable&quot;: &quot;12715432&quot;, &quot;SwapTotal&quot;: &quot;9389048&quot;, &quot;SwapFree&quot;: &quot;8332180&quot;, &quot;DiskTotal&quot;: &quot;531G&quot;, &quot;DiskUsed&quot;: &quot;264G&quot;, &quot;Disk%&quot;: &quot;52&quot;, &quot;Update Time&quot;: &quot;16:15&quot; &#125;, ...] é€™æ¨£åšçš„å¥½è™•æ˜¯é€™äº› metrics å¯ä»¥ç›´æ¥è¢«å…¶ä»–äººå­˜å–ï¼Œåƒæ˜¯æˆ‘å¦å¤–ç”¨ React Native ä¾†åšæ‰‹æ©Ÿç‰ˆçš„ Dashboardï¼›ä»¥åŠä¸€äº› Alerter å°±æ˜¯ç›´æ¥è®€å–é€™å€‹ JSONï¼Œæœ‰åˆ¥æ–¼ä¹‹å‰å¯«çš„ Facebook Messanger Alerter å»çˆ¬ç¶²é æ‰å¾—åˆ°è³‡æ–™ï¼Œå°‘ç¹ä¸€åœˆã€‚ ç„¶è€Œå°±åœ¨æœ€è¿‘ï¼Œæœ‰åŒäº‹å°±èªªï¼šé˜¿å¹¹å˜›ä¸ç”¨ Prometheus ? ç ”ç©¶ä¸€ä¸‹æ‰ç™¼ç¾ï¼Œå—¯â€¦é€™æ±è¥¿çœŸçš„å¾ˆå²å®³ XDæœ‰ Prometheus ç•¶ metric collectorï¼ŒåŠ ä¸Š Grafana é«˜åº¦å®¢è£½åŒ–çš„å‰ç«¯ Dashboardï¼Œè¦ç›£æ§ç”šéº¼å¹¾ä¹åªå‰©è¦å¯¦ä½œ exporter è€Œå·²ï¼ˆè€Œä¸”å¤§éƒ¨åˆ†ç‹€æ³éƒ½æœ‰ç¾æˆçš„ï¼‰ã€‚ æ•´å€‹å¿ƒè·¯æ­·ç¨‹èµ°éä¾†ï¼Œå¾ä¸€é–‹å§‹ç”¨ç°¡å–®çš„ç¾æˆå·¥å…· &#x3D;&gt; è‡ªå¹¹ &#x3D;&gt; è‡ªå¹¹ï¼ˆå‰å¾Œç«¯åˆ†é›¢ï¼‰&#x3D;&gt; åˆ°æœ€å¾Œåˆå›åˆ°ä½¿ç”¨ç¾æˆä½†æ›´æˆç†Ÿçš„å·¥å…·â€¦ æœ‰ç¨®ç¹äº†ä¸€åœˆçš„æ„Ÿè¦ºå“ˆå“ˆã€‚ä½†æˆ‘é‚„æ˜¯èªçœŸè¦ºå¾—æˆ‘è‡ªå·±åšçš„ Dashboard æ¯” Grafana å¥½çœ‹â€¦","categories":[],"tags":[{"name":"unix","slug":"unix","permalink":"https://ssarcandy.tw/tags/unix/"},{"name":"trashtalk","slug":"trashtalk","permalink":"https://ssarcandy.tw/tags/trashtalk/"}]},{"title":"Setup Slurm Cluster","slug":"Setup-Slurm-Cluster","date":"2019-03-16T15:06:53.000Z","updated":"2025-10-22T00:51:26.604Z","comments":true,"path":"2019/03/16/Setup-Slurm-Cluster/","link":"","permalink":"https://ssarcandy.tw/2019/03/16/Setup-Slurm-Cluster/","excerpt":"Slurm æ˜¯ä¸€å€‹å°ˆé–€æ‹¿ä¾†åšåˆ†æ•£å¼å¹³è¡Œé‹ç®—çš„å¹³å°ï¼Œå·²è¢«å„å¼è¶…ç´šé‹ç®—é›»è…¦ç¾¤é›†æ¡ç”¨[1]ã€‚è·Ÿ Hadoop å…¶å¯¦æœ‰é»åƒï¼Œä½†æ˜¯æˆ‘å€‹äººæ„Ÿè¦ºæ˜¯ Slurm å¥½ç”¨å¤ªå¤šï¼Œæ›´ç©©å®šæ›´å¿«é€Ÿï¼Œè€Œä¸”ä¸ç”¨æœƒ Javaâ€¦XDæœ€è¿‘å‰›å¥½æœ‰æ©Ÿæœƒéœ€è¦å»ºç«‹ä»¥åŠç®¡ç†ä¸€å€‹ Slurm Clusterï¼Œå°±æƒ³èªªä¾†è¨˜éŒ„ä¸€ä¸‹éç¨‹ä»¥åŠä¸€äº›é›·ã€‚","text":"Slurm æ˜¯ä¸€å€‹å°ˆé–€æ‹¿ä¾†åšåˆ†æ•£å¼å¹³è¡Œé‹ç®—çš„å¹³å°ï¼Œå·²è¢«å„å¼è¶…ç´šé‹ç®—é›»è…¦ç¾¤é›†æ¡ç”¨[1]ã€‚è·Ÿ Hadoop å…¶å¯¦æœ‰é»åƒï¼Œä½†æ˜¯æˆ‘å€‹äººæ„Ÿè¦ºæ˜¯ Slurm å¥½ç”¨å¤ªå¤šï¼Œæ›´ç©©å®šæ›´å¿«é€Ÿï¼Œè€Œä¸”ä¸ç”¨æœƒ Javaâ€¦XDæœ€è¿‘å‰›å¥½æœ‰æ©Ÿæœƒéœ€è¦å»ºç«‹ä»¥åŠç®¡ç†ä¸€å€‹ Slurm Clusterï¼Œå°±æƒ³èªªä¾†è¨˜éŒ„ä¸€ä¸‹éç¨‹ä»¥åŠä¸€äº›é›·ã€‚ å…ˆä¾†çœ‹ä¸€å¼µ Slurm æ¶æ§‹çš„åœ–ï¼ŒåŸºæœ¬ä¸Šæœ€é‡è¦çš„å…©å€‹æ±è¥¿å°±æ˜¯ (1) Slurm Controller (slurmctld) è·Ÿ (2) Slurm Compute Node (slurmd)ï¼ŒController æ˜¯æ‹¿ä¾†åˆ†é…ä»»å‹™ç”¨çš„ï¼Œä»–ç®¡ç†æ‰€æœ‰ Compute Nodeï¼Œè² è²¬æ±ºå®šå“ªå€‹ä»»å‹™è©²å»å“ªå€‹ Node åŸ·è¡Œï¼Œè€Œ Compute Node å°±æ˜¯çœŸçš„æœƒåŸ·è¡Œä»»å‹™çš„æ©Ÿå™¨ã€‚ Slurm æ¶æ§‹åœ–ã€‚ [2] æ‰€ä»¥è¦å»ºç½®ä¸€å€‹ Slurm Clusterï¼Œæœ€å°‘è¦å¼„ä¸€å€‹ Controller è·Ÿå¤šå€‹ Compute Nodesï¼Œè‡³æ–¼å…¶ä»–åƒæ˜¯ slurmdbd ç­‰ç­‰ï¼Œå°±ä¸¦ä¸æ˜¯å¿…éœ€çš„æ±è¥¿ã€‚ Preparationåœ¨é–‹å§‹å®‰è£ Controller è·Ÿ Compute Node ä¹‹å‰ï¼Œè¦å…ˆæº–å‚™ä¸€äº›äº‹æƒ…ï¼Œ éœ€è¦å®‰è£ mungeï¼Œé€é apt-get install libmunge-dev libmunge2 munge å³å¯ã€‚ éœ€è¦å‰µä¸€å€‹ slurm å¸³è™Ÿè·Ÿä¸€å€‹ munge å¸³è™Ÿï¼Œä¸¦ä¸”è¦åœ¨æ‰€æœ‰æ©Ÿå™¨ä¸Šéƒ½æœ‰é€™äº›å¸³è™Ÿ (uid ä¹Ÿå¿…é ˆä¸€è‡´)ã€‚ munge æ˜¯ slurm æ‹¿ä¾†åš Authentication çš„çµ„ä»¶ã€‚ 12345# Create a slurm user, and change it to some id, the is must same across nodes.$ useradd slurm; usermod slurm -u 151; groupmod -g 151 slurm; # Change the munge user id, the is must same across nodes.$ killall munged; usermod munge -u 150; groupmod -g 150 munge; chown munge:munge -R /var/log/munge/ /run/munge /var/lib/munge /etc/munge Setup Slurm Controllerä¸‹è¼‰åŸå§‹ç¢¼ä¾†ç·¨è­¯ç„¶å¾Œå®‰è£ 123cd /tmp; wget https://download.schedmd.com/slurm/slurm-18.08.2.tar.bz2; tar xvjf slurm-18.08.2.tar.bz2; cd slurm-18.08.2/(./configure --prefix=/usr &amp;&amp; make &amp;&amp; make install) | tee /tmp/slurm.setup.log 2&gt;&amp;1 é›–ç„¶ apt-get install slurm æœ‰æ±è¥¿ï¼Œä½†é‚£å€‹ä¸æ˜¯å°çš„â€¦ å®‰è£å¥½ä»¥å¾Œï¼Œå¯ä»¥é€éä¸€å€‹ç¶²é ä¾†è¨­å®šåŸºæœ¬çš„ config æª”ï¼Œé è¨­ä½ç½®åœ¨ /usr/share/doc/slurmctld/slurm-wlm-configurator.htmlï¼Œè¨­å®šå¥½ä»¥å¾Œå­˜æª”ä¸¦æ”¾è‡³ /etc/slurm-llnl/slurm.confã€‚è¨˜å¾—æ›´æ”¹æ¬Šé™ã€‚ç„¶å¾Œå°±å¯ä»¥å•Ÿç”¨ã€‚ 12345678# set slurmctld &amp; slurmdbd auto start via systemd (only for the controller)cp /tmp/slurm-18.08.2/etc/slurmctld.service /lib/systemd/system/slurmctld.servicecp /tmp/slurm-18.08.2/etc/slurmdbd.service /lib/systemd/system/slurmdbd.servicesystemctl daemon-reload # force systemd reload unitsystemctl enable slurmdbd slurmctld # force slurmdbd &amp; slurmctld start after the machine is readysystemctl start slurmdbd slurmctld # start slurmdbd &amp; slurmctldsystemctl status slurmdbd slurmctld # check slurmdbd &amp; slurmctld statussystemctl is-enabled slurmdbd slurmctld # check slurmdbd &amp; slurmctld enabled Setup Slurm Compute NodesSlurm Compute Node ä¹Ÿå¯ä»¥é€é apt å®‰è£ï¼Œä½†æ˜¯ç”±æ–¼æˆ‘éœ€è¦ä½¿ç”¨ slurm çš„ä¸€äº› apiï¼Œæ‰€ä»¥é€™éƒ¨åˆ†æœƒä½¿ç”¨å¾ source code å»ºç½®ã€‚ å…ˆå®‰è£ mungeï¼Œæ”¹ user id ä»¥åŠè¤‡è£½ munge key: 123456789# Copy munge key from slurm controller$ scp controller:/etc/munge/munge.key /etc/munge/ # Change the permissions$ chown munge:munge /etc/munge/munge.key$ chmod 400 /etc/munge/munge.key # Start munge service$ service munge start æ¥ä¸‹ä¾†å…ˆä¸‹è¼‰ slurm source codeï¼Œä¸¦ä¸” build 12345678910111213141516# Install slurm$ cd /tmp; wget https://download.schedmd.com/slurm/slurm-18.08.2.tar.bz2; tar xvjf slurm-18.08.2.tar.bz2; cd slurm-18.08.2/$ (./configure &amp;&amp; make &amp;&amp; make install) | tee /tmp/slurm.setup.log 2&gt;&amp;1 # Copy slurm.conf, and add slurm user$ mkdir /usr/etc /var/spool/slurmctld /var/spool/slurmd$ scp controller:/usr/etc/slurm.conf /usr/etc/slurm.conf$ useradd slurm; usermod slurm -u 151; groupmod -g 151 slurm; chown slurm:slurm -R /var/log/slurm* /run/slurm* /var/lib/slurm* /etc/slurm* /var/spool/slurm*# set slurmd auto start via system (for the controller and workers)cp /tmp/slurm-18.08.2/etc/slurmd.service /lib/systemd/system/slurmd.servicesystemctl daemon-reload # force systemd reload unitsystemctl enable slurmd # force slurmd start when the machine is ready.systemctl start slurmd # start slurmdsystemctl status slurmd # check slurmd statussystemctl is-enabled slurmd # check slurmd enabled åˆ°æ­¤åŸºæœ¬å®Œæˆ Slurm Cluster çš„è¨­å®šï¼Œå¯ä»¥é€éä¸€äº›æŒ‡ä»¤ä¾†æª¢æŸ¥ slurm çš„ç‹€æ…‹ã€‚ sinfo: æœƒé¡¯ç¤ºç›®å‰ cluster nodes çš„ç‹€æ…‹ 123PARTITION AVAIL TIMELIMIT NODES STATE NODELISTresearch* up infinite 1 idle research[01-10]research* up infinite 3 alloc research[11-15] squeue: é¡¯ç¤ºç›®å‰æ­£åœ¨åŸ·è¡Œ&#x2F;ç­‰å¾…åŸ·è¡Œçš„ä»»å‹™ 123456 JOBID PARTITION NAME USER ST TIME NODES NODELIST(REASON)578116 research test user123 R 0:06 1 research12578116 research test user123 R 0:06 1 research12578116 research test user123 R 0:06 1 research12578116 research test user123 R 0:13 1 research15578116 research test user123 R 0:16 1 research13 scancel: å–æ¶ˆä»»å‹™ é‚„æœ‰å¾ˆå¤šå…¶ä»–æŒ‡ä»¤ï¼Œå¯ä»¥çœ‹é€™å¼µ Cheat sheetã€‚ Some Common Issuesä½¿ç”¨çš„éç¨‹ä¸­ç¸½æ˜¯æœƒé‡åˆ°ä¸€äº›å¥‡å¥‡æ€ªæ€ªçš„å•é¡Œï¼Œé€™é‚Šå°±åˆ—èˆ‰ä¸€äº›æˆ‘å¸¸è¦‹çš„: Zero Bytes were transmitted or receivedåœ¨ä½¿ç”¨ slurm ç›¸é—œçš„æŒ‡ä»¤æ™‚å™´å‡ºçš„éŒ¯èª¤ã€‚é€™å€‹åŸºæœ¬ä¸Šæ˜¯å› ç‚º Authentication å‡ºéŒ¯ï¼ŒæŠŠæ‰€æœ‰ nodes çš„ munge é‡å•Ÿå°±æœƒè§£æ±ºã€‚ Slurm job stock in CG stateæœ‰æ™‚å€™æœƒç™¼ç¾æœ‰ä¸€äº› Job å°±æ˜¯ä¸€ç›´å¡åœ¨ Completing (CG state)ï¼Œé€™æ™‚å€™æŠŠé‚£å€‹ node è¨­ç‚º down å†è¨­ç‚º resume å°±æœƒæ¶ˆå¤±äº†ã€‚ 12$ scontrol update nodename=research04 state=down reason=job_stuck;$ scontrol update nodename=research04 state=resume Invalid job credentialé€™è¡¨ç¤ºæœ‰äº› node æ²’æœ‰ slurm, munge userï¼Œæˆ–è€…ä»–å€‘çš„ uid ä¸ä¸€è‡´ï¼Œè§£æ±ºæ–¹æ³•å°±æ˜¯æŠŠä»–å€‘è¨­ç‚ºä¸€è‡´ã€‚ References https://en.wikipedia.org/wiki/Slurm_Workload_Manager https://slurm.schedmd.com/overview.html h1+ol { list-style-type: none; counter-reset: list-counter; padding-left: 0; } h1+ol li { position: relative; padding-left: 3em; } h1+ol li::before { counter-increment: list-counter; content: \"[\" counter(list-counter) \"] \"; position: absolute; left: 0; width: 25px; text-align: right; }","categories":[],"tags":[{"name":"unix","slug":"unix","permalink":"https://ssarcandy.tw/tags/unix/"},{"name":"slurm","slug":"slurm","permalink":"https://ssarcandy.tw/tags/slurm/"},{"name":"note","slug":"note","permalink":"https://ssarcandy.tw/tags/note/"}]},{"title":"Mac ç¶­ä¿®å°è¨˜","slug":"mbpr2015-repair","date":"2018-08-17T20:13:08.000Z","updated":"2025-10-22T00:51:26.605Z","comments":true,"path":"2018/08/17/mbpr2015-repair/","link":"","permalink":"https://ssarcandy.tw/2018/08/17/mbpr2015-repair/","excerpt":"å‰é™£å­æˆ‘çš„ Macbook pro 13â€ (2015) å‡ºç¾å¥‡æ€ªçš„å•é¡Œï¼Œçªç„¶ä¸€ç›´è·³å‡ºè¨Šæ¯å«æˆ‘é€£æ¥è—èŠ½æ»‘é¼ ï¼Œå…§å»ºè§¸æ§æ¿è·Ÿéµç›¤å®Œå…¨å¤±éˆï¼Œçœ‹è‘—é›»è…¦ç™»å…¥ç•«é¢æˆ‘å»ä»€éº¼éƒ½åšä¸äº†ï¼Œè¶…ç´šå´©æ½°â€¦ å¾Œä¾†ç¨å¾®å¤šé‡é–‹æ©Ÿè©¦å¹¾æ¬¡ç™¼ç¾é€™ç¨®ç‹€æ³æœ‰æ™‚å€™æœƒæ¶ˆå¤±ï¼ŒæŸ¥ä¸€ä¸‹ç¶²è·¯ç™¼ç¾å¤§æ¦‚æœ‰å¹¾ç¨®å¯èƒ½ï¼Œä¸€æ˜¯ä¸»æ©Ÿæ¿å£äº†ï¼ŒäºŒæ˜¯éµç›¤è·Ÿæ»‘é¼ çš„é€£æ¥åˆ°ä¸»æ©Ÿæ¿çš„æ’ç·šå£äº†ã€‚ä½†æ˜¯é€™å…©ç¨®å£æ³•ä¿®çš„åƒ¹æ ¼å¯å·®è·ä¸å°‘ï¼Œæ‰€ä»¥æˆ‘å°±å …ä¿¡åªæ˜¯æ’ç·šå£äº†ï¼ˆï¼¸","text":"å‰é™£å­æˆ‘çš„ Macbook pro 13â€ (2015) å‡ºç¾å¥‡æ€ªçš„å•é¡Œï¼Œçªç„¶ä¸€ç›´è·³å‡ºè¨Šæ¯å«æˆ‘é€£æ¥è—èŠ½æ»‘é¼ ï¼Œå…§å»ºè§¸æ§æ¿è·Ÿéµç›¤å®Œå…¨å¤±éˆï¼Œçœ‹è‘—é›»è…¦ç™»å…¥ç•«é¢æˆ‘å»ä»€éº¼éƒ½åšä¸äº†ï¼Œè¶…ç´šå´©æ½°â€¦ å¾Œä¾†ç¨å¾®å¤šé‡é–‹æ©Ÿè©¦å¹¾æ¬¡ç™¼ç¾é€™ç¨®ç‹€æ³æœ‰æ™‚å€™æœƒæ¶ˆå¤±ï¼ŒæŸ¥ä¸€ä¸‹ç¶²è·¯ç™¼ç¾å¤§æ¦‚æœ‰å¹¾ç¨®å¯èƒ½ï¼Œä¸€æ˜¯ä¸»æ©Ÿæ¿å£äº†ï¼ŒäºŒæ˜¯éµç›¤è·Ÿæ»‘é¼ çš„é€£æ¥åˆ°ä¸»æ©Ÿæ¿çš„æ’ç·šå£äº†ã€‚ä½†æ˜¯é€™å…©ç¨®å£æ³•ä¿®çš„åƒ¹æ ¼å¯å·®è·ä¸å°‘ï¼Œæ‰€ä»¥æˆ‘å°±å …ä¿¡åªæ˜¯æ’ç·šå£äº†ï¼ˆï¼¸ æ—¢ç„¶éƒ½å…ä¸äº†è¦ç¶­ä¿®ä¸€è¶Ÿäº†ï¼Œåˆç”±æ–¼å®˜æ–¹çš„è¢å¹•è„«è†œæ›´æ›è¨ˆç•«è¦å®šæ˜¯è³¼è²·æ—¥å››å¹´å…§å¯å…è²»æ›´æ›ï¼Œæˆ‘é€™å°å‰›å¥½æ¥è¿‘éæœŸï¼Œå°±æƒ³èªªé †ä¾¿å°‡æˆ‘è¢å¹•ä¹Ÿæ›æ‰ã€‚æ‰€ä»¥æˆ‘æ‰“ç®—ç¶­ä¿®çš„å•é¡Œå°±æœ‰å…©ä»¶ï¼š ç¶­ä¿®éµç›¤æ»‘é¼ å¤±éˆ æ›´æ›è¢å¹• ä½†ç”±æ–¼æˆ‘è¢å¹•è„«è†œçš„æƒ…æ³éå¸¸è¼•å¾®ï¼Œå¤§æ¦‚åªæœ‰ä¸€å…©æ ¹ç´°ç·šèˆ¬çš„è„«è½ï¼Œæ‰€ä»¥æˆ‘å…ˆè·‘å»å­¸æ ¡å…§çš„æˆæ¬Šåº—è©¢å•é€™ç¨®ç‹€æ³æ˜¯ä¸æ˜¯å¯ä»¥æ›´æ›ï¼Œçµæœé¦¬ä¸Šè¢«æ‰“æ§èªªé€™éº¼è¼•å¾®ä¸å¯èƒ½å¯ä»¥æ›ï¼Œä¸ä¿¡è‡ªå·±å»ç›´ç‡Ÿåº—å•ã€‚ æ—¢ç„¶éƒ½è¢«é€™éº¼æ‰“æ§äº†ï¼Œæˆ‘å°±åªå¥½è½‰æˆ° 101 ç›´ç‡Ÿåº—æ‹‰â€¦ ä¹…èç›´ç‡Ÿåº—éå¸¸é›£æ’åˆ°ç¶­ä¿®ï¼Œæˆ‘æ¯å¤©é–‹ Genius Bar é ç´„ç¶­ä¿®ï¼Œç„¶å¾Œç„¡è«–å¹³æ—¥å‡æ—¥æ™‚æ®µæ°¸é æ˜¯æ»¿çš„ï¼Œéå¸¸é©šäººâ€¦å¾Œä¾†ç™¼ç¾æ“šèªª iPhone æœ‰ App å¯ä»¥æ¯”ç¶²é ç‰ˆå¤šæå‰é ç´„ä¸€å¤©ï¼Œæ ¹æœ¬æ­§è¦–é iPhone ç”¨æˆ¶â€¦é›£æ€ªç¶²é ç‰ˆæ°¸é é ç´„ä¸åˆ°ã€‚å˜—è©¦é ç´„å…©ä¸‰å¤©å¾Œæˆ‘å°±æ”¾æ£„äº†ï¼Œæ‰“ç®—ç›´æ¥è€—ä¸€æ•´å¤©å»ç¾å ´æ’å€™è£œç¶­ä¿®åé¡ã€‚å°±é€™æ¨£ï¼Œæˆ‘å¤§ç´„ä¸­åˆæ™‚åˆ»åˆ°é” 101 ç›´ç‡Ÿåº—ï¼Œé€²é–€å³æ‰‹é‚Šå°±æ˜¯ Genius Bar æ’éšŠçš„åœ°æ–¹ã€‚æ’åˆ°ä»¥å¾Œæœƒå¯„ä¸€å°ç°¡è¨Šä¾†ï¼Œä¸¦åœ¨å¿«è¼ªåˆ°æ™‚æœƒå†å¯„ä¸€å°ä¾†æé†’ï¼Œæˆ‘è‡ªå·±å¤§æ¦‚æ˜¯ç­‰äº†äº”å€‹å°æ™‚æ‰è¼ªåˆ°æˆ‘â€¦ è¼ªåˆ°æˆ‘ä¹‹å¾Œå°±è¦æˆ‘æè¿°ç‹€æ³ï¼Œå¯ä»¥çš„è©±å„˜é‡ç›´æ¥é‡ç¾å•é¡Œçµ¦ä»–å€‘çœ‹ï¼Œå°±æœƒæ¸›å°‘å¾ˆå¤šæª¢æ¸¬ï¼Œå‰›å¥½æˆ‘é‚£å¤©éµç›¤æ»‘é¼ ä¾èˆŠæ˜¯ä¸èƒ½ä½¿ç”¨çš„ç‹€æ³ï¼Œæ‰€ä»¥ä»–å€‘åªè·‘ç°¡å–®çš„æª¢æ¸¬å°±çµæŸäº†ã€‚ï¼ˆç‚ºäº†è·‘æª¢æ¸¬ä»–å€‘é‚„è·‘å»æ‹¿å¤–æ¥éµç›¤è·Ÿæ»‘é¼  XDï¼‰ å¦å¤–é—œæ–¼è¢å¹•è„«è†œçš„éƒ¨åˆ†äºŒè©±ä¸èªªç›´æ¥è·Ÿæˆ‘èªªå¯ä»¥æ›ï½ å¾Œä¾†åœ¨å ±åƒ¹æ™‚è·Ÿæˆ‘èªªå¯èƒ½è¦æ›ä¸»æ©Ÿæ¿ï¼Œæˆ‘å°±èªªæˆ‘åªæƒ³æ›æ’ç·šè·Ÿè¢å¹•ï¼Œå¦‚æœè¦ä¿®ä¸»æ©Ÿæ¿æˆ‘å°±ä¸ä¿®äº†ã€‚åº—å“¡ä¹Ÿå°±å¦‚å¯¦æŠŠæˆ‘çš„éœ€æ±‚å¯«é€²å‚™è¨»ã€‚ å¦‚æœè¦æ›ä¸»æ©Ÿæ¿æˆ‘å°±ä¸æƒ³ä¿®äº†ã€‚ é€ä¿®ä¹‹å¾Œé›–ç„¶èªª 3-5 å¤©æœƒæ‰“çµ¦æˆ‘å‘ŠçŸ¥ç¶­ä¿®æƒ…æ³ï¼Œä½†æ ¹æœ¬æ²’æ‰“ä¾†â€¦éäº†å¤§æ¦‚ 20 å¤©ä¹‹å¾Œæ‰å¯„ä¿¡ä¾†èªªå¯ä»¥å–è²¨ï¼Œä¹Ÿé™„ä¸Šç¶­ä¿®æ˜ç´°ã€‚ ç¶­ä¿®æ˜ç´°ï¼Œåªéœ€æ”¯ä»˜æ’ç·šçš„éŒ¢ã€‚ ç¸½çµä¾†èªª Apple ç›´ç‡Ÿåº—çš„æœå‹™é‚„ç®—ä¸éŒ¯ï¼Œæ›´æ›éè†œå®Œå…¨ä¸æœƒé˜»æ’“ï¼Œæª¢æ¸¬ç¶­ä¿®æ™‚ä¹Ÿååˆ†è¿…é€Ÿã€‚ç¼ºé»å°±æ˜¯é ç´„ç¶­ä¿®å¤ªé›£ï¼Œç¾å ´æ’ä¹Ÿè¦è¶…ä¹…çœŸçš„å¾ˆèŠ±æ™‚é–“â€¦ æ‰€ä»¥è‹¥éœ€è¦å»ç›´ç‡Ÿåº—ç¶­ä¿®çš„è©±æœ‰å¹¾å€‹å»ºè­°ï¼š æœ‰ iPhone çš„è©±å¯ä»¥ç”¨ä»–å€‘çš„ App ä¾†é ç´„ï¼Œå¯ä»¥æ¯”å…¶ä»–äººæ›´å®¹æ˜“ç´„åˆ°ã€‚ æ²’æœ‰ iPhone çš„è©±â€¦ä¹–ä¹–æ—©é»å»ç¾å ´æ’å§â€¦ é›œè«‡ æœ‰é»ä¹…æ²’æ–°æ–‡ç« äº†â€¦äººå°±æ˜¯é€™æ¨£ä¸€æ€ å¢®å°±æ°¸ç„¡æ­¢ç›¡QQ ç†è«–ä¸Šæœ€è¿‘æ‡‰è©²æ˜¯æ»¿é–’çš„æ‡‰è©²è¦æé«˜ç”¢å‡ºâ€¦ æ™‚é–“éƒ½è¢« Slay the Spire åƒå…‰å…‰â€¦","categories":[],"tags":[{"name":"trashtalk","slug":"trashtalk","permalink":"https://ssarcandy.tw/tags/trashtalk/"}]},{"title":"Use PyTorch to solve FizzBuzz","slug":"use-pytorch-to-solve-fizzbuzz","date":"2018-01-14T17:13:49.000Z","updated":"2025-10-22T00:51:26.606Z","comments":true,"path":"2018/01/14/use-pytorch-to-solve-fizzbuzz/","link":"","permalink":"https://ssarcandy.tw/2018/01/14/use-pytorch-to-solve-fizzbuzz/","excerpt":"FizzBuzz æ˜¯ä¸€å€‹å¸¸è¦‹çš„ç¨‹å¼è€ƒé¡Œï¼Œé¡Œç›®å¾ˆç°¡å–®ï¼Œå°±æ˜¯çµ¦ä¸€å€‹æ•´æ•¸ï¼Œå¦‚æœå¯ä»¥è¢« 15 æ•´é™¤å°±å›å‚³ FizzBuzzï¼›å¯ä»¥è¢« 3 æ•´é™¤å°±å›å‚³ Fizzï¼›è¢« 5 æ•´é™¤å°±å›å‚³ Buzzï¼›éƒ½ä¸èƒ½æ•´é™¤å°±å›å‚³åŸæœ¬çš„æ•¸å­—ã€‚ ç”¨ Python å¯ä»¥ç°¡å–®å¹¾è¡Œå°±å¯«å‡ºä¾†ï¼š 123456789def fizz_buzz(num): if num % 15 == 0: return &#x27;FizzBuzz&#x27; elif num % 3 == 0: return &#x27;Fizz&#x27; elif num % 5 == 0: return &#x27;Buzz&#x27; else: return str(num) ä¸éæœ‰ç‹‚äººå°±æŠŠé€™ç•¶ä½œåˆ†é¡å•é¡Œï¼Œç”¨ tensorflow ä¾†è§£é€™å€‹å•é¡Œï¼ŒåŸæ–‡åœ¨æ­¤ï¼Œæ˜¯ç¯‡å¾ˆæœ‰è¶£çš„æ–‡ç«  XD","text":"FizzBuzz æ˜¯ä¸€å€‹å¸¸è¦‹çš„ç¨‹å¼è€ƒé¡Œï¼Œé¡Œç›®å¾ˆç°¡å–®ï¼Œå°±æ˜¯çµ¦ä¸€å€‹æ•´æ•¸ï¼Œå¦‚æœå¯ä»¥è¢« 15 æ•´é™¤å°±å›å‚³ FizzBuzzï¼›å¯ä»¥è¢« 3 æ•´é™¤å°±å›å‚³ Fizzï¼›è¢« 5 æ•´é™¤å°±å›å‚³ Buzzï¼›éƒ½ä¸èƒ½æ•´é™¤å°±å›å‚³åŸæœ¬çš„æ•¸å­—ã€‚ ç”¨ Python å¯ä»¥ç°¡å–®å¹¾è¡Œå°±å¯«å‡ºä¾†ï¼š 123456789def fizz_buzz(num): if num % 15 == 0: return &#x27;FizzBuzz&#x27; elif num % 3 == 0: return &#x27;Fizz&#x27; elif num % 5 == 0: return &#x27;Buzz&#x27; else: return str(num) ä¸éæœ‰ç‹‚äººå°±æŠŠé€™ç•¶ä½œåˆ†é¡å•é¡Œï¼Œç”¨ tensorflow ä¾†è§£é€™å€‹å•é¡Œï¼ŒåŸæ–‡åœ¨æ­¤ï¼Œæ˜¯ç¯‡å¾ˆæœ‰è¶£çš„æ–‡ç«  XD ç”±æ–¼åŸæ–‡æ˜¯ç”¨ tensorflow å¯¦ä½œï¼Œæˆ‘æƒ³æˆ‘å°±ä¾†å¯«å€‹ PyTorch ç‰ˆç·´ç¿’ä¸€ä¸‹å§ï¼åŸºæœ¬ä¸Šå°±æ˜¯æŠŠ FizzBuzz ç•¶ä½œåˆ†é¡å•é¡Œ (Classification) ä¾†è¨“ç·´ï¼Œè¦åšçš„äº‹å¤§æ¦‚æœ‰é€™äº›ï¼š æº–å‚™ training, testing data å®šç¾© model Training é‚£å°±ä¾†ä¸€æ­¥ä¸€æ­¥çœ‹çœ‹ æº–å‚™è³‡æ–™é›–ç„¶ FizzBuzz è¼¸å…¥æ˜¯ä¸€å€‹æ•´æ•¸ï¼Œä½†æ˜¯æŠŠä»–è½‰æˆäºŒé€²ä½æœƒæ¯”è¼ƒå¥½è¨“ç·´ï¼Œæ‰€ä»¥å…ˆä¾†å¯«å€‹è½‰äºŒé€²ä½çš„å‡½å¼ï¼š 12def encode(num): return list(map(lambda x: int(x), (&#x27;&#123;:010b&#125;&#x27;).format(num))) å› ç‚ºæˆ‘ä¸æƒ³ import numpyï¼Œæ‰€ä»¥é€™é‚Šè½‰äºŒé€²ä½çš„æ–¹å¼æ˜¯ç”¨ Python çš„ format ä¾†åšã€‚ å¦å¤–é‚„è¦æŠŠ FizzBuzz æ”¹å¯«æˆå›å‚³åˆ†é¡è™Ÿç¢¼ï¼š 123456789def fizz_buzz(num): if num % 15 == 0: return 0 # &#x27;FizzBuzz&#x27; elif num % 3 == 0: return 1 # &#x27;Fizz&#x27; elif num % 5 == 0: return 2 # &#x27;Buzz&#x27; else: return 3 # num æ¥ä¸‹ä¾†è¦ä¾†ç”¢ç”Ÿè³‡æ–™æ‹‰ 1234567def make_data(num_of_data, batch_size): xs, ys = [], [] for _ in range(num_of_data): x = random.randint(0, 2**DIGITS-1) xs += [encode(x)] ys += [fizz_buzz(x)] return xs, ys ç”±æ–¼ training çš„æ™‚å€™é€šå¸¸æœƒæ˜¯ä¸€æ‰¹ä¸€æ‰¹ (batch) ä¸‹å»è¨“ç·´çš„ï¼Œæ‰€ä»¥åœ¨æº–å‚™è³‡æ–™æ™‚å°±å…ˆä¸€æ‰¹ä¸€æ‰¹æ”¾åœ¨ä¸€èµ·æœƒæ¯”è¼ƒæ–¹ä¾¿ã€‚ æ‰€ä»¥æ”¹ä¸€ä¸‹ï¼Œ 1234567891011def make_data(num_of_data, batch_size): xs, ys, data = [], [], [] for _ in range(num_of_data): x = random.randint(0, 2**DIGITS-1) xs += [encode(x)] ys += [fizz_buzz(x)] for b in range(num_of_data//batch_size): xxs = xs[b*batch_size:(b+1)*batch_size] yys = ys[b*batch_size:(b+1)*batch_size] data += [(xxs, yys)] return data å‰ç½®æ­¥é©Ÿéƒ½å¼„å¥½ä¹‹å¾Œï¼Œçµ‚æ–¼å¯ä»¥ä¾†ç”¢ç”Ÿè¨“ç·´è·Ÿæ¸¬è©¦è³‡æ–™æ‹‰ï¼ŒBatch size å°±è¨‚å€‹ 32 å¥½äº†ï¼š 12training_data = make_data(1000, 32)testing_data = make_data(100, 32) å®šç¾© Modelå…¶å¯¦æˆ‘å°æ–¼å¦‚ä½•è¨­è¨ˆ model é‚„æ˜¯æ²’æœ‰å¾ˆäº†è§£ï¼Œä¸éé€™å•é¡Œæ‡‰è©²æ˜¯æŒºç°¡å–®çš„ï¼Œå¼„å€‹å¹¾å±¤ fully-connected layer æ‡‰è©²å°±å¤ äº†å§? 1234567891011121314151617class FizzBuzz(nn.Module): def __init__(self, in_channel, out_channel): super(FizzBuzz, self).__init__() self.layers = nn.Sequential( nn.Linear(in_channel, 1024), nn.ReLU(), # Activation function nn.Linear(1024, 1024), nn.ReLU(), # Activation function nn.Linear(1024, out_channel) ) def forward(self, x): x = self.layers(x) return x # Input 10 digits vector (binary format), output 4 classes vectormodel = FizzBuzz(10, 4) æˆ‘ç”¨äº†ä¸€å±¤éš±è—å±¤ï¼Œ1024 å€‹ç¥ç¶“å…ƒï¼Œactivation function å‰‡éƒ½æ˜¯æœ€åŸºæœ¬çš„ ReLU ã€‚in_channel, out_channel åˆ†åˆ¥æ˜¯è¼¸å…¥æ•¸å­—æ˜¯é•·åº¦å¤šå°‘çš„äºŒé€²ä½ (10)ï¼Œä»¥åŠè¼¸å‡ºå¹¾ç¨®åˆ†é¡ (4)ã€‚PyTorch çš„ model æ˜¯ç¹¼æ‰¿ torch.nn.Module ä¾†å¯«å€‹ classï¼Œé€šå¸¸åªè¦å®šç¾© __init()__ è·Ÿ forward()å°±å¥½ï¼Œå¦‚æœè¦è‡ªå·±åšç‰¹æ®Šçš„ backward çš„è©±ï¼Œä¹Ÿå¯ä»¥å¯¦ä½œ backward()ã€‚ Trainingæ•´å€‹è¨“ç·´çš„éç¨‹åŸºæœ¬å°±æ˜¯æŒ‰ç…§ä¸€èˆ¬çš„åˆ†é¡å•é¡Œæµç¨‹åšï¼ŒæŠŠè³‡æ–™ä¸Ÿé€² model çš„åˆ°é æ¸¬ï¼ŒæŠŠé æ¸¬è·Ÿæ­£ç¢ºç­”æ¡ˆåš cross entropy ç•¶ä½œ loss ï¼Œç„¶å¾Œå»æœ€å°åŒ–é€™å€‹ loss ç”¨ PyTorch å¯«å¤§æ¦‚æ˜¯é€™æ¨£ï¼š 12345678910def training(model, optimizer, training_data): model.train() for data, label in training_data: data = Variable(torch.FloatTensor(data)) label = Variable(torch.LongTensor(label)) optimizer.zero_grad() # Clear gradient out = model(data) # predict by model classification_loss = F.cross_entropy(out, label) # Cross entropy loss classification_loss.backward() # Calculate gradient optimizer.step() # Update model parameters ç”±æ–¼ è¦æ˜¯ Variable æ‰èƒ½è‡ªå‹•ç®— back propagation ï¼Œæ‰€ä»¥ data è·Ÿ label éƒ½è¦è®Šæˆ Variableã€‚é€™é‚Šæˆ‘ç”¨çš„ optimize æ–¹æ³•æ˜¯ Stochastic Gradient Descent (SGD)ï¼Œè¨˜å¾—æ¯æ¬¡éƒ½è¦å…ˆæ¸…ç©º gradient å†åš backwardã€‚ Resultè¬äº‹çš†å‚™ï¼Œå¯ä»¥é–‹å§‹ä¾†çœ‹çœ‹çµæœå¦‚ä½•äº†ï¼Œä¾† train 300 å€‹ Epoch å¥½äº†ï¼Œ 1234567==== Start Training ====Epoch 50/300, Loss: 0.78973, Accuracy: 64.58%Epoch 100/300, Loss: 0.29299, Accuracy: 91.67%Epoch 150/300, Loss: 0.14616, Accuracy: 93.75%Epoch 200/300, Loss: 0.10606, Accuracy: 96.88%Epoch 250/300, Loss: 0.09937, Accuracy: 96.88%Epoch 300/300, Loss: 0.06472, Accuracy: 98.96% å“‡ï¼æ‰ 98% æº–ç¢ºç‡å‘¢â€¦ æ‹¿å» online judge è§£é¡Œå¤§æ¦‚ä¸æœƒéå‘¢ XD å¦‚æœæƒ³è¦ç©ç©çœ‹æˆ‘çš„ codeï¼Œé€™é‚Šå¯ä»¥çœ‹ï¼šhttps://github.com/SSARCandy/pytorch_fizzbuzz","categories":[],"tags":[{"name":"python","slug":"python","permalink":"https://ssarcandy.tw/tags/python/"},{"name":"pytorch","slug":"pytorch","permalink":"https://ssarcandy.tw/tags/pytorch/"},{"name":"machine learning","slug":"machine-learning","permalink":"https://ssarcandy.tw/tags/machine-learning/"}]},{"title":"ææ‡‚ JavaScript åŸå‹éŠ","slug":"javascript-prototype-chain","date":"2017-12-06T00:40:01.000Z","updated":"2025-10-22T00:51:26.605Z","comments":true,"path":"2017/12/06/javascript-prototype-chain/","link":"","permalink":"https://ssarcandy.tw/2017/12/06/javascript-prototype-chain/","excerpt":"æœ€è¿‘çªç„¶çœ‹åˆ°è¨±å¤šé—œæ–¼ js åŸå‹éŠçš„ä»‹ç´¹ï¼Œé€™æ±è¥¿æˆ‘å¾ä¾†æ²’ææ‡‚éä¹Ÿæ²’èªçœŸæƒ³è¦ææ‡‚é XDèªªçœŸçš„å¥½åƒä¸æ‡‚ä¹Ÿä¸æœƒå½±éŸ¿ç”šéº¼ï¼Œç•¢ç«Ÿå¯¦æˆ°ä¸ŠåŸºæœ¬ç”¨ä¸åˆ°é€™äº›æ¯”è¼ƒåº•å±¤çš„æ±è¥¿â€¦ä½†æ˜¯ç•¶ä½œæ˜¯é‚Šç·£å†·çŸ¥è­˜ä¾†çœ‹çœ‹ä¹Ÿæ˜¯æŒºä¸éŒ¯çš„~","text":"æœ€è¿‘çªç„¶çœ‹åˆ°è¨±å¤šé—œæ–¼ js åŸå‹éŠçš„ä»‹ç´¹ï¼Œé€™æ±è¥¿æˆ‘å¾ä¾†æ²’ææ‡‚éä¹Ÿæ²’èªçœŸæƒ³è¦ææ‡‚é XDèªªçœŸçš„å¥½åƒä¸æ‡‚ä¹Ÿä¸æœƒå½±éŸ¿ç”šéº¼ï¼Œç•¢ç«Ÿå¯¦æˆ°ä¸ŠåŸºæœ¬ç”¨ä¸åˆ°é€™äº›æ¯”è¼ƒåº•å±¤çš„æ±è¥¿â€¦ä½†æ˜¯ç•¶ä½œæ˜¯é‚Šç·£å†·çŸ¥è­˜ä¾†çœ‹çœ‹ä¹Ÿæ˜¯æŒºä¸éŒ¯çš„~ æ­·å²JavaScriptï¼Œä¸€å€‹ç‚ºäº†ç¶²é äº’å‹•è€Œèª•ç”Ÿçš„è…³æœ¬èªè¨€ï¼Œæœ€æ—©æ˜¯å› ç‚º Netscape é–‹ç™¼äº†ä¸€å€‹æ¯”è¼ƒæˆç†Ÿçš„ç€è¦½å™¨ Navigatorï¼Œä½†ç”±æ–¼æ²’æœ‰å¯ä»¥è®“ç¶²é èˆ‡ä½¿ç”¨è€…äº’å‹•çš„æ–¹å¼ï¼Œæ‰€ä»¥ä»–å€‘å°±é–‹ç™¼äº† JavaScript ä¾†ç•¶ä½œç¶²é çš„è…³æœ¬èªè¨€ï¼Œå…¶ä¸­ä¸»è¦é–‹ç™¼è€…æ˜¯ Brendan Eichã€‚ç”±æ–¼ç•¶æ™‚ç‰©ä»¶å°å‘æ­£å¤¯ï¼ŒBrendan Eich ä¹Ÿæ±ºå®šè®“ JavaScript æ‰€æœ‰æ±è¥¿éƒ½æ˜¯ Objectã€‚å¦‚æ­¤ç”¨é€”æ˜ç¢ºçš„èªè¨€ï¼Œä¼¼ä¹ä¸å¤ªéœ€è¦éå¸¸å®Œæ•´çš„åº•å±¤æ¶æ§‹å§ï¼Ÿç”¨ä¸è‘—åƒ C++, Java é€™ç¨®æ³›ç”¨å¼ç¨‹å¼èªè¨€ä¸€æ¨£å®Œæ•´ï¼Œæ‰€ä»¥ Brendan Eich ä¸¦ä¸æ‰“ç®—å¼•å…¥ Class çš„æ¦‚å¿µã€‚ä½†åˆç”±æ–¼JavaScript æ‰€æœ‰æ±è¥¿éƒ½æ˜¯ Objectï¼Œå‹¢å¿…è¦æœ‰ç¨®æ–¹æ³•åšåˆ°é¡ä¼¼ç¹¼æ‰¿é€™ä»¶äº‹ã€‚æ‰€ä»¥åŸå‹éŠå°±å‡ºç¾äº†ï¼ JavaScript èªæ³•èƒŒå¾Œçš„é‹ä½œJavaScript è¦å»ºæ§‹ä¸€å€‹ instance æœƒç”¨ new é—œéµå­—ï¼Œä½†å¯¦éš›ä¸Šé€™ new è·Ÿ C++, Java çš„ä¸ä¸€æ¨£ã€‚JavaScript çš„ new å…¶å¯¦å¾Œé¢æ¥çš„æ˜¯ä¸€å€‹ functionï¼Œé¡ä¼¼æ–¼ C++ constroctor 1234567891011function Person(name) &#123; this.name = name; this.sayHi = function () &#123; console.log(&#x27;Hi&#x27;); &#125;;&#125; var man1 = new Person(&#x27;Jack&#x27;);var man2 = new Person(&#x27;Andy&#x27;); console.log(man1.sayHi === man2.sayHi); // false ä¸Šé¢é€™æ®µä¾‹å­æ˜¯ JavaScript å‰µé€ å¯¦ä¾‹çš„æ–¹å¼ã€‚å¯ä»¥çœ‹åˆ° Person ä¸­æœ‰å…©å€‹æ±è¥¿ï¼Œä¸€å€‹æ˜¯ name, å¦ä¸€å€‹æ˜¯ Person çš„ method sayHiï¼Œé›–ç„¶é€™æ¨£å¾ˆå¥½äº†ï¼Œä½†æ˜¯é€™æ¨£ man1, man2 ä¸­å…¶å¯¦åŒ…å«äº†ä¸€æ¨£çš„ sayHi functionï¼Œæµªè²»è¨˜æ†¶é«”ç©ºé–“ã€‚ æ‰€ä»¥å¦‚æœè¦åšä¸€å€‹é¡åˆ¥å…±ç”¨çš„æ–¹æ³•å¯ä»¥é€™æ¨£: 123456789101112function Person(name) &#123; this.name = name;&#125; Person.prototype.sayHi = function () &#123; console.log(&#x27;Hi&#x27;);&#125;; var man1 = new Person(&#x27;Jack&#x27;);var man2 = new Person(&#x27;Andy&#x27;); console.log(man1.sayHi === man2.sayHi); // true æŠŠé¡åˆ¥å…±ç”¨çš„ function å¯«åœ¨ prototype ä¸­å°±å¯ä»¥é”æˆå…±ç”¨çš„æ•ˆæœï¼Œè€Œå…¶å¯¦é€™å€‹ prototype å°±æ˜¯åŸå‹éŠã€‚ ç”¨åŸå‹éŠæ¨¡æ“¬ç¹¼æ‰¿æˆ‘å€‘ç”¨ç€è¦½å™¨åµéŒ¯æ¨¡å¼å°è®Šæ•¸çš„æ™‚å€™ï¼Œç›¸ä¿¡ç¶“å¸¸çœ‹åˆ° __proto__ è—åœ¨è®Šæ•¸è£¡ï¼Œé‚£å€‹æ±æ±å°±æ˜¯åŸå‹éŠã€‚JavaScript ä¸­æœ‰å¹¾å€‹é è¨­çš„é¡åˆ¥ï¼Œåƒæ˜¯ Object, Array ç­‰ç­‰ï¼Œæˆ‘å€‘åœ¨å®£å‘Šè®Šæ•¸çš„æ™‚å€™å…¶å¯¦è£¡é¢éƒ½æœƒè—‰ç”±åŸå‹éŠ ä¸² åˆ°é è¨­çš„é¡åˆ¥ã€‚ a çš„ __proto__ æŒ‡å‘ Object æ‰€ä»¥å…¶å¯¦åœ¨å‰µé€ å¯¦ä¾‹æ™‚ï¼ŒJavaScript æœƒæŠŠ __proto__ æŒ‡å‘ä»–çš„åŸå‹ï¼Œä»¥ç©ºç‰©ä»¶ &#123;&#125; è€Œè¨€ï¼Œå°±æ˜¯é è¨­é¡åˆ¥ Objectã€‚å›åˆ°ä¸Šé¢ Person çš„ä¾‹å­ï¼Œä»–çš„åŸå‹éŠå°±æœƒæ˜¯é•·é€™æ¨£: man çš„ sayHi æ˜¯å®šç¾©åœ¨ä»–çš„ __proto__ ä¸­ å¯ä»¥ç™¼ç¾å¯«åœ¨ Person.prototype çš„ sayHi ï¼Œå¯¦éš›ä¸Šæ˜¯å®šç¾©åœ¨ man.__proto__.sayHi ï¼Œä¹Ÿå°±æ˜¯ Person çš„åŸå‹ï¼Œè€Œåœ¨å‘¼å« man.sayHi() æ™‚ï¼Œç”±æ–¼æ‰¾ä¸åˆ°ï¼Œæ‰€ä»¥ JavaScript æœƒè—‰ç”±__proto__å˜—è©¦å¾€ä¸Šæ‰¾ï¼Œå°±æœƒåœ¨ man.__proto__ ä¸­æ‰¾åˆ°ã€‚ è€Œé€™å€‹ä¸€ç›´å¾€ä¸Šä¸€å±¤åŸå‹æ‰¾çš„éç¨‹ï¼Œå…¶å¯¦å°±æ¨¡æ“¬äº†ç¹¼æ‰¿çš„æ•ˆæœã€‚ ES6 èªæ³•ç³–èˆ‡åŸå‹éŠé›–èªª JavaScript ç•¶åˆæ²’æœ‰ Class çš„æ¦‚å¿µï¼Œä½†åœ¨ ES6 ä¸­å…¶å¯¦å‡ºç¾ class é—œéµå­—äº†ï¼Œä½†å…¶å¯¦é€™åªæ˜¯ä¸€å€‹èªæ³•ç³–è€Œå·²ï¼Œå¯ä»¥è—‰ç”±å¹¾å€‹ä¾‹å­ç™¼ç¾ ES6 èƒŒå¾Œé‚„æ˜¯é€éåŸå‹éŠä¾†é‹ä½œã€‚ 123456789101112131415161718class level1 &#123; constructor() &#123; this.x = 1; &#125; getX() &#123; return this.x; &#125;&#125; class level2 extends level1 &#123; constructor() &#123; super(); this.y = 10; &#125; getY() &#123; return this.y; &#125;&#125; let l2 = new level2(); ä¸Šé¢é€™å€‹ä¾‹å­æ˜¯ç”¨ ES6 å¯«çš„ç¹¼æ‰¿å°ç¨‹å¼ï¼Œ level2 ç¹¼æ‰¿ level1 ã€‚ç›´æ¥ä¾†çœ‹çœ‹å‰µé€ å‡ºçš„å¯¦ä¾‹ l2 è£¡é¢æ˜¯ä»€éº¼: ES6 çš„ç¹¼æ‰¿å…¶å¯¦ä¹Ÿæ˜¯ç”¨åŸå‹éŠä¸²èµ·ä¾†çš„ã€‚ åˆçœ‹åˆ°åŸå‹éŠäº†ï¼l2 çš„åŸå‹éŠä¸²æˆé€™æ¨£: l2 â†’ level1 â†’ Objectã€‚çœ‹çœ‹ getX, getY å°±æœƒç™¼ç¾ä»–å€‘å®šç¾©åœ¨ä¸åŒå±¤ç´šï¼Œå› ç‚º getX æ˜¯çˆ¶é¡åˆ¥çš„æ–¹æ³•ï¼Œæ‰€ä»¥åœ¨åŸå‹éŠä¸­çš„æ›´ä¸Šä¸€å±¤ã€‚ç”±æ­¤å°±å¯ä»¥çœ‹å‡º ES6 é›–ç„¶æœ‰ class é—œéµå­—ï¼Œä½†å…¶å¯¦åŸç†é‚„æ˜¯åŸå‹éŠã€‚ References Javascriptç»§æ‰¿æœºåˆ¶çš„è®¾è®¡æ€æƒ³ è©²ä¾†ç†è§£ JavaScript çš„åŸå‹éŠäº† h1+ol { list-style-type: none; counter-reset: list-counter; padding-left: 0; } h1+ol li { position: relative; padding-left: 3em; } h1+ol li::before { counter-increment: list-counter; content: \"[\" counter(list-counter) \"] \"; position: absolute; left: 0; width: 25px; text-align: right; } é›œè«‡é™¤äº†å­¸æ ¡æ•™çš„ C&#x2F;C++ ä»¥å¤–ï¼Œæˆ‘ä¼¼ä¹æ²’å»ææ‡‚éå…¶ä»–èªè¨€èƒŒå¾Œçš„é‚è¼¯ï¼Œç§‰æŒè€…æœƒç”¨å°±å¥½çš„å¿ƒæ…‹æ´»åˆ°ç¾åœ¨(Xé€™æ¬¡ç¨å¾®ç†è§£åŸå‹éŠä»¥å¾Œï¼Œå¥½åƒåˆæ›´äº†è§£ä¸€é» JavaScript äº†å‘¢ï½ï¼","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://ssarcandy.tw/tags/javascript/"}]},{"title":"Deep CORAL: Correlation Alignment for Deep Domain Adaptation","slug":"deep-coral","date":"2017-10-31T13:18:50.000Z","updated":"2025-10-22T00:51:26.605Z","comments":true,"path":"2017/10/31/deep-coral/","link":"","permalink":"https://ssarcandy.tw/2017/10/31/deep-coral/","excerpt":"é›–ç„¶ç¾åœ¨å¯ä»¥é€é Deep neural networks ä¾†è¨“ç·´å‡ºéå¸¸å¼·å¤§çš„èƒ½åŠ›ï¼Œä½†å»é›£ä»¥å­¸åˆ°æ¯”è¼ƒé€šç”¨çš„çŸ¥è­˜ï¼Œé€šå¸¸æœ€å¾Œè¨“ç·´å‡ºçš„ model æœƒåªé©åˆè™•ç†é¡ä¼¼æ–¼ training data çš„è³‡æ–™ã€‚Domain adaption æ˜¯ç›®å‰åœ¨ machine learning æ¯”è¼ƒæ–°çš„å•é¡Œï¼Œæ˜¯å¸Œæœ›å¯ä»¥è®“ network å­¸åˆ°æ¯”è¼ƒè·¨é ˜åŸŸçš„ features ï¼Œé€²è€Œä½¿è¨“ç·´å‡ºä¾†çš„æ¨¡å‹å¯ä»¥æ‡‰ç”¨åœ¨ä¸åŒ domain çš„è³‡æ–™ä¸Šã€‚ é€™ç¯‡è«–æ–‡[1] (Deep CORAL: Correlation Alignment for Deep Domain Adaptation, B Sun, K Saenko, ECCV 2016) æå‡ºä¸€å€‹ CORAL lossï¼Œé€šéå° source domain å’Œ target domain é€²è¡Œç·šæ€§è®Šæ›ä¾†å°‡ä»–å€‘å„è‡ªçš„çš„äºŒéšçµ±è¨ˆé‡å°é½Š (minimizing the difference between source/target correlations).","text":"é›–ç„¶ç¾åœ¨å¯ä»¥é€é Deep neural networks ä¾†è¨“ç·´å‡ºéå¸¸å¼·å¤§çš„èƒ½åŠ›ï¼Œä½†å»é›£ä»¥å­¸åˆ°æ¯”è¼ƒé€šç”¨çš„çŸ¥è­˜ï¼Œé€šå¸¸æœ€å¾Œè¨“ç·´å‡ºçš„ model æœƒåªé©åˆè™•ç†é¡ä¼¼æ–¼ training data çš„è³‡æ–™ã€‚Domain adaption æ˜¯ç›®å‰åœ¨ machine learning æ¯”è¼ƒæ–°çš„å•é¡Œï¼Œæ˜¯å¸Œæœ›å¯ä»¥è®“ network å­¸åˆ°æ¯”è¼ƒè·¨é ˜åŸŸçš„ features ï¼Œé€²è€Œä½¿è¨“ç·´å‡ºä¾†çš„æ¨¡å‹å¯ä»¥æ‡‰ç”¨åœ¨ä¸åŒ domain çš„è³‡æ–™ä¸Šã€‚ é€™ç¯‡è«–æ–‡[1] (Deep CORAL: Correlation Alignment for Deep Domain Adaptation, B Sun, K Saenko, ECCV 2016) æå‡ºä¸€å€‹ CORAL lossï¼Œé€šéå° source domain å’Œ target domain é€²è¡Œç·šæ€§è®Šæ›ä¾†å°‡ä»–å€‘å„è‡ªçš„çš„äºŒéšçµ±è¨ˆé‡å°é½Š (minimizing the difference between source/target correlations). Introduction ä½œè€…å¼•å…¥äº† CORAL[2] é€™ä¸€æ–¹æ³•ï¼Œä¸¦ä¸”å°‡å…¶æ“´å±•æˆä¸€ differentiable loss functionã€‚ ä½œè€…è—‰ç”± CORAL loss ä¾†åš unsupervised learningï¼Œä¸¦é”åˆ°äº† state-of-the-art çš„ performanceã€‚ CORAL loss ååˆ†ç°¡å–®ä¸¦ä¸”å¯ä»¥è¼•æ˜“åœ°æ•´åˆè‡³ä¸€èˆ¬çš„ç¥ç¶“ç¶²è·¯ä¸­ã€‚ Architecture ä½œè€…å°‡ CORAL loss åŠ é€²ä¸€åˆ†é¡å•é¡Œçš„ç¶²è·¯æ¶æ§‹ä¸­ã€‚ [1] ä½œè€…å°‡ Deep CORAL æ‡‰ç”¨åœ¨ä¸€èˆ¬çš„åˆ†é¡å•é¡Œä¸Šï¼Œæ•´å€‹ç¥ç¶“ç¶²è·¯æ¶æ§‹å¦‚åœ–ã€‚å¾ä¸­é–“ cov1 ~ fc8 å…¶å¯¦å°±æ˜¯ä¸€èˆ¬çš„ AlexNetï¼Œåªæ˜¯ç¨ä½œä¿®æ”¹æ”¹æˆæœ‰å…©å€‹ input (source data &amp; target data) ä»¥åŠå…©å€‹ outputã€‚ åœ¨è¨“ç·´çš„éç¨‹ä¸­ï¼Œæ¯å€‹ batch éƒ½åŒ…å«äº† source data &amp; target dataï¼Œå…¶ä¸­ source data æ˜¯åŒ…å« label è³‡æ–™çš„ï¼›è€Œ target data å‰‡å®Œå…¨æ²’æœ‰ label è³‡æ–™ã€‚source data &amp; target data å„è‡ªç¶“éä¸€ shared weight çš„ networks ä¹‹å¾Œæœƒæœ‰å…©å€‹ outputï¼Œå…¶ä¸­: source task æœƒç®—ä¸€å€‹ classification loss source çš„ fc8 åŠ target çš„ fc8 æœƒå†æ‹¿ä¾†ç®— CORAL loss è€Œç¸½å’Œ loss ç‚ºå…©è€…ç›¸åŠ : CORAL Lossä½œè€…æå‡ºçš„ CORAL loss æ˜¯åœ¨è¨ˆç®— source &amp; target covariance matrix ä¹‹é–“çš„ distanceã€‚ We define the CORAL loss as the distance between the second-order statistics(covariances) of the source and target features. Forwardè€Œé€™å€‹ loss function å®šç¾©å¦‚ä¸‹: å…¶ä¸­ï¼Œ, ç‚º source, target çš„ covariance matrixï¼Œå…¶å®šç¾©å¦‚ä¸‹: è©³ç´°ç¬¦è™Ÿå®šç¾©å¯ä»¥åƒè€ƒ paper[1] section 3.1 Backward (gradient)è‡³æ–¼ gradient å¯ä»¥ç”± chain rule ç®—å‡ºä¾†ï¼Œå¦‚ä¸‹: æ³¨æ„ target é‚£é‚Šæ˜¯æœ‰å€‹è² è™Ÿçš„ï¼Œç•¶åˆåœ¨å¯¦ä½œæ™‚å¿˜è¨˜é€™å€‹è² è™Ÿè€ŒæåŠå¤©â€¦ Experimentä½œè€…åšçš„å¯¦é©—ä¹Ÿæ˜¯åœ¨åˆ†é¡å•é¡Œä¸Šï¼Œæ¶æ§‹å¦‚åŒä¸Šé¢æåŠçš„ç¥ç¶“ç¶²è·¯æ¶æ§‹åœ–ã€‚å¯¦é©—æ¡ç”¨ Office31 dataset[3]ï¼Œé€™æ˜¯ä¸€å€‹å°ˆé–€æ‹¿ä¾†åš domain adaption çš„è³‡æ–™é›†ï¼Œè£¡é¢æœ‰ä¸‰ç¨®ä¸åŒ domain çš„å½±åƒ: Amazon, DSLR, and Webcamè£¡é¢éƒ½æœ‰ç›¸åŒçš„ 31 ç¨®é¡åˆ¥ï¼Œä¹Ÿå°±æ˜¯èªªé€™ä¸‰å¤§é¡å”¯ä¸€ä¸åŒçš„é»å°±æ˜¯åœ–ç‰‡çš„æ¨£è²Œ: Amazon å°±æ˜¯å»èƒŒçš„åœ–ç‰‡(èƒŒæ™¯éƒ½æ˜¯ç™½è‰²çš„) DSLR å°±æ˜¯ç”¨å–®çœ¼æ‹çš„åœ–ç‰‡(èƒŒæ™¯å°±æ˜¯çœŸå¯¦å ´æ™¯çš„èƒŒæ™¯) Webcam è·Ÿ DSLR å¾ˆç›¸è¿‘ï¼Œå·®åˆ¥æ¯”è¼ƒå¤§çš„éƒ¨åˆ†æ˜¯ webcam çš„ç•«è³ªæ¯”è¼ƒå·®ï¼Œæœ‰çš„é‚„æœ‰è‰²å åœ¨å¯¦é©—é€²è¡Œéç¨‹ä¸­ï¼Œsource data æœƒæœ‰ labelï¼›è€Œ target data å‰‡æ²’æœ‰ã€‚ä¸”åœ¨é–‹å§‹ä¹‹å‰æœƒå…ˆé è¼‰ ImageNet pre-trained modelã€‚ ç”±æ–¼ Office31 æœ‰ä¸‰ç¨® domain dataï¼Œæ‰€ä»¥ä½œè€…å°±åšäº†æ‰€æœ‰ domain adaption çš„çµ„åˆï¼Œä»¥ä¸‹æ˜¯çµæœåœ–: å„ç¨®æ–¹æ³•æ¯”è¼ƒåœ–ã€‚è¢å…‰çš„æ˜¯ä½œè€…çš„æ–¹æ³•ã€‚[1] å¯ä»¥çœ‹åˆ° D-CORAL åœ¨å¤§éƒ¨åˆ†çš„ domain adaption tasks ä¸­éƒ½å–å¾—äº†æœ€å¥½çš„æˆç¸¾ã€‚ å†ä¾†çœ‹çœ‹å…¶ä¸­ä¸€å€‹å¯¦é©— Amazon â†’ Webcam çš„è©³ç´°çµæœ: Amazon â†’ Webcam çš„è©³ç´°çµæœåœ–ã€‚[1] åœ– (a) æ¯”è¼ƒäº†æœ‰ CORAL loss èˆ‡æ²’æœ‰ CORAL loss çš„å·®åˆ¥ï¼Œå¯ä»¥çœ‹åˆ°ç•¶åŠ å…¥CORAL loss ä¹‹å¾Œï¼Œtarget (test) task æœ‰é¡¯è‘—çš„æå‡ï¼Œè€Œä¸”ä¸¦æœªä½¿å¾— source (training) task çš„æº–ç¢ºç‡ä¸‹é™å¤ªå¤šã€‚ åœ– (b) å‰‡å¯ä»¥çœ‹å‡ºï¼Œclassification loss è·Ÿ CORAL loss å…¶å¯¦æ˜¯æ‰®æ¼”äº’ç›¸æŠ—è¡¡çš„è…³è‰²ï¼Œéš¨è‘—è¨“ç·´çš„é€²è¡Œæœƒè®“å…©è€…åˆ°é”ä¸€ç©©å®šçš„ç‹€æ…‹ã€‚ Implementationæˆ‘ä¹Ÿè©¦è‘—ç”¨ PyTorch å¯¦åšäº†æ­¤ç¯‡è«–æ–‡çš„æ–¹æ³•ï¼Œæœ€é‡è¦çš„å…¶å¯¦å°±æ˜¯æ–°å¢ä¸€ loss function åˆ°æ•´å€‹ç¶²è·¯æ¶æ§‹ä¸­ï¼Œå…¶ä¸­ forward and backward çš„ç®—æ³•å‰›å¥½ä¹Ÿæœ‰è©³ç´°èªªæ˜ã€‚ Forward çš„éƒ¨åˆ†å¤§æ¦‚å¦‚ä¸‹: 123456789def forward(self, source, target): d = source.shape[1] ns, nt = source.shape[0], target.shape[0] cs = feature_covariance_mat(ns, source) ct = feature_covariance_mat(nt, target) self.saved = (source, target, cs, ct, ns, nt, d) res = forbenius_norm(cs - ct)**2/(4*d*d) res = torch.FloatTensor([res]) return res Backward å‰‡å¦‚ä¸‹: 12345678def backward(self, grad_output): source, target, cs, ct, ns, nt, d = self.saved ones_s_t = torch.ones(ns).view(1, -1) ones_t_t = torch.ones(nt).view(1, -1) s_gradient = (source.t() - (ones_s_t.matmul(source).t().matmul(ones_s_t)/ns)).t().matmul(cs - ct) / (d*d*(ns - 1)) t_gradient = (target.t() - (ones_t_t.matmul(target).t().matmul(ones_t_t)/nt)).t().matmul(cs - ct) / (d*d*(nt - 1)) t_gradient = -t_gradient return s_gradient*grad_output, t_gradient*grad_output å¯«èµ·ä¾†å…¬å¼çš„éƒ¨åˆ†åˆè‡­åˆé•· XD æˆ‘ä¹Ÿå¯¦éš›è·‘äº† Amazon â†’ Webcam çš„ä¾‹å­ï¼Œåšäº†å€‹åœ–: æˆ‘åšå‡ºä¾†çš„ Amazon â†’ Webcam çš„è©³ç´°çµæœåœ–ã€‚ å¯ä»¥çœ‹å‡ºæœ‰ CORAL loss çš„ç¢ºä½¿å¾— target task çš„æº–ç¢ºç‡æå‡ä¸€äº›ã€‚ä¸éæˆ‘åšå‡ºä¾†çš„æ•´é«”æº–ç¢ºç‡ä¸¦æ²’æœ‰èˆ‡è«–æ–‡ä¸Šçš„ä¸€æ¨£æœ‰ 60% å·¦å³ï¼Œè€Œæ˜¯å¤§æ¦‚åœ¨ 50% å·¦å³ï¼Œä¸çŸ¥é“ç‚ºç”šéº¼â€¦ QQ Updateç¶“é redhat12345 çš„å»ºè­°å¾Œï¼Œä¿®æ­£äº†ä¸€ä¸‹ CORAL Loss çš„ç®—æ³•ï¼Œçµ‚æ–¼ä½¿ Target accuracy æå‡åˆ°åŸè«–æ–‡çš„ç¨‹åº¦ã€‚ 123456789101112def CORAL(source, target): d = source.data.shape[1] # source covariance xm = torch.mean(source, 1, keepdim=True) - source xc = torch.matmul(torch.transpose(xm, 0, 1), xm) # target covariance xmt = torch.mean(target, 1, keepdim=True) - target xct = torch.matmul(torch.transpose(xmt, 0, 1), xmt) # frobenius norm between source and target loss = torch.mean(torch.mul((xc - xct), (xc - xct))) loss = loss/(4*d*d) return loss ä¿®æ­£éå¾Œçš„çµæœã€‚ References Sun, B., Saenko, K.: Deep CORAL: Correlation Alignment for Deep Domain Adaptation. In: ECCV (2016) Sun, B., Feng, J., Saenko, K.: Return of frustratingly easy domain adaptation. In: AAAI (2016) Domain Adaptation Project h1+ol { list-style-type: none; counter-reset: list-counter; padding-left: 0; } h1+ol li { position: relative; padding-left: 3em; } h1+ol li::before { counter-increment: list-counter; content: \"[\" counter(list-counter) \"] \"; position: absolute; left: 0; width: 25px; text-align: right; }","categories":[],"tags":[{"name":"paper","slug":"paper","permalink":"https://ssarcandy.tw/tags/paper/"},{"name":"python","slug":"python","permalink":"https://ssarcandy.tw/tags/python/"},{"name":"pytorch","slug":"pytorch","permalink":"https://ssarcandy.tw/tags/pytorch/"},{"name":"machine learning","slug":"machine-learning","permalink":"https://ssarcandy.tw/tags/machine-learning/"}]},{"title":"Using PyTorch in Windows 10","slug":"using-pytorch-in-windows","date":"2017-09-27T14:17:32.000Z","updated":"2025-10-22T00:51:26.606Z","comments":true,"path":"2017/09/27/using-pytorch-in-windows/","link":"","permalink":"https://ssarcandy.tw/2017/09/27/using-pytorch-in-windows/","excerpt":"æœ€è¿‘é–‹å§‹åœ¨ä½¿ç”¨ PyTorch å¯«äº›æ±æ±ï¼Œä»–æ”¯æ´ MacOS&#x2F;Linux ä½¿ç”¨ï¼Œå”¯ç¨ Windows ä¸æ”¯æ´â€¦æ‰€ä»¥æˆ‘ä¸€ç›´éƒ½æ˜¯ä½¿ç”¨ Mac å¯«ç›¸é—œçš„æ±è¥¿ã€‚ ä½†æ˜¯æˆ‘çš„æ¡Œæ©Ÿéƒ½æ˜¯ Windowsï¼Œåœ¨å¯ä»¥ç”¨æ¡Œæ©Ÿçš„ç’°å¢ƒä¸‹å»å¿…é ˆä½¿ç”¨å°å°çš„ Mac æ‰“å­—çœŸçš„ä¸æ˜¯å¾ˆé«˜èˆˆâ€¦æ­£å¥½æœ€è¿‘å¾å­¸é•·é‚£é‚Šå¾—çŸ¥æœ‰å€‹æ–¹æ³•å¯ä»¥è®“ Windows ä½¿ç”¨ PyTorch ï¼Œå°±è¶•ç·Šä¾†è©¦è©¦ï¼","text":"æœ€è¿‘é–‹å§‹åœ¨ä½¿ç”¨ PyTorch å¯«äº›æ±æ±ï¼Œä»–æ”¯æ´ MacOS&#x2F;Linux ä½¿ç”¨ï¼Œå”¯ç¨ Windows ä¸æ”¯æ´â€¦æ‰€ä»¥æˆ‘ä¸€ç›´éƒ½æ˜¯ä½¿ç”¨ Mac å¯«ç›¸é—œçš„æ±è¥¿ã€‚ ä½†æ˜¯æˆ‘çš„æ¡Œæ©Ÿéƒ½æ˜¯ Windowsï¼Œåœ¨å¯ä»¥ç”¨æ¡Œæ©Ÿçš„ç’°å¢ƒä¸‹å»å¿…é ˆä½¿ç”¨å°å°çš„ Mac æ‰“å­—çœŸçš„ä¸æ˜¯å¾ˆé«˜èˆˆâ€¦æ­£å¥½æœ€è¿‘å¾å­¸é•·é‚£é‚Šå¾—çŸ¥æœ‰å€‹æ–¹æ³•å¯ä»¥è®“ Windows ä½¿ç”¨ PyTorch ï¼Œå°±è¶•ç·Šä¾†è©¦è©¦ï¼ Window 10 ç¾åœ¨æœ‰å€‹æ±è¥¿å« Windows Subsystem for Linux (WSL) ï¼Œæ˜¯ä¸€å€‹åœ¨ Windows ä¸‹çš„ Ubuntu å­ç³»çµ±ï¼Œé€™å€‹å­ç³»çµ±å¯ä»¥åšåˆ°ä»»ä½•æ­£å¸¸ Ubuntu åšå¾—åˆ°çš„äº‹ã€‚é‚£æˆ‘å°±å¯ä»¥åœ¨ WSL ä¸­æŒ‰ç…§ Linux çš„æµç¨‹è¨­å®šå¥½ PyTorch çš„ç›¸é—œç’°å¢ƒï¼Œç„¶å¾Œåœ¨ Windows ä¸­ä½¿ç”¨ WSL çš„ Python ç’°å¢ƒï¼Œå°±å¯ä»¥é”åˆ°ç›®çš„ (è®“ Windows ä½¿ç”¨ PyTorch)ã€‚ æ‰€ä»¥åŸºæœ¬ä¸Šç’°å¢ƒè¨­ç½®æ­¥é©Ÿï¼š å•Ÿç”¨ Windows Subsystem for Linux ã€‚ å¼„å¥½ WSL ä¸­çš„ç’°å¢ƒï¼ŒåŒ…å« Python ä»¥åŠ ssh server çš„è¨­å®šã€‚ è®“ Windows ä½¿ç”¨é ç«¯ (WSL) çš„ Python ç’°å¢ƒã€‚ Install Windows Subsystem for Linux é–‹å•Ÿé–‹ç™¼äººå“¡æ¨¡å¼ ç”¨ç³»çµ±ç®¡ç†å“¡é–‹å•Ÿ cmdï¼Œè¼¸å…¥ OptionalFeatures æŒ‡ä»¤ï¼Œæœƒè·³å‡ºä¸€å€‹è¦–çª— å‹¾é¸ã€Œé©ç”¨æ–¼ Linux çš„ Windows å­ç³»çµ±ã€ å®Œæˆä»¥å¾Œå¯èƒ½éœ€è¦é‡é–‹æ©Ÿã€‚ Install PyTorch in WSLæ¥ä¸‹ä¾†æ˜¯è¦åœ¨ WSL ä¸­è¨­ç½® Python ä»¥åŠ PyTorch çš„ç›¸é—œç’°å¢ƒã€‚å¦‚æœæ²’æœ‰ Python è¨˜å¾—å…ˆå®‰è£ã€‚ ç„¶å¾Œå®‰è£ PyTorchï¼ŒåŸºæœ¬ä¸ŠæŒ‰ç…§ PyTorch å®˜æ–¹ç¶²ç«™ æ•™å­¸æ“ä½œï¼š 12$ pip install http://download.pytorch.org/whl/cu75/torch-0.2.0.post3-cp27-cp27mu-manylinux1_x86_64.whl$ pip install torchvision Install Python IDE (PyCharm)PyCharm æ˜¯ä¸€å€‹å¯ä»¥å¯« Python çš„ IDEï¼Œé›–ç„¶å°ˆæ¥­ç‰ˆè¦éŒ¢ï¼Œä¸éå­¸ç”Ÿå…è²»ï½YAï¼ å®‰è£å°±ä¸è´…è¿°äº†ï¼Œåæ­£å°±æ˜¯ä¸€ç›´ä¸‹ä¸€æ­¥â€¦ è¨­å®šä½¿ç”¨é ç«¯ Pythonç”±æ–¼è¦ç”¨ WSL è£¡é¢çš„ pythonï¼Œæ‰€ä»¥å¿…é ˆè¨­å®š Remote Python Interpreter Project setting &gt; Project interpreter Add Remote å¡«å…¥ ssh è³‡è¨Š å¡«ä¸€å¡« ssh ç›¸é—œè³‡è¨Šã€‚ ç”±æ–¼æ˜¯è¦é€é ssh å»å­˜å– WSL ä¸­çš„ Python ï¼Œæ‰€ä»¥ WSL é‚£é‚Šè¦é–‹å•Ÿ ssh service å¥½è®“ PyCharm é€£ç·šã€‚ åœ¨ WSL ä¸­: 12$ sudo service ssh start * Starting OpenBSD Secure Shell server sshd [ OK ] è¨­å®š Path mappingsWSL å…¶å¯¦æ˜¯å¯ä»¥å­˜å–æœ¬æ©Ÿ (Windows) çš„è³‡æ–™çš„ï¼Œé è¨­ C æ§½æ˜¯æ›è¼‰åœ¨ /mnt/cé€™ä¹Ÿè¦è¨­å®šä¸€ä¸‹æ‰èƒ½è®“ PyCharm é‹ä½œæ­£å¸¸ï¼š Project setting &gt; Project interpreter æ–°å¢ mapping C: â†’ /mnt/c è¨­å®š Path mapping çš„åœ°æ–¹ä¹Ÿæ˜¯åœ¨ Project setting > Project interpreter Miscé–‹å•Ÿ ssh service æ™‚å™´éŒ¯123$ sudo service ssh startinitctl: Unable to connect to UpstartBind to port 22 on 0.0.0.0 failed: Address already in use. å»æ›´æ”¹ /etc/ssh/sshd_config : 123PasswordAuthentication yesUsePrivilegeSeparation noPort &lt;random number&gt; åŸºæœ¬ä¸Šæœ€é‡è¦çš„å°±æ˜¯æ›å€‹ Port äº†ï¼Œæœƒæ²’è¾¦æ³•å•Ÿå‹•å¤§æ¦‚æ˜¯æœ¬æ©Ÿ (Windows) æœ‰ç¨‹å¼å·²ç¶“å ç”¨ Port 22 äº†ã€‚ ä¸èƒ½å®‰è£ PyTorch12$ pip install torch-xxx.whltorch-xxx.whl is not a supported wheel on this platform. è«‹æª¢å¯Ÿ pip -V ç‰ˆæœ¬ï¼Œèµ·ç¢¼è¦æ˜¯ 9.0 ä»¥ä¸Šï¼Œå¯ä»¥ç”¨ä»¥ä¸‹æ–¹æ³•æ›´æ–° pip: 1$ pip install --upgrade pip References Windows Subsystem for Linux (WSL) å®‰è£æ•™å­¸ &amp; åˆé«”é©— Configuring Remote Interpreters via WSL h1+ol { list-style-type: none; counter-reset: list-counter; padding-left: 0; } h1+ol li { position: relative; padding-left: 3em; } h1+ol li::before { counter-increment: list-counter; content: \"[\" counter(list-counter) \"] \"; position: absolute; left: 0; width: 25px; text-align: right; }","categories":[],"tags":[{"name":"unix","slug":"unix","permalink":"https://ssarcandy.tw/tags/unix/"},{"name":"note","slug":"note","permalink":"https://ssarcandy.tw/tags/note/"},{"name":"python","slug":"python","permalink":"https://ssarcandy.tw/tags/python/"},{"name":"pytorch","slug":"pytorch","permalink":"https://ssarcandy.tw/tags/pytorch/"}]},{"title":"Multi-server GPU status monitor","slug":"multi-server-gpu-status-monitor","date":"2017-08-25T15:29:39.000Z","updated":"2025-10-22T00:51:26.605Z","comments":true,"path":"2017/08/25/multi-server-gpu-status-monitor/","link":"","permalink":"https://ssarcandy.tw/2017/08/25/multi-server-gpu-status-monitor/","excerpt":"éš¨è‘—å¯¦é©—å®¤ GPU è³‡æºæ—¥ç›Šå¢åŠ ï¼Œæœ‰è¶Šä¾†è¶Šå¤šäººåœ¨æŠ±æ€¨æ¶ä¸åˆ° GPUã€ä¸çŸ¥é“å“ªå°æœ‰ç©ºçš„ GPU ã€æœ‰äººä½”ç”¨å¤ªå¤š GPU è³‡æºç­‰ç­‰å•é¡Œï¼Œé€™äº›å•é¡Œä¼¼ä¹è·Ÿæ²’æœ‰ä¸€å€‹æ–¹æ³•å¯ä»¥ã€Œä¸€ç›®ç­ç„¶çš„çŸ¥é“æ‰€æœ‰ GPU çš„ç‹€æ³ã€æœ‰é—œã€‚ å°ï¼Œå°±åƒæ˜¯ cml-status ä¸€æ¨£ï¼Œå‡è¨­æœ‰å€‹ GPU ç‰ˆçš„ cml-statusï¼Œæ‡‰è©²å°±å¯ä»¥è®“å¤§å®¶æ›´è¼•æ˜“åœ°æ‰¾åˆ°é–’ç½®çš„ GPUï¼Œå¦‚æœæœ‰äººä½”ç”¨éå¤šé‹ç®—è³‡æºä¹Ÿå®¹æ˜“ç™¼ç¾ã€‚ æ–¼æ˜¯ CMLab GPU Status å°±èª•ç”Ÿæ‹‰~","text":"éš¨è‘—å¯¦é©—å®¤ GPU è³‡æºæ—¥ç›Šå¢åŠ ï¼Œæœ‰è¶Šä¾†è¶Šå¤šäººåœ¨æŠ±æ€¨æ¶ä¸åˆ° GPUã€ä¸çŸ¥é“å“ªå°æœ‰ç©ºçš„ GPU ã€æœ‰äººä½”ç”¨å¤ªå¤š GPU è³‡æºç­‰ç­‰å•é¡Œï¼Œé€™äº›å•é¡Œä¼¼ä¹è·Ÿæ²’æœ‰ä¸€å€‹æ–¹æ³•å¯ä»¥ã€Œä¸€ç›®ç­ç„¶çš„çŸ¥é“æ‰€æœ‰ GPU çš„ç‹€æ³ã€æœ‰é—œã€‚ å°ï¼Œå°±åƒæ˜¯ cml-status ä¸€æ¨£ï¼Œå‡è¨­æœ‰å€‹ GPU ç‰ˆçš„ cml-statusï¼Œæ‡‰è©²å°±å¯ä»¥è®“å¤§å®¶æ›´è¼•æ˜“åœ°æ‰¾åˆ°é–’ç½®çš„ GPUï¼Œå¦‚æœæœ‰äººä½”ç”¨éå¤šé‹ç®—è³‡æºä¹Ÿå®¹æ˜“ç™¼ç¾ã€‚ æ–¼æ˜¯ CMLab GPU Status å°±èª•ç”Ÿæ‹‰~ ç¾æ³ç”±æ–¼æˆ‘å€‘æœ‰æ•¸å°ä¼ºæœå™¨æ˜¯æœ‰ GPU è³‡æºçš„ï¼Œæ‰€ä»¥è¦åšå‡ºä¸€å€‹ç¶²é ç‰ˆçš„ç›£æ§ç³»çµ±å¤§æ¦‚è¦æœ‰å…©å€‹æ­¥é©Ÿ: å½™æ•´å„å°è³‡è¨Šåˆ°æŸä¸€å° server å°‡é€™äº›è³‡è¨Šè½‰æˆç¶²é å½¢å¼å‘ˆç¾ å°æ–¼ç¬¬ä¸€é»å¤§æ¦‚æœ‰å…©ç¨®åšæ³•ï¼Œä¸€æ˜¯ä¸»å‹•å»å–å¾—è³‡è¨Šï¼Œä¹Ÿå°±æ˜¯é€é ssh ç™»å…¥åˆ°å„å€‹æœ‰ GPU çš„ä¼ºæœå™¨è©¢å•è³‡è¨Šï¼›äºŒæ˜¯å„å€‹æœ‰ GPU çš„ä¼ºæœå™¨å„è‡ªå›å ±è³‡è¨Šçµ¦æŸä¸€å°ä¾†å½™æ•´ã€‚ è€Œä¸»å‹•å»å–å¾—è³‡è¨Šçš„æ–¹æ³•æœ‰å¹¾å€‹ç¼ºé»ï¼Œ é€é ssh ç™»å…¥éœ€è¦å¯†ç¢¼ï¼Œç•¶ç„¶å¯ä»¥é€éå»ºç«‹ ssh èªè­‰ä¾†çœå»é€™ä¸€æ­¥ï¼Œä½†å¥½éº»ç…© _:(Â´â–¡&#96;ã€ âˆ ):_ é€™ç¨®æ–¹æ³•æœƒä½¿å¾—äº‹æƒ…éƒ½æ˜¯ä¸€å°ä¼ºæœå™¨åœ¨åš(åˆè¦ç™»å…¥å„å°åˆè¦å½™æ•´è³‡è¨Š)ï¼Œæ„Ÿè¦ºä¸æ˜¯å¾ˆäººé“â€¦ å¦ä¸€å€‹æ–¹æ³•å‰‡æ˜¯ã€Œå„è‡ªå›å ±ï¼Œçµ±ä¸€å‘ˆç¾ã€ï¼Œå°±æ˜¯å¤§å®¶å„è‡ªå›å ± GPU ç‹€æ³ï¼Œç„¶å¾Œç”± web server çµ±ä¸€å½™æ•´è³‡è¨Šï¼Œé€™ç¨®æ„Ÿè¦ºå°±æ¯”è¼ƒäººé“ä¸€é»ï¼Œå¤§å®¶ä¸€èµ·åˆ†æ“”å·¥ä½œ~ å„è‡ªå›å ±ï¼Œçµ±ä¸€å‘ˆç¾æ±ºå®šäº†å¤§æ–¹å‘çš„åšæ³•ä»¥å¾Œï¼Œå¯ä»¥ç¹¼çºŒåˆ‡åˆ†æ•´ä»¶äº‹æƒ…çš„æµç¨‹: å„å°æ©Ÿå™¨å¦‚ä½•å›å ±?å›å ±å»å“ª? å¦‚ä½•å½™æ•´? å¦‚ä½•ä»¥ç¶²é å‘ˆç¾? å„å°æ©Ÿå™¨å¦‚ä½•å›å ±ã€å›å ±å»å“ªï¼Ÿ å¯¦é©—å®¤æ¯å°ä¼ºæœå™¨éƒ½æœ‰å…±ç”¨ä¸€å€‹ NFS å¹¸å¥½æˆ‘å€‘çš„ server éƒ½æœ‰ç”¨ NFS ï¼Œæ‰€ä»¥å„è‡ªå›å ±åˆ° NFS ä¸Šå°±å¯ä»¥è®“å…¶ä»–å°å­˜å–åˆ°è³‡è¨Šäº†ã€‚é‚£ç²å¾— GPU è³‡è¨Šçš„æ–¹æ³•ä¸å¤–ä¹å°±æ˜¯ä¸‹ nvidia-smi ä¾†å–å¾—å›‰ï¼Œä½†èªªçœŸçš„é€™æŒ‡ä»¤å¤ªè±å¯Œäº†ï¼Œæ‰€ä»¥æˆ‘æ”¹ç”¨åˆ¥çš„ç¥äººåšçš„æŒ‡ä»¤ gpustatï¼Œè¼¸å‡ºå°±ä¹¾æ·¨å¤šäº†~ gpustat sample output æ‰€ä»¥æ¯ä¸€å° GPU server è¦åšçš„æ˜¯ã€Œæ¯åˆ†é˜å›å ±ä¸€æ¬¡ GPU status ä¸¦å­˜è‡³ NFSã€ï¼Œå¯ä»¥é€é crontab è¨»å†Š: 12# crontab on each GPU server* * * * * /usr/local/bin/gpustat -pcu &gt; /NFS/status-gpu/$(hostname) å¦‚ä½•å½™æ•´ï¼Ÿå‰›å¥½æˆ‘å€‘ server åå­éƒ½æ˜¯å¾ˆæ²’å‰µæ„çš„ cml*ï¼Œæ‰€ä»¥å½™æ•´ç›¸ç•¶ç°¡å–®ã€‚ç”±æ–¼å„è‡ªå›å ±çš„é—œä¿‚ï¼Œåœ¨ NFS ä¸Šæœƒæœ‰å¦‚ä¸‹çš„æª”æ¡ˆ: 12345678910-rw-r--r-- 1 root root 875 Aug 25 23:04 cml10-rw-r--r-- 1 root root 940 Aug 25 23:04 cml11-rw-r--r-- 1 root root 169 Aug 25 23:04 cml14-rw-r--r-- 1 root root 682 Aug 25 23:04 cml16-rw-r--r-- 1 root root 746 Aug 25 23:04 cml19-rw-r--r-- 1 root root 364 Aug 25 23:04 cml21-rw-r--r-- 1 root root 169 Aug 25 23:04 cml22-rw-r--r-- 1 root root 620 Aug 25 23:04 cml23-rw-r--r-- 1 root root 748 Aug 25 23:04 cml24-rw-r--r-- 1 root root 747 Aug 25 23:04 cml25 é‚£è¦å½™æ•´å°±ä¸‹å€‹ cat cml* å°±è§£æ±ºäº†ã€‚ å¦‚ä½•ä»¥ç¶²é å‘ˆç¾ï¼Ÿæœ€å¾Œæœ‰äº†å½™æ•´å¾Œçš„è³‡è¨Šå¾Œè©²å¦‚ä½•å‘ˆç¾ç½®ç¶²é ä¸Šå‘¢?ç”±æ–¼æˆ‘å€‘çš„ web server æœ‰ apacheï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šåªè¦å¤šæå€‹è³‡æ–™å¤¾åº•ä¸‹æœ‰ index.htmlå°±å¯ä»¥äº†ã€‚æ‰€ä»¥åªè¦æƒ³è¾¦æ³•å°‡å½™æ•´çš„è³‡è¨Šè½‰æˆ html å³å¯ã€‚ ç¶²è·¯ä¸Šå¤§ç¥å¾ˆå¤šï¼Œæˆ‘åˆç™¼ç¾äº† ansi2html.sh ï¼Œé€™å·¥å…·å¯ä»¥æŠŠ terminal output è½‰æˆ html ï¼Œä¸¦ä¸”é€£é¡è‰²éƒ½å¹«ä½ è½‰æˆ css ï¼Œå¤ªç¥æ‹‰~ æ‰€ä»¥è¦è®Šæˆç¶²é å‘ˆç¾å°±å¯ä»¥è¨»å†Šå€‹ crontab: 12# crontab on web server* * * * * cat /status-gpu/cml* | /bin/sh ansi2html.sh &gt; index.html æ¯åˆ†é˜é‡æ–°åˆ·æ–° index.html BUGåšå¥½ä»¥å¾Œé‚„æ˜¯é€ƒä¸æ‰ BUG çš„æ‘§æ®˜QQæœ‰æ™‚å€™æœƒç™¼ç¾å½™æ•´çš„è³‡è¨Šæœƒç¼ºå°‘æŸå¹¾å° GPU server çš„è³‡è¨Š æŸ¥ä¾†æŸ¥å»ç™¼ç¾åŸä¾†æ˜¯å› ç‚º crontab è¨»å†Šçš„æ™‚é–“ä¸€æ¨£(éƒ½æ˜¯æ¯åˆ†é˜)ï¼Œå†åŠ ä¸Š NFS æ˜¯é€éç¶²è·¯å‚³è¼¸æ‰€ä»¥æœƒæ¯”è¼ƒæ…¢ï¼Œå°è‡´å„è‡ªæ©Ÿå™¨æ¯åˆ†é˜å›å ±ç‹€æ³æ™‚æª”æ¡ˆé‚„æ²’å¯«å…¥ï¼Œweb server å°±åŸ·è¡Œå½™æ•´å‹•ä½œï¼Œå°±æœƒå‡ºç¾ç¼ºæª”çš„æƒ…å½¢ã€‚è§£æ±ºæ–¹å¼å¾ˆç°¡å–®ï¼Œå°±æ˜¯å½™æ•´æ™‚é–“ç¨å¾®å»¶é²ä¸€é»ï¼Œè®“å„è‡ªå›å ±æœ‰æ™‚é–“å®Œæˆã€‚ 12# crontab on web server* * * * * sleep 30 &amp;&amp; cat /status-gpu/cml* | /bin/sh ansi2html.sh &gt; index.html ç”¨ sleep å³å¯å»¶é²æŒ‡ä»¤ã€‚ é›œè«‡ å·®é»é€™å€‹æœˆå°±è¦é–‹å¤©çª—äº†â€¦ å¤§åŠ›å‹Ÿé›†ç¶²ç®¡ä¸­!","categories":[],"tags":[{"name":"unix","slug":"unix","permalink":"https://ssarcandy.tw/tags/unix/"}]},{"title":"æ¥æ¡ˆä¸‰å…©äº‹","slug":"about-taking-case","date":"2017-07-21T11:06:10.000Z","updated":"2025-10-22T00:51:26.604Z","comments":true,"path":"2017/07/21/about-taking-case/","link":"","permalink":"https://ssarcandy.tw/2017/07/21/about-taking-case/","excerpt":"æœ€è¿‘çµ‚æ–¼çµæŸäº†ä¸€å€‹æäº†å¾ˆä¹…çš„ case ã€‚æˆ‘å…¶å¯¦æ²’ä»€éº¼æ¥æ¡ˆç¶“é©—ï¼Œé€™æ¬¡ä¹Ÿæ˜¯å‰›å¥½ç®—æ˜¯å­¸æ ¡å–®ä½æ‰¾æˆ‘åšå€‹æ´»å‹•çš„å®£å‚³ç¶²ç«™ï¼Œæˆ‘å¿ƒæƒ³æ—¢ç„¶æ˜¯å­¸æ ¡çš„æ‡‰è©²ä¹Ÿä¸å¤ªå®¹æ˜“è¢«é¨™ï¼Œå°±ä¾†è©¦è©¦çœ‹æ‰€è¬‚çš„æ¥æ¡ˆã€‚åœ¨é€™æ¬¡ç¶“é©—ä¸­å…¶å¯¦ä¹Ÿæ˜¯å­¸åˆ°ä¸å°‘æ±è¥¿ã€è¸©äº†å¾ˆå¤šé›·ï¼Œå¤§éƒ¨ä»½éƒ½æ˜¯å› ç‚ºæ²’ä»€éº¼ç¶“é©—å°è‡´è¸©åˆ°çš„å¾ˆå¤šå¾ˆå¤šç®—å°ˆæ¡ˆç®¡ç†ç›¸é—œçš„é›·ã€‚å¦‚æœé‚„æœ‰ä¸‹æ¬¡çš„è©±ï¼Œä¸€å®šè¦æ³¨æ„ä¸€äº›äº‹æƒ…æ‰å¯ä»¥è®“æ•´å€‹æ¡ˆå­çš„é€²è¡Œæ›´åŠ é †åˆ©ã€‚","text":"æœ€è¿‘çµ‚æ–¼çµæŸäº†ä¸€å€‹æäº†å¾ˆä¹…çš„ case ã€‚æˆ‘å…¶å¯¦æ²’ä»€éº¼æ¥æ¡ˆç¶“é©—ï¼Œé€™æ¬¡ä¹Ÿæ˜¯å‰›å¥½ç®—æ˜¯å­¸æ ¡å–®ä½æ‰¾æˆ‘åšå€‹æ´»å‹•çš„å®£å‚³ç¶²ç«™ï¼Œæˆ‘å¿ƒæƒ³æ—¢ç„¶æ˜¯å­¸æ ¡çš„æ‡‰è©²ä¹Ÿä¸å¤ªå®¹æ˜“è¢«é¨™ï¼Œå°±ä¾†è©¦è©¦çœ‹æ‰€è¬‚çš„æ¥æ¡ˆã€‚åœ¨é€™æ¬¡ç¶“é©—ä¸­å…¶å¯¦ä¹Ÿæ˜¯å­¸åˆ°ä¸å°‘æ±è¥¿ã€è¸©äº†å¾ˆå¤šé›·ï¼Œå¤§éƒ¨ä»½éƒ½æ˜¯å› ç‚ºæ²’ä»€éº¼ç¶“é©—å°è‡´è¸©åˆ°çš„å¾ˆå¤šå¾ˆå¤šç®—å°ˆæ¡ˆç®¡ç†ç›¸é—œçš„é›·ã€‚å¦‚æœé‚„æœ‰ä¸‹æ¬¡çš„è©±ï¼Œä¸€å®šè¦æ³¨æ„ä¸€äº›äº‹æƒ…æ‰å¯ä»¥è®“æ•´å€‹æ¡ˆå­çš„é€²è¡Œæ›´åŠ é †åˆ©ã€‚ ä¸€å®šè¦å¯«å¥½åˆç´„é€™çœ‹èµ·ä¾†æ˜¯åŸºæœ¬ä¸­çš„åŸºæœ¬ï¼Œä½†æˆ‘ç•¶åˆå°±æ˜¯æ²’åš(æ©é¢ç•¶åˆåªæœ‰å£é ­èªªå¥½è€Œå·²ã€‚é€™ä»¶äº‹æƒ…ä¹‹æ‰€ä»¥é‡è¦ï¼Œæ˜¯å› ç‚ºé€™æ˜¯å€‹æœ€åŸºæœ¬çš„ä¿éšœï¼Œä¸è«–æ˜¯å°æˆ‘å€‘æˆ–æ˜¯å°å®¢æˆ¶æ–¹ï¼Œå’Œç´„å¯ä»¥èªªæ¸…æ¥šè¬›æ˜ç™½æˆ‘å€‘åˆ°åº•è¦åšä»€éº¼?å“ªäº›æ˜¯æˆ‘å€‘çš„è² è²¬ç¯„åœã€å“ªäº›ä¸æ˜¯?ç„¶å¾Œç•¶ç„¶é‚„æœ‰å…¶ä»–çš„ç´°ç¯€ï¼ŒåŒ…å«åƒ¹æ ¼ï¼Œæ™‚ç¨‹ç­‰ç­‰éƒ½æ‡‰è©²è¦å¯«åœ¨åˆç´„ã€‚ ä¸€å®šè¦è¨‚å¥½æ™‚ç¨‹åœ¨é€™æ¬¡çš„æ¡ˆå­ä¸­æˆ‘é‡åˆ°æœ€å¤§çš„å•é¡Œå°±æ˜¯ï¼šæˆ‘å€‘é–‹ç™¼å¥½äº† ï¼Œä½†æ˜¯å®¢æˆ¶å»ä¸€ç›´æ²’æ™‚é–“é©—æ”¶ï¼Œå°è‡´æ¯æ¬¡ä¾†å› feedback å°±å¯èƒ½æ‹–äº†å¥½å¹¾å€‹æœˆã€‚ é€™æ¨£é€ æˆå¾ˆå¤šå•é¡Œä¸€å€‹æ˜¯å¯¦åœ¨æ˜¯æ‹–å¤ªä¹…äº†ï¼Œéš”å¥½å¹¾å€‹æœˆæ‰åˆé‡èµ·å°ˆæ¡ˆåšèµ·ä¾†çœŸçš„å¾ˆç…©ï¼›å¦ä¸€æ–¹é¢å®¢æˆ¶æ–¹ä¹Ÿæœƒè¦ºå¾—æˆ‘å€‘åšå¾—å¾ˆæ…¢ã€‚å› ç‚ºæˆ‘å€‘åšå‡ºä¾†çš„æ±è¥¿ä¸ä¸€å®šæ˜¯å®¢æˆ¶æƒ³è¦çš„ï¼Œä¸€ä¾†ä¸€å›ä¿®æ­£å°±èŠ±æ‰å¤ªå¤šæ™‚é–“ï¼Œæ•´é«”è€Œè¨€å°±æœƒæœ‰æˆ‘å€‘ä¹Ÿé–‹ç™¼å¾—å¾ˆæ…¢çš„æ„Ÿè¦ºã€‚ å¦‚æœç•¶åˆå¯ä»¥åœ¨åˆç´„ä¸­è¨‚å¥½å¹¾æ¬¡ check point çš„æ™‚é–“é»ï¼Œè‡³å°‘å°±å¯ä»¥ç¢ºä¿ä¸æœƒç„¡é™æœŸæ‹–å»¶ä¸‹å»ã€‚ ä¸€å®šè¦æ‰¾å¥½å°å£æˆ‘é€™é‚ŠæŒ‡å¾—å°å£æ˜¯æŒ‡:ã€Œ å¯ä»¥å¿«é€Ÿç²å¾— feedback çš„äººã€ã€‚å› ç‚ºæˆ‘å€‘é€™ä¸€æ¬¡çš„é–‹ç™¼åŒ…å«äº†æ‰€æœ‰çš„è¨­è¨ˆï¼Œéƒ½æ˜¯æˆ‘å€‘è² è²¬ã€‚ä½†æ˜¯å‘¢ï¼Œæ‰¯åˆ°è¨­è¨ˆé€™ç¨®æ¯”è¼ƒä¸»è§€çš„æ±è¥¿ï¼Œæˆ‘å€‘åšå‡ºä¾†çš„ä¸¦ä¸ä¸€å®šå®¢æˆ¶æ¥å—ã€‚æ‰€ä»¥èˆ‡å…¶ç­‰åˆ° check point å†ä¾†è¢«å®¢æˆ¶æ‰“æ§è¦æ±‚é‡åšï¼Œä¸å¦‚ç•¶åˆå°±å…ˆç¢ºä¿ä¸€å€‹å®¢æˆ¶æ–¹çš„å°å£ï¼Œæ‰å¯ä»¥åœ¨æˆ‘å€‘åš prototype æ™‚å°±è¿…é€Ÿçš„ç¢ºèªåˆ°åº•æ˜¯ä¸æ˜¯ç¬¦åˆä»–å€‘æƒ³è¦çš„ã€‚ ç°¡å–®ä¾†èªªï¼Œç¢ºèªå°å£å°±æ˜¯å¯ä»¥ä½¿æˆ‘å€‘å°‘åšå¾ˆå¤šç™½å·¥ã€‚ ä¸è¦ä½¿ç”¨åˆ¥äººä¸ç†Ÿæ‚‰çš„å·¥å…·é€™å€‹é»å…¶å¯¦è·Ÿä¸Šä¸€é»æœ‰ä¸€é»é—œä¿‚ã€‚æ¡ˆå­é–‹ç™¼åˆ°å¾ŒæœŸå‹¢å¿…æ˜¯æœ‰ä¸€äº› BUG æˆ–å…¶ä»–è¦èª¿æ•´çš„éƒ¨åˆ†ã€‚æ‰€ä»¥ä¹Ÿæ˜¯å¿…é ˆè¦è¿½è¹¤é€™äº› issueã€‚é‚£ç•¶ç„¶å¤§å®¶éƒ½èªç‚º github issue tracker å¾ˆå¥½ç”¨å¾ˆæ£’ï¼Œä½†äº‹å¯¦ä¸Šå®¢æˆ¶é€™é‚Šæ ¹æœ¬ä¸æœƒä½¿ç”¨é€™ç¨®å·¥å…·ï¼Œæœ€å¾Œå°±æœƒè®Šæˆä»–å€‘æ ¹æœ¬æ²’åœ¨çœ‹ã€‚æ‰€ä»¥èˆ‡å…¶ç”¨æˆ‘å€‘å·¥ç¨‹å¸«è¦ºå¾—å¥½ç”¨çš„å·¥å…·ï¼Œä¸å¦‚ä½¿ç”¨å¤§å®¶éƒ½æœƒç”¨çš„å·¥å…·ã€‚åƒæ˜¯åœ¨é€™ä¸€æ¬¡çš„æ¡ˆå­è£¡æˆ‘çš„ issue tracker æ˜¯ç°¡å–®çš„ç”¨ Google sheet æ‹‰ä¸€æ‹‰è¡¨æ ¼ï¼Œé€™æ¨£åè€Œæ›´èƒ½è®“å®¢æˆ¶æ¸…æ¥šçŸ¥é“æˆ‘å€‘çš„é€²åº¦ã€‚ å³æ™‚é€šè¨Šä¹Ÿæ˜¯ï¼Œå·¥ç¨‹å¸«å¯èƒ½è¦ºå¾— Slack å¾ˆæ£’å¾ˆé©åˆæ¡ˆå­çš„æºé€šï¼Œä½†äº‹å¯¦ä¸Šå°±æ˜¯å®¢æˆ¶é‚£é‚Šæ°¸é éƒ½ä¸æœƒä¸Šç·š XDæ‰€ä»¥åè€Œä½¿ç”¨ç§äººçš„ Facebook Messanger é‚„æ¯”è¼ƒæœ‰æ•ˆç‡ã€‚ éŒ¢çš„äº‹æƒ…è¦è¬›æ¸…æ¥šæœ‰ä¸€ä»¶äº‹æƒ…æˆ‘é«”æœƒæ·±åˆ»ï¼Œå°±æ˜¯ã€ŒéŒ¢çš„äº‹æƒ…ä¸€å®šè¦è¬›æ¸…æ¥šã€ã€‚ä¹Ÿä¸è¦è¦ºå¾—è‡ªå·±çš„é–‹åƒ¹æœƒä¸æœƒå¤ªè²´ï¼Œå› ç‚ºæœƒä¸æœƒå¤ªè²´æ˜¯å®¢æˆ¶é‚£é‚Šè©²ç…©æƒ±çš„ XDé›–ç„¶æ¯ä¸€å€‹æ¡ˆå­å¯èƒ½é †åˆ©çš„ç¨‹åº¦ä¸åŒï¼Œä½†æ˜¯æˆ‘å€‹äººèªç‚ºæ¥æ¡ˆä¸€å®šæœƒæ¯”æƒ³åƒä¸­çš„éº»ç…©ã€‚æ‰€ä»¥åœ¨éŒ¢çš„æ–¹é¢ä¸€å®šè¦é–‹ä¸€å€‹ç¢ºä¿è‡ªå·±ä¸æœƒåšåˆ°è¦ºå¾—ã€Œå¾ˆä¸åˆ’ç®—ã€ã€‚å…·é«”è€Œè¨€å¤§æ¦‚å°±æ˜¯ä½ è¦ºå¾—å¯ä»¥çš„åƒ¹æ ¼å†ä¹˜ä»¥ 1.5 å€ï¼Œåˆ°æ™‚å€™ä½ æœƒè¦ºå¾—é€™æ‰åªæ˜¯ã€Œå‰›å‰›å¥½çš„åƒ¹æ ¼ã€ã€‚ å¦å¤–ï¼ŒéŒ¢ä¹Ÿæ˜¯æ‡‰è©²è¦æœ‰å…ˆä»˜ã€å¾Œä»˜çš„éƒ¨åˆ†ï¼Œæ‰æ¯”è¼ƒæœ‰é»ä¿éšœï¼Œè‡³å°‘ä¸æœƒä¸€æ¯›éŒ¢éƒ½æ‹¿ä¸åˆ°çš„é¢¨éšªã€‚åƒæˆ‘é€™ä¸€æ¬¡çš„æ¡ˆå­å°±å› ç‚ºä¹Ÿæ²’æœ‰å¯«åˆç´„æ‰€ä»¥æœ€å¾Œè®Šæˆæ˜¯çµæ¡ˆäº†æ‰è¦ä»˜éŒ¢ï¼Œé‚£é€™æ¨£å­å…¶å¯¦å°æ–¼æ¥æ¡ˆæ–¹éå¸¸è™§ï¼Œå› ç‚ºä»–å€‘éš¨æ™‚å¯ä»¥çªç„¶èªªæ¡ˆå­ä¸è¦åšäº†ï¼Œç„¶å¾Œæˆ‘å°±æœƒè®Šæˆåšä¸€å †ä½†å•¥éƒ½æ‹¿ä¸åˆ°ã€‚ ç¸½è€Œè¨€ä¹‹ï¼ŒéŒ¢çš„äº‹æƒ…å°±å¹¾å€‹åŸå‰‡ï¼š é–‹ä¸€å€‹æ¯”è‡ªå·±è¦ºå¾— ok çš„åƒ¹æ ¼é«˜ä¸€é»çš„åƒ¹æ ¼ï¼Œå› ç‚ºæ¥æ¡ˆçš„éç¨‹è‚¯å®šæœƒæ¯”æƒ³åƒä¸­çš„éº»ç…©ã€‚ å…ˆä»˜å¾Œä»˜ã€æ€éº¼åˆ†é…éƒ½æ‡‰è©²æ–¼ä¸€é–‹å§‹çš„åˆç´„ä¸­è¨‚å¥½ã€‚ é›œè«‡ è‡ªå¾æ±ºå®šè¦å¼„å€‹éƒ¨è½æ ¼ä»¥å¾Œï¼Œå°±ä¸€ç›´ç£ä¿ƒè‡ªå·±ä¸€å€‹æœˆèµ·ç¢¼è¦å¯«å€‹ä¸€ç¯‡æ–‡ç« ï¼Œè‡ªä»Šä¹Ÿæ»¿ä¸€å¹´äº†ï¼Œå¯å–œå¯è³€ï½ æœ€è¿‘å‰›ä¿®æ­£äº†èº«é«”çš„ä¸€å€‹ BUGï¼Œçœ‹ä¾†è¦ç—›è‹¦ä¸€é™£å­äº†ã€‚ æ­£äº‹ä¾èˆŠæ²’å•¥é€²å±•ï¼Œæœç„¶æˆ‘åƒè‰åƒå¤ªä¹…äº†QQ","categories":[],"tags":[{"name":"trashtalk","slug":"trashtalk","permalink":"https://ssarcandy.tw/tags/trashtalk/"}]},{"title":"Coherent Line Drawing","slug":"Coherent-Line-Drawing","date":"2017-06-25T16:14:38.000Z","updated":"2025-10-22T00:51:26.604Z","comments":true,"path":"2017/06/25/Coherent-Line-Drawing/","link":"","permalink":"https://ssarcandy.tw/2017/06/25/Coherent-Line-Drawing/","excerpt":"ç·šæ¢è—è¡“ç•«(line drawing) æ˜¯æœ€ç°¡å–®çš„ä¸€ç¨®è¦–è¦ºå‘ˆç¾åœ–ç•«çš„æ–¹å¼ï¼Œåƒ…åƒ…æ˜¯å¹¾æ¢ç·šæ¢å³èƒ½æ¸…æ¥šçš„è¡¨ç¤ºå‡ºåœ–ç‰‡ä¸­çš„ç‰©ä»¶ã€‚é€™ç¯‡è«–æ–‡(Coherent Line Drawingâ€™ by Kang et al, Proc. NPAR 2007)æå‡ºä¸€å€‹å…¨è‡ªå‹•çš„æ–¹æ³•ï¼Œå¯ä»¥å°‡ç›¸ç‰‡è½‰æ›æˆç°¡å–®ã€é«˜å“è³ªçš„ç·šæ¢ç•«é¢¨æ ¼åœ–ç‰‡ã€‚ è¼¸å…¥ä¸€å¼µå½±åƒï¼Œå³å¯ç”¢ç”Ÿå‡ºä¸€å¼µç·šæ¢è—è¡“é¢¨æ ¼ç•«ã€‚","text":"ç·šæ¢è—è¡“ç•«(line drawing) æ˜¯æœ€ç°¡å–®çš„ä¸€ç¨®è¦–è¦ºå‘ˆç¾åœ–ç•«çš„æ–¹å¼ï¼Œåƒ…åƒ…æ˜¯å¹¾æ¢ç·šæ¢å³èƒ½æ¸…æ¥šçš„è¡¨ç¤ºå‡ºåœ–ç‰‡ä¸­çš„ç‰©ä»¶ã€‚é€™ç¯‡è«–æ–‡(Coherent Line Drawingâ€™ by Kang et al, Proc. NPAR 2007)æå‡ºä¸€å€‹å…¨è‡ªå‹•çš„æ–¹æ³•ï¼Œå¯ä»¥å°‡ç›¸ç‰‡è½‰æ›æˆç°¡å–®ã€é«˜å“è³ªçš„ç·šæ¢ç•«é¢¨æ ¼åœ–ç‰‡ã€‚ è¼¸å…¥ä¸€å¼µå½±åƒï¼Œå³å¯ç”¢ç”Ÿå‡ºä¸€å¼µç·šæ¢è—è¡“é¢¨æ ¼ç•«ã€‚ Implementationæœ¬ç¯‡è«–æ–‡çš„æ–¹æ³•ä¸»è¦æµç¨‹å¦‚ä¸‹ï¼š ç”±è¼¸å…¥å½±åƒç”¢ç”Ÿé‚Šç·£å‘é‡æµå ´ åè¦†çš„ç²¾ç…‰ã€å¹³æ»‘åŒ–é‚Šç·£å‘é‡æµå ´ è—‰ç”±é‚Šç·£å‘é‡æµå ´çš„è³‡è¨Šï¼Œå°åŸåœ–å¥—ç”¨é«˜æ–¯å·®ä»¥ç”¢ç”Ÿç‰¹å¾µç·šæ¢ æ•´å€‹æ–¹æ³•çš„æµç¨‹åœ–ï¼š ç”±åŸåœ–ç”¢ç”Ÿé‚Šç·£å‘é‡æµå ´ï¼Œå†è—‰ç”±æµå ´è³‡è¨Šå¥—ç”¨é«˜æ–¯å·®ç”¢ç”Ÿç·šæ¢ç•«ã€‚ Edge Tangent Flowç”±æ–¼ç·šæ¢ç•«çš„ç‰¹æ€§å¸Œæœ›æ˜¯èƒ½å¤ ä¿ç•™åŸåœ–é‡è¦çš„ç‰¹å¾µé‚Šç·£ï¼Œæ‰€ä»¥å°æ‡‰çš„é‚Šç·£å‘é‡æµå ´(Edge Tangent Flow)å¿…é ˆæ»¿è¶³å¹¾å€‹æ¢ä»¶ï¼š å¯ä»¥æè¿°é‡è¦é‚Šç·£çš„æµå‘ã€‚ é„°è¿‘çš„å‘é‡å¿…é ˆè¦å¹³æ»‘(é¿å…é„°è¿‘çš„å‘é‡æ–¹å‘å·®å¤ªå¤š)ï¼Œé™¤éæ˜¯è§’è½ã€‚ é‡è¦çš„é‚Šç·£å¿…é ˆè¦ç¶­æŒå®ƒåŸæœ¬çš„æ–¹å‘ã€‚ Generate initial ETFè€Œæœ¬ç¯‡ç”¢ç”Ÿ ETF çš„æ–¹æ³•æ˜¯è—‰ç”±åè¦†çš„å¹³æ»‘åŒ–æµå ´ä¾†å¾—åˆ°ä¸€å€‹ç¬¦åˆä¸Šè¿°å„å€‹æ¢ä»¶çš„ ETFã€‚é¦–å…ˆï¼Œè—‰ç”± åŸåœ–ç”¢ç”Ÿç°éšæ¢¯åº¦æµå ´ (Gradient Vector Field)ï¼Œå†é€†æ™‚é˜æ—‹è½‰ 90 åº¦ä¾† ç”¢ç”Ÿåˆå§‹çš„é‚Š ç·£å‘é‡æµå ´ (ETF)ã€‚ å°åŸåœ–åšé©ç•¶æ¨¡ç³Šå¾Œå³å¯å–å¾—ç°éšæ¢¯åº¦å‘é‡(GVF)ï¼Œå†æ—‹è½‰ 90 åº¦å¯å¾—ä¸€å€‹åˆå§‹çš„ ETFã€‚ Refining ETFå†å°‡é€™å€‹åˆå§‹çš„ ETF åšå¹³æ»‘åŒ–ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š å…¶ä¸­ï¼Œ æ˜¯ä¸€å€‹åœ“å½¢ box filter functionï¼Œè½åœ¨å¤–é¢çš„å‘é‡æ¬Šé‡ç‚ºé›¶ ç‚º magnitude weight functionï¼Œç”¨æ–¼ç¢ºä¿é‡è¦çš„é‚Šç·£æ–¹å‘æœƒè¢«ä¿ç•™ ç‚º direction weight functionï¼Œç”¨æ–¼ä½¿å¾—é„°å±…çš„å‘é‡æ–¹å‘ä¸æœƒå·®è·éå¤§ å‰‡æ˜¯ç•¶å…©å‘é‡å¤¾è§’éå¤§æ™‚æœƒåè½‰æ–¹å‘ä»¥ç¢ºä¿å¤¾è§’ä¸æœƒå¤§æ–¼ 90 åº¦ é€éä»¥ä¸Šçš„æ–¹æ³•ï¼Œåªé ˆè¦æ±ºå®š kernel size å³å¯åè¦†å¹³æ»‘åŒ– å³å¯åè¦†å¹³æ»‘åŒ– é‚Šç·£å‘é‡æµå ´ ç›´è‡³å¤ å¹³ æ»‘ç‚ºæ­¢ ã€‚ ç”±å·¦è‡³å³ï¼šåŸåœ–ã€ç”¨ GVF å¾—åˆ°ä¹‹åˆå§‹ ETFã€ç¶“éä¸€æ¬¡å¹³æ»‘åŒ–ã€ç¶“éå…©æ¬¡å¹³æ»‘åŒ–ã€‚ kernel size=7 Line constructionæœ‰äº† ETF ä¹‹å¾Œå°±å¯ä»¥é€²å…¥ä¸‹ä¸€æ­¥ï¼šç”¢ç”Ÿç·šæ¢ã€‚æ¯”èµ·ä¸€èˆ¬é‚Šç·£åµæ¸¬çš„æ–¹æ³•å¦‚ Sobelã€Canny ç­‰ç­‰å›ºå®š kernel sizeï¼Œé€™ç¯‡è«–æ–‡çš„æ–¹æ³•å‰‡æ˜¯ä½¿ç”¨ flow-based kernel ï¼Œä¹Ÿå°±æ˜¯ kernel æœƒæ²¿è‘—æµå ´æœ‰è‘—ä¸ä¸€æ¨£çš„å½¢ç‹€ã€‚ (a)åŸåœ–ã€(b)ETFã€(c)æ²¿è‘—æµå ´çš„ kernelã€‚[1] Flow-based Difference-of-Gaussiansæ ¹æ“š flow-based kernel ä¾†é€²è¡Œ Difference-of-Gaussians(DoG) ï¼Œè—‰æ­¤ä¾†æ‰¾å‡ºè¶³å¤ ç¬¦åˆé‡è¦ç·šæ¢çš„åƒç´ å€‘ã€‚ (d)kernel è©³ç´°åœ–ç¤ºã€(e)é«˜æ–¯å·®ç¤ºæ„åœ–ã€‚[1] é¦–å…ˆå…ˆå°æ¯å€‹åƒç´ æ²¿è‘— ETF å‚ç›´æ–¹å‘åšä¸€ç¶­çš„ DoGï¼Œäº¦å³å°åœ–ä¸­ -T~T åš DoGï¼š å…¶ä¸­ å°±æ˜¯é«˜æ–¯å·®çš„éƒ¨åˆ†ã€‚ å†ä¾†å†æ²¿è‘— -S~S åšä¸€ç¶­çš„é«˜æ–¯åŠ æ¬Šï¼š é€™æ¨£çš„æ–¹æ³•é™¤äº†å¯ä»¥ä½¿é‚Šç·£æ›´æœ‰ä¸€è‡´æ€§(ä¸æœƒæœ‰å¤ªå¤šçŸ­ç·š)ä¸¦ä¸”åˆå¯ä»¥æŠ‘åˆ¶é›œè¨Šï¼Œä½¿å¾—ç”¢ç”Ÿå‡ºçš„çµæœå¾ˆç¬¦åˆç·šæ¢ç•«çš„ç‰¹æ€§ã€‚é€™å³æ˜¯é€™ç¯‡æ‰€æå‡ºçš„ Flow-based Difference of Gaussians(FDoG)ã€‚ Iterative FDoG filteringæœ‰æ™‚å€™åšä¸€æ¬¡ FDoG æ•ˆæœä¸¦ä¸å¤ å¥½ï¼Œæ‰€ä»¥å¯ä»¥è—‰ç”±åè¦†åš FDoG ä¾†é”åˆ°æ›´è‰¯å¥½çš„æ•ˆæœã€‚è¦åè¦†å¥—ç”¨ FDoG ä¹Ÿå¾ˆå®¹æ˜“ï¼Œåªè¦å°‡åŸåœ–èˆ‡ FDoG çš„è¼¸å‡ºç–Šåˆï¼Œç„¶å¾Œä»¥é€™æ–°çš„åœ–ç‰‡ç•¶ä½œåŸåœ–å†æ¬¡å¥—ç”¨ä¸€æ¬¡ FDoG å³å¯ã€‚ è—‰ç”±å°‡çµæœç–Šåˆå›åŸåœ–å†åšä¸€æ¬¡ FDoGï¼Œå¯ä»¥ä½¿çš„çµæœå“è³ªè¶Šä¾†è¶Šå¥½ã€‚ å¯¦ä½œä¸Šä¹Ÿå¾ˆç°¡å–®ï¼Œå°±æ˜¯æŠŠçµæœçš„é»‘è‰²éƒ¨åˆ†ç›´æ¥è¦†è“‹åœ¨åŸåœ–ç„¶å¾Œæ‹¿é€™å†åš FDoGã€‚æ³¨æ„é›–ç„¶åŸåœ–æ”¹è®Šäº†ï¼Œä½†æ˜¯ä½¿ç”¨çš„ ETF ä¸¦æ²’æœ‰é‡æ–°è¨ˆç®—ã€‚ 123456789101112/** * Superimposing the black edge pixels of the previous binary output * upon the original image */for (int y = 0; y &lt; originalImg.rows; y++) { for (int x = 0; x &lt; originalImg.cols; x++) { float H = result.at&lt;uchar&gt;(y, x); if (H == 0) { originalImg.at&lt;uchar&gt;(y, x) = 0; } }} ResultsåŸºæœ¬ä¸Šåœ–ç‰‡åœ¨ 512x512 å·¦å³çš„å¤§å°å¯ä»¥åœ¨ 3 ç§’å…§ç”¢ç”Ÿçµæœï¼Œè‹¥å¹³è¡ŒåŒ–å‰‡å³ä½¿æ˜¯æ›´å¤§å¼µçš„åœ–ç‰‡ä¹Ÿå¯é”åˆ° real timeã€‚ è¼¸å…¥å½±åƒã€‚ç”±å·¦ä¸Šè‡³å³ä¸‹ï¼šè”£å…¬ã€å»Ÿã€ç‡ˆå¡”ã€è€é·¹ã€‚ è¼¸å‡ºçµæœã€‚ç”±å·¦ä¸Šè‡³å³ä¸‹ï¼šè”£å…¬ã€å»Ÿã€ç‡ˆå¡”ã€è€é·¹ã€‚ Source codeYou can find my implementation source code at githubOr download pre-build version here Screenshot of my system user interface References Image from â€˜Coherent Line Drawingâ€™ by Kang et al, Proc. NPAR 2007 h1+ol { list-style-type: none; counter-reset: list-counter; padding-left: 0; } h1+ol li { position: relative; padding-left: 3em; } h1+ol li::before { counter-increment: list-counter; content: \"[\" counter(list-counter) \"] \"; position: absolute; left: 0; width: 25px; text-align: right; }","categories":[],"tags":[{"name":"c++","slug":"c","permalink":"https://ssarcandy.tw/tags/c/"},{"name":"opencv","slug":"opencv","permalink":"https://ssarcandy.tw/tags/opencv/"},{"name":"rendering","slug":"rendering","permalink":"https://ssarcandy.tw/tags/rendering/"},{"name":"paper","slug":"paper","permalink":"https://ssarcandy.tw/tags/paper/"}]},{"title":"Panorama image stitching","slug":"panorama-image-stitching","date":"2017-05-25T17:28:09.000Z","updated":"2025-10-22T00:51:26.605Z","comments":true,"path":"2017/05/25/panorama-image-stitching/","link":"","permalink":"https://ssarcandy.tw/2017/05/25/panorama-image-stitching/","excerpt":"å…¨æ™¯ç…§(panorama) ç¾åœ¨å·²æ™®éå­˜åœ¨æ‰‹æ©Ÿçš„ç›¸æ©Ÿè»Ÿé«”ä¸­ï¼Œæ˜¯ä¸€ç¨®å¯ä»¥æ‹æ”æ•¸å¼µç…§ç‰‡ç„¶å¾Œæ¥åœ¨ä¸€èµ·ä½¿æ•´å€‹è¦–é‡è®Šæ›´å¤§çš„æ–¹æ³•ï¼Œå…¨æ™¯ç…§å¸¸æ¯”è¼ƒå¸¸è¦‹çš„æ˜¯å¾€åŒä¸€æ–¹å‘æ‹æ”çš„ï¼Œä½†ä¹Ÿæ˜¯æœ‰ä¸Šä¸‹å·¦å³éƒ½å…¨æ™¯çš„é‚£ç¨®(Photo Sphere)ã€‚ä»¥ä¸€èˆ¬å¾€åŒæ–¹å‘æ‹æ”çš„ä¸€ç³»åˆ—ç…§ç‰‡ä¾†èªªï¼Œè¦åˆå‡ºä¸€å¼µå®Œæ•´çš„å…¨æ™¯ç…§ç†è«–ä¸Šå°±æ˜¯å°‡é€™ä¸€ç³»åˆ—çš„ç…§ç‰‡é‡ç–Šçš„éƒ¨åˆ†å°é½Šå°±å¯ä»¥äº†ã€‚ä½†å¯¦éš›ä¸Šé‚„æ˜¯éœ€è¦ç¶“éä¸€ç³»åˆ—çš„æ–¹æ³•ï¼Œæ‰èƒ½æ¥åˆå‡ºæ¯”è¼ƒè‰¯å¥½çš„å…¨æ™¯ç…§ã€‚","text":"å…¨æ™¯ç…§(panorama) ç¾åœ¨å·²æ™®éå­˜åœ¨æ‰‹æ©Ÿçš„ç›¸æ©Ÿè»Ÿé«”ä¸­ï¼Œæ˜¯ä¸€ç¨®å¯ä»¥æ‹æ”æ•¸å¼µç…§ç‰‡ç„¶å¾Œæ¥åœ¨ä¸€èµ·ä½¿æ•´å€‹è¦–é‡è®Šæ›´å¤§çš„æ–¹æ³•ï¼Œå…¨æ™¯ç…§å¸¸æ¯”è¼ƒå¸¸è¦‹çš„æ˜¯å¾€åŒä¸€æ–¹å‘æ‹æ”çš„ï¼Œä½†ä¹Ÿæ˜¯æœ‰ä¸Šä¸‹å·¦å³éƒ½å…¨æ™¯çš„é‚£ç¨®(Photo Sphere)ã€‚ä»¥ä¸€èˆ¬å¾€åŒæ–¹å‘æ‹æ”çš„ä¸€ç³»åˆ—ç…§ç‰‡ä¾†èªªï¼Œè¦åˆå‡ºä¸€å¼µå®Œæ•´çš„å…¨æ™¯ç…§ç†è«–ä¸Šå°±æ˜¯å°‡é€™ä¸€ç³»åˆ—çš„ç…§ç‰‡é‡ç–Šçš„éƒ¨åˆ†å°é½Šå°±å¯ä»¥äº†ã€‚ä½†å¯¦éš›ä¸Šé‚„æ˜¯éœ€è¦ç¶“éä¸€ç³»åˆ—çš„æ–¹æ³•ï¼Œæ‰èƒ½æ¥åˆå‡ºæ¯”è¼ƒè‰¯å¥½çš„å…¨æ™¯ç…§ã€‚ Warp images to cylinderç”±æ–¼360å…¨æ™¯å½±åƒçš„ç‰¹æ€§ï¼Œæ˜¯åˆ©ç”¨ç›¸æ©Ÿæ—‹è½‰æ‹æ”å‡ºç’°å ´å½±åƒï¼Œæ‰€ä»¥åœ¨åšåµæ¸¬ç‰¹å¾µé»æˆ–å°‡ç…§ç‰‡æ¥èµ·ä¾†ä¹‹å‰ï¼Œå¿…é ˆå…ˆæŠ•å½±åˆ°åœ“æŸ±é«”ä¸Šæ‰æœƒæœ‰æ¯”è¼ƒå¥½çš„æ•ˆæœã€‚ å…§åœˆçš„é»‘ç·šåˆ†åˆ¥ä»£è¡¨å…­å¼µç…§ç‰‡çš„æˆåƒå¹³é¢ï¼Œç´…ç·šå‰‡æ˜¯è¦æŠ•å½±åˆ°çš„åœ“æŸ±é¢ã€‚[1] å¦‚åŒä¸Šåœ–æ‰€ç¤ºï¼ŒçœŸæ­£æ‹åˆ°çš„å½±åƒæ˜¯å…§åœˆçš„é»‘ç·šï¼Œåˆ†åˆ¥ä»£è¡¨å…­å¼µç…§ç‰‡ï¼Œä½†æ˜¯è¦æ¥èµ·ä¾†å¿…é ˆé‡æ–°æŠ•å½±åˆ°å¤–åœˆç´…è‰²æ‰æœƒæ¥å¾—ä¸Šã€‚ å³é‚Šçš„åœ–æœ¨ç´‹çš„ç›´ç·šéƒ½è®Šæˆæœ‰å€‹æ›²ç‡çš„å½ç·šã€‚ é€™æ˜¯æˆ‘å°‡å½±åƒæŠ•å½±è‡³åœ“æŸ±å‰å¾Œçš„å·®åˆ¥ï¼Œå¯ä»¥çœ‹è¦‹å³é‚Šçš„åœ–æœ¨ç´‹çš„ç›´ç·šéƒ½è®Šæˆæœ‰å€‹æ›²ç‡çš„å½ç·šï¼Œé€™å°±æ˜¯æŠ•å½±ä¹‹å¾Œé€ æˆçš„å·®ç•°ã€‚ Feature detectionè¦æ‰¾å‡ºå…©å…©ç…§ç‰‡ä¸­çš„ç‰¹å¾µé»æ‰å¥½æ‰¾å‡ºç…§ç‰‡é–“çš„ç›¸å°ä½ç½®ï¼Œæ‰€ä»¥é¦–å…ˆè¦æ‰¾å‡ºç‰¹å¾µé»ï¼Œé€™é‚Šæˆ‘å¯¦ä½œçš„æ˜¯ Harris corner detectorã€‚ å·¦:ç”¨æ£‹ç›¤åœ–ä¾†ç•¶ä½œæ¸¬è©¦è³‡æ–™ï¼›å³: corner response image é€™æ˜¯åˆ©ç”¨ Harris corner æ‰¾å‡ºçš„ corner response imageï¼Œå¯ä»¥çœ‹åˆ°äº¤å‰é»çš„å€¼éƒ½æ¯”è¼ƒé«˜(ç´…è‰²é»)ï¼Œè€Œé€™äº›å°±æ˜¯æ‡‰è©²è¦æŒ‘å‡ºä¾†çš„ç‰¹å¾µé»ã€‚ Feature descriptorDescriptor æ˜¯ç”¨ä¾†æè¿°ç‰¹å¾µé»çš„æ±è¥¿ï¼Œé€šå¸¸æ˜¯ä»¥é«˜ç¶­åº¦çš„å‘é‡ä¾†è¡¨ç¤ºï¼Œæˆ‘å‰‡æ˜¯ä½¿ç”¨ Harris corner ç®—å‡º corner response image ä¹‹å¾Œï¼Œå°‡æœ€é«˜çš„ 1% çš„é»æŠ“å‡ºä¾†ï¼Œä»¥ä¸€å€‹ 5x5 çš„ window ä¾†è¡¨ç¤ºæˆ 25 ç¶­çš„å‘é‡ã€‚ ä»¥å‘¨é‚Šåƒç´ çš„å€¼ç•¶ä½œ descriptorã€‚[1] é€™æ˜¯ä¸€å€‹ 3x3 window æ‰€è¡¨ç¤ºçš„9ç¶­å‘é‡ï¼Œå¯¦ä½œä¸Šæˆ‘æ˜¯ä½¿ç”¨ 5x5ã€‚ æ‰¾å‡ºä¾†ä»¥å¾Œï¼Œæˆ‘é‚„åšäº†ä¸€äº›è™•ç†ä¾†æ¸›å°‘ feature points çš„æ•¸ç›®: åªæŒ‘é¸corner response æœ€é«˜çš„ 1% åˆ‡æ‰ä¸Šä¸‹é‚Šç·£(å› ç‚ºæŠ•å½±åˆ°åœ“æŸ±ä¹‹å¾Œæœƒæœ‰é»‘é‚Š) åš local suppression ç”±å·¦è‡³å³åˆ†åˆ¥æ˜¯: å‰ 1% çš„featuresã€åˆ‡æ‰ä¸Šä¸‹é‚Šç·£ã€ä»¥ä¸€å€‹ window size æƒéæ•´å¼µåœ–ï¼Œæ¯å€‹ window ä¸­åªä¿ç•™æœ€å¼·çš„ featureã€‚ æ¸›å°‘ feature æ•¸ç›®æœ€ä¸»è¦çš„åŸå› æ˜¯å› ç‚ºå¸Œæœ›åŠ å¿«é‹ç®—é€Ÿåº¦ã€‚ Feature matchingå†ä¾†å°±æ˜¯matchå‡ºå…©å…©åœ–ç‰‡ä¸­å°æ‡‰çš„é»ï¼Œæˆ‘ç”¨çš„æ–¹æ³•å¾ˆç°¡å–®ï¼Œå°±æ˜¯å°‡å…©å€‹å½±åƒä¸­æ‰¾å‡ºçš„ feature descriptors äº’ç›¸ç®—å‡ºå‘é‡è·é›¢ï¼Œæ‰¾å‡ºå°æ‡‰çš„çµ„åˆã€‚ 123456for i in range(len(descriptor1)): min_distance = inf for j in range(len(descriptor2)): distance = ((descriptor1[i]-descriptor2[j])**2).sum() if distance &lt; min_distance: min_distance = distance ä»¥ psudo-code ä¾†è¡¨ç¤ºçš„è©±å°±æ˜¯å…©å€‹ for loop ä¸€å€‹ä¸€å€‹ç®—è·é›¢æ‰¾å‡ºæœ€å°çš„é‚£çµ„åˆã€‚æ˜¯æœ€æš´åŠ›æœ€ç›´è¦ºçš„æ–¹å¼ XDDD å…¶å¯¦æˆ‘ä¹Ÿæœ‰å˜—è©¦å° descriptors å»ºç«‹ KD-tree ä¾†åŠ é€Ÿæ•´å€‹ matching çš„éç¨‹ï¼Œä½†æ˜¯ç”±æ–¼ descriptor æ˜¯å€‹ 25 ç¶­çš„å‘é‡ï¼Œä½¿ç”¨ KD-tree å¹¾ä¹æ²’æœ‰é€Ÿåº¦ä¸Šçš„å„ªå‹¢ï¼Œæ‰€ä»¥æœ€å¾Œé‚„æ˜¯åªç”¨é€™ç¨®æœ€å–®ç´”çš„ç®—æ³•ã€‚å¦å¤–ï¼Œç‚ºäº†é”åˆ°æ›´å¥½ä»¥åŠæ›´å¿«çš„ matching æ•ˆæœï¼Œæˆ‘æœ‰å®šä¸€å€‹å‡è¨­:ã€Œå‰å¾Œå…©å¼µå½±åƒçš„å‚ç›´å·®ç•°ä¸æœƒéå¤§ã€ï¼Œé›–èªªé€™å‡è¨­ä¸¦ä¸ä¸€å®šæˆç«‹ï¼Œä½†æ˜¯åœ¨ 360 ç’°å ´å½±åƒçš„ç‹€æ³ä¸‹é‚„ç®—ç¬¦åˆã€‚ å…©å¼µå½±åƒä¸­å°æ‡‰çš„é»ï¼Œä»¥ç´…è‰²é€£ç·šä¾†è¡¨ç¤ºã€‚ Find best warp model using RANSACå†ä¾†å°±æ˜¯è¦æ‰¾å‡ºæœ€å¥½çš„ translation modelï¼Œé€²è€Œç§»å‹•å½±åƒä¾†è®“å…©å¼µå½±åƒä¸­ç›¸åŒçš„éƒ¨åˆ†ç–Šåœ¨ä¸€èµ·ï¼Œé€™é‚Šæˆ‘ç”¨ RANSAC ä¾†æ‰¾å‡ºæœ€ä½³çš„ translation modelã€‚RANSAC åŸºæœ¬ç²¾ç¥å°±æ˜¯éš¨æ©ŸæŒ‘å…©å€‹é»çš„ç›¸å°ä½ç½®ç•¶ä½œæœ€å¥½çš„ translation modelï¼Œç„¶å¾Œè®“æ‰€æœ‰ matched pair éƒ½å¥—ç”¨é€™å€‹ modelï¼Œå†ä¾†è¨ˆç®—æœ‰å¤šå°‘å€‹ pair å¥—ç”¨é€™ model ä¹‹å¾Œä¹Ÿæ˜¯æœ‰è½åœ¨å¯æ¥å—çš„ç¯„åœä¹‹å…§ã€‚é€™æ¨£çš„éç¨‹é‡è¤‡è·‘å€‹å¹¾ç™¾æ¬¡ï¼Œå°±æœ‰å¾ˆé«˜çš„æ©Ÿç‡å¯ä»¥æ‰¾å‡ºæœ€ä½³çš„ translation modelã€‚ å¦å¤–ï¼Œæœ‰æ™‚å€™æ‰¾å‡ºçš„ matched pair å…¶å¯¦ä¸¦æ²’æœ‰å¾ˆå¤šï¼Œé€™æ™‚å€™æ¯”èµ·ä½¿ç”¨éš¨æ©Ÿé¸é»çš„æ–¹å¼ï¼Œç›´æ¥çª®ç›¡æ‰€æœ‰çµ„åˆç›¸å°å¿«ä¸Šè¨±å¤šã€‚ Stitch image with Blendingæœ‰äº†å…©å¼µåœ–çš„ç›¸å°ä½ç½®ä¹‹å¾Œå°±å¯ä»¥ä¾†é€£æ¥å…©å¼µå½±åƒï¼Œä½†æ˜¯ç›´æ¥é€£èµ·ä¾†æœƒæœ‰å¾ˆæ˜é¡¯çš„ç¸«ï¼Œæ‰€ä»¥éœ€è¦åšblendingã€‚æˆ‘å¯¦ä½œäº†å…©ç¨®blend method: Linear blend Linear blend with constant width Linear blend æ˜¯æœ€ç°¡å–®çš„æ–¹å¼ï¼Œé‡ç–Šçš„éƒ¨åˆ†çš„é¡è‰²ç”±å…©å¼µå½±åƒåŠ æ¬Šå¹³å‡å¾—å‡ºï¼ŒåŠ æ¬Šçš„æ¯”é‡å¦‚ä¸‹åœ–æ‰€ç¤ºï¼Œxè»¸ä½ç½®æ¥è¿‘å“ªå¼µå½±åƒå‰‡æ¬Šé‡å°±æ¯”è¼ƒé«˜ã€‚ xè»¸ä½ç½®æ¥è¿‘å“ªå¼µå½±åƒå‰‡æ¬Šé‡å°±æ¯”è¼ƒé«˜ ä¸éé€™æ¨£æœƒæœ‰ä¸€å€‹å•é¡Œï¼Œå¦‚æœé‡ç–Šçš„å€åŸŸæœ‰æ£µæ¨¹åœ¨å‹•ï¼Œé‚£é€™æ¨£blendå°±æœƒå‡ºç¾é¬¼å½±çš„å•é¡Œã€‚æ‰€ä»¥æˆ‘å°±æ”¹æˆç¬¬äºŒç¨®æ–¹æ³•ï¼ŒLinear blend with constant widthï¼Œå…ˆæ‰¾å‡ºå…©å¼µå½±åƒé‡ç–Šéƒ¨åˆ†çš„ä¸­å¿ƒç·šï¼Œä»¥æ­¤å·¦å³å–å€‹å›ºå®šå¯¬åº¦å†åš linear blendï¼Œé€™æ¨£å°±èƒ½é¿å…é¬¼å½±çš„å•é¡Œã€‚ åªåœ¨å…©å¼µå½±åƒé‡ç–Šéƒ¨åˆ†çš„ä¸­å¿ƒç·šå·¦å³ä¸€é»é»å€é–“åš linear blend ä»¥ä¸‹æ˜¯åˆ†åˆ¥ç”¨å…©ç¨®æ–¹æ³•æ‰€æ¥åˆçš„åœ–ï¼Œå¯ä»¥çœ‹åˆ°ç”¨ç¬¬ä¸€ç¨®æ–¹æ³•çš„å·¦é‚Šçš„æ¨¹æ˜é¡¯ç³Šç³Šçš„ï¼Œå³é‚Šçš„å‰‡å¹¾ä¹æ²’æœ‰é¬¼å½±ã€‚ å·¦:ç¬¬ä¸€ç¨®æ–¹æ³•ï¼Œå¯çœ‹åˆ°æ¨¹è‘‰ç³Šç³Šçš„ï¼›å³:ç¬¬äºŒç¨®æ–¹æ³•ï¼Œæ²’æœ‰é¬¼å½±ç¾è±¡ã€‚ End to end alignment and Cropå®Œæˆæ‰€æœ‰å½±åƒæ¥åˆä¹‹å¾Œï¼Œæœƒæœ‰ä¸€äº›ä¸Šä¸‹çš„èª¤å·®ï¼Œé€™æ™‚å€™å¯ä»¥ç›´æ¥å°‡èª¤å·®å¹³å‡åˆ†é…çµ¦æ¯å¼µå½±åƒï¼Œå°±å¯ä»¥å¾—å‡ºä¸€å¼µæ¯”è¼ƒå¹³çš„åœ–ç‰‡ã€‚ åŸå§‹çš„æ¥èµ·ä¾†çš„å½±åƒï¼Œå¯ä»¥çœ‹åˆ°é€™ä¸€å¼µæœ‰åš´é‡çš„ä¸Šä¸‹é£„ç§»ã€‚ æ¥å®Œä»¥å¾Œçš„åŸå§‹å½±åƒ æŠŠèª¤å·®å¹³å‡åˆ†é…çµ¦å¤§å®¶ï¼Œå¯ä»¥è®Šæˆæ¯”è¼ƒå¹³çš„å½±åƒã€‚ ç¶“é end to end alignment ä¿®æ­£ä¹‹å¾Œçš„åœ– æœ€å¾Œå†æŠŠä¸Šä¸‹çš„é»‘é‚Šåˆ‡é™¤æ‰ï¼Œå°±å¯ä»¥å¾—å‡ºä¸€å¼µå®Œæ•´çš„å½±åƒã€‚ è£æ¸›æ‰é»‘é‚Šçš„åœ–ã€‚ Resultsé€™é‚Šå±•ç¤ºå¹¾å€‹çµæœï¼Œä¸€å¼µç¶œè¦½å…¨è²Œã€ä¸€å¼µæ˜¯åŸå§‹å°ºå¯¸ï¼ˆå¯æ‹–æ›³ï¼‰ å¤§é›ªå±±ç™»å±±å£ã€‚ å°å¤§ç¸½åœ–å¾Œé¢ã€‚ Testing image from internet Testing image from internet window.onload = function() { var panoramas = document.getElementsByClassName('pano'); Array.prototype.map.call(panoramas, function(pano) { Ps.initialize(pano); }); }; References Image from Digital Visual Effects(NTU) slides h1+ol { list-style-type: none; counter-reset: list-counter; padding-left: 0; } h1+ol li { position: relative; padding-left: 3em; } h1+ol li::before { counter-increment: list-counter; content: \"[\" counter(list-counter) \"] \"; position: absolute; left: 0; width: 25px; text-align: right; }","categories":[],"tags":[{"name":"opencv","slug":"opencv","permalink":"https://ssarcandy.tw/tags/opencv/"},{"name":"python","slug":"python","permalink":"https://ssarcandy.tw/tags/python/"}]},{"title":"Migrate mail server to Gmail - migration strategy","slug":"migrate-to-gmail-migration-strategy","date":"2017-04-29T14:56:05.000Z","updated":"2025-10-22T00:51:26.605Z","comments":true,"path":"2017/04/29/migrate-to-gmail-migration-strategy/","link":"","permalink":"https://ssarcandy.tw/2017/04/29/migrate-to-gmail-migration-strategy/","excerpt":"ä¸Šä¸€ç¯‡è¬›äº†å¦‚ä½•ä½¿ç”¨ google æä¾›çš„ migration tool ä¾†é·ç§»éƒµä»¶ï¼Œä½†éœ€è¦çŸ¥é“å¤§å®¶çš„å¯†ç¢¼æ‰èƒ½ç”¨ IMAP å­˜å–éƒµä»¶è³‡æ–™ã€‚ä¸€èˆ¬ä¾†èªªå³ä½¿æ˜¯ root ä¹Ÿæ˜¯çœ‹ä¸åˆ°å¯†ç¢¼çš„ï¼Œå°±ç®—èƒ½ä¹Ÿåªæ˜¯çœ‹åˆ°åŠ å¯†éå¾Œçš„å¯†ç¢¼ã€‚è€Œæœ¬ç¯‡è¦ç´€éŒ„çš„å°±æ˜¯æˆ‘å€‘é·ç§»ç­–ç•¥ï¼ŒåŒ…å«æˆ‘å€‘æ€éº¼ç¹é(?)å¯†ç¢¼é€™é—œã€‚","text":"ä¸Šä¸€ç¯‡è¬›äº†å¦‚ä½•ä½¿ç”¨ google æä¾›çš„ migration tool ä¾†é·ç§»éƒµä»¶ï¼Œä½†éœ€è¦çŸ¥é“å¤§å®¶çš„å¯†ç¢¼æ‰èƒ½ç”¨ IMAP å­˜å–éƒµä»¶è³‡æ–™ã€‚ä¸€èˆ¬ä¾†èªªå³ä½¿æ˜¯ root ä¹Ÿæ˜¯çœ‹ä¸åˆ°å¯†ç¢¼çš„ï¼Œå°±ç®—èƒ½ä¹Ÿåªæ˜¯çœ‹åˆ°åŠ å¯†éå¾Œçš„å¯†ç¢¼ã€‚è€Œæœ¬ç¯‡è¦ç´€éŒ„çš„å°±æ˜¯æˆ‘å€‘é·ç§»ç­–ç•¥ï¼ŒåŒ…å«æˆ‘å€‘æ€éº¼ç¹é(?)å¯†ç¢¼é€™é—œã€‚ æ¦‚æ³æˆ‘å€‘çš„ä¼ºæœå™¨æ˜¯é€é LDAP é›†ä¸­ç®¡ç†èº«åˆ†èªè­‰è³‡è¨Šï¼Œå¤§è‡´æ¶æ§‹å¦‚ä¸‹: ä¼ºæœå™¨æ¶æ§‹: ç”± LDAP ä¾†çµ±ä¸€ç®¡ç†èº«åˆ†è³‡è¨Šã€‚ é™¤äº†ä¸€èˆ¬å·¥ä½œç«™ä»¥å¤–ï¼Œéƒµä»¶ä¼ºæœå™¨ä¹ŸåŒæ¨£æ˜¯åˆ©ç”¨ LDAP çš„è³‡è¨Šä¾†ç™»å…¥ï¼Œç°¡å–®ä¾†èªªå°±æ˜¯ä½¿ç”¨è€…åªé ˆè¦è¨˜å¾—ä¸€å€‹å¯†ç¢¼ï¼Œå°±å¯ä»¥ç™»å…¥å„å·¥ä½œç«™ä»¥åŠéƒµä»¶ä¼ºæœå™¨ã€‚ ç¹éå¯†ç¢¼æƒ³ä¾†æƒ³å»æœ€å¾Œæƒ³åˆ°å…©ç¨®æ–¹æ³•ï¼Œä¸€æ˜¯å¾ LDAP ä¸‹æ‰‹ï¼Œä¸€æ˜¯å¾éƒµä»¶ä¼ºæœå™¨ä¸‹æ‰‹ã€‚ å¾ LDAP ä¸‹æ‰‹é›–ç„¶ root çœ‹ä¸åˆ°å¤§å®¶çš„å¯†ç¢¼ï¼Œä½†æ˜¯èƒ½ç›´æ¥æ›´æ”¹åˆ¥äººçš„å¯†ç¢¼ XDæ‰€ä»¥å‘¢ï¼Œæˆ‘å€‘å¯ä»¥è¤‡è£½å‡ºä¸€å€‹å‡çš„ LDAP serverï¼Œå°±å°ˆçµ¦éƒµä»¶ä¼ºæœå™¨ç”¨ã€‚ è¤‡è£½ä¸€å€‹ LDAPï¼Œå°ˆé–€çµ¦éƒµä»¶ä¼ºæœå™¨ä½¿ç”¨ã€‚ è¦è¤‡è£½ä¸€å€‹ LDAP ä¸¦ä¸å›°é›£ï¼Œåªéœ€è¦å®‰è£å¥½ LDAP ä¹‹å¾ŒæŠŠè³‡æ–™ dump éä¾†å°±å®Œæˆäº†ã€‚å‰µé€ å¥½ä¸€å€‹ fake LDAP ä¹‹å¾Œå°±è¦ä¾†æ”¹æ”¹éƒµä»¶ä¼ºæœå™¨çš„è¨­å®šï¼Œè®“ä»–æ”¹ç”¨ fake LDAP çš„è³‡è¨Šä¾†åšèº«åˆ†èªè­‰ã€‚ é¦–å…ˆè¦å…ˆæ›´æ”¹ /etc/hosts ï¼ŒæŠŠ LDAP å°æ‡‰çš„ ip address æ”¹å°(å¦‚æœæœ‰çš„è©±)ï¼Œå¦‚æœæ²’æœ‰ç”¨ /etc/hosts çš„è©±ï¼Œå‰‡è¨˜å¾—è¦æ›´æ”¹ roundcube è¨­å®š: æ›´æ”¹ roundcube ldap 1$ vim /etc/roundcube/main.inc.php æŠŠ hosts æ”¹æˆ fake LDAP: 123456789101112131415$config[&#x27;ldap_public&#x27;][&#x27;public&#x27;] = array( &#x27;name&#x27; =&gt; &#x27;Public LDAP Addressbook&#x27;, &#x27;hosts&#x27; =&gt; array(&#x27;fake LDAP&#x27;), &#x27;port&#x27; =&gt; 389, &#x27;user_specific&#x27; =&gt; false, &#x27;base_dn&#x27; =&gt; &#x27;ou=public,ou=rcabook,dc=localhost&#x27;, &#x27;bind_dn&#x27; =&gt; &#x27;cn=rcuser,ou=rcabook,dc=localhost&#x27;, &#x27;bind_pass&#x27; =&gt; &#x27;rcpass&#x27;, &#x27;filter&#x27; =&gt; &#x27;(objectClass=inetOrgPerson)&#x27;, &#x27;groups&#x27; =&gt; array( &#x27;base_dn&#x27; =&gt; &#x27;&#x27;, &#x27;filter&#x27; =&gt; &#x27;(objectClass=groupOfNames)&#x27;, &#x27;object_classes&#x27; =&gt; array(&quot;top&quot;, &quot;groupOfNames&quot;), ),); è©³ç´°å¯ä»¥çœ‹ roundcube èªªæ˜æ–‡ä»¶ã€‚ å¼„å¥½ä¹‹å¾Œè¨˜å¾—è¦åˆ·æ–° nslcd: 1$ /etc/init.d/nslcd force-reload # maybe need to reload æ¥ä¸‹ä¾†å°±æ˜¯è¦æ›´æ”¹å¤§å®¶å¯†ç¢¼å•¦~ç”±æ–¼éƒµä»¶ä¼ºæœå™¨ç¾åœ¨æ˜¯ä½¿ç”¨ fake LDAP é©—è­‰è³‡è¨Šäº†ï¼Œæ‰€ä»¥é€™æ™‚å€™æ›´æ”¹å¯†ç¢¼åªæœƒæ”¹åˆ° fake LDAP ä¸Šçš„è³‡è¨Šï¼Œè€Œä¸å½±éŸ¿å¤§å®¶ç™»å…¥ä½¿ç”¨å…¶ä»–å·¥ä½œç«™ã€‚ä¹Ÿå°±æ˜¯èªªä½¿ç”¨é€™ç¨®æ–¹æ³•çš„å£è™•åªæœ‰åœ¨é·ç§»çš„éç¨‹ä¸­ä¸èƒ½ç™»å…¥åŸéƒµä»¶ä¼ºæœå™¨ã€‚ä¸éç”±æ–¼æ”¶ç™¼ä¿¡ä»¶éƒ½å·²ç¶“è½‰ç§»å» gmail äº†ï¼Œæš«æ™‚ä¸èƒ½ç™»å…¥åŸéƒµä»¶ä¼ºæœå™¨å…¶å¯¦å½±éŸ¿æ‡‰è©²ä¸æœƒå¤ªå¤§äº†ã€‚ æ›´æ”¹ ldap user password 12345$ ldappasswd -h &lt;ldap_ip&gt; -x -ZZ \\ -D &quot;cn=admin,dc=your_base_dn&quot; \\ &quot;user_distinguished_name&quot; \\ -s &lt;new_password&gt; \\ -w &lt;ldap_admin_password&gt; ä»¥ä¸Šæ˜¯æ›´æ”¹ä¸€å€‹äºº LDAP å¯†ç¢¼çš„æ–¹å¼ï¼Œé‚£è¦æ‰¹æ¬¡æ›´æ”¹å…¨éƒ¨äººçš„å¯†ç¢¼å¯ä»¥é€™æ¨£: å…ˆå» /var/spool/mail/ æ‰¾èª°æœ‰éƒµä»¶å¸³æˆ¶ï¼Œç„¶å¾Œçµ„åˆæˆ ldap dn ï¼Œè¼¸å‡ºåˆ°ä¸€å€‹æª”æ¡ˆ: 1234$ ls /var/spool/mail/ -l \\ | grep rw \\ | awk &#123;&#x27;print $3&#x27;&#125; \\ | xargs -I &#123;&#125; echo &quot;uid=&#123;&#125;,ou=people,dc=cmlab,dc=csie,dc=ntu,dc=edu,dc=tw&quot; &gt; ~/mail_all.txt å†çµ„åˆå‡ºæ”¹å¯†ç¢¼çš„æŒ‡ä»¤ä¸¦è¼¸å‡ºåˆ° change_password.sh 12$ cat mail_all.txt \\ | xargs -I &#123;&#125; echo &quot;ldappasswd -x -ZZ -D cn=admin,dc=your_base_dn &#123;&#125; -s &lt;new_password&gt; -w &lt;ldap_password&gt;&quot; &gt; change_passwd.sh ç„¶å¾Œå°±å¯ä»¥: 1$ ./change_password.sh å¾ Mail Account ä¸‹æ‰‹å¾ LDAP ä¸‹æ‰‹çš„åŸºæœ¬ä¸Šå°±å¯ä»¥è§£æ±ºå¯†ç¢¼çš„å•é¡Œï¼Œä¸éå°±æ˜¯æœƒåœ¨é·ç§»çš„æœŸé–“è®“å¤§å®¶ç„¡æ³•ç™»å…¥çœ‹èˆŠä¿¡ä»¶(å› ç‚ºå¤§å®¶å¯†ç¢¼è¢«æ”¹æ‰äº†)ï¼Œé›–èªªå½±éŸ¿æ‡‰è©²ä¸å¤§ï¼Œä¸éä¾èˆŠæ˜¯æœ‰å½±éŸ¿çš„ã€‚ å¦ä¸€å€‹ç¹éå¯†ç¢¼çš„æ–¹å¼æ˜¯å¾éƒµä»¶å¸³æˆ¶ä¸‹æ‰‹ï¼Œå…ˆå‰µå»ºä¸€å€‹å‡å¸³è™Ÿï¼Œå†æŠŠä¿¡ä»¶éƒ½è¤‡è£½åˆ°å‡å¸³è™Ÿé‚£é‚Šï¼Œå°±å¯ä»¥ç”¨å‡å¸³è™Ÿå­˜å–é‚£å€‹äººçš„ä¿¡ä»¶ã€‚ å‡è¨­æœ‰å€‹å¸³è™Ÿ ssarcandyï¼Œå¯¦éš›æ–¹æ³•å¦‚ä¸‹: Add a fake user into ldap, i.e. ssarcandy_fake Create home dir for it, change the owner to ssarcandy_fake Copy /var/spool/mail/ssarcandy to /var/spool/mail/ssarcandy_fake, and chage owner Copy ~ssarcandy/mail/ to ~ssarcandy_fake/mail/ if it exist, and chage owner å¯«æˆ script å¤§è‡´å¦‚ä¸‹: 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950#!/bin/bash # $1=new fake user -&gt; i.e. ssarcandy_fake# $2=correspond user -&gt; i.e. ssarcandy PASSWORD=&#x27;some_password&#x27;HOME_DIR_BASE=&#x27;/data/mail_migrate_tmp&#x27;LDAP_BASE=&#x27;base dn&#x27;LDAP_DN=&#x27;ldap admin dn&#x27;LDAP_PASS=&#x27;ldap admin password&#x27;LDAP_HOST=&#x27;ip address&#x27; echo &quot;dn: uid=$1,ou=people,$LDAP_BASEuid: $1sn: lastnamecn: complete namemail: $1@cmlab.csie.ntu.edu.twobjectClass: personobjectClass: organizationalPersonobjectClass: inetOrgPersonobjectClass: posixAccountobjectClass: topobjectClass: shadowAccountuserPassword: &#123;crypt&#125;12345shadowMax: 99999shadowWarning: 7loginShell: /bin/bashuidNumber: 6577gidNumber: 1000homeDirectory: $HOME_DIR_BASE/$1&quot;&gt; tmp.ldif # Create fake accountldapadd -h $LDAP_HOST -ZZ -x -w $LDAP_PASS -D $LDAP_DN -f tmp.ldif # Change fake account passwordldappasswd -h $LDAP_HOST -ZZ -x \\ -w $LDAP_PASS -D $LDAP_DN \\ &quot;uid=$1,ou=people,$LDAP_BASE&quot; -s $PASSWORD # Create home dir for fake accountmkdir -p $HOME_DIR_BASEmkdir $HOME_DIR_BASE/$1 # Copy mails to fake account.cp /var/spool/mail/$2 /var/spool/mail/$1cp -r $(eval echo ~$2)/mail $(eval echo ~$1) # Change owner of copied mailschown 6577:1000 /var/spool/mail/$1chown -R 6577:1000 $HOME_DIR_BASE/$1 é€™å°±æ˜¯å¦ä¸€å€‹ç¹éå¯†ç¢¼çš„æ–¹å¼ï¼Œé€™æ–¹å¼çš„å„ªé»æ˜¯å¯ä»¥ä¸å½±éŸ¿ä½¿ç”¨è€…çš„å¸³æˆ¶ï¼Œä¹Ÿå°±æ˜¯åœ¨é·ç§»éç¨‹ä¸­ä¾èˆŠå¯ä»¥ç™»å…¥èˆŠéƒµä»¶ä¼ºæœå™¨ã€‚ä½†ä¹Ÿæ˜¯æœ‰ç¼ºé»çš„ï¼Œå°±æ˜¯å¿…é ˆè¤‡è£½ä¸€ä»½ä½¿ç”¨è€…çš„ mailsï¼Œåœ¨é·ç§»æœŸé–“æœƒæµªè²»å…©å€çš„å®¹é‡ã€‚ é·ç§»ç­–ç•¥æˆ‘å€‘è¦é·ç§»çš„éƒµä»¶èªªå¤šä¸å¤šï¼Œä½†ä¹Ÿä¸å¤ªå°‘ï¼Œä»¥å®¹é‡ä¾†èªªå¤§æ¦‚ 600 GB å·¦å³ã€‚ä¸éç©ºé–“ä¸Šç¨å¾®å°·å°¬ä¸€é»ï¼Œåªå‰© 50 GB å¯ä»¥ä½¿ç”¨ã€‚æ‰€ä»¥åŸºæœ¬ä¸Šæ˜¯æ²’è¾¦æ³•è®“å¤§å®¶éƒ½ä½¿ç”¨ç¬¬äºŒç¨®æ–¹æ³•(å‰µå‡å¸³è™Ÿä¸¦è¤‡è£½éƒµä»¶)ï¼Œå…ˆä½¿ç”¨ fake LDAP è½‰ç§»å¤§éƒ¨åˆ†äººæœƒæ˜¯æ¯”è¼ƒé©ç•¶çš„æ–¹å¼ã€‚ ä»¥æ™‚é–“è»¸çš„æ–¹å¼ä¾†å‘ˆç¾æ•´å€‹é·ç§»çš„éç¨‹ï¼Œå¤§è‡´å¦‚ä¸‹: è¨­å®š MX recordä¿¡ä»¶æ”¶ç™¼è½‰è‡³ Gmailå»ºç«‹ fake LDAP è®“ mail server ä½¿ç”¨é–‹å§‹é·ç§»å¤§éƒ¨åˆ†ä½¿ç”¨è€…ï¼Œé·ç§»æœŸé–“ä½¿ç”¨è€…ç„¡æ³•ç™»å…¥åŸéƒµä»¶ä¼ºæœå™¨(å› å¯†ç¢¼ä¸åŒ)ã€‚è®“ mail server ä½¿ç”¨åŸ LDAPä½¿ç”¨è€…å¯ä»¥æ­£å¸¸ç™»å…¥åŸéƒµä»¶ä¼ºæœå™¨ã€‚é‡å°é‡è¦ä½¿ç”¨è€…å»ºç«‹å‡å¸³è™Ÿé–‹å§‹è½‰ç§»é‚£äº›ä¿¡ä»¶ç‰¹å¤šçš„ä½¿ç”¨è€…ï¼Œä½¿ç”¨å»ºç«‹å‡å¸³è™Ÿçš„æ–¹å¼ã€‚å–„å¾Œå®Œæˆè½‰ç§»ï¼Œåˆªé™¤å‡å¸³è™Ÿã€‚ é–‹å§‹é·ç§»ä¿¡ä»¶çš„æ™‚é–“é»æ˜¯åœ¨å·²å°‡ MX record è¨­å®šå®Œï¼Œæ”¶ç™¼åŠŸèƒ½å·²è½‰è‡³ gmail ä¹‹å¾Œæ‰é–‹å§‹çš„ã€‚æˆ‘å€‘åŸºæœ¬ä¸Šåˆ†å…©éšæ®µè½‰ç§»ä¿¡ä»¶ï¼Œç¬¬ä¸€éšæ®µæ˜¯ç”¨ fake LDAP çš„æ–¹å¼è½‰ç§»å¤§éƒ¨åˆ†çš„ä½¿ç”¨è€…ï¼›ç¬¬äºŒéšæ®µå‰‡æ˜¯ç”¨å‡å¸³è™Ÿçš„æ–¹å¼è½‰ç§»æœ€é‡è¦(ä¿¡ä»¶ç‰¹å¤š)çš„ä½¿ç”¨è€…ã€‚ é¦–å…ˆæˆ‘å€‘å…ˆå°ä½¿ç”¨è€…çš„ä¿¡ä»¶ç”¨é‡åšåˆ†ç¾¤ï¼Œæ‰¾å‡ºå“ªäº›äººç”¨é‡ç›¸ä¼¼ã€å“ªäº›äººç”¨é‡ç‰¹å¤šç­‰ç­‰ã€‚å¯ä»¥åˆ©ç”¨ dovecot çš„ admin å·¥å…·æŸ¥è©¢: 123# æŸ¥è©¢ ssarcandy çš„ç¸½ä¿¡ä»¶æ•¸ç›®$ doveadm search -u ssarcandy ALL | wc -l14990 æŠŠå¤§å®¶çš„éƒµä»¶æ•¸ç›®åˆ†ä½ˆç•«æˆåœ–è¡¨: å¸³æˆ¶éƒµä»¶åˆ†ä½ˆåœ– å¯ä»¥çœ‹åˆ°åŸºæœ¬ä¸Šå¤§éƒ¨åˆ†äººéƒ½æ²’ç”šéº¼ä¿¡ï¼Œåªæœ‰å°‘æ•¸äººæœ‰è¶…å¤§é‡çš„ä¿¡ï¼Œè€Œé€™äº›å°‘æ•¸äººæœƒæ˜¯é·ç§»çš„ bottleneckï¼Œæ‰€ä»¥æ‡‰è©²è¦æŒ‘å‡ºä¾†ç”¨å‡å¸³è™Ÿçš„æ–¹å¼è½‰ç§»ä¿¡ä»¶ï¼Œæ‰èƒ½é¿å…è®“åŸéƒµä»¶ä¼ºæœå™¨ä¸èƒ½ç™»å…¥çš„æ™‚é–“æ‹‰å¤ªé•·ã€‚ å¦å¤–ï¼Œç”±æ–¼ G Suite é·ç§»å·¥å…·æ˜¯ä¸€æ‰¹ä¸€æ‰¹é·ç§»çš„ï¼Œæ‰€ä»¥åŒä¸€æ‰¹æœ€å¥½å¤§å®¶çš„éƒµä»¶æ•¸ç›®éƒ½è¦å·®ä¸å¤šï¼Œæ‰å¯ä»¥æ¸›å°‘ç¸½é«”ç­‰å¾…æ™‚é–“ã€‚ æˆ‘å€‘ç”¨ä»¥ä¸Šçš„é·ç§»ç­–ç•¥ï¼Œç¸½å…±è€—æ™‚ç´„åå¤©å®Œæˆå¤§å®¶çš„æ‰€æœ‰ä¿¡ä»¶é·ç§»ã€‚ç•¶åˆé ä¼°ä¸€å‘¨çœŸæ˜¯å¤ªå¤©çœŸäº†é˜¿QQ .timeline,.timeline li{padding:1em 0}.timeline{position:relative;width:660px;margin:20px auto 0;list-style-type:none}.timeline:before{position:absolute;left:50%;top:0;content:' ';display:block;width:6px;height:100%;margin-left:-3px;background:#505050;background:-moz-linear-gradient(top,rgba(80,80,80,0) 0,#505050 8%,#505050 92%,rgba(80,80,80,0) 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(30,87,153,1)),color-stop(100%,rgba(125,185,232,1)));background:-webkit-linear-gradient(top,rgba(80,80,80,0) 0,#505050 8%,#505050 92%,rgba(80,80,80,0) 100%);background:-o-linear-gradient(top,rgba(80,80,80,0) 0,#505050 8%,#505050 92%,rgba(80,80,80,0) 100%);background:-ms-linear-gradient(top,rgba(80,80,80,0) 0,#505050 8%,#505050 92%,rgba(80,80,80,0) 100%);background:linear-gradient(to bottom,rgba(80,80,80,0) 0,#505050 8%,#505050 92%,rgba(80,80,80,0) 100%);z-index:5}.direction-l,.direction-r{width:300px;position:relative}.timeline li:after{content:\"\";display:block;height:0;clear:both;visibility:hidden}.direction-l{float:left;text-align:right}.direction-r{float:right}.flag-wrapper{position:relative;display:inline-block;text-align:center}.flag{position:relative;display:inline;background:#eee;padding:6px 10px;border-radius:5px;font-weight:600;text-align:left}.direction-l .flag{-webkit-box-shadow:-1px 1px 1px rgba(0,0,0,.15),0 0 1px rgba(0,0,0,.15);-moz-box-shadow:-1px 1px 1px rgba(0,0,0,.15),0 0 1px rgba(0,0,0,.15);box-shadow:-1px 1px 1px rgba(0,0,0,.15),0 0 1px rgba(0,0,0,.15)}.direction-r .flag{-webkit-box-shadow:1px 1px 1px rgba(0,0,0,.15),0 0 1px rgba(0,0,0,.15);-moz-box-shadow:1px 1px 1px rgba(0,0,0,.15),0 0 1px rgba(0,0,0,.15);box-shadow:1px 1px 1px rgba(0,0,0,.15),0 0 1px rgba(0,0,0,.15)}.direction-l .flag:before,.direction-r .flag:before{position:absolute;top:50%;right:-36px;content:' ';display:block;width:12px;height:12px;margin-top:-10px;background:#eee;border-radius:10px;border:4px solid #ff5050;z-index:10}.direction-l .flag:after,.direction-r .flag:after{content:\"\";position:absolute;top:50%;height:0;width:0;margin-top:-8px;pointer-events:none}.direction-r .flag:before{left:-36px}.direction-l .flag:after{left:100%;border:solid transparent;border-left-color:#eee;border-width:8px}.direction-r .flag:after{right:100%;border:solid transparent;border-right-color:#eee;border-width:8px}.time-wrapper{display:inline;line-height:1em;font-size:.66666em;color:#fa5050;vertical-align:middle}.direction-l .time-wrapper{float:left}.direction-r .time-wrapper{float:right}.time{display:inline-block;padding:4px 6px;background:#eee}.desc{margin:1em .75em 0 0;line-height:1.5em}.direction-r .desc{margin:1em 0 0 .75em}@media screen and (max-width:660px){.timeline{width:100%;padding:4em 0 1em}.timeline li{padding:2em 0}.direction-l,.direction-r{float:none;width:100%;text-align:center}.flag-wrapper{text-align:center}.flag{background:#eee;z-index:15}.direction-l .flag:before,.direction-r .flag:before{position:absolute;top:-30px;left:calc(50% + 3px);content:' ';display:block;width:12px;height:12px;margin-left:-9px;background:#eee;border-radius:10px;border:4px solid #ff5050;z-index:10}.direction-l .flag:after,.direction-r .flag:after{content:\"\";position:absolute;left:50%;top:-8px;height:0;width:0;margin-left:-8px;border:solid transparent;border-bottom-color:#eee;border-width:8px;pointer-events:none}.time-wrapper{display:block;position:relative;margin:4px 0 0;z-index:14}.direction-l .time-wrapper,.direction-r .time-wrapper{float:none}.desc{position:relative;margin:1em 0 0;padding:1em;background:#f5f5f5;-webkit-box-shadow:0 0 1px rgba(0,0,0,.2);-moz-box-shadow:0 0 1px rgba(0,0,0,.2);box-shadow:0 0 1px rgba(0,0,0,.2);z-index:15}.direction-l .desc,.direction-r .desc{position:relative;margin:1em 1em 0;padding:1em;z-index:15}}@media screen and (min-width:400px ?? max-width:660px){.direction-l .desc,.direction-r .desc{margin:1em 4em 0}}","categories":[],"tags":[{"name":"unix","slug":"unix","permalink":"https://ssarcandy.tw/tags/unix/"},{"name":"note","slug":"note","permalink":"https://ssarcandy.tw/tags/note/"}]},{"title":"Migrate mail server to Gmail - using migration tool","slug":"migrate-to-gmail-using-migration-tool","date":"2017-04-23T11:36:51.000Z","updated":"2025-10-22T00:51:26.605Z","comments":true,"path":"2017/04/23/migrate-to-gmail-using-migration-tool/","link":"","permalink":"https://ssarcandy.tw/2017/04/23/migrate-to-gmail-using-migration-tool/","excerpt":"æœ€è¿‘ CMLab çµ‚æ–¼ç”³è«‹åˆ° G Suite for Education äº†ï½ä¹Ÿå°±æ˜¯æˆ‘å€‘ä¸ç”¨å†ç¶­è­·è‡ªå·±çš„ mail server äº†ï½ç‘èŠ±ï½ ä½†é€™ä¹Ÿå°±åˆå¤šäº†ä¸€ä»¶äº‹ï¼šMigrationâ€¦æˆ‘å€‘è¦åšçš„äº‹æƒ…æœ‰ä»¥ä¸‹å¹¾ä»¶ï¼š è®“ MX record æŒ‡åˆ°æ–°çš„ä½ç½® é·ç§»ç¾¤çµ„ é·ç§»èˆŠä¿¡ å…¶ä¸­ 2, 3 ä¸¦éå¿…é ˆåšçš„ï¼Œä½†ç‚ºäº†è®“å¤§å®¶å¯ä»¥ç„¡ç—›è½‰ç§»ï¼Œæˆ‘å€‘æ‰æ±ºå®šè¦æ¬ä¿¡ä»¥åŠåŒæ­¥ç¾¤çµ„ã€‚1, 2 ååˆ†å®¹æ˜“ï¼Œå°±ç…§è‘—èªªæ˜å°±å¯ä»¥å®Œæˆï¼ŒçœŸçš„ä¸æœƒçš„è©±é‚„å¯ä»¥æ‰“çµ¦ Google æ•‘æ´ XDè€Œæœ¬ç¯‡è¦ç´€éŒ„çš„æ˜¯ é·ç§»èˆŠä¿¡ çš„éƒ¨åˆ†ï¼Œé€™æ˜¯å…¶ä¸­æœ€éº»ç…©ä¹Ÿæœ€ç¹ç‘£çš„éƒ¨åˆ†â€¦","text":"æœ€è¿‘ CMLab çµ‚æ–¼ç”³è«‹åˆ° G Suite for Education äº†ï½ä¹Ÿå°±æ˜¯æˆ‘å€‘ä¸ç”¨å†ç¶­è­·è‡ªå·±çš„ mail server äº†ï½ç‘èŠ±ï½ ä½†é€™ä¹Ÿå°±åˆå¤šäº†ä¸€ä»¶äº‹ï¼šMigrationâ€¦æˆ‘å€‘è¦åšçš„äº‹æƒ…æœ‰ä»¥ä¸‹å¹¾ä»¶ï¼š è®“ MX record æŒ‡åˆ°æ–°çš„ä½ç½® é·ç§»ç¾¤çµ„ é·ç§»èˆŠä¿¡ å…¶ä¸­ 2, 3 ä¸¦éå¿…é ˆåšçš„ï¼Œä½†ç‚ºäº†è®“å¤§å®¶å¯ä»¥ç„¡ç—›è½‰ç§»ï¼Œæˆ‘å€‘æ‰æ±ºå®šè¦æ¬ä¿¡ä»¥åŠåŒæ­¥ç¾¤çµ„ã€‚1, 2 ååˆ†å®¹æ˜“ï¼Œå°±ç…§è‘—èªªæ˜å°±å¯ä»¥å®Œæˆï¼ŒçœŸçš„ä¸æœƒçš„è©±é‚„å¯ä»¥æ‰“çµ¦ Google æ•‘æ´ XDè€Œæœ¬ç¯‡è¦ç´€éŒ„çš„æ˜¯ é·ç§»èˆŠä¿¡ çš„éƒ¨åˆ†ï¼Œé€™æ˜¯å…¶ä¸­æœ€éº»ç…©ä¹Ÿæœ€ç¹ç‘£çš„éƒ¨åˆ†â€¦ è¨­å®šè³‡æ–™é·ç§»å·¥å…·G Suite ä¸­æœ‰æä¾›è³‡æ–™é·ç§»çš„å·¥å…·ï¼Œå…¶ä¸­åŒ…å«é·ç§»èˆŠä¿¡ä»¶ï¼Œä»–çš„æ–¹æ³•æ˜¯é€é IMAP ä¸‹è¼‰ dovecot ä¿¡ä»¶å†åŒ¯å…¥è‡³ Gmail. é·ç§»è¨­å®šä¸­ï¼Œè¦è¨­å®šä»¥ä¸‹å¹¾å€‹æ±è¥¿ï¼š åŸéƒµä»¶ä¼ºæœå™¨é¡å‹ â†’ æˆ‘å€‘çš„ä¾‹å­è¦é¸ å…¶ä»–é›»å­éƒµä»¶ä¼ºæœå™¨ åŸæœ¬çš„ IMAP server ç®¡ç†è€…å¸³è™Ÿ â†’ é€™å¥½åƒæ²’ç”šéº¼é‡è¦çš„ï¼Œåªæ˜¯ä»–æœƒæ”¶åˆ°é·ç§»å ±å‘Šæ›¸ Password mismatché€™é‚Šå¯èƒ½æœƒé‡åˆ°å•é¡Œ(å¸³è™Ÿå¯†ç¢¼ä¸æ­£ç¢º&#x2F;password mismatch?)ï¼Œå¯ä»¥æŸ¥çœ‹ /var/log/mail.log ä¸­çš„è©³ç´°éŒ¯èª¤è¨Šæ¯ï¼š 12Mar 16 19:00:54 cml2 dovecot: auth-worker(10594): pam(ssarcandy@cmlab.csie.ntu.edu.tw,173.194.90.100):pam_authenticate() failed: Authentication failure (password mismatch?) é€™æ˜¯å› ç‚ºé€™é‚Šä½¿ç”¨ full email address å»ç™»å…¥ IMAP serverï¼Œè€ŒåŸæœ¬æˆ‘å€‘ dovecot çš„è¨­å®šæ˜¯åªè¦æ‰“ user name å°±å¥½(ä¸ç”¨åŠ  @domain)ï¼Œæ‰æœƒé€ æˆå¸³å¯†ä¸æ­£ç¢ºçš„å•é¡Œã€‚ ç‚ºäº†è¿åˆ G suite çš„æ ¼å¼ï¼Œå»åŸéƒµä»¶ä¼ºæœå™¨æ›´æ”¹ dovecot è¨­å®šï¼š 1234$ vim /etc/dovecot/conf.d/10-auth.conf # æ‰¾åˆ° auth_username_format# åè¨»è§£ä¸¦æ”¹æˆ auth_username_format = %n å…¶ä¸­ auth_username_format æ˜¯æŒ‡ç™»å…¥çš„ username æ ¼å¼ï¼Œé è¨­æ˜¯åªæœ‰ @ å‰é¢çš„éƒ¨åˆ†ã€‚ç”±æ–¼ G suite é‚£é‚Šå°±æ˜¯è¦ç”¨ full address ç™»å…¥ï¼Œæ•…é€™é‚Šæ”¹æˆ %n ï¼Œäº¦å³æ¨æ£„ @ å¾Œé¢çš„æ±è¥¿ï¼Œåªç•™ä¸‹ @ å‰é¢çš„éƒ¨åˆ† ã€‚ æ”¹å®Œä¹‹å¾Œè¨˜å¾—é‡å•Ÿ dovecot 12$ service dovecot restart[ ok ] Restarting IMAP/POP3 mail server: dovecot. è¨­å®šé·ç§»ç¯„åœä¸‹ä¸€æ­¥æ˜¯è¦è¨­å®šè¦é·ç§»çš„æ™‚é–“ã€è³‡æ–™å¤¾ç­‰ï¼Œä»¥æˆ‘å€‘çš„ä¾‹å­è€Œè¨€ï¼š æ™‚é–“é¸åˆ° cmlab å‰µç«‹ä»¥ä¾†çš„å…¨éƒ¨ ï½(é·ç§»ï¼å…¨éƒ½é·ç§»ï¼ è³‡æ–™å¤¾å‰‡é¸æ“‡å¿½ç•¥å¹¾å€‹ç‰¹å®šè³‡æ–™å¤¾ï¼Œåƒæ˜¯ virus-mail , trash-mail, spam-mail ç­‰ç­‰ å®Œæ•´çš„è³‡æ–™é·ç§»è¨­å®š é¸å–é·ç§»çš„ä½¿ç”¨è€…æ¥ä¸‹ä¾†å¯ä»¥ç›´æ¥ä¸Šå‚³ä¸€å€‹ csv æª”ï¼Œå…¶ä¸­åŒ…å«ï¼š åŸéƒµä»¶ä¼ºæœå™¨å¸³è™Ÿ åŸéƒµä»¶ä¼ºæœå™¨å¯†ç¢¼ å°æ‡‰çš„ gmail å¸³è™Ÿ ä¸Šå‚³æ™‚æœ‰å€‹æ½›è¦å‰‡ï¼Œcsv æª”ä¸å¯ä»¥è¶…é 500 è¡Œï¼Œè¶…éå®ƒå°±æœƒèªªæœªçŸ¥éŒ¯èª¤(å°ï¼Œé€™æ˜¯æˆ‘å€‘è©¦å‡ºä¾†çš„â€¦ å¦å¤–ï¼Œåœ¨é·ç§»æ™‚æœ‰å¹¾å€‹å¸¸è¦‹çš„éŒ¯èª¤ï¼š é©—è­‰å¤±æ•—éŒ¯èª¤(18017)ï¼šé©—è­‰å¤±æ•—ã€‚é€™è¡¨ç¤ºæ‰€æä¾›çš„åŸéƒµä»¶ä¼ºæœå™¨å¸³è™Ÿã€å¯†ç¢¼ä¸æ­£ç¢ºï¼Œä¹Ÿå°±æ˜¯å¯èƒ½é€™å€‹äººä¸å­˜åœ¨åŸéƒµä»¶ä¼ºæœå™¨ï¼Œæˆ–è€…æä¾›çš„å¯†ç¢¼ä¸æ­£ç¢ºã€‚ å¦‚æœåŸéƒµä»¶ä¼ºæœå™¨çš„é©—è­‰æ˜¯åƒæˆ‘å€‘ä¸€æ¨£é€é LDAP çš„è©±ï¼Œå¯ä»¥ç”¨ ldapsearch ç¢ºèªé€™äººåœ¨ä¸åœ¨ï¼š 1$ ldapsearch -x &quot;uid=??,dc=base_dn&quot; é€£ç·šè‡³ä¾†æºéƒµä»¶ä¼ºæœå™¨æ™‚ç™¼ç”ŸéŒ¯èª¤éŒ¯èª¤(18002)ï¼šé€£ç·šè‡³ä¾†æºéƒµä»¶ä¼ºæœå™¨æ™‚ç™¼ç”ŸéŒ¯èª¤ã€‚é€™éŒ¯èª¤æ˜¯å°æ‡‰åˆ° roundcube çš„ é€£ç·šåˆ° imap ä¼ºæœå™¨å¤±æ•— éŒ¯èª¤ï¼Œæœ‰å…©å€‹å¯èƒ½ï¼š å› ç‚ºé‚£å€‹äººæ²’æœ‰å®¶ç›®éŒ„ uid mismatch â†’ /var/spool/mail/username çš„æ“æœ‰è€…æ˜¯éŒ¯èª¤çš„ æœƒç™¼ç”Ÿæ²’æœ‰å®¶ç›®éŒ„çš„æƒ…æ³åœ¨æˆ‘å€‘çš„ç‹€æ³è€Œè¨€å°±æ˜¯é‚£å€‹äººå·²è¢«åœæ¬Šï¼Œé‚£å°±æ ¹æœ¬ä¸ç”¨é·ç§»äº†ã€‚è€Œ uid mismatch å‰‡æ˜¯å» /var/spool/mail/username æ›´æ”¹æˆæ­£ç¢ºçš„æ“æœ‰è€…å°±å¥½äº†ã€‚ ä¿¡ç®±éŒ¯èª¤ã€‚ç„¡æ³•é–‹å•Ÿè³‡æ–™å¤¾æˆ–éƒµä»¶éŒ¯èª¤(18006)ï¼šä¿¡ç®±éŒ¯èª¤ã€‚ç„¡æ³•é–‹å•Ÿè³‡æ–™å¤¾æˆ–éƒµä»¶ã€‚é€™æ‡‰è©²æ˜¯å±¬æ–¼æš«æ™‚æ€§çš„éŒ¯èª¤ï¼Œæ™šä¸€é»å†é‡è©¦çœ‹çœ‹ã€‚ Google å…¶å¯¦æœ‰æä¾›ä¸€ä»½éŒ¯èª¤ä¸€è¦½è¡¨ â†’ éŒ¯èª¤ä¸€è¦½è¡¨ (é›–ç„¶æœ‰äº›æœ‰å¯«è·Ÿæ²’å¯«ä¸€æ¨£â€¦ æ€éº¼å¾—åˆ°å¤§å®¶çš„å¯†ç¢¼æˆ‘æƒ³çœ‹åˆ°é€™é‚Šæ‡‰è©²æœƒç™¼ç¾ä¸€å€‹å•é¡Œï¼šé·ç§»çš„ csv æª”å…¶ä¸­ä¸€æ¬„è¦æä¾›å¤§å®¶çš„å¯†ç¢¼ï¼Œé€™æ˜¯å³ä½¿æ˜¯æœ‰ root æ¬Šé™ä¹Ÿæ²’è¾¦æ³•çŸ¥é“çš„è³‡è¨Šæ¬¸ï¼é›–ç„¶æˆ‘å€‘æœ€å¾Œé‚„æ˜¯æœ‰æƒ³åˆ°è¾¦æ³•ï¼Œä¸éé‚£éç¨‹ä¹Ÿå¾ˆç¹ç‘£ï¼Œå°±ç•™åˆ°ä¸‹ä¸€æ¬¡ä»‹ç´¹å§â€¦","categories":[],"tags":[{"name":"unix","slug":"unix","permalink":"https://ssarcandy.tw/tags/unix/"},{"name":"note","slug":"note","permalink":"https://ssarcandy.tw/tags/note/"}]},{"title":"High Dynamic Range Imaging","slug":"High-Dynamic-Range-Imaging","date":"2017-04-15T17:34:44.000Z","updated":"2025-10-22T00:51:26.604Z","comments":true,"path":"2017/04/15/High-Dynamic-Range-Imaging/","link":"","permalink":"https://ssarcandy.tw/2017/04/15/High-Dynamic-Range-Imaging/","excerpt":"é«˜å‹•æ…‹ç¯„åœæˆåƒï¼ˆè‹±èªï¼šHigh Dynamic Range Imagingï¼Œç°¡ç¨±HDRIæˆ–HDRï¼‰ï¼Œåœ¨é›»è…¦åœ–å½¢å­¸èˆ‡é›»å½±æ”å½±è¡“ä¸­ï¼Œæ˜¯ç”¨ä¾†å¯¦ç¾æ¯”æ™®é€šæ•¸é»é™£åœ–åƒæŠ€è¡“æ›´å¤§æ›å…‰å‹•æ…‹ç¯„åœï¼ˆå³æ›´å¤§çš„æ˜æš—å·®åˆ¥ï¼‰çš„ä¸€çµ„æŠ€è¡“ã€‚é«˜å‹•æ…‹ç¯„åœæˆåƒçš„ç›®çš„å°±æ˜¯è¦æ­£ç¢ºåœ°è¡¨ç¤ºçœŸå¯¦ä¸–ç•Œä¸­å¾å¤ªé™½å…‰ç›´å°„åˆ°æœ€æš—çš„é™°å½±é€™æ¨£å¤§çš„ç¯„åœäº®åº¦ã€‚ â€“ from wikipedia ç”±æ–¼ä¸€èˆ¬æ•¸ä½ç›¸æ©Ÿçš„å½±åƒå°±æ˜¯æ¯å€‹ pixel 8 bitsï¼Œèƒ½å¤ è¡¨ç¾çš„èƒ½é‡ç¯„åœå°±æ˜¯é€™éº¼çª„(éæš´å°±å…¨ç™½ï¼Œå¤ªæš—å°±å…¨é»‘)ã€‚ç„¶è€ŒçœŸå¯¦ä¸–ç•Œçš„èƒ½é‡ç¯„åœæ˜¯éå¸¸å»£çš„ï¼Œç‚ºäº†èƒ½å¤ åœ¨ 0~255 ä¹‹é–“è¡¨ç¾å‡ºæœ€è±å¯Œçš„ç´°ç¯€(äº®éƒ¨å³æš—éƒ¨çš„ç´°ç¯€)ï¼Œæ‰æœ‰æ‰€è¬‚çš„ HDR æŠ€è¡“ã€‚HDR Image å¯ä»¥å¾å¤šå¼µä¸åŒæ›å…‰æ™‚é–“çš„ç…§ç‰‡ä¸­çµ„åˆå‡ºä¾†ï¼Œè€Œæ•´å€‹æµç¨‹å¤§è‡´åŒ…å«äº†: å½±åƒå°é½Š è¨ˆç®—å‡ºçœŸå¯¦èƒ½é‡åˆ†ä½ˆ æŠŠå½±åƒå£“ç¸®å›ä½å‹•æ…‹ç¯„åœæˆåƒ(ä¸€èˆ¬è¢å¹•æ‰èƒ½é¡¯ç¤º)","text":"é«˜å‹•æ…‹ç¯„åœæˆåƒï¼ˆè‹±èªï¼šHigh Dynamic Range Imagingï¼Œç°¡ç¨±HDRIæˆ–HDRï¼‰ï¼Œåœ¨é›»è…¦åœ–å½¢å­¸èˆ‡é›»å½±æ”å½±è¡“ä¸­ï¼Œæ˜¯ç”¨ä¾†å¯¦ç¾æ¯”æ™®é€šæ•¸é»é™£åœ–åƒæŠ€è¡“æ›´å¤§æ›å…‰å‹•æ…‹ç¯„åœï¼ˆå³æ›´å¤§çš„æ˜æš—å·®åˆ¥ï¼‰çš„ä¸€çµ„æŠ€è¡“ã€‚é«˜å‹•æ…‹ç¯„åœæˆåƒçš„ç›®çš„å°±æ˜¯è¦æ­£ç¢ºåœ°è¡¨ç¤ºçœŸå¯¦ä¸–ç•Œä¸­å¾å¤ªé™½å…‰ç›´å°„åˆ°æœ€æš—çš„é™°å½±é€™æ¨£å¤§çš„ç¯„åœäº®åº¦ã€‚ â€“ from wikipedia ç”±æ–¼ä¸€èˆ¬æ•¸ä½ç›¸æ©Ÿçš„å½±åƒå°±æ˜¯æ¯å€‹ pixel 8 bitsï¼Œèƒ½å¤ è¡¨ç¾çš„èƒ½é‡ç¯„åœå°±æ˜¯é€™éº¼çª„(éæš´å°±å…¨ç™½ï¼Œå¤ªæš—å°±å…¨é»‘)ã€‚ç„¶è€ŒçœŸå¯¦ä¸–ç•Œçš„èƒ½é‡ç¯„åœæ˜¯éå¸¸å»£çš„ï¼Œç‚ºäº†èƒ½å¤ åœ¨ 0~255 ä¹‹é–“è¡¨ç¾å‡ºæœ€è±å¯Œçš„ç´°ç¯€(äº®éƒ¨å³æš—éƒ¨çš„ç´°ç¯€)ï¼Œæ‰æœ‰æ‰€è¬‚çš„ HDR æŠ€è¡“ã€‚HDR Image å¯ä»¥å¾å¤šå¼µä¸åŒæ›å…‰æ™‚é–“çš„ç…§ç‰‡ä¸­çµ„åˆå‡ºä¾†ï¼Œè€Œæ•´å€‹æµç¨‹å¤§è‡´åŒ…å«äº†: å½±åƒå°é½Š è¨ˆç®—å‡ºçœŸå¯¦èƒ½é‡åˆ†ä½ˆ æŠŠå½±åƒå£“ç¸®å›ä½å‹•æ…‹ç¯„åœæˆåƒ(ä¸€èˆ¬è¢å¹•æ‰èƒ½é¡¯ç¤º) Image Alignmentæ‹æ”æ™‚ï¼Œå³ä½¿æœ‰ç”¨è…³æ¶å›ºå®šï¼Œä¹Ÿç„¡æ³•ç¢ºä¿æ¯å¼µç…§ç‰‡æ‹åˆ°çš„éƒ½å®Œå…¨æ²’æœ‰æ™ƒåˆ°ï¼Œå¦‚æœæ™ƒåˆ°çš„è©±ï¼Œåˆ°æ™‚å€™çš„çµæœå°±æœƒç³Šç³Šçš„ã€‚æ‰€ä»¥ï¼Œç¬¬ä¸€æ­¥å°±æ˜¯è¦å…ˆå°å…¶å„å¼µå½±åƒã€‚æˆ‘å€‘å¯ä»¥ä»¥ç¬¬ä¸€å¼µç…§ç‰‡ç‚ºæ¨™æº–ï¼Œå…¶é¤˜çš„ç…§ç‰‡éƒ½æƒ³è¾¦æ³•å°é½Šä»–ã€‚ NaÃ¯ve Alignmentæœ€ naÃ¯ve çš„æ¼”ç®—æ³•ï¼Œå°±æ˜¯åœ¨ä¸€å€‹ç¯„åœå…§ç§»å‹•æ‰¾å‡ºå·®å€¼æœ€å°çš„offsetï¼Œpseudo-codeå¦‚ä¸‹: 12345678offset = (0, 0)difference = infinityfor y in [min..max]: for x in [min..max]: diff = find_diff(img[0], offset(img[i], (y, x)) if diff &lt; difference: difference = diff offset = (y, x) å¦‚ä½•è¨‚ min, max å€¼æ˜¯å€‹é›£é¡Œï¼Œå¤ªå¤§æœƒæ•ˆç‡å·®ï¼Œå¤ªå°å¯èƒ½æœƒæ²’æ‰¾æœ€å¥½çš„è§£ã€‚ä¸éä¾æ“šæˆ‘çš„ç¶“é©—ï¼Œæ‹æ”çš„æ™‚å€™æœ‰æ­é…è…³æ¶ä»¥åŠå¿«é–€ç·šçš„è©±ï¼Œå…¶å¯¦èª¤å·®å·®ä¸å¤šéƒ½åœ¨ 5 pixels ä¹‹é–“ï¼Œæ‰€ä»¥å¯ä»¥æŠŠ Median Threshold BitmapMedian Threshold Bitmap Alignment[1] æ¼”ç®—æ³•ï¼Œæ˜¯åˆ©ç”¨é‡‘å­—å¡”çš„æ–¹å¼(æ¯å±¤åœ–ç‰‡éƒ½ç‚ºä¸Šä¸€å±¤çš„å››å€)å¾æœ€å°çš„é–‹å§‹æ¯”å°ï¼Œåœ¨ä¹å€‹é„°å±…å…§åšç§»å‹•ï¼Œç´¯è¨ˆå„æ–¹å‘çš„èª¤å·®é¸æ“‡æœ€å°çš„æ–¹å‘ç§»å‹•ä¹‹ï¼Œå†å‘ä¸Šå‚³éåˆ°å…©å€çš„åœ–å†åšä¸€æ¬¡ã€‚åŸºæœ¬ä¸Šæ¯ä¸€å¼µéƒ½æ˜¯å»å°é½Šç¬¬ä¸€å¼µã€‚ å¯¦ä½œçš„æµç¨‹å¤§ç•¥å¦‚ä¸‹: ç”¢ç”Ÿ binary-threshold imageé€™é‚Šçš„é–¾å€¼ç”±å½±åƒçš„ä¸­ä½æ•¸å€¼æ±ºå®šã€‚ æˆ‘å¯¦ä½œçš„ MTB æ‰€ç”¢ç”Ÿçš„ binary-threshold image ç”¢ç”Ÿ exclude maskç”±æ–¼é‚£äº›å¤ªæ¥è¿‘é–¾å€¼çš„åƒç´ æœ‰å¯èƒ½æœƒé€ æˆèª¤å·®ï¼Œæ•…å°‡å¤ªæ¥è¿‘é–¾å€¼çš„åƒç´ æ¨™ç¤ºå‡ºä¾†ï¼Œåœ¨æ¯”å°æ™‚å°±ç›´æ¥è·³éä¸æ¯”å°ã€‚å‡è¨­è¦å¿½ç•¥çš„æ˜¯ é–¾å€¼ Â± 10 ï¼Œå¯ä»¥ç”¨ opencv çš„ cv2.inRange()é”æˆ 1mask_img = cv2.inRange(img, median - 10, median + 10) é€™æ˜¯ç”¨æ–¼è·³ééæ–¼æ¥è¿‘é–¾å€¼çš„åƒç´ çš„ MASK ç”±æœ€å°è‡³æœ€å¤§çš„é †åºæ¯”å°å½±åƒå·®ç•°åœ¨æ¯ä¸€å€‹å±¤ç´šä¸­ï¼Œéƒ½æ˜¯å¾€ä¹å€‹é„°å±…ç§»å‹•ï¼Œçœ‹å“ªå€‹æœ€å°ï¼Œå†å¾€ä¸Šå‚³éç¹¼çºŒåšé€™å€‹æ¯”å°ã€‚ç”±æ–¼å½±åƒéƒ½æ˜¯ binary imageï¼Œæ‰€ä»¥è¦æ¯”å°å½±åƒå·®ç•°æŒºå®¹æ˜“çš„:å½±åƒå·®ç•° = img1 XOR img2 AND maskè¶Šå°å±¤ç´šçš„ç§»å‹•çš„æ¬Šé‡è¶Šå¤§ã€‚ Construct HDRç”±æ–¼ä¸€èˆ¬æ•¸ä½ç›¸æ©Ÿçš„å½±åƒå°±æ˜¯æ¯å€‹ pixel 8 bitsï¼Œæ‰€ä»¥æ¯å°æ•¸ä½ç›¸æ©Ÿå…¶å¯¦éƒ½æœ‰è‡ªå·±å°æ‡‰çš„ response curveResponse curve æ˜¯åœ¨æ±ºå®šæ¥æ”¶åˆ°å¤šå°‘èƒ½é‡è©²è½‰æˆå¤šå°‘çš„å€¼(æ­¤å€¼æ˜¯ [0~255])ã€‚é‚£æˆ‘å°±å¯ä»¥é€éå¤šå¼µä¸åŒæ›å…‰æ™‚é–“çš„å½±åƒä¾†åæ¨å‡ºé€™å€‹ response curveï¼Œæœ‰äº† response curve ä¹‹å¾Œå°±å¯ä»¥é€²ä¸€æ­¥ç®—å‡ºçœŸå¯¦èƒ½é‡åˆ†ä½ˆåœ–ã€‚ Solving response curveæˆ‘å»ºç«‹ HDR å½±åƒçš„æ–¹æ³•ç‚º 1997 Debevec[2] çš„æ–¹æ³•ã€‚ç”±æ–¼è«–æ–‡å¾ˆä½›å¿ƒçš„æœ‰æä¾› MatLab Codeï¼Œæ‰€ä»¥æˆ‘å°±ç›´æ¥æ‹¿ä»–ç‚ºåŸºåº•æ”¹å¯«æˆ python ç¨‹å¼ç¢¼ï¼Œä¸¦åˆ©ç”¨ numpy æä¾›çš„ np.linalg.lstsq(A, b) è§£ çš„ è§£ã€‚ æˆ‘å°‡ RGB channel åˆ†åˆ¥è¨ˆç®— response curveï¼Œä¸¦å…¨éƒ¨ç•«åœ¨ä¸€åœ–è¡¨ä¸Šæª¢è¦–ï¼Œä»¥ä¸‹æ˜¯æˆ‘åšçš„å¹¾å€‹ä¾‹å­ã€‚ å¦å¤–ï¼ŒDebevec è«–æ–‡[2]æ‰€æåŠçš„ (æ§åˆ¶ response curve smoothness ç¨‹åº¦)ï¼Œä¸¦ä¸å¥½æŒæ¡æœ€å¥½çš„å€¼ï¼Œä¸éä¾æ“šå¯¦é©— å€¼å¤§ç´„åœ¨ 30~50 å°±é‚„ä¸éŒ¯ã€‚ é—œæ–¼ smaple é»çš„æ–¹å¼ï¼Œæˆ‘è©¦äº†å…©ç¨®: Random å– 50 å€‹é»å¥½è™•æ˜¯å¾ˆç›´è¦ºä¸”å®¹æ˜“å¯¦ä½œï¼Œä½†æˆ‘ç™¼ç¾åšå‡ºä¾†çš„ response curve æœ‰æ™‚æœƒæœ‰å¾ˆä¸ä¸€æ¨£çš„çµæœï¼Œæ¯”è¼ƒä¸å¯é ã€‚ä»¥ä¸‹åœ–ç‚ºä¾‹ï¼Œå¯ä»¥çœ‹åˆ°åœ¨ç¶ è‰²çš„ channel å°±æœ‰æ¯”è¼ƒæ€ªç•°çš„çµæœï¼Œè—è‰²åœ¨é ‚éƒ¨ä¹Ÿæ˜¯æ€ªæ€ªçš„ã€‚ Random sampling 50 points Response curve æŠŠåœ–ç‰‡ç¸®æˆ 10x10ï¼Œå…¨éƒ¨æ‹¿å»ç®—ç”±æ–¼ç¸®å°åœ–ç‰‡åŸºæœ¬ä¸Šé‚„æ˜¯èƒ½ä¿æœ‰åœ–ç‰‡çš„ç‰¹å¾µ(ç‰¹äº®çš„ã€ç‰¹æš—ä¹‹é¡çš„)ï¼Œæ‰€ä»¥åšå‡ºä¾†çš„æ•ˆæœä¹Ÿæ¯”è¼ƒå¥½ä¸€é»ï¼Œå·¦åœ–æ˜¯ç¸®æ”¾åˆ° 10x10 çš„å½±åƒï¼Œå³ç‚º response curve: Shrink original img to 10x10 and use all pixels Response curve æ‰€ä»¥æœ€å¾Œæˆ‘æ¡ç”¨ç¬¬äºŒç¨®æ–¹æ³•ã€‚ Construct radiance mapå†è—‰ç”± Debevec è«–æ–‡[2]ä¸Š Equation(6) æ‰€æçš„ construct radiance map:é€éå‰›å‰›ç”¢ç”Ÿçš„ response curve å¸¶å…¥å…¬å¼ä¾†å¾—åˆ° radiance mapã€‚ å…¶ä¸­ å‡½å¼å°±æ˜¯å‰›å‰›ç”¢ç”Ÿçš„ response curveã€‚æœ‰äº† radiance mapä¹‹å¾Œï¼Œå°±å¯ä»¥å¥—ç”¨å‡è‰²ä¾†é¡¯ç¤ºå‡ºçœŸå¯¦èƒ½é‡åˆ†ä½ˆåœ–ï¼Œä»¥ä¸‹æ˜¯æˆ‘åšçš„å¹¾çš„ä¾‹å­(é€™é‚Šçš„å€¼éƒ½æ˜¯log value) Tone mappingåˆ°æ­¤å·²ç¶“é‡å»ºå‡º Radiance map äº†ï¼Œä¹Ÿå°±æ˜¯å·²ç¶“çŸ¥é“çœŸå¯¦èƒ½é‡åˆ†ä½ˆäº†ï¼Œä½†é€™èƒ½é‡ç¯„åœå¤ªå»£ï¼Œæ²’è¾¦æ³•ç›´æ¥é¡¯ç¤ºåˆ°ä¸€èˆ¬çš„é¡¯ç¤ºå™¨ä¸Š(0~255)æ‰€ä»¥éœ€è¦å†æŠŠé€™æ¨£é«˜å‹•æ…‹ç¯„åœæˆåƒå£“å›ä½å‹•æ…‹ç¯„åœæˆåƒï¼Œä¸éé€™å£“ç¸®çš„æ–¹å¼æœ‰å…¶å­¸å•ï¼Œå¦‚ä½•æ‰èƒ½è®“ä½å‹•æ…‹ç¯„åœæˆåƒçœ‹èµ·ä¾†åƒé«˜å‹•æ…‹ç¯„åœæˆåƒå°±æ˜¯ Tone mapping åœ¨åšçš„äº‹ã€‚ æ ¹æ“šä¸åŒçš„ Casesï¼Œæœ€é©åˆçš„æ¼”ç®—æ³•ä¸è¦‹å¾—ç›¸åŒï¼Œæ‰€ä»¥å°±æ˜¯è¦çœ‹æƒ…æ³æ±ºå®šã€‚é€™é‚Šå±•ç¤ºå¹¾å€‹ Tone mapping ä¹‹å¾Œçš„çµæœ: Result galleries Living room, tone map algroithm: gdc, Camera: Nikon D5000 Taipei city, tone map algroithm: drago, Camera: Nikon D5000 Street, tone map algroithm: drago, Camera: Nikon D5000 Street at night, tone map algroithm: ashikhmin, Camera: Nikon D5000 References Fast, Robust Image Registration for Compositing High Dynamic Range Photographs from Handheld Exposures, G. Ward, JGT 2003 Recovering High Dynamic Range Radiance Maps from Photographs, Paul E. Debevec, Jitendra Malik, SIGGRAPH 1997 h1+ol { list-style-type: none; counter-reset: list-counter; padding-left: 0; } h1+ol li { position: relative; padding-left: 3em; } h1+ol li::before { counter-increment: list-counter; content: \"[\" counter(list-counter) \"] \"; position: absolute; left: 0; width: 25px; text-align: right; } é›œè«‡ çµæœèªªçœŸçš„é‚„æ˜¯æœ‰ä¸å°‘äººå·¥çš„æ„Ÿè¦ºï¼Œå¯èƒ½æˆ‘å¤ªå»¢äº†å§â€¦QQ Latex é… markdown è¦æ³¨æ„è©²æ­»çš„ _ï¼Œåœ¨ Hexo ä¸­åº•ç·šæœƒå…ˆè¢«è¦–ç‚ºæ–œé«”å­—ï¼Œæ‰€ä»¥åœ¨ Latex ä¸­åº•ç·šå‰é¢è¦ç”¨è·³è„«å­—å…ƒã€‚ Hexo çš„ markdown çœŸ robust! æ„›æ€äº‚æéƒ½æœƒè·Ÿé æœŸä¸­çš„ä¸€æ¨£ï¼Œä¹Ÿå¯ä»¥äº‚åŠ  html èªæ³•ï½(æœ›å‘ githubâ€¦ é€™ç¯‡æ–‡ç« ç…§ç‰‡çœŸå¤šï¼Œç«Ÿç„¶è¦ä¸‹è¼‰ 30MB ä¹‹å¤šï¼Œè¶…ä¸ friendly der~","categories":[],"tags":[{"name":"opencv","slug":"opencv","permalink":"https://ssarcandy.tw/tags/opencv/"},{"name":"paper","slug":"paper","permalink":"https://ssarcandy.tw/tags/paper/"},{"name":"python","slug":"python","permalink":"https://ssarcandy.tw/tags/python/"}]},{"title":"Setup x11 forwarding on Debian","slug":"Setup-x11-forwarding-on-Debian","date":"2017-03-19T18:03:08.000Z","updated":"2025-10-22T00:51:26.604Z","comments":true,"path":"2017/03/19/Setup-x11-forwarding-on-Debian/","link":"","permalink":"https://ssarcandy.tw/2017/03/19/Setup-x11-forwarding-on-Debian/","excerpt":"æœ‰æ™‚å€™æœƒéœ€è¦åœ¨ server ä¸Šä½¿ç”¨æœ‰ GUI ä»‹é¢çš„ç¨‹å¼ï¼Œåƒæ˜¯æˆ‘å€‘æœƒæŠŠ matlab å®‰è£åœ¨é‹ç®—èƒ½åŠ›å¾ˆå¥½çš„å·¥ä½œç«™ä¸Šä¾›å¤§å®¶ä½¿ç”¨ã€‚ä½†é€é ssh é€£ä¸Šå·¥ä½œç«™çš„è©±ä»‹é¢æœƒæ˜¯ terminalï¼Œä½¿ç”¨ä¸Šå°±æœƒæ¯”è¼ƒä¸ä¾¿ã€‚ Linux çš„ GUI é‹ä½œæ¨¡å¼ï¼Œå…¶ä¸­ X-client è² è²¬ç¨‹å¼çš„é‹ä½œ X-server è² è²¬ç•«é¢çš„é¡¯ç¤º æ‰€ä»¥åªè¦æŠŠå·¥ä½œç«™ä¸Šçš„åœ–å½¢é¡¯ç¤ºä¸Ÿåˆ°æœ¬åœ°ç«¯(windows&#x2F;mac)çš„ X-serverï¼Œå°±å¯ä»¥é¡¯ç¤ºå‡ºä¾†äº†ã€‚æœ¬ç¯‡å°‡ä»‹ç´¹å¦‚ä½•è¨­å®šæ‰èƒ½ä½¿ Debian Server çš„ GUI ç¨‹å¼çš„ç•«é¢é¡¯ç¤ºåˆ° client çš„é›»è…¦ä¸Šã€‚","text":"æœ‰æ™‚å€™æœƒéœ€è¦åœ¨ server ä¸Šä½¿ç”¨æœ‰ GUI ä»‹é¢çš„ç¨‹å¼ï¼Œåƒæ˜¯æˆ‘å€‘æœƒæŠŠ matlab å®‰è£åœ¨é‹ç®—èƒ½åŠ›å¾ˆå¥½çš„å·¥ä½œç«™ä¸Šä¾›å¤§å®¶ä½¿ç”¨ã€‚ä½†é€é ssh é€£ä¸Šå·¥ä½œç«™çš„è©±ä»‹é¢æœƒæ˜¯ terminalï¼Œä½¿ç”¨ä¸Šå°±æœƒæ¯”è¼ƒä¸ä¾¿ã€‚ Linux çš„ GUI é‹ä½œæ¨¡å¼ï¼Œå…¶ä¸­ X-client è² è²¬ç¨‹å¼çš„é‹ä½œ X-server è² è²¬ç•«é¢çš„é¡¯ç¤º æ‰€ä»¥åªè¦æŠŠå·¥ä½œç«™ä¸Šçš„åœ–å½¢é¡¯ç¤ºä¸Ÿåˆ°æœ¬åœ°ç«¯(windows&#x2F;mac)çš„ X-serverï¼Œå°±å¯ä»¥é¡¯ç¤ºå‡ºä¾†äº†ã€‚æœ¬ç¯‡å°‡ä»‹ç´¹å¦‚ä½•è¨­å®šæ‰èƒ½ä½¿ Debian Server çš„ GUI ç¨‹å¼çš„ç•«é¢é¡¯ç¤ºåˆ° client çš„é›»è…¦ä¸Šã€‚ Debian Serverå®‰è£ X-serverå¦‚æœ server ä¸€é–‹å§‹å°±æ˜¯çŒæ²’æœ‰æ¡Œé¢ç’°å¢ƒçš„ï¼Œç¾åœ¨å°±è¦å®‰è£ä¸€ä¸‹: 1$ apt-get install xserver-xorg-core ä¹Ÿå¯ä»¥è£å€‹ gvim ä¾†æ¸¬è©¦ã€‚ 1$ apt-get install vim-gtk å•Ÿç”¨ X11Forwardingserver é€™é‚Šï¼Œå¿…é ˆè¦å…è¨± ssh çš„é€£ç·š forward é€™äº›åœ–å½¢ä»‹é¢çš„è³‡è¨Šåˆ° client ç«¯ï¼Œæ‰€ä»¥éœ€è¦å» /etc/ssh/ssh_config ä¸­è¨­å®š: 1234$ vim /etc/ssh/ssh_config # add this line:X11Forwarding yes è¨­å®šå¥½è¨˜çš„é‡å•Ÿ sshd æœå‹™: 1$ service sshd reload Client Setupæœ¬æ©Ÿç«¯ä¹Ÿæ˜¯è¦æœ‰ç›¸æ‡‰çš„è¨­å®šæ‰èƒ½æ­£ç¢ºåœ°æ¥æ”¶ server forward éä¾†çš„åœ–å½¢ä»‹é¢ï¼ŒMac ååˆ†å®¹æ˜“ï¼Œè€ŒWindows çš„è¨­å®šæ¯”è¼ƒéº»ç…©ã€‚ Macæ‰“é–‹ä½ çš„ terminalï¼Œç”¨ ssh é€£ç·šè‡³ä¸»æ©Ÿ: 1234$ ssh -X user@example.com # on remote server$ gvim # open vim GUI version for testing ä¸éæœ€è¿‘ Mac å·²ä¸å†å…§å»º X11[1]ï¼Œæ‰€ä»¥å¦‚æœä½ ç³»çµ±ç‰ˆæœ¬é«˜æ–¼ Sierraï¼Œå‰‡å¿…é ˆä¸‹è¼‰ XQuartzã€‚ Windowsåœ¨ windows ä¸Šéœ€è¦å®‰è£ X-server æ‰èƒ½ä½¿ç”¨ x11 forwardingï¼Œæˆ‘æ¨è–¦ä½¿ç”¨ Xmingã€‚ä¸‹è¼‰ä¸¦å®‰è£å¥½ä»¥å¾Œï¼Œç¢ºèªé€šçŸ¥åˆ—æœ‰å‡ºç¾ Xming çš„åœ–ç¤ºã€‚ ä¸¦ä¸”è¦å†æ›´æ”¹ server ä¸Šçš„ ssh_config : 12345$ vim /etc/ssh/ssh_config # add these two linesX11DisplayOffset 10X11UseLocalhost yes è¨˜å¾—é‡å•Ÿ sshd service æ¥ä¸‹ä¾†ä½¿ç”¨ PuTTy ä¾†é€£ç·š: Session &gt; Host Name: è¼¸å…¥ server ip Connection &gt; SSH &gt; X11: Enable X11 forwarding â†’ æ‰“å‹¾ x display location: localhost:0 é€£ä¸Šä¹‹å¾Œï¼Œå¯ä»¥è©¦è©¦è¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤: 12$ echo $DISPLAYlocalhost:10.0 å¦‚æœçœ‹åˆ°å¦‚ä¸Šçš„å›å‚³ï¼Œå°±è¡¨ç¤ºä¸€åˆ‡æ­£å¸¸ã€‚ è©¦è©¦ gvim ï¼Œå°±æœƒè·³å‡ºå°å·§å¯æ„›çš„è¦–çª—: é€é X11-forwarding è®“ server ä¸Šçš„ gvim é¡¯ç¤ºåˆ°æœ¬æ©Ÿ(windows) References Mac å·²ä¸å†éš¨é™„ X11 SSH X11 Forwarding Installing&#x2F;Configuring PuTTy and Xming Setup X11 Forwarding over SSH on Debian Wheezy h1+ol { list-style-type: none; counter-reset: list-counter; padding-left: 0; } h1+ol li { position: relative; padding-left: 3em; } h1+ol li::before { counter-increment: list-counter; content: \"[\" counter(list-counter) \"] \"; position: absolute; left: 0; width: 25px; text-align: right; }","categories":[],"tags":[{"name":"unix","slug":"unix","permalink":"https://ssarcandy.tw/tags/unix/"},{"name":"note","slug":"note","permalink":"https://ssarcandy.tw/tags/note/"}]},{"title":"é˜²æ­¢ mail server å¤§é‡å¯„ä¿¡çš„æ‰‹æ®µ","slug":"prevent-mail-server-sending-spam","date":"2017-02-26T13:14:07.000Z","updated":"2025-10-22T00:51:26.606Z","comments":true,"path":"2017/02/26/prevent-mail-server-sending-spam/","link":"","permalink":"https://ssarcandy.tw/2017/02/26/prevent-mail-server-sending-spam/","excerpt":"æœ€è¿‘é€™å¹¾å‘¨éƒ½ä¸€ç›´è¢« cmlab çš„ mail server éœ¸å‡Œï¼Œè¦ºå¾—é›£éâ€¦ç‚ºäº†è§£æ±º mail server æ™‚ä¸æ™‚æœƒå¤§é‡å¯„å‡ºä¿¡ä»¶çš„å•é¡Œï¼Œå˜—è©¦äº†è¨±å¤šæ–¹æ³•ï¼Œçµ‚æ–¼å¾—åˆ°ä¸€é»é»å¹³éœâ€¦æœ¬ç¯‡æ•´ç†äº†æˆ‘å€‘æœ€è¿‘å˜—è©¦çš„æ–¹æ³•åŠä¸€äº›å·¥å…·ï¼Œåšå€‹ç´€éŒ„â€¦","text":"æœ€è¿‘é€™å¹¾å‘¨éƒ½ä¸€ç›´è¢« cmlab çš„ mail server éœ¸å‡Œï¼Œè¦ºå¾—é›£éâ€¦ç‚ºäº†è§£æ±º mail server æ™‚ä¸æ™‚æœƒå¤§é‡å¯„å‡ºä¿¡ä»¶çš„å•é¡Œï¼Œå˜—è©¦äº†è¨±å¤šæ–¹æ³•ï¼Œçµ‚æ–¼å¾—åˆ°ä¸€é»é»å¹³éœâ€¦æœ¬ç¯‡æ•´ç†äº†æˆ‘å€‘æœ€è¿‘å˜—è©¦çš„æ–¹æ³•åŠä¸€äº›å·¥å…·ï¼Œåšå€‹ç´€éŒ„â€¦ æµé‡åˆ†æåŠç›£æ§å…ˆä»‹ç´¹å…©å€‹å¥½å·¥å…·ï¼Œ pflogsumm mailgraph æ–¹ä¾¿ç›£æ§ä»¥åŠåˆ†æ mail server çš„ç‹€æ³: pflogsummpflogsumm æ˜¯å€‹å¯ä»¥æŠŠ mail.log æ•´ç†æˆä¸€ä»½æ¯”è¼ƒå¥½é–±è®€çš„å ±å‘Šï¼Œå¯ä»¥ä¸€ç›®ç­ç„¶é€™æ™‚æ®µå…§å…±æ”¶ç™¼å¤šå°‘ä¿¡ã€èª°å¯„æœ€å¤šä¿¡ã€èª°æ”¶æœ€å¤šä¿¡ç­‰ç­‰çš„è³‡è¨Šã€‚ç”¨æ³•ä¹Ÿå¾ˆç°¡å–®: 123456789101112131415161718192021222324$ apt-get install pflogsumm # install$ pflogsumm /var/log/mail.log -d today # generate today&#x27;s report Postfix log summaries for Feb 26 Grand Totals------------messages 659 received 1047 delivered 135 forwarded 0 deferred 2 bounced 3285 rejected (75%) 0 reject warnings 0 held 0 discarded (0%) 15378k bytes received 20065k bytes delivered 142 senders 88 sending hosts/domains 156 recipients 15 recipient hosts/domains é€™é‚Šåªåˆ—å‡º report çš„ä¸€éƒ¨ä»½ï¼Œé‚„æœ‰å¾ˆå¤šæœ‰ç”¨çš„è³‡è¨Šï¼Œå¯ä»¥è‡ªå·±è©¦è©¦çœ‹ã€‚ mailgraphé€™æ˜¯ä¸€å€‹è¦–è¦ºåŒ–åœ–è¡¨å‘ˆç¾ mail server ç‹€æ…‹çš„å·¥å…·ï¼Œé¡¯ç¤ºæ•´å€‹æ™‚é–“è»¸æ”¶ç™¼äº†å¤šå°‘ä¿¡ä¹‹é¡çš„è³‡è¨Šï¼Œä»‹é¢å¤§æ¦‚é•·é€™æ¨£: mailgrapgh ç¶²é çµ±è¨ˆè³‡è¨Š é€™æ˜¯ä»¥ç¶²é ä¾†å‘ˆç¾çš„ï¼ŒåŸç†å°±æ˜¯æ¯å¹¾åˆ†é˜å°±æœƒå»æ•´ç† mail.log ä¸­çš„è³‡è¨Šï¼Œç„¶å¾Œç”¢ç”Ÿåœ–è¡¨å†å‘ˆç¾åœ¨ç¶²é ä¸Šã€‚å®‰è£æµç¨‹å¦‚ä¸‹: 12$ apt-get install rrdtool mailgraph$ dpkg-reconfigure mailgraph ç„¶å¾Œæœƒå•ä½ ä¸‰å€‹å•é¡Œ Should Mailgraph start on boot? &lt;â€“ Yes Logfile used by mailgraph: &lt;â€“ /var/log/mail.log Count incoming mail as outgoing mail? é€™è¦çœ‹ä½ æ˜¯å¦æœ‰å®‰è£ä¸€äº›éæ¿¾å™¨ (amavisd ä¹‹é¡çš„)ï¼Œæœ‰çš„è©±å°±é¸ NOï¼Œåä¹‹å‰‡é¸ YES å†ä¾†å°±æ˜¯æŠŠå°æ‡‰æª”æ¡ˆæ¬åˆ° web server ä¸‹é¢ 123$ mkdir /var/www/mailgrapgh # create a folder for mailgraph$ cp -p /usr/lib/cgi-bin/mailgraph.cgi /var/www/mailgraph $ cp -p /usr/lib/cgi-bin/mailgraph.css /var/www/mailgraph ç„¶å¾Œå°±å¯ä»¥é€£ä¸Š http://yorurdomain.com/mailgraph/mailgraph.cgi æŸ¥çœ‹çµæœã€‚ çœ‹ mail.log æªå‡ºäº‚å¯„è€…é€šå¸¸ mail server å¯„ä¿¡é‡æš´å¢éƒ½æ˜¯å› ç‚ºæœ‰ä½¿ç”¨è€…åœ¨å¤§é‡å¯„ä¿¡ï¼Œç„¡è«–æ˜¯çœŸäººåœ¨æé¬¼æˆ–æ˜¯æœ‰ç¨‹å¼åœ¨æƒ¡æ„å¯„ä¿¡ï¼Œéƒ½æ‡‰è©²è¦–æƒ…æ³ç›´æ¥å°é–ä»–å¯„ä¿¡çš„åŠŸèƒ½ã€‚ æ‰¾ nrcpt éé«˜è€…1$ cat mail.log | egrep &#x27;nrcpt=[1-9][0-9]&#x27; nrcpt æ˜¯ number of recipients çš„ç¸®å¯«ï¼Œnrcpt å¾ˆå¤§è¡¨ç¤ºé€™å°ä¿¡è¦å¯„çµ¦å¾ˆå¤šäººï¼Œåˆä¸åˆç†é‚„æ˜¯è¦çœ‹æƒ…æ³ï¼Œä½†è‡³å°‘ç”±æ­¤ä¸‹æ‰‹æ¯”è¼ƒèƒ½å¤ æ‰¾åˆ°æé¬¼çš„äººã€‚ çœ‹ pflogsumm èª°å¯„å¤ªå¤šä¿¡12345678910$ pflogsumm /var/log/mail.log -d today Senders by message count------------------------ 1060 xxx@cmlab.csie.ntu.edu.tw 32 xxx@cmlab.csie.ntu.edu.tw 12 xxx@cmlab.csie.ntu.edu.tw 6 xxx@cml0.csie.ntu.edu.tw 2 xxx@cmlab.csie.ntu.edu.tw 2 xxx@ntu.edu.tw æ‰¾åˆ°èª°å¾ˆè©­ç•°å¯„å¾ˆå¤šä¿¡ä¹‹å¾Œï¼Œå°±åŠ å…¥ Postfix çš„ sender é»‘åå–®ä¸­é™åˆ¶å¯„ä¿¡ã€‚(è¨˜å¾—æ›´æ–° .db æª”) åœ¨ Postfix main.cf ä¸­åŠ å…¥ sender-access çš„é»‘åå–®: 123smtpd_sender_restrictions = check_sender_access hash:/etc/postfix/sender-access, ... 123456$ vim sender-access # add this line to disable sender function# xxx@cmlab.csie.ntu.edu.tw REJECT sorry, we don&#x27;t provide smtp service for you. $ postmap sender-access # update .db file è¨­å®šå…§æ”¶å¤–å¯„æµé‡æ§åˆ¶æœ‰æ™‚å€™å–®é é»‘åå–®å…¶å¯¦æœ‰é»æ²»æ¨™ä¸æ²»æœ¬ï¼Œå› ç‚ºä»Šå¤©é–äº† A æ˜å¤©å¯èƒ½æ˜¯ B åœ¨å¤§é‡å¯„ä¿¡ï¼Œæ‰€ä»¥è‹¥èƒ½è¨­å®šæ¯å€‹ä½¿ç”¨è€…ä¸€å°æ™‚å…è¨±çš„å¯„ä¿¡é‡æ‰å¯ä»¥é˜²æ­¢é€™é¡å¤§é‡å¯„ä¿¡çš„äº‹æƒ…ç™¼ç”Ÿã€‚ Postfix ä¸¦æ²’æœ‰ç›¸é—œçš„è¨­å®šå¯ä»¥è¨­ï¼Œå¿…é ˆä¾é åˆ¥çš„ç¨‹å¼ï¼Œè€Œçœ‹èµ·ä¾†æœ€å¥½çš„å°±æ˜¯ Policyd äº†æˆ‘ä¹‹å‰å·²ç¶“æœ‰ä¸€ç¯‡æ˜¯ å®‰è£ Policyd ä¸¦è¨­å®šå¤–å¯„ Quota äº†ï¼Œå¯ä»¥ç›´æ¥åƒè€ƒé‚£ç¯‡ã€‚ ä¸éæœ‰å¹¾é»æ˜¯éœ€è¦æ³¨æ„çš„ï¼Œæˆ‘ä¸€é–‹å§‹è¨­å®šæ˜¯è¨­å®šæˆã€Œè‹¥è¶…éå¯„ä¿¡é¡åº¦ï¼Œå‰‡å»¶å¾Œå¯„ä¿¡(DEFER)ã€ï¼Œæˆ‘ä¹‹æ‰€ä»¥é€™æ¨£è¨­æ˜¯ä¸æƒ³è®“ä½¿ç”¨è€…çš„ä¿¡æ²’å¯„å‡ºå»ï¼Œåªæ˜¯è®“ä»–æ™šä¸€é»å¯„å‡ºå»ã€‚ä½†é€™æ¨£å°±åˆå¯èƒ½é€ æˆæŸäººå¤§é‡å¯„ä¿¡çµæœå› ç‚ºè¶…éé¡åº¦æ‰€ä»¥å…¨éƒ¨éƒ½å¡åœ¨ mail queue ä¸­â€¦.å´©æ½°â€¦. æ‰€ä»¥æˆ‘ç¾åœ¨å°±ç›´æ¥è¨­æˆã€Œè‹¥è¶…éå¯„ä¿¡é¡åº¦ï¼Œå‰‡ç›´æ¥æ‹’çµ•å¯„ä¿¡(REJECT)ã€ï¼Œé€™æ¨£æ¯”è¼ƒä¹¾è„†ï½ è¨­å®šé‡é€é–“éš”ã€ç”Ÿå‘½é€±æœŸæœ‰æ™‚å€™ä¿¡ä»¶æœƒå¯„ä¸å‡ºå»(å¯èƒ½æ˜¯å°æ–¹å®¹é‡æ»¿äº†ã€ç¶²è·¯å•é¡Œç­‰ç­‰ã€æˆ–æ˜¯å°æ–¹ä¼ºæœå™¨é»‘åå–®æˆ‘å€‘çš„ä¿¡)ï¼ŒPostfix é è¨­æ˜¯æœ‰é‡é€æ©Ÿåˆ¶çš„ï¼Œä½†å‡è¨­ä¿¡ä»¶ä¸€ç›´é‡é€è€Œä¸”åˆä¸€ç›´å¯„ä¸å‡ºå»é‚£ mail queue å°±æœƒç´¯ç©è¶Šä¾†è¶Šå¤šä¿¡ï¼Œæœ€å¾Œå°±æœƒæœ‰è¶…å¤§å¯„ä¿¡æµé‡ï¼Œè€Œé€™æ™‚å€™å°±æœƒè¢«å­¸æ ¡é™åˆ¶ IP äº†ã€‚ Postfix é‡é€çš„ç›¸é—œè¨­å®šé è¨­å€¼éƒ½ç›¸ç•¶é•·ï¼Œåƒæ˜¯ä¸€å°ä¿¡ä»–èƒ½å¤ å­˜æ´»åœ¨ mail queue ä¸­çš„æ™‚é–“ç«Ÿç„¶æ˜¯äº”å¤©ï¼Œé€™ä¹Ÿè¡¨ç¤ºå¦‚æœæœ‰ä¸€å°ä¿¡å¯„ä¸å‡ºå»çš„è©± Postfix æœƒé¥è€Œä¸æ¨çš„é€£è©¦äº”å¤©â€¦.. ä»¥ä¸‹åˆ—å‡º Postfix æœ‰é—œæ–¼é‡é€çš„è¨­å®šåŠå…¶é è¨­å€¼ï¼Œæƒ³çœ‹æ¯å€‹çš„è©³ç´°èªªæ˜å¯ä»¥çœ‹å®˜æ–¹æ–‡ä»¶ 12345minimal_backoff_time (default: 300s)maximal_backoff_time (default: 4000s)queue_run_delay (default: 300s)maximal_queue_lifetime (default: 5d)bounce_queue_lifetime (default: 5d) æ ¹æ“šæˆ‘å€‘è‡ªå·± mail server çš„ç”¨é‡ï¼Œæˆ‘æœ€å¾Œå°‡è¨­å®šæ”¹ç‚ºå¦‚ä¸‹ï¼Œé€™æ¨£æ‡‰è©²å°±å¯ä»¥é¿å… queue ä¸­å¡æ»¿å¯„ä¸å‡ºå»çš„ä¿¡çš„ç‹€æ³äº†ã€‚ 12345minimal_backoff_time = 10mmaximal_backoff_time = 30mqueue_run_delay = 10mbounce_queue_lifetime = 2hmaximal_queue_lifetime = 2h æœ€è¿‘æ mail server çœŸçš„å¤§å´©æ½°ï¼Œé€£å¸¶ç³»ä¸Šè·Ÿè€…æˆ‘å€‘ä¸€èµ·å´©æ½° Sorryâ€¦QQæœç„¶é‚„æ˜¯ç›¡å¿«è½‰ç§»åˆ° G Suite å¥½äº†â€¦..","categories":[],"tags":[{"name":"unix","slug":"unix","permalink":"https://ssarcandy.tw/tags/unix/"},{"name":"note","slug":"note","permalink":"https://ssarcandy.tw/tags/note/"}]},{"title":"From React to React Native","slug":"from-react-to-react-native","date":"2017-02-02T03:04:00.000Z","updated":"2025-10-22T00:51:26.605Z","comments":true,"path":"2017/02/02/from-react-to-react-native/","link":"","permalink":"https://ssarcandy.tw/2017/02/02/from-react-to-react-native/","excerpt":"æ¥è§¸ React å…¶å¯¦ä¹Ÿä¸€æ®µæ™‚é–“äº†ï¼Œç¸½æ˜¯åš·åš·æƒ³åšå€‹è‡ªå·±çš„ Project ä½†å§‹çµ‚æ²’æœ‰å‹•æ‰‹é–‹å§‹åšã€‚æœ€è¿‘è¶è‘—å¯’å‡çµ‚æ–¼ç”¨ React åšäº†å€‹ç¶²é å°éŠæˆ²ï¼Œä¹‹å¾Œä¹Ÿæ”¹å¯«æˆ React Native åšå‡º Android and iOS çš„åŸç”Ÿ appï¼Œé †ä¾¿æŠŠ android ç‰ˆä¸Šæ¶åˆ° Google play ä¸Šï½(iOS app store è²»ç”¨å¤ªé«˜ä»˜ä¸èµ·â€¦)ç®—æ˜¯å®Œæˆå¹¾å€‹é•·ä¹…ä»¥ä¾†çš„å°å°ç›®æ¨™(?) ç”¨ React Native åšå‡º Android/iOS åŸç”Ÿ app","text":"æ¥è§¸ React å…¶å¯¦ä¹Ÿä¸€æ®µæ™‚é–“äº†ï¼Œç¸½æ˜¯åš·åš·æƒ³åšå€‹è‡ªå·±çš„ Project ä½†å§‹çµ‚æ²’æœ‰å‹•æ‰‹é–‹å§‹åšã€‚æœ€è¿‘è¶è‘—å¯’å‡çµ‚æ–¼ç”¨ React åšäº†å€‹ç¶²é å°éŠæˆ²ï¼Œä¹‹å¾Œä¹Ÿæ”¹å¯«æˆ React Native åšå‡º Android and iOS çš„åŸç”Ÿ appï¼Œé †ä¾¿æŠŠ android ç‰ˆä¸Šæ¶åˆ° Google play ä¸Šï½(iOS app store è²»ç”¨å¤ªé«˜ä»˜ä¸èµ·â€¦)ç®—æ˜¯å®Œæˆå¹¾å€‹é•·ä¹…ä»¥ä¾†çš„å°å°ç›®æ¨™(?) ç”¨ React Native åšå‡º Android/iOS åŸç”Ÿ app èªªçœŸçš„å¯«å¥½ React ç‰ˆæœ¬ä»¥å¾Œè¦æ”¹å¯«æˆ React Native é‚„æŒºå®¹æ˜“çš„ï¼ŒåŸºæœ¬ä¸Šè¦æ”¹çš„åªæœ‰ä»‹é¢çš„éƒ¨åˆ†ï¼Œå°æ‡‰åˆ°ç¨‹å¼ç¢¼å¤§æ¦‚å°±æ˜¯æ¯å€‹ Component ä¸­çš„ render()ï¼Œç•¶ç„¶é‚„æœ‰ CSS è¦æ”¹æˆ react-native çš„ styleï¼ŒAnimation ä¹Ÿä¸èƒ½ç”¨ CSS ä¾†åšäº†ï¼Œé€™ä¹Ÿæ˜¯æ¯”è¼ƒéº»ç…©çš„åœ°æ–¹ã€‚ æª”æ¡ˆçµæ§‹React ç‰ˆè·Ÿ React Native ç‰ˆçš„æª”æ¡ˆçµæ§‹å…¶å¯¦å¹¾ä¹éƒ½æ˜¯å·®ä¸å¤šçš„ï¼Œå¯ä»¥çœ‹ä¸‹åœ–çš„å°æ‡‰ï¼š å·¦åœ–æ˜¯ React çš„æª”æ¡ˆçµæ§‹ï¼›å³åœ–æ˜¯ React Native çš„æª”æ¡ˆçµæ§‹ã€‚ æœ€å¤§çš„å·®ç•°æ˜¯ style/ è³‡æ–™å¤¾ä¸è¦‹äº†ï¼Œé€™æ˜¯å› ç‚º React Native çš„ style æˆ‘éƒ½å¯«åœ¨ components æª”æ¡ˆè£¡é¢äº†ã€‚React ç‰ˆæœ¬çš„ index.js æ˜¯é€²å…¥é»ã€‚å…¶ä»–æª”æ¡ˆåŸºæœ¬ä¸Šéƒ½ç¶­æŒä¸€æ¨£çš„çµæ§‹ã€React ç‰ˆæœ¬å®šç¾©çš„ components åœ¨ react-native ç‰ˆä¸­éƒ½ä¾èˆŠå­˜åœ¨ã€‚ å·¦ç‚º React ç‰ˆï¼›å³ç‚º React Native ç‰ˆï¼Œå…ƒä»¶å®Œå…¨ä¸€è‡´ã€‚ æ”¹å¯« render() é‚è¼¯å¯ä»¥é‡ç”¨ï¼Œè¦æ”¹çš„åªæœ‰æ¸²æŸ“çš„éƒ¨åˆ†ã€‚ æˆ‘åœ¨æ”¹å¯«çš„æ™‚å€™ï¼Œåæ­£ç¬¬ä¸€æ­¥å°±æ˜¯æŠŠ &lt;div&gt; é€šé€šæ”¹æˆ &lt;View&gt; ï¼ŒæŠŠåŒ…ä½æ–‡å­—çš„ &lt;span&gt;ã€&lt;div&gt; æ”¹æˆ &lt;Text&gt; ï¼Œé€™æ¨£å¤§æ¦‚å°±å®Œæˆä¸€åŠäº†å§(?)å‰©ä¸‹çš„ä¸€åŠå°±æ˜¯æ‰¾æ‰¾æœ€é©åˆçš„ native component ï¼Œé€™äº›å¯ä»¥ä¸Šå®˜æ–¹æ–‡ä»¶å°‹æ‰¾ã€‚ æ”¹å¯« Style çœ‹ä¼¼åƒ CSSï¼Œä½†åˆæ²’é€™éº¼å¥½ç”¨ï¼Œæ¯”è¼ƒåƒæ˜¯é–¹å‰²ç‰ˆçš„ CSSã€‚ React Native çš„ style æ˜¯å€‹ javascript çš„ç‰©ä»¶ï¼Œå¤§æ¦‚æœ‰ä¸ƒæˆå¯ä»¥è·Ÿ CSS ç›´æ¥å°æ‡‰ï¼Œå¯«æ³•å°±æ˜¯åŸæœ¬ CSS æ”¹æˆ camlCase å¯«ï¼Œå¦‚æœè¦å¯«å¾—åƒ css çš„ class çš„è©±é‚„è¦ä½¿ç”¨ StyleSheet.create() : 1234567891011// css.name &#123; font-size: 20px;&#125; // react nativeconst styles = StyleSheet.create(&#123; name: &#123; fontSize: 20 &#125;&#125;); å¥—ç”¨æ¨£å¼çš„å¯«æ³•å‰‡æ˜¯ç›´æ¥ç”¨ style=&#123;Object&#125; ï¼Œè‹¥è¦å¥—ç”¨è¤‡åˆæ¨£å¼ï¼Œå‰‡åœ¨ style ä¸­æ”¾ä¸€å€‹ object array(é †åºæœ‰å·®): 1234&lt;View&gt; &lt;Text style=&#123;styles.red&#125;&gt;just red&lt;/Text&gt; &lt;Text style=&#123;[styles.red, styles.bigblue]&#125;&gt;red, then bigblue&lt;/Text&gt;&lt;/View&gt; AnimationåŸæœ¬ React ç‰ˆçš„å‹•ç•«å…¨éƒ½æ˜¯ç”¨ css åšå‡ºä¾†çš„ï¼Œä½†é€™äº›åœ¨ React Native ä¸­å°±æ²’è¾¦æ³•ç”¨äº†ï¼Œå®˜æ–¹æœ‰æä¾› Animation ç›¸é—œçš„ APIï¼Œä½†èªªå¯¦åœ¨çš„çœŸçš„æœ‰é»é›£æã€‚å¾Œä¾†æˆ‘æ˜¯ç”¨æŸå¤§ç¥å¯«çš„ library react-native-animatableï¼Œæ¯”èµ·å®˜æ–¹æä¾›çš„æ›´å¥½ç”¨ã€‚ Divide and Conquer æ”¹å¯«è¦ä¸€éƒ¨ä»½ä¸€éƒ¨ä»½æ”¹æ¯”è¼ƒå®¹æ˜“ï¼Œä¸€æ¬¡è¦å…¨æ”¹åªæœƒè¦ä½ å‘½ï¼ å¾ React æ”¹æˆ React Native é›–ç„¶å¥½åƒä¸ç”¨è²»å¾ˆå¤§çš„åŠŸå¤«ï¼Œä½†æ˜¯å¦‚æœæƒ³è¦ä¸€æ¬¡åˆ°ä½å…¨éƒ¨æ”¹å¥½å…¶å¯¦é‚„æ˜¯å¾ˆå›°é›£çš„ã€‚æˆ‘é€™å€‹ Project å·²ç¶“æ˜¯å¾ˆå°è¦æ¨¡çš„äº†(ç´„ 500 å¤šè¡Œ)ï¼Œä½†ç¬¬ä¸€æ¬¡æƒ³ä¸€æ¬¡åˆ°ä½æ™‚æˆ‘èŠ±äº†ä¸€å…©å€‹å°æ™‚é‚„æ˜¯é€£ build éƒ½æ²’è¾¦æ³•æˆåŠŸã€‚æ‰€ä»¥æœç„¶é‚„æ˜¯ä¸€éƒ¨ä»½ä¸€éƒ¨ä»½æ”¹èµ·ä¾†æ¯”è¼ƒè¼•é¬†ã€‚ä»¥æˆ‘çš„ä¾‹å­è€Œè¨€ï¼Œæ˜¯å…ˆæ”¹ &lt;StatusPanel/&gt; ï¼Œå› ç‚ºåªè¦æœƒå€’æ•¸å°±å¥½å˜›ï¼Œå–®ç´”äº†è‡ªç„¶å°±æ¯”è¼ƒå¥½å¯«ï¼›å†ä¾†æ”¹ &lt;ArrowKey/&gt; æœ€å¾Œæ‰æ˜¯æ”¹ &lt;QuestionList/&gt; è·Ÿ &lt;Question/&gt; ï¼Œé€™æ¨£åˆ†æ‰¹æ”¹å‰å‰å¾Œå¾Œå¤§æ¦‚åªèŠ±å…©å€‹å°æ™‚å°±å…¨éƒ¨æå®šäº†ã€‚ ä¸€äº›å‘ä»¥åŠä¸€äº›ç­†è¨˜é€²å…¥é»è¨»å†Šç¨‹å¼å°±å¥½React Native å®˜æ–¹ example çš„ä¸»ç¨‹å¼éƒ½æ˜¯å¯«åœ¨ index.android.js (æˆ– .ios.js ) è£¡é¢ï¼Œå€‹äººæ„Ÿè¦ºæ˜¯å¯ä»¥æŠŠä¸»é‚è¼¯æ‹†å‡ºä¾†ï¼Œé€²å…¥é»åªè² è²¬è¨»å†Šç¨‹å¼å°±å¥½: 12345import &#123; AppRegistry &#125; from &#x27;react-native&#x27;;import colorblocksRN from &#x27;./src/app&#x27;; // ä¸»ç¨‹å¼ component // é€²å…¥é»åªåš register çš„å‹•ä½œAppRegistry.registerComponent(&#x27;colorblocksRN&#x27;, () =&gt; colorblocksRN); iOS æ¨£å¼æœ‰å·®å³ä½¿ç”¨ä¸€æ¨¡ä¸€æ¨£çš„ codeï¼ŒiOS è·‘èµ·ä¾†æ¨£å¼è·Ÿ android çš„é‚„æ˜¯æœ‰å·®åˆ¥ï¼Œé€™æˆ‘ä¹Ÿä¸çŸ¥é“ç‚ºç”šéº¼ï¼Œåæ­£æœ€å¾Œè¨˜å¾—é‡å° iOS çš„æ¨£å¼å†ä¿®æ”¹ä¿®æ”¹ã€‚ ä¸èƒ½ react-native run-ioså‡è¨­é‡åˆ°é€™å•é¡Œï¼Œé¦–å…ˆå…ˆæª¢æŸ¥ port 8081 æœ‰æ²’æœ‰è¢«ä½”ç”¨äº†: 12$ lsof -n -i4TCP:8081$ kill &lt;pid&gt; å¦‚æœå•é¡Œæ²’æ’é™¤ï¼Œè©¦è©¦ 1sudo react-native run-ios","categories":[],"tags":[{"name":"react","slug":"react","permalink":"https://ssarcandy.tw/tags/react/"},{"name":"react native","slug":"react-native","permalink":"https://ssarcandy.tw/tags/react-native/"}]},{"title":"Light Field Camera","slug":"pbrt-light-field-camera","date":"2017-01-18T11:04:29.000Z","updated":"2025-10-22T00:51:26.605Z","comments":true,"path":"2017/01/18/pbrt-light-field-camera/","link":"","permalink":"https://ssarcandy.tw/2017/01/18/pbrt-light-field-camera/","excerpt":"ä¸€èˆ¬å‚³çµ±ç›¸æ©Ÿéƒ½æ˜¯å…ˆå°ç„¦å¥½ä¹‹å¾Œæ‹æ”ç…§ç‰‡ï¼Œè€Œå¾€å¾€æœƒæœ‰äº›ç…§ç‰‡äº‹å¾Œæ‰ç™¼ç¾ç«Ÿç„¶æ²’å°å¥½ç„¦ï¼Œç”šæ˜¯å¯æƒœã€‚è€Œå…‰å ´ç›¸æ©Ÿ(light field camera)ï¼Œæœ‰åˆ¥æ–¼ä¸€èˆ¬å‚³çµ±ç›¸æ©Ÿï¼Œæ˜¯å¯ä»¥è¨˜éŒ„ç›¸æ©Ÿå…§éƒ¨çš„å…‰ç·šå‚³è¼¸æ–¹å‘ç­‰ä¿¡æ¯çš„ç›¸æ©Ÿï¼›å…‰å ´ç›¸æ©Ÿå°±æ˜¯æ¯”å‚»ç“œç›¸æ©Ÿé‚„å‚»ç“œçš„ç›¸æ©Ÿï¼Œå…è¨±å†æ‹æ”å¾Œæ ¹æ“šæ‹æ”è€…çš„éœ€è¦å†é‡æ–°èšç„¦åˆ°ä»»æ„çš„ä½ç½®å…‰å ´ç›¸æ©Ÿå¯ä»¥åšåˆ°å…ˆæ‹æ”ï¼Œå¾Œå°ç„¦é€™ç¨®ç¥å¥‡çš„äº‹æƒ…ã€‚ å…‰å ´ç›¸æ©Ÿå…¶å¯¦æ˜¯åœ¨ç›¸æ©Ÿä¸»é¡é ­å¾Œé¢åŠ äº†ä¸€å±¤å¾®é€é¡é™£åˆ—ï¼Œè®“åŸæœ¬èšç„¦çš„å…‰å†æ¬¡åˆ†æ•£åˆ°å„å€‹æ„Ÿå…‰é»ä¸Šï¼Œå¦‚åœ–ä¸€ï¼š åœ–ä¸€ï¼šåœ¨æˆåƒå¹³é¢å‰åŠ ä¸€å€‹å¾®é€é¡çš„é™£åˆ—ã€‚å¾®é€é¡é™£åˆ—çš„å¹³é¢åœ¨é€™è£¡æ˜¯ st å¹³é¢ã€‚åœ¨å¾®é€é¡é™£åˆ—å¾Œé¢çš„æ„Ÿå…‰å…ƒä»¶ä¸Šï¼Œæ¯ä¸€å€‹åƒç´ å°æ‡‰è‘— uv å¹³é¢ä¸Šä¸€å€‹å€åŸŸå°„åˆ°æ­¤åƒç´ å°æ‡‰çš„å¾®é€é¡ä¸Šå…‰å¼·çš„å’Œã€‚åœ–æº[1]","text":"ä¸€èˆ¬å‚³çµ±ç›¸æ©Ÿéƒ½æ˜¯å…ˆå°ç„¦å¥½ä¹‹å¾Œæ‹æ”ç…§ç‰‡ï¼Œè€Œå¾€å¾€æœƒæœ‰äº›ç…§ç‰‡äº‹å¾Œæ‰ç™¼ç¾ç«Ÿç„¶æ²’å°å¥½ç„¦ï¼Œç”šæ˜¯å¯æƒœã€‚è€Œå…‰å ´ç›¸æ©Ÿ(light field camera)ï¼Œæœ‰åˆ¥æ–¼ä¸€èˆ¬å‚³çµ±ç›¸æ©Ÿï¼Œæ˜¯å¯ä»¥è¨˜éŒ„ç›¸æ©Ÿå…§éƒ¨çš„å…‰ç·šå‚³è¼¸æ–¹å‘ç­‰ä¿¡æ¯çš„ç›¸æ©Ÿï¼›å…‰å ´ç›¸æ©Ÿå°±æ˜¯æ¯”å‚»ç“œç›¸æ©Ÿé‚„å‚»ç“œçš„ç›¸æ©Ÿï¼Œå…è¨±å†æ‹æ”å¾Œæ ¹æ“šæ‹æ”è€…çš„éœ€è¦å†é‡æ–°èšç„¦åˆ°ä»»æ„çš„ä½ç½®å…‰å ´ç›¸æ©Ÿå¯ä»¥åšåˆ°å…ˆæ‹æ”ï¼Œå¾Œå°ç„¦é€™ç¨®ç¥å¥‡çš„äº‹æƒ…ã€‚ å…‰å ´ç›¸æ©Ÿå…¶å¯¦æ˜¯åœ¨ç›¸æ©Ÿä¸»é¡é ­å¾Œé¢åŠ äº†ä¸€å±¤å¾®é€é¡é™£åˆ—ï¼Œè®“åŸæœ¬èšç„¦çš„å…‰å†æ¬¡åˆ†æ•£åˆ°å„å€‹æ„Ÿå…‰é»ä¸Šï¼Œå¦‚åœ–ä¸€ï¼š åœ–ä¸€ï¼šåœ¨æˆåƒå¹³é¢å‰åŠ ä¸€å€‹å¾®é€é¡çš„é™£åˆ—ã€‚å¾®é€é¡é™£åˆ—çš„å¹³é¢åœ¨é€™è£¡æ˜¯ st å¹³é¢ã€‚åœ¨å¾®é€é¡é™£åˆ—å¾Œé¢çš„æ„Ÿå…‰å…ƒä»¶ä¸Šï¼Œæ¯ä¸€å€‹åƒç´ å°æ‡‰è‘— uv å¹³é¢ä¸Šä¸€å€‹å€åŸŸå°„åˆ°æ­¤åƒç´ å°æ‡‰çš„å¾®é€é¡ä¸Šå…‰å¼·çš„å’Œã€‚åœ–æº[1] å…‰å ´ç›¸æ©Ÿæ¯å€‹åƒç´ ç´€éŒ„çš„å‰‡æ˜¯åªæœ‰ä¸€æ¢å…‰ç·šã€‚ç”±æ–¼å…‰å ´ç›¸æ©Ÿé€™æ¨£çš„è¨­è¨ˆï¼Œæ‰€ä»¥å…‰å ´ç›¸æ©Ÿæ‰€æ‹å‡ºçš„åŸå§‹å½±åƒå¾ˆç‰¹åˆ¥ï¼Œæœƒæ˜¯ä¸€æ ¼ä¸€æ ¼çš„ï¼Œå¦‚åœ–äºŒæ‰€ç¤ºã€‚ åœ–äºŒï¼šå…‰å ´ç›¸æ©Ÿæ‰€æ‹å‡ºçš„åŸå§‹å½±åƒæ˜¯ä¸€æ ¼ä¸€æ ¼çš„ã€‚ é€™æ˜¯å› ç‚ºå¾®é€é¡é™£åˆ—å°ä¸»é€é¡èšé›†çš„å…‰å†æˆåƒçš„ç·£æ•…ï¼Œæ¯ä¸€æ ¼éƒ½æ˜¯å°æ‡‰çš„å¾®é€é¡çš„æˆåƒã€‚äº‹å¯¦ä¸Šï¼Œå¯ä»¥æŠŠæ¯å€‹å¾®é€é¡éƒ½ç•¶ä½œä¸€å€‹å°å°é‡å­”ç›¸æ©Ÿï¼Œå¦‚åœ–ä¸‰(c)æ‰€ç¤ºã€‚ å¦å¤–ï¼Œè—‰ç”±å°é€™äº›å¾®é€é¡å½±åƒçš„é‡æ–°æ’åˆ—ï¼Œå¯ä»¥ç”Ÿæˆä¸åŒè¦–è§’çš„å½±åƒã€‚å…·é«”ä¾†èªªï¼Œå°±æ˜¯æŒ‘é¸æ¯å€‹å¾®é€é¡çš„åŒä¸€æ ¼åƒç´ ï¼Œçµ„åˆå‡ºä¸€å¼µé•·å¯¬åˆ†åˆ¥ç­‰åŒæ–¼å¾®é€é¡åœ¨é•·é‚Šä»¥åŠå¯¬é‚Šçš„æ•¸é‡çš„å½±åƒã€‚è€Œä¸€å¼µå…‰å ´ç›¸æ©ŸåŸå§‹å½±åƒèƒ½å¤ ç”¢ç”Ÿå¤šå°‘ä¸åŒè¦–è§’çš„å½±åƒï¼Œç«¯çœ‹æ¯å€‹å¾®é€é¡å¾Œé¢å°æ‡‰åˆ°çš„åƒç´ æœ‰å¹¾å€‹ã€‚ åœ–ä¸‰ï¼š(a)æŠŠæ¯å€‹å¾®é€é¡ç›¸åŒä½ç½®çš„åƒç´ å–å‡ºä¾†åˆæˆä¸€å¼µåœ–ï¼Œå¯ä»¥å¾—å‡ºä¸åŒè¦–è§’çš„å½±åƒã€‚(b)ç”±å…‰å ´å½±åƒå¾—å‡ºçš„æ‰€æœ‰è¦–è§’ä¸€è¦½ã€‚(c)æ¯å€‹å¾®é€é¡å¯ä»¥è¦–ç‚ºä¸€é‡å­”ç›¸æ©Ÿã€‚ æ•¸ä½é‡å°ç„¦æˆ‘ä»¥ä¹‹å‰åšçš„çœŸå¯¦ç›¸æ©Ÿç³»çµ±ç‚ºåŸºç¤ï¼Œåœ¨ä¸»é€é¡ç„¦è·ä¸Šæ”¾ç½®å¾®é€é¡é™£åˆ—ï¼Œè—‰æ­¤ä¾†æ¨¡æ“¬å…‰å ´ç›¸æ©Ÿçš„ç¡¬é«”è¨­å‚™ã€‚å…‰å ´ç›¸æ©ŸåŸå§‹å½±åƒç´€éŒ„äº†å››ç¶­çš„å…‰ç·šè³‡è¨Šï¼Œ é€™å€‹å‡½å¼ä»£è¡¨å¾ä¸»é€é¡çš„ 2D é» å°„åˆ°å¾®é€é¡çš„ 2D é» çš„å…‰ç·šèƒ½é‡ï¼Œåˆ©ç”¨é€™å€‹è³‡è¨Šï¼Œå°±å¯ä»¥é€²è¡Œæ•¸ä½é‡å°ç„¦ã€‚é—œæ–¼å¦‚ä½•é€²è¡Œæ•¸ä½é‡å°ç„¦ï¼Œå¯ä»¥çœ‹åœ–å››ã€‚ åœ–å››ï¼šåœ¨ s' å¹³é¢é‡æ–°èšç„¦ï¼Œå³æ˜¯è®“æ‰€æœ‰å…‰éŒéƒ½è½åœ¨ s' å¹³é¢ä¸Šï¼Œè€Œå°æ–¼æ•¸ä½é‡å°ç„¦è€Œè¨€ï¼Œå¿…é ˆé€éè’é›†ï½“å¹³é¢ä¸Šçš„è³‡è¨Šä¾†é”æˆã€‚åœ–æº[2] åŸå§‹ç„¦è·çš„æ¯”ä¾‹ã€‚å‡è¨­è¦é‡å°ç„¦å½±åƒè‡³ å¹³é¢ï¼Œå¯ä»¥ç”±å·²çŸ¥ç®—å‡ºï¼š ä¸éç”±æ–¼å…‰ç·šèƒ½é‡å‡½å¼æ˜¯ ï¼Œæ‰€ä»¥å¿…é ˆæŠŠ æ”¹å¯«æˆ çš„å½¢å¼ï¼š æ‰€ä»¥å°æ–¼ä¸€å€‹é‡å°ç„¦å½±åƒçš„åƒç´ è€Œè¨€ï¼Œèƒ½é‡å¯ä»¥é€™æ¨£æ±‚å¾—ï¼š å…¶å¯¦æ‡‰è©²è¦å¯«æˆç©åˆ†å½¢å¼æ‰æ˜¯çœŸå¯¦ç‹€æ³ï¼Œä½†æ˜¯ç”±æ–¼çœŸæ­£å¾—åˆ°çš„è³‡æ–™æ˜¯é›¢æ•£çš„(åƒç´ )ï¼Œæ‰€ä»¥ç”¨åŠ ç¸½çš„å°±å¯ä»¥äº†ã€‚ çµæœæˆ‘åˆ†æˆå…©å¡Šå¯¦ä½œ: æ¨¡æ“¬å…‰å ´ç›¸æ©Ÿæˆåƒï¼Œé€™éƒ¨åˆ†æ˜¯ä»¥ pbrt ç‚ºåŸºç¤å†åŠ æ–°çš„ class ä¾†å¯¦ä½œã€‚ åˆ©ç”¨å…‰å ´ç›¸æ©Ÿçš„åŸå§‹å½±åƒä¾†åšæ•¸ä½é‡å°ç„¦ï¼Œé€™éƒ¨åˆ†å°±æ˜¯å¦å¤–ç”¨ python ä¾†åšã€‚ é€™æ¨£åšä¹Ÿä½¿å¾—æˆ‘åœ¨é©—è­‰æ™‚å¯ä»¥åˆ†åˆ¥é©—è­‰ï¼Œè®“å¯¦ä½œä¸Šé™¤éŒ¯è¼ƒç‚ºå®¹æ˜“ã€‚ æ¨¡æ“¬å…‰å ´ç›¸æ©Ÿçš„éƒ¨åˆ†ï¼Œæˆ‘ä¹Ÿæ˜¯ç”¨ä¹‹å‰çš„å ´æ™¯æª”ç‚ºåŸºç¤ï¼ŒåŠ ä»¥æ›´æ”¹å¾Œä¾†æ¸¬è©¦æˆ‘çš„æ¨¡æ“¬æ•ˆæœã€‚å¾®é€é¡çš„æ•¸ç›®è¶Šå¤šèƒ½ä½¿ä¹‹å¾Œæ•¸ä½é‡å°ç„¦çš„å½±æœ‰æ›´é«˜çš„ç•«è³ªï¼Œè€Œå¾®é€é¡çš„å¤§å°å‰‡é—œä¿‚è‘—èƒ½å¤ æœ‰å¤šå°‘ä¸åŒçš„è¦–è§’ï¼ˆäº¦å³é‡å°ç„¦èƒ½åŠ›çš„é«˜ä½ï¼‰ã€‚ åœ–äº”ï¼š(a)å¾®é€é¡å¤§å°è¼ƒå¤§ï¼Œä½†æ•¸ä½é‡å°ç„¦ä»¥å¾Œæœƒæ˜¯æ¯”è¼ƒä½ç•«è³ªçš„å½±åƒã€‚(b) å¾®é€é¡å¤§å°è¼ƒå°ï¼Œæ•¸ä½é‡å°ç„¦ä»¥å¾Œæœƒæ˜¯æ¯”è¼ƒé«˜ç•«è³ªçš„å½±åƒã€‚ åœ–å…­ï¼šæ•¸ä½é‡å°ç„¦çµæœã€‚å·¦ä¸Šã€å³ä¸Šã€å·¦ä¸‹ã€å³ä¸‹åˆ†åˆ¥å°ç„¦é»ç‚ºï¼šé ã€ä¸­ã€è¿‘ã€æ›´è¿‘ã€‚å››å¼µçš†è£åˆ‡æ‰ä¸Šæ–¹é»‘è‰²å€å¡Šã€‚ ç”±åœ–å…­å¯ä»¥çœ‹å‡ºç„¦è·çš„æ”¹è®Šå½±éŸ¿æ¸…æ¥šçš„éƒ¨åˆ†ï¼Œé›–ç„¶å…¶å¯¦æ²’æœ‰ååˆ†æ˜é¡¯ï¼Œä½†é‚„æ˜¯å¯ä»¥çœ‹åˆ°å³ä¸Šè§’çš„åœ–æ¸…æ¥šçš„éƒ¨åˆ†æ˜¯ç´…é¾çš„èƒŒéƒ¨åŠå°¾éƒ¨ï¼Œè€Œå·¦ä¸‹æ¸…æ¥šçš„å‰‡æ˜¯è—é¾çš„èƒŒéƒ¨ã€‚ å¦å¤–ï¼Œåˆ©ç”¨å…‰å ´ç›¸æ©Ÿçš„åŸå§‹å½±åƒä¾†åšæ•¸ä½é‡å°ç„¦çš„éƒ¨åˆ†é™¤äº†æ‹¿æˆ‘è‡ªå·±ç”¢ç”Ÿå‡ºçš„å…‰å ´ç›¸æ©Ÿå½±åƒä¾†è©¦é©—ä»¥å¤–ï¼Œæˆ‘ä¹Ÿåˆ©ç”¨ç¶²è·¯[5]ç›´æ¥å°‹æ‰¾äº†ä¸€å¼µå…‰å ´ç›¸æ©Ÿçš„å½±åƒï¼Œä¸¦ç›´æ¥æ‹¿ä¾†ç•¶ä½œæˆ‘æ•¸ä½é‡å°ç„¦çš„æ¸¬è©¦è³‡æ–™ï¼Œé€™æ˜¯ä¹å€‹ä¸åŒå­—æ¯åˆ†åˆ¥åœ¨ä¸åŒçš„è·é›¢è™•ã€‚å¯ä»¥çœ‹è¦‹æˆåŠŸçš„å°ç„¦åˆ°ä¸åŒçš„å­—æ¯ä¸Šã€‚ åœ–ä¸ƒï¼š(a)å¾ç¶²è·¯[5]ä¸Šç²å¾—çš„ç¬¬ä¸‰æ–¹å…‰å ´ç›¸æ©ŸåŸå§‹å½±åƒã€‚(b)ç”¨(a)ä¾†æ¸¬è©¦æˆ‘å¯¦ä½œçš„æ•¸ä½é‡å°ç„¦ï¼Œå¯ä»¥çœ‹è¦‹æˆåŠŸçš„å°ç„¦åˆ°ä¸åŒçš„å­—æ¯ä¸Šã€‚ é›œè«‡ å…¶å¯¦è‡ªå·±æ¨¡æ“¬å‡ºä¾†çš„å…‰å ´å½±åƒåšæ•¸ä½é‡å°ç„¦çš„æ™‚å€™æ•ˆæœä¸€ç›´ä¸å¤ªç†æƒ³ï¼Œæä¸æ‡‚æ˜¯å“ªé‚Šæœ‰å•é¡ŒQQ ä¸éç”¨åˆ¥äººçš„å…‰å ´å½±åƒåšæ•¸ä½é‡å°ç„¦å¾ˆæˆåŠŸé˜¿ï¼Œè‚¯å®šæ˜¯ pbrt é‚£é‚Šæˆ‘å¯«éŒ¯äº†ä»€éº¼â€¦ å¤šè™§æœ‰ CMLab çš„çœ¾å¤šå¼·åŠ›å·¥ä½œç«™ï¼Œè®“æˆ‘å…æ–¼è·‘ä¸€å¼µåœ–å°±è¦æµªè²»åå¹¾å€‹å°æ™‚çš„æ™‚é–“â€¦ æŸ¥è³‡æ–™ä¸€ç›´çœ‹åˆ° Lytro çš„é–‹ç®±æ–‡â€¦. markdown + latex é‚„çœŸå¤šè¦æ³¨æ„çš„ï¼Œmarkdown çš„_æœƒå…ˆè¢«è½‰æˆ&lt;em&gt;ç„¶å¾Œåƒæ˜¯\\sum _{u}çš„ latex å°±æœƒè®Šæˆ\\sum &lt;em&gt;{u}â€¦ References Light Field Photography with a Hand-held Plenoptic Camera, R Ng, M Levoy, M BrÃ©dif, G Duval, M Horowitz, P Hanrahan CS348b Projectï¼š Light Field Camera Simulation, Zahid Hossain, Adam Spilfogel Backery, Yanlin Chen Fourier Slice Photography, Ren Ng, ACM Transactions on Graphics, July 2005 The (New) Stanford Light Field Archive å…‰å ´ç›¸æ©ŸåŸç†åŠä»¿çœŸå¯¦ç¾ LYTRO Light Field Camera åŸç†è§£æ h1+ol { list-style-type: none; counter-reset: list-counter; padding-left: 0; } h1+ol li { position: relative; padding-left: 3em; } h1+ol li::before { counter-increment: list-counter; content: \"[\" counter(list-counter) \"] \"; position: absolute; left: 0; width: 25px; text-align: right; }","categories":[],"tags":[{"name":"c++","slug":"c","permalink":"https://ssarcandy.tw/tags/c/"},{"name":"rendering","slug":"rendering","permalink":"https://ssarcandy.tw/tags/rendering/"},{"name":"python","slug":"python","permalink":"https://ssarcandy.tw/tags/python/"},{"name":"pbrt","slug":"pbrt","permalink":"https://ssarcandy.tw/tags/pbrt/"}]},{"title":"MSAuto - ç©éŠæˆ²ä¹Ÿè¦è‡ªå‹•åŒ–","slug":"MSAuto","date":"2016-12-25T13:12:48.000Z","updated":"2025-10-22T00:51:26.604Z","comments":true,"path":"2016/12/25/MSAuto/","link":"","permalink":"https://ssarcandy.tw/2016/12/25/MSAuto/","excerpt":"æœ€è¿‘ Facebook messanger æ¨å‡ºäº†ä¸€ç³»åˆ—å°éŠæˆ²ï¼Œå¤§éƒ¨åˆ†å…¶å¯¦éƒ½æ˜¯ç„¡è…¦éŠæˆ²ï¼Œä½†æ‰¯åˆ°äº’ç›¸æ¯”åˆ†ç¸½æ˜¯æœƒè®Šå¾—å¾ˆæ¿€çƒˆâ€¦. å…¶ä¸­æœ‰å€‹éŠæˆ²å¾ˆç‰¹åˆ¥ EverWingï¼Œä»–æ˜¯å¯ä»¥å‡ç´šä¸»è§’çš„å°„æ“ŠéŠæˆ²ï¼Œä¹Ÿå°±æ˜¯æˆ‘å¯ä»¥å·ç·´å†å»æŒ‘æˆ°åˆ¥äººï¼Œç„¶å¾Œåˆ†æ•¸å°±æœƒå¾ˆé«˜~èµ·åˆæˆ‘å·ç·´åˆ°ä¸ƒç­‰å·¦å³å»æŒ‘æˆ° David è€å¸«ï¼Œæ²’æƒ³åˆ°ä»–ä¸€ä¸‹å°±è¶…è¶Šæˆ‘äº†ï¼Œå¾Œä¾†åˆæµªè²»æˆ‘å¥½å¹¾å€‹å°æ™‚æ‰è¶…è¶Šä»–â€¦ã€‚å¾Œä¾†è·‘å»æŒ‘æˆ° ball ä»–å€‘ï¼Œè²»ç›¡åƒè¾›è¬è‹¦æ‰“åˆ° 3204 åˆ†ï¼Œçµæœå¾Œä¾†æ‰ç™¼ç¾ä»–å€‘éƒ½åœ¨ç›´æ¥ç™¼ request ä½œå¼Šâ€¦ã€‚","text":"æœ€è¿‘ Facebook messanger æ¨å‡ºäº†ä¸€ç³»åˆ—å°éŠæˆ²ï¼Œå¤§éƒ¨åˆ†å…¶å¯¦éƒ½æ˜¯ç„¡è…¦éŠæˆ²ï¼Œä½†æ‰¯åˆ°äº’ç›¸æ¯”åˆ†ç¸½æ˜¯æœƒè®Šå¾—å¾ˆæ¿€çƒˆâ€¦. å…¶ä¸­æœ‰å€‹éŠæˆ²å¾ˆç‰¹åˆ¥ EverWingï¼Œä»–æ˜¯å¯ä»¥å‡ç´šä¸»è§’çš„å°„æ“ŠéŠæˆ²ï¼Œä¹Ÿå°±æ˜¯æˆ‘å¯ä»¥å·ç·´å†å»æŒ‘æˆ°åˆ¥äººï¼Œç„¶å¾Œåˆ†æ•¸å°±æœƒå¾ˆé«˜~èµ·åˆæˆ‘å·ç·´åˆ°ä¸ƒç­‰å·¦å³å»æŒ‘æˆ° David è€å¸«ï¼Œæ²’æƒ³åˆ°ä»–ä¸€ä¸‹å°±è¶…è¶Šæˆ‘äº†ï¼Œå¾Œä¾†åˆæµªè²»æˆ‘å¥½å¹¾å€‹å°æ™‚æ‰è¶…è¶Šä»–â€¦ã€‚å¾Œä¾†è·‘å»æŒ‘æˆ° ball ä»–å€‘ï¼Œè²»ç›¡åƒè¾›è¬è‹¦æ‰“åˆ° 3204 åˆ†ï¼Œçµæœå¾Œä¾†æ‰ç™¼ç¾ä»–å€‘éƒ½åœ¨ç›´æ¥ç™¼ request ä½œå¼Šâ€¦ã€‚ æœ‰åœ–æœ‰çœŸç›¸ï¼Œæ²’ä½œå¼Šæ‰“ 3204 åˆ† æ—¢ç„¶ä»–å€‘éƒ½é€™æ¨£ç©ï¼Œæˆ‘ä¹Ÿæ²’åœ¨å®¢æ°£çš„ï¼Œç›´æ¥ç™¼å€‹å¼·ä¸€é»çš„åˆ†æ•¸: 8è¬åˆ†ã€‚ ç›´æ¥ç™¼ request ç²å¾—å…«è¬åˆ† å¾Œä¾†é‚„ç™¼ç¾ github ä¸Šç«Ÿç„¶æœ‰è‡ªå‹•ç·´ç­‰çš„å°ˆæ¡ˆ neverwing ï¼Œåšå¾—å¦‚æ­¤å®Œæ•´ï¼ŒçœŸçš„æ˜¯è®“æˆ‘é–‹çœ¼ç•Œäº†å“ˆå“ˆã€‚ ä»¥ä¸Šæ˜¯å•Ÿç™¼æˆ‘åšå€‹è‡ªå‹•è§£ MSA ä»»å‹™çš„ç¨‹å¼çš„èµ·å› ã€‚ èªè­˜æˆ‘çš„äººæ‡‰è©²éƒ½çŸ¥é“æˆ‘ä¸€ç›´æœ‰åœ¨ç©ä¸€å€‹æ‰‹æ©ŸéŠæˆ² Metal Slug Attack (MSA)ï¼ŒåŸºæœ¬ä¸Šæˆ‘æœƒç©ä¹Ÿåªæ˜¯å› ç‚ºé€™æ˜¯å°æ™‚å€™ç©è¶Šå—å¤§æˆ°æ©Ÿå°çš„å›æ†¶ã€‚ä¸éæœ‰é‘’æ–¼é€™éŠæˆ²æ¯æ—¥ä»»å‹™å¯¦åœ¨æ˜¯æœ‰é»éº»ç…©åˆè€—æ™‚ï¼Œæ‰€ä»¥æˆ‘å°±æƒ³å¼„æˆè‡ªå‹•åŒ–ã€‚ é¦–å…ˆé‚„æ˜¯è¦å…ˆçŸ¥é“é€™éŠæˆ²ç™¼ request ç™¼åˆ°å“ªã€æ€éº¼ç™¼ã€é †åºæ˜¯ç”šéº¼ã€æ€éº¼èªè­‰ä½¿ç”¨è€…è³‡è¨Šã€‚åŸºæœ¬ä¸Šé€™äº›æƒ³çŸ¥é“å¯èƒ½è¦æ¶ Proxy + Postman + æ‰‹æ©Ÿ root æ‰è¡Œäº†ã€‚å¹¸å¥½æœ‰å€‹å¥½æ±è¥¿ Charles å¯ä»¥è¼•æ˜“çš„æ¶ Proxy è®“æ‰‹æ©Ÿçš„ http request éƒ½å…ˆé€šéé›»è…¦å†åˆ° remote serverã€‚ çŸ¥é“æ€éº¼ç™¼ä¹‹å¾Œï¼Œå°±ä¾†é–‹å§‹è©¦è©¦å§ï¼MSA é€™éŠæˆ²æœ‰å¾ˆå¤šæ¨¡å¼ï¼Œå…¶ä¸­ä¸€å€‹æ˜¯ TREASURE HUNTï¼Œæ¯éš”å¹¾å€‹å°æ™‚å¯ä»¥é ˜ä¸€æ¬¡çå“é€™æ¨£(å€‹äººè¦ºå¾—å¾ˆæ²’æ„ç¾©çš„æ¨¡å¼â€¦)ï¼Œè€Œæˆ‘ä¹Ÿæ˜¯å¾é€™æ¨¡å¼é–‹å§‹ä¸‹æ‰‹ã€‚ TREASURE HUNT ä¸€èˆ¬è€Œè¨€æˆ‘é ‚å¤šä¸€å¤©é€²ä¸€æ¬¡éŠæˆ²ï¼Œé‚£åƒæ˜¯é€™ç¨® CD 3 å°æ™‚çš„å°±å¾ˆæµªè²»(åŸæœ¬ä¸€å¤©å¯ä»¥é ˜ 8 æ¬¡çš„)ï¼Œæˆ‘å¯«çš„ç¨‹å¼é‚è¼¯æŒºç°¡å–®çš„: æ¯ååˆ†é˜æª¢æŸ¥ä¸€æ¬¡ï¼Œå†·å»å¥½äº†å°±é ˜çä¸¦ä¸”é‡æ–°é–‹å§‹æœå°‹ã€‚ é€™ç”¨ nodejs request åŠ ä¸Š crontab è¨­å®šä¸€ä¸‹å°±å¯ä»¥é”æˆ~ é€™æ¨£æˆ‘æ¯å¤©éƒ½å¯ä»¥å¤šå¥½å¤šé«”åŠ› XD æ¥ä¸‹ä¾†æŒ‘æˆ°ä¸‹å€‹æ¨¡å¼: COMBAT SCHOOL ï¼Œé€™å°±æ˜¯æ¯å¤©å¯ä»¥æ‰“é›»è…¦ä¸‰æ¬¡ç„¶å¾Œæœƒçµ¦ä½ çå“(ä¹Ÿæ˜¯æ»¿æ²’æ„ç¾©çš„æ¨¡å¼â€¦) COMBAT SCHOOL åœ¨åšé€™æ¨¡å¼çš„è‡ªå‹•åŒ–æ™‚å¡æ»¿ä¹…çš„ï¼Œæœ‰å€‹ POST request çš„ x-www-form-urlencoded data é•·é€™æ¨£: 123&quot;cover=2&amp;deck_no=3&amp;stage_id=706&amp;training_id=1&quot; +&quot;&amp;unit_ids[]=15&amp;unit_ids[]=16&amp;unit_ids[]=17&amp;unit_ids[]=18&amp;unit_ids[]=19&amp;unit_ids[]=21&amp;unit_ids[]=84&amp;unit_ids[]=82&amp;unit_ids[]=271&amp;unit_ids[]=340&quot; +&quot;&amp;unit_level[]=50&amp;unit_level[]=50&amp;unit_level[]=50&amp;unit_level[]=50&amp;unit_level[]=50&amp;unit_level[]=50&amp;unit_level[]=50&amp;unit_level[]=50&amp;unit_level[]=50&amp;unit_level[]=50&quot; å¯ä»¥ç™¼ç¾æœ‰ä¸€å¤§å † key éƒ½æ˜¯ä¸€æ¨£çš„( unit_ids[] , unit_level[] )ï¼Œé€™ç”¨ nodejs request ä¼¼ä¹è¾¦ä¸åˆ°ï¼Œæ‰€ä»¥æˆ‘æœ€å¾Œæ±ºå®šå¯« shell script ç›´æ¥ç”¨ curl ç™¼ request ï¼Œå†ç”¨ cronjob è¨­å®šæ¯å¤©å¹«åˆ·ä¸€ä¸‹é—œã€‚æ©ï¼Œå°±æˆåŠŸäº†ã€‚ å†æŒ‘æˆ°ä¸‹ä¸€å€‹æ¨¡å¼: P.O.W RESCUE ï¼Œæ¯å¤©å¯ä»¥æ‰“ 20 é—œé›»è…¦ï¼Œæœƒçµ¦ä½ ä¸€äº›çå“(æ€éº¼æ¯å€‹æ¨¡å¼éƒ½å¤§åŒå°ç•°XD)ã€‚é€™æ˜¯æˆ‘è¦ºå¾—æœ€æµªè²»æ™‚é–“çš„æ¨¡å¼äº†ï¼Œå› ç‚ºä¸€å¤©è¦æ‰“ 20 æ¬¡ã€‚ P.O.W RESCUE é€™é‚è¼¯ç¨å¾®è¤‡é›œä¸€é»ï¼Œå› ç‚ºæ¯æ¬¡æŒ‘æˆ°çš„ stage_id éƒ½ä¸ä¸€æ¨£ï¼Œè¦å…ˆ GET ä¸‹ä¸€é—œ stage_id ï¼Œè€Œä¸”åˆæœ‰é‚£ç¨® nodejs request ä¸èƒ½ç™¼çš„ requestã€‚è§£æ³•å…©ç¨®: å…¨éƒ¨ç”¨ shell script å¯«ã€‚ ç”¨ nodejs å¯«ï¼Œè¦ç™¼ç‰¹æ®Š request å°±å¦å¤–åŸ·è¡Œ shell scriptã€‚ åŸºæ–¼æˆ‘å…¶å¯¦ä¸å¤ªæœƒå¯« shell scriptï¼Œæˆ‘æ±ºå®šæ¡ç”¨ 2 çš„æ··å’Œå¯«æ³•ã€‚åˆ©ç”¨ nodejs åˆ¤æ–·ä¸‹ä¸€é—œ stage_id å†å‚³çµ¦ shell script ç™¼ requestã€‚åœ¨ nodejs ä¸­è¦åŸ·è¡Œ shell å¯ä»¥é€™æ¨£: 123456const cp = require(&#x27;child_process&#x27;);const job = (str, option) =&gt; &#123; return cp.execSync(str, &#123; cwd: __dirname &#125;).toString();&#125;; job(&#x27;/bin/bash script.sh&#x27;); é€™æ¨¡å¼æˆ‘ä¸¦æ²’æœ‰è¨­å®š cronjobï¼Œå› ç‚ºæˆ‘æœ‰æ™‚å€™æƒ³è‡ªå·±ç© XDã€‚ è€Œå…¶ä»–æ¨¡å¼æˆ‘ç¾éšæ®µæ²’æ‰“ç®—è‡ªå‹•åŒ–ï¼Œä¸ç„¶å°±æ ¹æœ¬éƒ½ä¸æ˜¯æˆ‘åœ¨ç©äº†â€¦ å¯«é€™äº›æ±è¥¿å…¶å¯¦ä¹Ÿè®“æˆ‘å­¸åˆ°ä¸€äº›æ–°æ±è¥¿ä»¥åŠä¸€äº›å°æŠ€å·§ï¼Œé€™ä¹Ÿç®—æ˜¯ç© MSA çµ¦æˆ‘çš„æ”¶ç©«å—ï¼Ÿå“ˆå“ˆå…¶å¯¦æˆ‘ code å¯«å¾—äº‚ä¸ƒå…«ç³Ÿï¼Œä½†ç®¡ä»–çš„å¯ä»¥ç”¨å°±å¥½~ æœ€å¾Œé‚„æ˜¯é™„ä¸Š code: MSAuto æ˜¯èªªé€™æ‡‰è©²ç®—æ˜¯ä½œå¼Šå–”ï¼ŒæŠ“åˆ°æœƒè¢« ban å§?ä¸éå…¶å¯¦è¢« ban ä¹Ÿç®—æ˜¯ä¸€ç¨®è§£è„«å§?","categories":[],"tags":[{"name":"trashtalk","slug":"trashtalk","permalink":"https://ssarcandy.tw/tags/trashtalk/"},{"name":"automation","slug":"automation","permalink":"https://ssarcandy.tw/tags/automation/"}]},{"title":"å®‰è£ Policyd ä¸¦è¨­å®šå¤–å¯„ Quota","slug":"policyd","date":"2016-12-23T16:15:40.000Z","updated":"2025-10-22T00:51:26.606Z","comments":true,"path":"2016/12/23/policyd/","link":"","permalink":"https://ssarcandy.tw/2016/12/23/policyd/","excerpt":"æœ€è¿‘é‡åˆ°ä¸€å€‹å•é¡Œï¼Œæœ‰äººåˆ©ç”¨ cmlab çš„é›»å­éƒµä»¶ç™¼é€åƒåœ¾éƒµä»¶ï¼Œå°è‡´è¨±å¤šå¤–éƒ¨éƒµä»¶ä¼ºæœå™¨å°‡æˆ‘å€‘åŠ å…¥é»‘åå–®ã€‚å› æ­¤ï¼Œæˆ‘å€‘èªç‚ºæœ‰å¿…è¦è¨­å®šä¸€å€‹å¯„ä»¶ä¸Šé™ä¾†é˜²æ­¢é€™ç¨®æƒ…æ³ã€‚é›–ç„¶ Postfix æœ¬èº«å·²ç¶“å…·æœ‰è¨±å¤šå¯è¨­å®šçš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬é˜²æ­¢åƒåœ¾éƒµä»¶ç­‰ï¼Œä½†å®ƒç„¡æ³•è¨­å®šå¯„ä»¶çš„é…é¡ï¼Œæ‰€ä»¥æˆ‘å€‘æ‰“ç®—å˜—è©¦ä½¿ç”¨ Policydã€‚ Policydï¼ˆåˆå Cluebringerï¼‰æ˜¯ä¸€å€‹é¡ä¼¼æ–¼ä¸­é–“ä»¶çš„è»Ÿé«”ï¼Œå®ƒå¯ä»¥ç‚ºéƒµä»¶ä¼ºæœå™¨è¨­å®šä¸€äº›è¦å‰‡ã€‚é€™å¯ä»¥å¹«åŠ©æˆ‘å€‘æ›´éˆæ´»åœ°ç®¡ç†éƒµä»¶æµé‡ï¼Œæé«˜éƒµä»¶ä¼ºæœå™¨çš„å®‰å…¨æ€§å’Œæ•ˆç‡ã€‚é€šéä½¿ç”¨ Policydï¼Œæˆ‘å€‘å¯ä»¥åˆ¶å®šæ›´ç´°ç·»çš„éƒµä»¶ç­–ç•¥ï¼Œæœ‰æ•ˆåœ°å°æŠ—åƒåœ¾éƒµä»¶å’Œå…¶ä»–æ¿«ç”¨è¡Œç‚ºã€‚","text":"æœ€è¿‘é‡åˆ°ä¸€å€‹å•é¡Œï¼Œæœ‰äººåˆ©ç”¨ cmlab çš„é›»å­éƒµä»¶ç™¼é€åƒåœ¾éƒµä»¶ï¼Œå°è‡´è¨±å¤šå¤–éƒ¨éƒµä»¶ä¼ºæœå™¨å°‡æˆ‘å€‘åŠ å…¥é»‘åå–®ã€‚å› æ­¤ï¼Œæˆ‘å€‘èªç‚ºæœ‰å¿…è¦è¨­å®šä¸€å€‹å¯„ä»¶ä¸Šé™ä¾†é˜²æ­¢é€™ç¨®æƒ…æ³ã€‚é›–ç„¶ Postfix æœ¬èº«å·²ç¶“å…·æœ‰è¨±å¤šå¯è¨­å®šçš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬é˜²æ­¢åƒåœ¾éƒµä»¶ç­‰ï¼Œä½†å®ƒç„¡æ³•è¨­å®šå¯„ä»¶çš„é…é¡ï¼Œæ‰€ä»¥æˆ‘å€‘æ‰“ç®—å˜—è©¦ä½¿ç”¨ Policydã€‚ Policydï¼ˆåˆå Cluebringerï¼‰æ˜¯ä¸€å€‹é¡ä¼¼æ–¼ä¸­é–“ä»¶çš„è»Ÿé«”ï¼Œå®ƒå¯ä»¥ç‚ºéƒµä»¶ä¼ºæœå™¨è¨­å®šä¸€äº›è¦å‰‡ã€‚é€™å¯ä»¥å¹«åŠ©æˆ‘å€‘æ›´éˆæ´»åœ°ç®¡ç†éƒµä»¶æµé‡ï¼Œæé«˜éƒµä»¶ä¼ºæœå™¨çš„å®‰å…¨æ€§å’Œæ•ˆç‡ã€‚é€šéä½¿ç”¨ Policydï¼Œæˆ‘å€‘å¯ä»¥åˆ¶å®šæ›´ç´°ç·»çš„éƒµä»¶ç­–ç•¥ï¼Œæœ‰æ•ˆåœ°å°æŠ—åƒåœ¾éƒµä»¶å’Œå…¶ä»–æ¿«ç”¨è¡Œç‚ºã€‚ å®‰è£åœ¨ cluebringer 2.0 ä»¥å‰çš„ç‰ˆæœ¬ä¸æ”¯æ´ IPv6ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šåªèƒ½å¾å®˜ç¶²ä¸‹è¼‰æœ€æ–°ç‰ˆï¼Œåˆï¼Œå®˜ç¶²å®‰è£èªªæ˜å……æ»¿éŒ¯èª¤ï¼Œæˆ‘åœ¨å¼„å¾—æ™‚å€™ååˆ†ä¸é–‹å¿ƒâ€¦.ï¼Œæ‰€ä»¥æ±ºå®šè‡ªå·±æ•´ç†å®‰è£æµç¨‹ã€‚ ä¸‹è¼‰ä¸¦è§£å£“ç¸®12$ wget http://download.policyd.org/v2.0.14/cluebringer-v2.0.14.zip$ unzip cluebringer-v2.0.14.zip åˆå§‹åŒ–è³‡æ–™åº«åœ¨ database/ ä¸‹ï¼ŒåŸ·è¡Œé€™æ®µ shell script 1234for i in core.tsql access_control.tsql quotas.tsql amavis.tsql checkhelo.tsql checkspf.tsql greylisting.tsqldo ./convert-tsql mysql $idone &gt; policyd.sql é€™é‚Šç”¢å‡ºçš„ .sql æœƒæœ‰èªæ³•éŒ¯èª¤ï¼Œç”¨ vim é–‹å•Ÿä¸¦ä¸‹ :%s/TYPE=innondb/ENGINE=innondb/g æŒ‡ä»¤ä¿®æ”¹å…¨éƒ¨ã€‚ å»ºç«‹æ–°è³‡æ–™åº«ä¸¦åŒ¯å…¥ policyd.sql : 12$ mysql -u root -p -e &#x27;CREATE DATABASE policyd&#x27;$ mysql -u root -p policyd &lt; policyd.sql è¤‡è£½æª”æ¡ˆåˆ°è©²æ”¾çš„åœ°æ–¹123$ cp -r cbp /usr/local/lib/cbpolicyd-2.1/$ cp cbpadmin /usr/local/bin/$ cp cbpolicyd /usr/local/sbin/ å•Ÿå‹•1$ /usr/bin/perl /usr/local/sbin/cbpolicyd --config /etc/cluebringer.conf å¦‚æœå•Ÿå‹•æ™‚é‡åˆ°é¡ä¼¼: you may need to install the Mail::SPF module ç­‰ç­‰ errorï¼Œå°±å®‰è£é€™å€‹: sudo aptitude install libmail-spf-perl è¦æŸ¥çœ‹æ˜¯å¦æœ‰å•Ÿå‹•æˆåŠŸï¼Œå¯ä»¥ä¸‹ ps aux | grep policyd æŒ‡ä»¤ã€‚è¦æŸ¥çœ‹ port 10031 æ˜¯å¦æœ‰åœ¨ listenï¼Œå¯ä»¥ä¸‹ netstat -pln | grep :10031 æŒ‡ä»¤æª¢æŸ¥ã€‚ è¨­å®š Postfix ä½¿ç”¨ Policydå» Postfix config æª”è¨­å®š check_policy_service : 123456789101112smtpd_sender_restrictions = ..., check_policy_service inet:127.0.0.1:10031 smtpd_recipient_restrictions = ..., check_policy_service inet:127.0.0.1:10031, permit_mynetworks, permit smtpd_end_of_data_restrictions = check_policy_service inet:127.0.0.1:10031 åœ¨ smtpd_recipient_restrictions ä¸­ï¼Œcheck_policy_service éœ€è¦åœ¨ permit_mynetworks ä¸Šé¢æ‰æœ‰ç”¨ã€‚è‹¥è¦è¨­å®šå¤–å¯„ Quota çš„è©±å‰‡ smtpd_sender_restrictions ä¹Ÿè¦åŠ ä¸Š check_policy_serviceã€‚ å¦å¤–æé†’è¨»è§£ä¸è¦äº‚æ”¾ï¼Œæœƒè®“è¨­å®šæª”æ•´å€‹å£æ‰â€¦.å¯ä»¥é€é postconf æŒ‡ä»¤ä¾†åˆ—å‡ºçœŸæ­£ postfix åƒåˆ°çš„è¨­å®šå€¼ è¨­å®š Policyd Web UIpolicyd æœ‰æä¾›ä¸€å€‹ web çš„è¨­å®šä»‹é¢ï¼Œè®“æˆ‘å€‘æ¯”è¼ƒæ–¹ä¾¿è¨­å®š policydã€‚ è¤‡è£½è§£å£“ç¸®æª”è£¡çš„ webui/ åˆ° web server 12$ cp -r webui /var/www/$ vim /var/www/webui/include/config # å¡«ä¸Šè©²å¡«çš„è³‡è¨Š éœ€è¦æŠŠæ“æœ‰è€…æ”¹æˆ www-data 12$ chown -R webui$ chgrp -R webui å°±å¯ä»¥ç›´æ¥é€£ä¸Š web ä»‹é¢: http://your.domian/webui/ é€™ web ä»‹é¢é è¨­ä¸ç”¨ç™»å…¥ï¼Œå¤§å®¶éƒ½å¯ä»¥éš¨æ„æ›´æ”¹ï¼Œæ‰€ä»¥å¿…é ˆåˆ©ç”¨å…¶ä»–æ–¹å¼åŠ å€‹å¯†ç¢¼ä¿è­·ã€‚ é€™é‚Šæ˜¯ç”¨ lighthttpd è¨­å®šå¯†ç¢¼ 123$ cd /etc/lighthttpd$ vim pwd # user:password$ vim lighthttpd.conf è©³ç´°å¯ä»¥åƒè€ƒ: Lighttpd setup a password protected directory (directories) è¨­å®š Rate Limitåˆ°é€™é‚Šå°±ç°¡å–®äº†ï¼Œè—‰ç”± web ä»‹é¢æŒ‰æŒ‰æŒ‰éˆ•å°±å¯ä»¥è¨­å®šå„ç¨® Quotaï¼Œè©³ç´°å¯åƒè€ƒé€™ç¯‡åœ–æ–‡æ•™å­¸:How To Configure Rate Limit Sending Message on PolicyD é©—è­‰æƒ³ç¢ºå®šæ˜¯ä¸æ˜¯æœ‰æˆåŠŸï¼Œå¯ä»¥å» mySQL &gt; policyd &gt; quota_tracking æŸ¥çœ‹æ˜¯ä¸æ˜¯çœŸçš„æœ‰åœ¨è¿½è¹¤å¤§å®¶çš„æµé‡ã€‚ æˆ–è€…ä¹Ÿå¯ä»¥çœ‹ mail.log ï¼Œæœƒæœ‰æµé‡çš„ log è³‡è¨Šï¼ŒåŒ…å«é‚„å‰©å¤šå°‘ç”¨é‡ç­‰ç­‰è³‡è¨Šã€‚ 123$ tail /var/log/mail.log | grep cbpolicydJan 20 00:02:05 cml2 cbpolicyd[32562]: module=Quotas, mode=update, reason=quota_update,policy=6, quota=3, limit=4, track=Sender:xxx, counter=MessageCount, quota=1.00/200 (0.5%) References Policyd-Installing Postfix + Centos + Policyd V2 + MySQL Policyd(Cluebringer) installation How To Configure Rate Limit Sending Message on PolicyD Lighttpd setup a password protected directory (directories) h1+ol { list-style-type: none; counter-reset: list-counter; padding-left: 0; } h1+ol li { position: relative; padding-left: 3em; } h1+ol li::before { counter-increment: list-counter; content: \"[\" counter(list-counter) \"] \"; position: absolute; left: 0; width: 25px; text-align: right; }","categories":[],"tags":[{"name":"unix","slug":"unix","permalink":"https://ssarcandy.tw/tags/unix/"},{"name":"note","slug":"note","permalink":"https://ssarcandy.tw/tags/note/"}]},{"title":"pbrt - ç”¨å¤šé»å…‰æºæ¨¡æ“¬ç’°å¢ƒå…‰","slug":"pbrt-mediancut-environment-light","date":"2016-12-17T17:45:08.000Z","updated":"2025-10-22T00:51:26.606Z","comments":true,"path":"2016/12/17/pbrt-mediancut-environment-light/","link":"","permalink":"https://ssarcandy.tw/2016/12/17/pbrt-mediancut-environment-light/","excerpt":"ç’°å¢ƒä¸­ç¸½æœ‰ä¸€äº›èƒŒæ™¯å…‰ï¼Œåƒæ˜¯å¤ªé™½å…‰ã€é è™•å¤§æ¨“çª—æˆ¶åå…‰ä¹‹é¡çš„ï¼Œå¯ä»¥çœ‹æˆä¸€æ•´ç‰‡ä¸å‡å‹»åˆ†å¸ƒçš„å…‰æºï¼Œæœ‰äº›åœ°æ–¹äº®ï¼›æœ‰äº›åœ°æ–¹æš—ã€‚pbrt ä¸­æ˜¯ç”¨ important sampling ä¾†æ¸²æŸ“ç’°å¢ƒå…‰ï¼Œä¸éï¼Œå…¶å¯¦ä¹Ÿå¯ä»¥æŠŠç’°å¢ƒå…‰è½‰æ›æˆä¸€å †é»å…‰æºä¾†è¨ˆç®—ã€‚","text":"ç’°å¢ƒä¸­ç¸½æœ‰ä¸€äº›èƒŒæ™¯å…‰ï¼Œåƒæ˜¯å¤ªé™½å…‰ã€é è™•å¤§æ¨“çª—æˆ¶åå…‰ä¹‹é¡çš„ï¼Œå¯ä»¥çœ‹æˆä¸€æ•´ç‰‡ä¸å‡å‹»åˆ†å¸ƒçš„å…‰æºï¼Œæœ‰äº›åœ°æ–¹äº®ï¼›æœ‰äº›åœ°æ–¹æš—ã€‚pbrt ä¸­æ˜¯ç”¨ important sampling ä¾†æ¸²æŸ“ç’°å¢ƒå…‰ï¼Œä¸éï¼Œå…¶å¯¦ä¹Ÿå¯ä»¥æŠŠç’°å¢ƒå…‰è½‰æ›æˆä¸€å †é»å…‰æºä¾†è¨ˆç®—ã€‚ ä¸åŒçš„ç’°å¢ƒå…‰æœƒè®“å ´æ™¯ä¸­ç‰©ä»¶æœ‰ä¸åŒçš„æ¸²æŸ“çµæœ[1] Median Cut Alogrithmç›´æ¥ä¾†çœ‹ä¸€å¼µåœ–: ç”¨ median-cut algorithm æŠŠç’°å¢ƒå…‰è½‰æˆå¤šé»å…‰æº[2] äº‹å¯¦ä¸Šé€™æ–¹æ³•å¾ˆç°¡å–®ï¼Œå°±æ˜¯å°‡æ•´å¼µ environment light probe åˆ‡æˆ x å¡Šç›¸åŒèƒ½é‡çš„å€å¡Š(x æ˜¯å¤šå°‘é–‹å¿ƒå°±å¥½~)ï¼Œæ•´å€‹é‚è¼¯å¯ä»¥åˆ†æˆå¹¾æ­¥é©Ÿ: åˆå§‹ç‹€æ…‹ &#x3D; æ•´å¼µ env light probe å½±åƒï¼ˆé™£åˆ—ä¸­åªæœ‰ä¸€å€‹å€åŸŸï¼‰ å°æ–¼æ¯å€‹å€åŸŸï¼Œæ²¿è‘—é•·é‚Šåˆ‡æˆå…©å¡Šä¸€æ¨£èƒ½é‡çš„å€å¡Š å¦‚æœå€å¡Šå°‘æ–¼ x ï¼Œå‰‡ç¹¼çºŒåš 2. æŠŠé»å…‰æºæ”¾åœ¨æ¯å€‹å€åŸŸä¸­çš„èƒ½é‡é‡å¿ƒè™• è¨ˆç®—èƒ½é‡é‡å¿ƒèƒ½é‡é‡å¿ƒè¨ˆç®—å…¶å¯¦å°±æ˜¯ x, y è»¸åˆ†åˆ¥åŠ æ¬Šå¹³å‡ï¼ˆæ¬Šé‡ç‚ºé»èƒ½é‡ï¼‰é»èƒ½é‡è¨ˆç®—æ–¹å¼å¯ä»¥æ ¹æ“š RGB channel åŠ æ¬Šå¹³å‡ä¾†è¨ˆç®—eg. Y &#x3D; 0.2125R + 0.7154G + 0.0721B ä¹‹é¡çš„åŠ æ¬Šæ³• è¨ˆç®—å€å¡Šèƒ½é‡ç›´è¦ºçš„æƒ³æ³•å…¶å¯¦å°±æ˜¯é€™å€å¡Šä¸­æ‰€æœ‰é»èƒ½é‡å’Œå°±æ˜¯é€™å€å¡Šèƒ½é‡äº†ã€‚ä¸éåœ¨åš Median-cut æ™‚æœŸæ™‚æœƒä¸æ–·éœ€è¦è¨ˆç®—å€å¡Šçš„èƒ½é‡ï¼Œç”¨é€™ç¨®æš´åŠ›è§£æœƒä½¿æ•ˆèƒ½çªç ´å¤©éš›çš„å·®ã€‚é€™é‚Šå¯ä»¥åˆ©ç”¨é å…ˆè¨ˆç®— environment light probe çš„èƒ½é‡ Sum Area Table(ç°¡ç¨± SAT)ï¼Œæ¦‚å¿µå¾ˆç°¡å–®:ä¸€é–‹å§‹å…ˆç¶­è­·ä¸€å€‹èƒ½é‡ç´¯ç©çš„äºŒç¶­é™£åˆ—ï¼Œæ¯å€‹é»çš„å€¼å°±æ˜¯å…¶å·¦ä¸Šè§’å€å¡Šçš„èƒ½é‡å’Œï¼Œè—‰ç”±é€™å€‹é™£åˆ—å¯ä»¥ä½¿ç²å¾—ä»»æ„å€å¡Šèƒ½é‡çš„æ™‚é–“è¤‡é›œåº¦ç‚º O(1)ã€‚ é€™å¼µåœ–èªªæ˜äº†è‹¥è¦ç²å¾—ç´…è‰²å€å¡Šèƒ½é‡å’Œï¼Œåªéœ€æŸ¥è¡¨å››æ¬¡ï¼Œè¨ˆç®— D-B-C+A å³å¯å¾—å‡ºã€‚ çµæœæ¸²æŸ“å‡ºä¾†çš„çµæœå…¶å¯¦è·ŸåŸæœ¬çš„ç’°å¢ƒå…‰é‚„æ˜¯æœ‰äº›å·®åˆ¥ï¼Œç•¢ç«Ÿæ˜¯ç”¨å¤šé»å…‰æºä¾†æ¨¡æ“¬ç’°å¢ƒå…‰ï¼Œæœ¬ä¾†å°±ä¸æœƒä¸€æ¨¡ä¸€æ¨£ã€‚ Median cut algorithm Important sampling(original) ä¸éåœ¨æ•ˆèƒ½æ–¹é¢ï¼Œç”¨å¤šé»å…‰æºæ¨¡æ“¬æ‰€éœ€è¦çš„é‹ç®—æ™‚é–“å¤§æ¦‚éƒ½åªæœ‰åŸæœ¬ç®—æ³•çš„ 30% ï¼Œå¯ä»¥èªªæ˜¯å¤§å¹…åŠ é€Ÿäº†! é›œè«‡ é€™æ¬¡ä¸­é–“å¡äº†ä¸€å‘¨è·‘å» SIGGRAPH ASIAï¼Œç”±æ–¼æˆ‘æ‡¶æ²’å¸¶é›»è…¦å»ï¼Œæ‰€ä»¥ä¹Ÿå°±ç¨å¾®è¶•äº†ä¸€é»â€¦(å¹¸å¥½é€™æ¬¡æ¯”è¼ƒç°¡å–®ä¸€é»é»â€¦å“ˆå“ˆ) æˆ‘å­¸ä¹–äº†ï¼Œç”¨ cmlab å·¥ä½œç«™è·‘ pbrt æ•´å€‹å°±æ˜¯èˆ’çˆ½ï¼ŒEnter æŒ‰ä¸‹å»å·®ä¸å¤šå°±ç®—å®Œäº†~ GA ç´¯ç©äººæ¬¡å¿«çªç ´ 5000 ç€è¦½äº†ï¼Œä¸éç™¼ç¾é‚„çœŸçš„æœ‰äººåœ¨çœ‹æˆ‘çš„æ–‡ç« é‚„æ˜¯è¦ºå¾—å¾ˆç‰¹åˆ¥~å“ˆå“ˆ ä¹‹å‰ group meeting åº§å‰é¢å­¸é•·ä¸€ç›´åœ¨çœ‹æˆ‘çš„æ–‡ç«  Realistic camera in pbrtï¼Œå®³æˆ‘æ³¨æ„åŠ›éƒ½è¢«å¸èµ°äº† XD References åŸåœ–ä¾†è‡ª Physically Based Rendering, Second Edition åŸåœ–ä¾†è‡ª A Median Cut Algorithm for Light Probe Sampling, SIGGRAPH 2006 h1+ol { list-style-type: none; counter-reset: list-counter; padding-left: 0; } h1+ol li { position: relative; padding-left: 3em; } h1+ol li::before { counter-increment: list-counter; content: \"[\" counter(list-counter) \"] \"; position: absolute; left: 0; width: 25px; text-align: right; }","categories":[],"tags":[{"name":"c++","slug":"c","permalink":"https://ssarcandy.tw/tags/c/"},{"name":"rendering","slug":"rendering","permalink":"https://ssarcandy.tw/tags/rendering/"},{"name":"pbrt","slug":"pbrt","permalink":"https://ssarcandy.tw/tags/pbrt/"}]},{"title":"ç”¨ Facebook èŠå¤©æ©Ÿå™¨äººç•¶é€šçŸ¥ç³»çµ±","slug":"cml-fb-bot","date":"2016-11-17T11:57:17.000Z","updated":"2025-10-22T00:51:26.605Z","comments":true,"path":"2016/11/17/cml-fb-bot/","link":"","permalink":"https://ssarcandy.tw/2016/11/17/cml-fb-bot/","excerpt":"CMLab æœ‰äºŒåå¹¾å° unix work stations ä¾›å¤§å®¶ä½¿ç”¨(æ“šèªª CMLab çš„å·¥ä½œç«™æ¯”è³‡å·¥ç³»å·¥ä½œç«™é‚„è¦å¥½â€¦)ã€‚é›–ç„¶é€™äº›æ©Ÿå™¨è¨­å‚™éƒ½å¾ˆå¼·æ‚ï¼Œä½†é‚„æ˜¯æœ‰æ™‚å€™æœƒå‡ºç¾æŸå°æ©Ÿå™¨æ›æ‰ï¼Œæˆ–æ˜¯ CPU, Memory, Swap ç”¨é‡éé«˜ä¹‹é¡çš„äº‹ä»¶ã€‚è‹¥æœ‰é€™é¡äº‹ç™¼ç”Ÿå°±å¿…é ˆå»è™•ç†ï¼Œä¸ç„¶ä¸€ç›´è®“æ©Ÿå™¨ç¶­æŒåœ¨é«˜è² è¼‰å¾ˆå®¹æ˜“å°±æ­»æ‰äº†ã€‚å¯¦é©—å®¤æœ‰å€‹ ç¶²ç«™ å¯ä»¥æŸ¥çœ‹æ©Ÿå™¨åŠæ™‚ç‹€æ…‹ï¼Œä»€éº¼æ©Ÿå™¨æœ‰ä»€éº¼å•é¡Œä¸€çœ‹å°±çŸ¥é“ï¼Œè¶…æ–¹ä¾¿çš„ã€‚ ä½†æ˜¯ä¸ä¸Šå»çœ‹å°±ä¸æœƒçŸ¥é“æœ‰æ²’æœ‰ç‹€æ³ï¼Œæ‰€ä»¥æˆ‘å°±æ±ºå®šåšå€‹æœ‰ç‹€æ³ç™¼ç”Ÿå°±é€šçŸ¥æˆ‘çš„ Facebook chat botã€‚","text":"CMLab æœ‰äºŒåå¹¾å° unix work stations ä¾›å¤§å®¶ä½¿ç”¨(æ“šèªª CMLab çš„å·¥ä½œç«™æ¯”è³‡å·¥ç³»å·¥ä½œç«™é‚„è¦å¥½â€¦)ã€‚é›–ç„¶é€™äº›æ©Ÿå™¨è¨­å‚™éƒ½å¾ˆå¼·æ‚ï¼Œä½†é‚„æ˜¯æœ‰æ™‚å€™æœƒå‡ºç¾æŸå°æ©Ÿå™¨æ›æ‰ï¼Œæˆ–æ˜¯ CPU, Memory, Swap ç”¨é‡éé«˜ä¹‹é¡çš„äº‹ä»¶ã€‚è‹¥æœ‰é€™é¡äº‹ç™¼ç”Ÿå°±å¿…é ˆå»è™•ç†ï¼Œä¸ç„¶ä¸€ç›´è®“æ©Ÿå™¨ç¶­æŒåœ¨é«˜è² è¼‰å¾ˆå®¹æ˜“å°±æ­»æ‰äº†ã€‚å¯¦é©—å®¤æœ‰å€‹ ç¶²ç«™ å¯ä»¥æŸ¥çœ‹æ©Ÿå™¨åŠæ™‚ç‹€æ…‹ï¼Œä»€éº¼æ©Ÿå™¨æœ‰ä»€éº¼å•é¡Œä¸€çœ‹å°±çŸ¥é“ï¼Œè¶…æ–¹ä¾¿çš„ã€‚ ä½†æ˜¯ä¸ä¸Šå»çœ‹å°±ä¸æœƒçŸ¥é“æœ‰æ²’æœ‰ç‹€æ³ï¼Œæ‰€ä»¥æˆ‘å°±æ±ºå®šåšå€‹æœ‰ç‹€æ³ç™¼ç”Ÿå°±é€šçŸ¥æˆ‘çš„ Facebook chat botã€‚ çˆ¬ç¶²é æœ€ç°¡å–®çš„æ–¹å¼è«éæ–¼æŠŠç¶²ç«™çš„å…§å®¹çˆ¬ä¸‹ä¾†ï¼Œå¦‚æœæœ‰é«˜è² è¼‰æˆ–æ­»æ©Ÿå°±é€šçŸ¥æˆ‘ã€‚æˆ‘ç”¨ nodejs request ä¾†å®Œæˆé€™ä»¶äº‹ã€‚ 1234const request = require(&#x27;request&#x27;);request(&#x27;https://www.cmlab.csie.ntu.edu.tw/status/&#x27;, function (error, response, body) &#123; console.log(body) // Show the HTML&#125;); facebook-chat-apifacebook-chat-api å¯ä»¥å¾ˆå®¹æ˜“çš„æ“ä½œèŠå¤©å®¤ç›¸é—œçš„è¡Œç‚ºï¼Œæˆ‘åˆ©ç”¨é€™å¥—ä»¶ä¾†é”æˆé€šçŸ¥è‡ªå·±ã€‚å°‡çˆ¬ä¸‹ä¾†çš„ç¶²é å…§å®¹ï¼Œæ‰¾å‡ºæ›æ‰çš„æ©Ÿå™¨ï¼Œé…åˆ facebook-chat-api å°±å¯ä»¥ç”¨ fb é€šçŸ¥æœ‰æ©Ÿå™¨æ›æ‰äº†ã€‚ 123456789101112131415161718192021222324// require modules let deadMachines = [];request(&#x27;http://www.cmlab.csie.ntu.edu.tw/status/&#x27;, function (err, res, body) &#123; const $ = cheerio.load(body); const dead = $(&#x27;.dead&#x27;); for (let i = 0; i &lt; dead.length; i++) &#123; const machineId = dead.eq(i).text(); deadMachines.push(machineId); &#125; // all machines are fine~ if (!deadMachines.length) return; // login to facebook and send msg to unix manager loginFacebook(config.account, function (err, api) &#123; if (err) return console.error(err); api.sendMessage(`$&#123;deadMachines.toString()&#125; is dead.`, /* channel_id */, function (err) &#123; console.log(`$&#123;deadMachines.toString()&#125; is dead.`); &#125;); &#125;);&#125;); é€é Facebook èŠå¤©å®¤å‘ŠçŸ¥æˆ‘æœ‰æ©Ÿå™¨æ›æ‰äº†ã€‚ å®šæ™‚æª¢æŸ¥é€™éš»ç¨‹å¼ä¸¦ä¸æ˜¯å€‹æŒçºŒç›£æ§çš„ç¨‹å¼ï¼Œåªèƒ½ç®—æ˜¯å€‹ script è€Œå·²ã€‚æ‰€ä»¥æˆ‘ç”¨ crontab è¨­å®šæ’ç¨‹å®šæ™‚æª¢æŸ¥æ©Ÿå™¨æ˜¯ä¸æ˜¯æœ‰ç‹€æ³ã€‚åˆ©ç”¨ unix æŒ‡ä»¤ crontab -e ç·¨è¼¯æ’ç¨‹ã€‚ 12# æ¯å°æ™‚åŸ·è¡Œç¨‹å¼0 * * * * node index.js crontab æ˜¯åƒ localtimeï¼Œç³»çµ±ç¾åœ¨æ˜¯ç”šéº¼æ™‚é–“å¯ä»¥è—‰ç”± timedatectl æŸ¥çœ‹: 12345678$ timedatectl Local time: Thu 2016-11-17 22:15:13 CST Universal time: Thu 2016-11-17 14:15:13 UTC RTC time: n/a Time zone: Asia/Taipei (CST, +0800) Network time on: yesNTP synchronized: yes RTC in local TZ: no å¦å¤–ï¼Œå¦‚æœè¨­å®šäº†æ–°çš„ Time Zoneï¼Œå‰‡å¿…é ˆé‡å•Ÿ crontab service æ‰æœƒè®“ä»–åƒåˆ°æ­£ç¢ºçš„æ™‚é–“ã€‚ 1$ /etc/init.d/cron restart æˆªåœ–ç›´åˆ°ç¾åœ¨å…¶å¯¦å·²ç¶“é”æˆç›®æ¨™äº†ï¼Œä½†æ˜¯åªè¬›å¥ã€ŒæŸæŸæ©Ÿå™¨æ›äº†ã€‚ã€ä¼¼ä¹é‚„æ˜¯å·®å¼·äººæ„ï¼Œç‚ºäº†é˜²ç¯„æœªç„¶ï¼Œæ‡‰è©²è¦æŠŠé«˜è² è¼‰çš„æ©Ÿå™¨ä¹Ÿå‘ŠçŸ¥ä¸€ä¸‹ï¼Œææ—©è™•ç†ä»¥å…æ©Ÿå™¨æ­»æ‰ã€‚æƒ³æƒ³æ„Ÿè¦ºæŠŠæ•´å€‹ç¶²ç«™æˆªåœ–ä¸‹ä¾†å‚³çµ¦æˆ‘ä¸æ˜¯æœ€å¿«å—ã€‚æ©ï¼Œé‚£å°±é€™æ¨£å¼„å§ï¼ å¤šè™§å»£å¤§ nodejs å¥—ä»¶é–‹ç™¼è€…ï¼Œé€™ä»¶äº‹å¯ä»¥å¾ˆå®¹æ˜“åœ°åˆ©ç”¨ webshot é”æˆã€‚ æˆªä¸‹æ•´å€‹è¡¨æ ¼å‚³çµ¦æˆ‘ã€‚ Callback to Promiseçˆ¬ç¶²é ã€æˆªåœ–ã€å‚³è¨Šæ¯éƒ½æ˜¯éåŒæ­¥çš„å‹•ä½œï¼Œå¯«èµ·ä¾†å°±è®Šæˆ Callback Hell äº†ã€‚çœŸçš„æ˜¯é†œçˆ†äº†â€¦ 1234567891011// Scrap webrequest(&#x27;url&#x27;, function (err, res, body) &#123; /* do something with &#x27;body&#x27; */ // Screenshot webshot(body, &#x27;tmp.png&#x27;, options, function (err) &#123; // login to facebook and send msg loginFacebook(config.account, function (err, api) &#123; // send message &#125;); &#125;);&#125;); åˆ©ç”¨ bluebirdï¼Œå¯ä»¥æŠŠ Callback ç¥å¥‡çš„è½‰ç‚º Promiseï¼Œä¸¦ä¸”ç”¨ es6 çš„èªæ³•æ”¹å¯«ï¼Œå°±å¯ä»¥å¤§å¹…æ”¹å–„ç¨‹å¼ç¢¼çš„æ˜“è®€æ€§ï½ 1234567891011request(&#x27;url&#x27;) .then(body =&gt; &#123; /* do something with &#x27;body&#x27; */ // Screenshot return webshot(body, &#x27;tmp.png&#x27;, options); &#125;) .then(() =&gt; loginFacebook(config.account)) // login to facebook and send msg .then(api =&gt; &#123; // send message &#125;) .catch(err =&gt; console.error(err)); å®Œæ•´çš„ç¨‹å¼ç¢¼: https://github.com/SSARCandy/cml-status-fb-notify","categories":[],"tags":[{"name":"unix","slug":"unix","permalink":"https://ssarcandy.tw/tags/unix/"},{"name":"automation","slug":"automation","permalink":"https://ssarcandy.tw/tags/automation/"},{"name":"nodejs","slug":"nodejs","permalink":"https://ssarcandy.tw/tags/nodejs/"}]},{"title":"Realistic camera in pbrt","slug":"pbrt-realistic-camera","date":"2016-11-09T05:14:41.000Z","updated":"2025-10-22T00:51:26.606Z","comments":true,"path":"2016/11/09/pbrt-realistic-camera/","link":"","permalink":"https://ssarcandy.tw/2016/11/09/pbrt-realistic-camera/","excerpt":"Ray-tracing ä¸­çš„ç›¸æ©Ÿ(çœ¼ç›)æ˜¯æ‰€æœ‰å…‰æŸçš„èµ·é»ï¼Œå¾ç›¸æ©Ÿæˆåƒå¹³é¢å‡ºç™¼çš„å…‰æŸå¦‚æœèƒ½å¤ ç¶“ç”±æŠ˜å°„ã€åå°„ç­‰ç­‰æœ€çµ‚åˆ°é”å…‰æºçš„é‚£äº›ã€Œå­˜æ´»ã€çš„å…‰æŸï¼Œæ‰å°æœ€çµ‚çš„å½±åƒæœ‰å½±éŸ¿çš„å…‰æŸã€‚é€™ç¨®èˆ‡ç¾å¯¦ç‰©ç†ç›¸åçš„è¨­è¨ˆ(å¾å…‰æºç™¼å‡ºå…‰ä¸¦è¿½è¹¤é‚£äº›å­˜æ´»åˆ°ç›¸æ©Ÿæˆåƒå¹³é¢çš„å…‰æŸ)æ˜¯ç‚ºäº†æ¸›å°‘è¨ˆç®—é‡ã€‚ ray-tracing ä¸­ï¼Œå…‰æŸæ˜¯å¾ç›¸æ©Ÿå°„å‡ºä¾†çš„ã€‚[1]","text":"Ray-tracing ä¸­çš„ç›¸æ©Ÿ(çœ¼ç›)æ˜¯æ‰€æœ‰å…‰æŸçš„èµ·é»ï¼Œå¾ç›¸æ©Ÿæˆåƒå¹³é¢å‡ºç™¼çš„å…‰æŸå¦‚æœèƒ½å¤ ç¶“ç”±æŠ˜å°„ã€åå°„ç­‰ç­‰æœ€çµ‚åˆ°é”å…‰æºçš„é‚£äº›ã€Œå­˜æ´»ã€çš„å…‰æŸï¼Œæ‰å°æœ€çµ‚çš„å½±åƒæœ‰å½±éŸ¿çš„å…‰æŸã€‚é€™ç¨®èˆ‡ç¾å¯¦ç‰©ç†ç›¸åçš„è¨­è¨ˆ(å¾å…‰æºç™¼å‡ºå…‰ä¸¦è¿½è¹¤é‚£äº›å­˜æ´»åˆ°ç›¸æ©Ÿæˆåƒå¹³é¢çš„å…‰æŸ)æ˜¯ç‚ºäº†æ¸›å°‘è¨ˆç®—é‡ã€‚ ray-tracing ä¸­ï¼Œå…‰æŸæ˜¯å¾ç›¸æ©Ÿå°„å‡ºä¾†çš„ã€‚[1] å¯¦ä½œçœŸå¯¦ç›¸æ©Ÿå…‰å­¸ç³»çµ±ç›¸æ©Ÿçš„å…‰å­¸ç³»çµ±æ±ºå®šäº†æœ€çµ‚æˆåƒçš„æ¨£è²Œï¼Œæ¯”å¦‚å»£è§’ã€é­šçœ¼ã€æ­£äº¤æŠ•å½±ç­‰ç­‰æ¨£è²Œï¼Œpbrt-v2 ä¸­å¯¦åšäº†æœ€å¸¸è¦‹çš„å¹¾å€‹ï¼ŒåŒ…å«äº† perspective camera, orthographic cameraï¼ŒåŸå§‹ç¨‹å¼ç¢¼åœ¨ src/camera ä¹‹ä¸‹ã€‚ å¯¦éš›ä¸Šçš„ç›¸æ©Ÿçš„å…‰å­¸ç³»çµ±é€šå¸¸éƒ½åŒ…å«äº†å¤šå€‹é€é¡ï¼Œä»¥æ­¤ä¾†é”æˆæ¯”è¼ƒè¤‡é›œçš„æˆåƒ(æˆ–æ˜¯æ¸›å°‘é€é¡çš„åƒå·®)ã€‚ çœŸå¯¦ç›¸æ©Ÿé€šå¸¸éƒ½æ˜¯ç”±å¤šç‰‡é€é¡çµ„æˆçš„å…‰å­¸ç³»çµ±ã€‚[2] ä¸Šåœ–æ˜¯æè¿°å…‰å­¸ç³»çµ±å„å€‹é€é¡é¢çš„ç›¸é—œåƒæ•¸ï¼Œå¾æˆåƒå¹³é¢å‡ºç™¼çš„ eye-ray æœƒåœ¨é€™å€‹å…‰å­¸ç³»çµ±æŠ˜å°„å¤šæ¬¡ä¹‹å¾Œæ‰æœƒé€²å…¥å ´æ™¯ä¸­ï¼Œè€Œé€™äº›å…‰æŸåˆæœƒè·Ÿå ´æ™¯çš„ç‰©ä»¶ç›¸äº¤ã€åå°„ç­‰ç­‰ï¼Œå°±å¦‚åŒæˆ‘ä¹‹å‰å¯«çš„é€™ç¯‡ æ”¹å–„ pbrt ä¸­çš„ heightfield shapeï¼Œåœ¨åšä¸€æ¨£çš„äº‹ã€‚ æ‰€ä»¥ï¼Œè¦æ¨¡æ“¬çœŸå¯¦ç›¸æ©Ÿçš„å…‰å­¸ç³»çµ±ï¼Œå…¶å¯¦å°±æ˜¯å¹¾å€‹æ­¥é©Ÿï¼š åœ¨æˆåƒå¹³é¢ä¸Šèˆ‡ç¬¬ä¸€å€‹é€é¡é¢ä¸Šå„å–ä¸€é»ï¼Œç›¸é€£ç”¢ç”Ÿ eye-ray æ‰¾å‡º eye-ray èˆ‡ç¬¬ä¸€å€‹é€é¡é¢çš„äº¤é»ï¼Œæ²’äº¤é»å°±çµæŸ æ‰¾å‡ºæŠ˜å°„å¾Œçš„æ–° eye-ray é‡è¦† 2, 3 ç›´åˆ° eye-ray é›¢é–‹å…‰å­¸ç³»çµ±é€²å…¥å ´æ™¯ç‚ºæ­¢ ä»¥ pseudo-code è¡¨ç¤ºï¼Œå¤§æ¦‚å¯ä»¥å¯«æˆé€™æ¨£ï¼š 123456789101112131415filmP = random point on filmlensP = random point on first lensray.o = filmPray.d = Vector(lensP - originP) for l in lens: # from rear to front intersectionP = l.intersect(ray) if not intersectionP: return 0 newDirection = l.refractRay(ray) if not newDirection: return 0 ray.d = newDirection å…¶å¯¦ä¹Ÿå¯ä»¥å€ŸåŠ©ä¸€äº›é™¤éŒ¯å·¥å…·ä¾†è¦–è¦ºåŒ–å…‰æŸçš„æŠ˜å°„è¡Œç‚ºï¼Œé€™é‚Šæˆ‘ä½¿ç”¨ vdb ä¾†ç•«å‡ºæ•´å€‹å…‰å­¸ç³»çµ±ä¸¦ä¸”è¿½è¹¤å…‰æŸçš„æŠ˜å°„è¡Œç‚ºã€‚(é—œæ–¼å¦‚ä½•åˆ©ç”¨ vdb é™¤éŒ¯ï¼Œå¯ä»¥åƒè€ƒ vdb - Debugging visual programs) pbrt æ¨¡æ“¬å¾æˆåƒå¹³é¢ä¸­é»ç™¼å‡ºå…‰æŸï¼Œç¶“éå¤šæ¬¡æŠ˜å°„ç›´è‡³é›¢é–‹ç›¸æ©Ÿé¡é ­ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œä¹Ÿéœ€è¦è¨ˆç®—æ¯æ¢ ray çš„æ¬Šé‡ï¼Œæ ¹æ“šè«–æ–‡[2]æ‰€èªªæ˜¯å¦‚ä¸‹å…¬å¼ï¼š : å‡ºå°„ç³é¢ç©: æœ€å¾Œé€é¡èˆ‡æˆåƒå¹³é¢çš„è·é›¢: å…‰æŸèˆ‡æˆåƒå¹³é¢æ³•å‘é‡å¤¾è§’ çµæœæˆ‘å˜—è©¦æ¸²æŸ“å¤§å¼µä¸€é»çš„åœ–ä¸¦ä¸”è®“æ¯å€‹åƒç´ çš„æ¡æ¨£å¤ å¤šæ¬¡ï¼Œå¸Œæœ›èƒ½å¤ è®“çµæœåœ–æ¼‚äº®ä¸€é»ã€‚ä»£åƒ¹å°±æ˜¯ä¸€å¼µåœ–è¦è·‘å¥½å¹¾å€‹å°æ™‚â€¦â€¦ dobule-gauss 50mm with 512 samples per pixel(1024*1024) wide 22mm with 512 samples per pixel(1024*1024) telephoto 250mm with 512 samples per pixel(1024*1024) fisheye 10mm with 512 samples per pixel(1024*1024) åŠ é€Ÿæ¯å€‹é€é¡é¢åŸºæœ¬ä¸Šæ˜¯ä»¥éƒ¨ä»½çš„çƒé¢ä¾†æ¨¡æ“¬ï¼Œè¦æ±‚äº¤é»å¾ˆå®¹æ˜“ï¼Œå› ç‚º src/shape/shpere.cpp å·²ç¶“å¯¦åšæ±‚äº¤é»äº†ï¼Œå¯ä»¥ç›´æ¥å‰µä¸€å€‹ Sphere object ï¼Œç„¶å¾Œå† s.Intersect(r, &amp;thit, &amp;rayEpsilon, &amp;dg) ä¾†å–å¾—äº¤é»ã€‚ é€™æ¨£å¯«ç°¡å–®æ˜“æ‡‚ï¼Œä¸‰å…©ä¸‹è§£æ±ºæ±‚äº¤é»é€™ä»¶äº‹ï¼Œä½†å…¶å¯¦æ•ˆèƒ½ä¸¦ä¸å¥½ï¼Œå› ç‚ºåªç‚ºäº†æ±‚ä¸€å€‹äº¤é»å»å»ºæ§‹äº†ä¸€å€‹å®Œæ•´çš„ shpere shape ï¼Œç¨å¾®æœ‰é»æµªè²»â€¦â€¦ æ”¹å–„æ–¹å¼å¯ä»¥è—‰ç”±è¤‡è£½è²¼ä¸Š Shpere::Intersect() ä¸¦åŠ ä»¥æ”¹å¯«ï¼Œå°±å¯ä»¥çœå»é€™æ¨£çš„ overheadå¯¦éš›ä¸Šæ•ˆèƒ½å¤§ç´„å·® 2 å€ã€‚ å„ç¨®å‘ RasterToCameraåœ¨ GenerateRay() ä¸­ï¼Œsample.imageX sample.imageY æ˜¯åœ¨ Raster space ä¸Šï¼Œéœ€è½‰è‡³ Camera spaceï¼ŒRaster/Camera space ä¹‹é–“é—œä¿‚å¦‚åœ–(çœç•¥ z è»¸)ï¼Œå¯ä»¥çœ‹å‡ºä¾†è½‰æ›æ–¹å¼å¤§æ¦‚å°±æ˜¯ï¼šä¸Šä¸‹ç¿»è½‰ã€å¹³ç§»ã€ç¸®å°ã€‚ Raster/Camera space ä¹‹é–“é—œä¿‚ã€‚ Ray minT, maxTåœ¨ GenerateRay() ä¸­ç”¢ç”Ÿçš„ ray è¨˜å¾—åƒæ•¸è¦çµ¦å¥½çµ¦æ»¿ï¼Œä¹‹å‰å› ç‚ºæ²’çµ¦å€¼åˆ° min/maxT å°è‡´çµæœæœ‰å‘å‘å·´å·´çš„ç ´åœ–â€¦ Total reflectionæˆ‘ä½¿ç”¨ Snellâ€™s law è¨ˆç®—æŠ˜å°„å¾Œçš„æ–°æ–¹å‘ï¼Œåœ¨å…¬å¼ä¸­ï¼Œè‹¥ç™¼ç”Ÿå…¨åå°„æ™‚æœƒè®“å…¶ä¸­ä¸€é …ç”¢ç”Ÿè™›æ•¸ï¼Œç¨‹å¼å°±æ•´å€‹çˆ†ç‚¸äº†ã€‚æ‰€ä»¥è¨˜å¾—è¦æ³¨æ„åˆ¥æŠŠè² æ•¸é–‹æ ¹è™Ÿäº†ã€‚ References åœ–ç‰‡å–è‡ªç¶­åŸºç™¾ç§‘ Ray-tracing A Realistic Camera Model for Computer Graphics, SIGGRAPH 1995 h1+ol { list-style-type: none; counter-reset: list-counter; padding-left: 0; } h1+ol li { position: relative; padding-left: 3em; } h1+ol li::before { counter-increment: list-counter; content: \"[\" counter(list-counter) \"] \"; position: absolute; left: 0; width: 25px; text-align: right; }","categories":[],"tags":[{"name":"c++","slug":"c","permalink":"https://ssarcandy.tw/tags/c/"},{"name":"rendering","slug":"rendering","permalink":"https://ssarcandy.tw/tags/rendering/"},{"name":"pbrt","slug":"pbrt","permalink":"https://ssarcandy.tw/tags/pbrt/"}]},{"title":"vdb - Debugging visual programs","slug":"debug-using-vdb","date":"2016-10-13T12:34:53.000Z","updated":"2025-10-22T00:51:26.605Z","comments":true,"path":"2016/10/13/debug-using-vdb/","link":"","permalink":"https://ssarcandy.tw/2016/10/13/debug-using-vdb/","excerpt":"æœ‰æ™‚å€™åœ¨å¯« openGL æˆ–è€…æ˜¯é¡ä¼¼ pbrt é€™æ¨£æœ‰ç‰½æ¶‰åˆ°ä¸‰ç¶­ç©ºé–“çš„ç¨‹å¼çš„æ™‚å€™ç¸½æ˜¯å¾ˆé›£é™¤éŒ¯â€¦é›–ç„¶å¯ä»¥è¨­æ–·é»çœ‹çœ‹è®Šæ•¸å…§å®¹æœ‰æ²’æœ‰å•é¡Œï¼Œä½†èªªå¯¦åœ¨çš„å…¶å¯¦é€™æ¨£çœ‹æœ‰æ™‚å€™æ ¹æœ¬çœ‹ä¸å‡ºæ‰€ä»¥ç„¶ï¼Œé€™æ¨£é‚„æ˜¯é›£ä»¥é™¤éŒ¯ã€‚ vdb æ˜¯ä¸€å€‹è§£æ±ºé€™æ¨£å•é¡Œçš„å·¥å…·ï¼Œå®ƒæä¾›äº†å¾ˆå¤šå¸¸è¦‹çš„ç•«ç·šã€ç•«é»ç­‰ç­‰å‡½å¼ï¼Œæœ€é‡è¦çš„æ˜¯ä»–çš„æ˜“ç”¨æ€§ï¼Œå¯ä»¥åœ¨å¹¾ä¹ä¸æ›´å‹•ç¨‹å¼ç¢¼çš„ç‹€æ…‹ä¸‹å°±å®ŒæˆåµéŒ¯ã€‚","text":"æœ‰æ™‚å€™åœ¨å¯« openGL æˆ–è€…æ˜¯é¡ä¼¼ pbrt é€™æ¨£æœ‰ç‰½æ¶‰åˆ°ä¸‰ç¶­ç©ºé–“çš„ç¨‹å¼çš„æ™‚å€™ç¸½æ˜¯å¾ˆé›£é™¤éŒ¯â€¦é›–ç„¶å¯ä»¥è¨­æ–·é»çœ‹çœ‹è®Šæ•¸å…§å®¹æœ‰æ²’æœ‰å•é¡Œï¼Œä½†èªªå¯¦åœ¨çš„å…¶å¯¦é€™æ¨£çœ‹æœ‰æ™‚å€™æ ¹æœ¬çœ‹ä¸å‡ºæ‰€ä»¥ç„¶ï¼Œé€™æ¨£é‚„æ˜¯é›£ä»¥é™¤éŒ¯ã€‚ vdb æ˜¯ä¸€å€‹è§£æ±ºé€™æ¨£å•é¡Œçš„å·¥å…·ï¼Œå®ƒæä¾›äº†å¾ˆå¤šå¸¸è¦‹çš„ç•«ç·šã€ç•«é»ç­‰ç­‰å‡½å¼ï¼Œæœ€é‡è¦çš„æ˜¯ä»–çš„æ˜“ç”¨æ€§ï¼Œå¯ä»¥åœ¨å¹¾ä¹ä¸æ›´å‹•ç¨‹å¼ç¢¼çš„ç‹€æ…‹ä¸‹å°±å®ŒæˆåµéŒ¯ã€‚ Usageå…¶å¯¦åœ¨ vdb README å·²ç¶“èªªçš„æ»¿æ¸…æ¥šçš„äº†ï¼Œé€™é‚Šåœ¨æ•´ç†ä¸€ä¸‹: ä¸‹è¼‰ vdb-win.zip æˆ– vdb-osx.tar.gz æŠŠ vdb.h include é€²ä½ è¦åµéŒ¯çš„ç¨‹å¼ åŸ·è¡Œ vdb.exe æˆ– ./vdb åœ¨è¦åµéŒ¯çš„ç¨‹å¼ä¸­ï¼Œå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹æ’å…¥ vdb_line() ç­‰ä»–æ‰€æä¾›çš„å‡½å¼ Exampleä»¥ pbrt ç‚ºä¾‹ï¼Œç”±æ–¼çµæœéƒ½æ˜¯ä¸€å¼µæ¸²æŸ“å®Œæˆçš„å½±åƒï¼Œèªªå¯¦åœ¨çš„é€™çœŸçš„å¾ˆé›£ debugâ€¦.é‚£åˆ©ç”¨ vdb é€™å·¥å…·èƒ½æœ‰ç”šéº¼å¥½è™•å‘¢ï¼Ÿ è—‰ç”±ä»–ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°ç•«å‡ºåƒæ˜¯ç‰©é«”çš„æ¨£å­ä»¥åŠä»–çš„ Bounding Boxï¼Œå¦‚åœ–ï¼š heightfield object and its bounding box æˆ–è€…æ˜¯ç•¶ä½ åœ¨ç®— Vertex normal æ™‚ï¼Œä¸çŸ¥é“åˆ°åº•ç®—çš„å°ä¸å°ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç•«å‡ºä¾†ï¼š Showing Normals on vertices æˆ‘å€‹äººè¦ºå¾— vdb å°æˆ‘æœ€å¤§çš„å¹«åŠ©æ˜¯ object space ä»¥åŠ world space ä¹‹é–“çš„é—œä¿‚äº†ï¼Œåæ¨™ç³»ä¸€å€‹æ²’å¼„å¥½å°±æœƒè®“æ¸²æŸ“çš„çµæœå·®ç•°ç”šå¤§ï¼Œå®Œå…¨æ‘¸ä¸è‘—é ­ç·’åˆ°åº•ç™¼ç”Ÿä»€éº¼äº‹æƒ…â€¦.. è—‰ç”± vdb å¯¦éš›ç•«å‡ºå„å€‹ object æ™‚å€™ï¼Œå¾ˆå®¹æ˜“å°±ç™¼ç¾ object&#x2F;world space ä¹‹é–“çš„ bug Bounding box æ²’æœ‰æ­£ç¢ºçš„è½‰æ›åˆ° object spaceï¼Œå°è‡´è·‘åˆ°æ€ªæ€ªçš„åœ°æ–¹ Some tipså…¶å¯¦ä¸Šé¢èªªçš„å¾ˆç°¡å–®ï¼Œä½†äº‹å¯¦ä¸Šæˆ‘å‰›é–‹å§‹å˜—è©¦ä½¿ç”¨ vdb æ™‚é‡åˆ°äº†è¶…å¤šçš„å•é¡Œï¼Œé€™é‚Šå°±ä¾†è¨˜éŒ„ä¸€ä¸‹ï¼š Header files order#include &quot;vdb.h&quot; è¦æ“ºåœ¨å“ªè£¡ï¼Ÿä¸€èˆ¬ä¾†èªªç•¶ç„¶è¶Šä¸Šé¢è¶Šå¥½ï¼Œä½†é‚„æ˜¯æœ‰ä¾‹å¤–çš„ï¼š heightfield.cpp12345#include &quot;stdafx.h&quot;#include &quot;vdb.h&quot;#include &quot;shapes/heightfieldImproved.h&quot;#include &quot;shapes/trianglemesh.h&quot;#include &quot;paramset.h&quot; ä»¥ä¸Šé¢çš„ä¾‹å­ä¾†èªªï¼Œ#include &quot;vdb.h&quot;å¿…é ˆæ”¾åœ¨ #include &quot;stdafx.h&quot;å¾Œé¢ã€‚stdafx.hæ˜¯ä¾†åš precompiled headers ç”¨çš„ï¼Œæ‰€ä»¥ç½®æ–¼ä»–ä¹‹å‰çš„ include éƒ½æœƒè¢«å¿½ç•¥ï¼Œå°±æœƒé€ æˆæ‰¾ä¸åˆ° vdb_line() ä¹‹é¡çš„éŒ¯èª¤ã€‚ Use ONE threadvdb ä¸æ”¯æ´å¤šåŸ·è¡Œç·’ï¼Œå¦‚æœåœ¨åµéŒ¯çš„ç¨‹å¼æ˜¯å¤šåŸ·è¡Œç·’çš„è©±ï¼Œæœ‰å¯èƒ½æœƒå°è‡´ç•«åœ¨ vdb ä¸Šçš„æ±è¥¿ä¸æ­£ç¢º(æ¼ç•«)ã€‚è§£æ±ºæ–¹æ³•å°±æ˜¯åœ¨åµéŒ¯æ™‚ä½¿ç”¨å–®ä¸€åŸ·è¡Œç·’ã€‚ Using winsock instead of winsock2é€™å•é¡Œæ‡‰è©²æ˜¯åªåœ¨ Windows æœƒç™¼ç”Ÿï¼Œä¸¦ä¸”åœ¨è¦åµéŒ¯çš„ç¨‹å¼ä¸­ä½¿ç”¨åˆ° windows.hã€‚vdb ä¸­ç”¨åˆ°äº† winsock2.hï¼Œé€™æ˜¯è·Ÿ socket æœ‰é—œçš„æ±è¥¿ï¼Œç„¶è€Œ windows.h ä¸­ä¹Ÿæœ‰ include ä¸€å€‹å« winsock.h çš„æ±è¥¿ã€‚winsock.h, winsock2.h æœ‰å¾ˆå¤šå‡½å¼éƒ½å„è‡ªæœ‰å®£å‘Šï¼Œè€ŒåŒæ™‚å¼•ç”¨å…©è€…æœƒé€ æˆ redefinition éŒ¯èª¤ã€‚ è§£æ±ºæ–¹æ³•æ˜¯æŠŠ vdb.h ä¸­ï¼Œwinsock2.hæ”¹æˆwinsock.hã€‚è©³ç´°å¯æŸ¥çœ‹ stackoverflow é€™ç¯‡","categories":[],"tags":[{"name":"c++","slug":"c","permalink":"https://ssarcandy.tw/tags/c/"},{"name":"pbrt","slug":"pbrt","permalink":"https://ssarcandy.tw/tags/pbrt/"}]},{"title":"æ”¹å–„ pbrt ä¸­çš„ heightfield shape","slug":"pbrt-heightfield","date":"2016-10-10T13:14:41.000Z","updated":"2025-10-22T00:51:26.605Z","comments":true,"path":"2016/10/10/pbrt-heightfield/","link":"","permalink":"https://ssarcandy.tw/2016/10/10/pbrt-heightfield/","excerpt":"pbrt æ˜¯ä¸€å€‹åŸºæ–¼ç‰©ç†çš„ ray-tracing libararyï¼Œä»–å¯ä»¥æ‹¿ä¾†ç”¢ç”Ÿæ¥è¿‘ç¾å¯¦çš„çœŸå¯¦å ´æ™¯ï¼Œæ“šèªª IKEA çš„å‹éŒ„éƒ½æ˜¯ç”¨é¡ä¼¼æ–¹æ³•ç”¢ç”Ÿçš„ï¼Œè€Œä¸æ˜¯çœŸçš„æŠŠç”¢å“æ“ºå‡ºä¾†æ‹ç…§ã€‚ å“ˆå“ˆ æ“šèªª IKEA å‹éŒ„çš„åœ–éƒ½æ˜¯æ¸²æŸ“å‡ºä¾†çš„[1]","text":"pbrt æ˜¯ä¸€å€‹åŸºæ–¼ç‰©ç†çš„ ray-tracing libararyï¼Œä»–å¯ä»¥æ‹¿ä¾†ç”¢ç”Ÿæ¥è¿‘ç¾å¯¦çš„çœŸå¯¦å ´æ™¯ï¼Œæ“šèªª IKEA çš„å‹éŒ„éƒ½æ˜¯ç”¨é¡ä¼¼æ–¹æ³•ç”¢ç”Ÿçš„ï¼Œè€Œä¸æ˜¯çœŸçš„æŠŠç”¢å“æ“ºå‡ºä¾†æ‹ç…§ã€‚ å“ˆå“ˆ æ“šèªª IKEA å‹éŒ„çš„åœ–éƒ½æ˜¯æ¸²æŸ“å‡ºä¾†çš„[1] é—œæ–¼ pbrt èˆ‡ ray-tracingRay-tracing èªªç©¿äº†å°±æ˜¯åœ¨æ¨¡æ“¬è‡ªç„¶ç•Œå…‰ç·šçš„é‹ä½œï¼Œæˆ‘å€‘ä¹‹æ‰€ä»¥çœ‹çš„åˆ°æ±è¥¿ï¼Œå…¶å¯¦å°±æ˜¯å› ç‚ºå…‰ç·šæ‰“åˆ°ç‰©é«”ä¸¦åå°„åˆ°æˆ‘å€‘çœ¼ç›ï¼Œé€™ä¹Ÿæ˜¯ç‚ºç”šéº¼åœ¨ç„¡å…‰çš„åœ°æ–¹æœƒä¼¸æ‰‹ä¸è¦‹äº”æŒ‡(å› ç‚ºæ²’æœ‰ä»»ä½•å…‰æ‰“åˆ°æ‰‹æŒ‡ä¸¦åå°„åˆ°çœ¼ä¸­)ã€‚è‡³æ–¼é›»è…¦è¦æ€éº¼æ¨¡æ“¬é€™ä»¶äº‹ï¼Œå¤§è‡´ä¾†èªªæ˜¯å…‰ç·šå¾å…‰æºå‡ºç™¼ï¼Œé€”ä¸­é‡åˆ°éšœç¤™ç‰©å°±è¦ç®—äº¤é»ï¼Œæœ‰äº¤é»å°±è¦æ ¹æ“šæè³ªç‰¹æ€§åå°„ï¼Œåå°„ä¹‹å¾Œå°±æ˜¯ä¸€æ¢æ–°çš„å…‰ç·šï¼Œå°±ç¹¼çºŒåšäº¤é»æ¸¬è©¦ç›´åˆ°é€²åˆ°çœ¼ç›ä¸­(æˆ–ç›´åˆ°èƒ½é‡éæ¸›å®Œç•¢)ã€‚å¯ä»¥çœ‹å‡ºï¼Œray-tracing æœ€é‡è¦çš„å¤§æ¦‚å°±æ˜¯èˆ‡ç‰©ä»¶ç®—äº¤é»äº†ï¼Œå› ç‚º ray æœƒä¸€ç›´åšäº¤é»æ¸¬è©¦ï¼Œæ‰€ä»¥èˆ‡ç‰©ä»¶çš„äº¤é»æ¸¬è©¦å¿…é ˆè¦å¤ å¿«æ‰è¡Œï¼Œä¸ç„¶å°±æœƒç®—åˆ°å¤©è’åœ°è€â€¦. pbrt é™¤äº†æœ€åŸºæœ¬çš„ triangleMesh ä»¥å¤–ï¼Œé‚„å¯¦ä½œå¾ˆå¤šå…¶ä»–ä¸€äº›å¸¸è¦‹çš„ shape(çƒé«”ã€åœ“æŸ±é«”ã€åœ“å½¢ã€heightfieldâ€¦)ï¼Œé€™å…¶å¯¦æ˜¯æ‹¿ä¾†çµ¦ api ä½¿ç”¨çš„ï¼Œä¸€èˆ¬äººå¯ä»¥å¯« pbrt å°ˆç”¨çš„æè¿°æª”ä¾†æè¿°ä¸€å€‹å ´æ™¯ä¸­çš„ç‰©é«”ã€å…‰æºç­‰ç­‰ï¼Œå†è—‰ç”± pbrt çš„ç¨‹å¼ä¾†æ¸²æŸ“å‡ºæ•´å¼µå½±åƒã€‚ pbrt ä¸­çš„å„ç¨® shapeï¼Œæœ‰äº›æ˜¯æœƒå…ˆè½‰æˆ triangleMesh(å°ä¸‰è§’å½¢æ±‚äº¤é»æ‡‰è©²æ˜¯åœ–å­¸ä¸­æœ€åŸºç¤çš„äº†ï¼Œå¦‚æœåŸæœ¬ç‰©ä»¶å¤ªè¤‡é›œé€šå¸¸å°±æœƒå…ˆæŠŠå®ƒæ‹†æˆä¸‰è§’å½¢çµ„åˆå†ä¾†ç®—)ï¼›è€Œæœ‰äº›æ˜¯æœ‰å¯¦ä½œå° shape äº¤é»æ¸¬è©¦çš„ã€‚ç”±æ–¼æŠŠç‰©ä»¶è½‰æˆ triangleMesh å…¶å¯¦å°±ç¡¬æ˜¯å¤šä¸€å€‹æ­¥é©Ÿäº†å•Šï¼Œå¦‚æœå¯ä»¥èˆ‡ shape ç›´æ¥æ±‚äº¤é»ï¼Œé‚£é€Ÿåº¦ä¸Šç•¶ç„¶æœƒå¤§èºé€²~ å¯¦ä½œ heightfield äº¤é»æ¸¬è©¦Heightfield å…¶å¯¦å°±æ˜¯å¹³é¢ä½†æ˜¯æœ‰é«˜ä½å·®ï¼Œä¹Ÿå°±æ˜¯èªªï¼Œå°æ¯å€‹ è€Œè¨€åªæœƒæœ‰ä¸€å€‹ å€¼ã€‚ç®—æ˜¯å€‹æ»¿å–®ç´”çš„ shapeã€‚Heightfield ä¹Ÿæ˜¯åŸæœ¬å°±æœ‰å¯¦ä½œçš„ä¸€ç¨® shapeï¼Œæ˜¯ç›´æ¥ç”¨ Refine() ä¾†æŠŠå½¢ç‹€è½‰ç‚º triangleMesh å†åšäº¤é»æ¸¬è©¦çš„ã€‚ å¦‚æœèƒ½å¤ è·³éä¸‰è§’åŒ–è€Œç›´æ¥èˆ‡ heightfield åšäº¤é»æ¸¬è©¦ï¼Œå¯èƒ½å¯ä»¥æ¯”è¼ƒå¿«å–”ï¼Ÿåƒè€ƒä¸€ä¸‹åˆ¥çš„ shapeï¼ŒåŒ…å«çƒé«”ã€åœ“æŸ±é«”ç­‰å¯¦ä½œçš„äº¤é»æ¸¬è©¦çš„æ–¹æ³•éƒ½æ˜¯åœ¨å¹¾ä½•æ„ç¾©ä¸Šç›´æ¥æ±‚äº¤é»ï¼Œä¹Ÿå°±æ˜¯ç®—æ•¸å­¸æ±‚è§£å“ˆå“ˆä½† heightfield ä¼¼ä¹æ˜¯æ²’è¾¦æ³•å¾å¹¾ä½•æ„ç¾©ä¸Šç›´æ¥è§£äº†ï¼Œéœ€è¦ç”¨æ›´æš´åŠ›çš„æ–¹æ³• é€™é‚Šæˆ‘æ˜¯ä½¿ç”¨ DDA(digital differential analyzer) ä¾†åšäº¤é»æ¸¬è©¦ï¼Œé€™æ±è¥¿å…¶å¯¦åŸæœ¬æ˜¯æ‹¿ä¾†ç•«ç·šçš„æ¼”ç®—æ³•ï¼Œå› ç‚ºå¯¦éš›ä¸Šçš„ç·šæ˜¯é€£çºŒçš„ï¼Œä½†æ˜¯å‘ˆç¾åœ¨é›»è…¦ä¸Šå»å¿…é ˆä»¥ pixel ç‚ºå–®ä½å‘ˆç¾ã€‚è€Œé€™é‚Šèˆ‡ heightfield çš„äº¤é»æ¸¬è©¦å°±æ˜¯å°‡ DDA æ“´å±•è‡³ä¸‰ç¶­ç©ºé–“ä¸­(å¤šäº†Zè»¸)ã€‚ 2D-DDA é‚è¼¯ã€‚[2] å¯ä»¥çœ‹åˆ°å…¶å¯¦å¯ä»¥åœ¨ä¸€é–‹å§‹å°±ç®—å‡ºx, yè¦èµ°å¤šå°‘æœƒåˆ°ä¸‹ä¸€å€‹ pixelï¼Œé€™äº›éƒ½æ˜¯å®šå€¼ï¼Œä¹Ÿè®“éæ­·æ•´å€‹ Pixel-Grid è®Šå¾—å¾ˆå®¹æ˜“ï¼Œè€Œ 3D-DDA å°±åªæ˜¯å†åŠ å…¥ z è»¸çš„è³‡è¨Šï¼Œä¸¦ä¸”æ¯ä¸€å€‹ pixel è®Šæˆ voxelã€‚3D-DDA é€™æ¨£çš„æ–¹å¼å…¶å¯¦åœ¨ pbrt è£¡é¢å·²æœ‰å¯¦ä½œï¼Œæ˜¯ä¾†ä½œç‚ºåŠ é€Ÿçµæ§‹ç”¨é€”ï¼Œä½†æ˜¯ç”±æ–¼ heightfield æœ¬èº«ç‰¹æ€§(å°æ¯å€‹ è€Œè¨€åªæœƒæœ‰ä¸€å€‹ å€¼)ï¼Œæˆ‘å€‘å¯ä»¥è®“ Voxel çš„é«˜åº¦ç­‰æ–¼ heightfield çš„é«˜åº¦ï¼Œå¦‚æ­¤ä¸€ä¾†å°±å¯ä»¥è®“3Dçµæ§‹çš„ heightfield å¥—ç”¨ 2D-DDA äº†ï¼è€¶~~~ å»ºå¥½ DDA éœ€è¦çš„è³‡è¨Šå¾Œï¼Œæ¥ä¸‹ä¾†å°±æ˜¯è¦å¯¦ä½œ Ray äº¤é»æ¸¬è©¦äº†ï¼Œåœ¨éæ­· Voxel çš„éç¨‹ä¸­ï¼Œéœ€è¦é‡å°é€™å€‹ Voxel åšäº¤é»æ¸¬è©¦ï¼Œå¦‚æœæœ‰äº¤é»å°±çµæŸäº†ï¼›æ²’æœ‰å°±åˆ°ä¸‹å€‹ Voxelã€‚è€Œé—œæ–¼æ¯å€‹ Voxel çš„äº¤é»æ¸¬è©¦å…¶å¯¦ä¹Ÿæ˜¯æ»¿å–®ç´”çš„ï¼Œåœ¨è¨­è¨ˆ DDA çš„çµæ§‹æ™‚ï¼Œé™¤äº†è®“ Voxel é«˜ç­‰æ–¼ heightfield é«˜ï¼Œå¯ä»¥è®Šæˆ 2D-DDA ä»¥å¤–ï¼Œè®“ Voxel çš„å¯¬ç­‰æ–¼ä¸€å€‹å–®ä½çš„ x åŠ y ä¹Ÿæ˜¯æœ‰å¾ˆå¤§çš„å¥½è™•çš„ï¼Œå¦‚ä¸‹åœ–: å¾æ­£ä¸Šæ–¹çœ‹ä¸‹ä¾†çš„ heightfield æ¨£å­ï¼Œæ•¸å€¼ç‚ºå°æ‡‰ z å€¼ã€‚è®“ Voxel å¯¬åº¦ç­‰æ–¼ä¸€æ ¼å¯¬æœ‰å¥½è™•ã€‚ ä¾æ“šé€™æ¨£çš„è¨­è¨ˆï¼Œæ¯æ¬¡åœ¨åš Voxel äº¤é»æ¸¬è©¦æ™‚ï¼Œå¯ä»¥çŸ¥é“é€™ Voxel ä¸­å°±æ˜¯åŒ…å«å…©å€‹ä¸‰è§’å½¢ï¼›ä¹Ÿå°±æ˜¯èªªåˆ†åˆ¥å°é€™å…©å€‹ä¸‰è§’å½¢åšäº¤é»æ¸¬è©¦å°±å¥½äº†~~ æ ¹æ“šé€™æ¨£çš„ç®—æ³•ï¼Œå°±å¯ä»¥å¾—å‡ºèˆ‡åŸæœ¬ç›´æ¥ä¸‰è§’åŒ–çš„åšæ³•ä¸€æ¨¡ä¸€æ¨£çš„çµæœ: ç”¨ç›´æ¥æ±‚äº¤é»çš„æ–¹å¼å–ä»£åŸæœ¬å…ˆåšä¸‰è§’åŒ–çš„æ–¹æ³•ã€‚ å¹³æ»‘åŒ–çœ‹çœ‹ä¸Šåœ–çš„çµæœï¼Œçœ‹å¾—å‡ºéƒ½æ˜¯ä¸€é¢ä¸€é¢çš„ä¸‰è§’å½¢é¢ï¼Œé€™æ˜¯å› ç‚ºåŒä¸€å€‹é¢ä¸Šæ‰€æœ‰é»éƒ½æ˜¯ä¸€æ¨£çš„æ³•å‘é‡ï¼Œæ‰€ä»¥åå°„è§’åº¦ä¹Ÿéƒ½ä¸€æ¨£ï¼Œè‡ªç„¶å°±æˆé€™å‰¯å¾·æ€§ã€‚å¦‚æœè¦åšå¹³æ»‘åŒ–çš„è©±å°±å¿…é ˆå…§æ’ä¸‰è§’å½¢å…§éƒ¨çš„é»çš„æ³•å‘é‡ï¼Œä½¿å¾—ä¸‰è§’é¢åå°„å…‰æœƒçœ‹èµ·ä¾†æ»‘é †ä¸€é»ã€‚ ä¸‰è§’åŒ–å¾Œæ¯å€‹é» M éƒ½æœ‰å…­å€‹é„°å±…ã€‚ é€™é‚Šæˆ‘æ˜¯ç›´æ¥å¹³å‡æ³•å‘é‡ä¾†é”æˆé€™æ¨£çš„æ•ˆæœï¼Œç”±æ–¼ä¸‰è§’åŒ–ä¹‹å¾Œæ¯å€‹é»æœƒæœ‰å…­å€‹é„°å±…ï¼›é» M çš„é„°å±…æœ‰ TLã€Tã€Rã€BRã€Bã€L å…­é»ï¼Œé» M çš„æ³•å‘é‡å¯ä»¥è—‰ç”±ä»»æ„å…©å‘é‡å¤–ç©å¾—å‡ºã€‚ é‚£æˆ‘å°±å¹³å‡ä¸€ä¸‹å…­å€‹æ³•å‘é‡ä¾†ç•¶ä½œçœŸæ­£çš„æ³•å‘é‡ï¼Œä»¥ M ç‚ºåŸé»ï¼Œå¯ç®—å‡ºå¹³å‡æ³•å‘é‡ç‚º: é€™æ¨£å­æ”¹é€²å¾Œï¼Œå°±å¯ä»¥è®“çµæœè®Šé€™æ¨£: å¹³æ»‘åŒ–çš„çµæœ æµ®é»æ•¸ç²¾åº¦å•é¡Œ(10/22 æ›´æ–°)åšå®Œå¹³æ»‘åŒ–ä¹‹å¾Œï¼Œæ„Ÿè¦ºæµ·å¥½åƒæ€ªæ€ªçš„æ­â€¦.ä¸€é–‹å§‹å…¶å¯¦æˆ‘é‚„æ²’å¯Ÿè¦ºï¼Œéé€™éº¼ä¹…æ‰ç™¼ç¾é€™å•é¡Œâ€¦ å¾ˆé¡¯ç„¶åªæœ‰æµ·æœ‰é€™æ¨£çš„å•é¡Œï¼Œå…«æˆæ˜¯å› ç‚ºæµ·çš„ å€¼å·®è·å¤ªå°ï¼Œè¨ˆç®—æ³•å‘é‡æ™‚çš„èª¤å·®ã€‚ç”¨é€™æ¨£çš„æ€ç¶­å»è¿½æŸ¥ç¨‹å¼å¾Œï¼Œç™¼ç¾æˆ‘åŸæœ¬åœ¨ç®—å…­å€‹æ³•å‘é‡ç¸½å’Œå¾Œæœ‰åš Normalize(sumOfNormals)ï¼Œé€™æ­¥é©Ÿé€ æˆ å€¼èµ·ä¼å¤ªå°çš„æµ·çš„è¨ˆç®—èª¤å·®â€¦.æŠŠ Normalize() æ‹”æ‰ä¹‹å¾Œå°±æ­£å¸¸äº†ï½ ä¿®æ­£æµ®é»æ•¸ç²¾åº¦å•é¡Œå¾Œçš„çµæœ åŠ é€Ÿå¾ˆå¯æƒœçš„æ˜¯æˆ‘åšå®Œä»¥å¾Œï¼Œé€Ÿåº¦æ²’æœ‰æƒ³åƒä¸­çš„å¿«é€Ÿï¼Œåè€Œæ¯”åŸæœ¬çš„é‚„æ…¢äº†å…©å€ä»¥ä¸Šâ€¦.å—šå—šå—šâ€¦.ç¨å¾®çœ‹çœ‹åˆ¥çš„ shape çš„äº¤é»æ¸¬è©¦ï¼Œå…¶å¯¦æœ‰å¾ˆå¤šæ™‚å€™æœƒå…ˆè·Ÿ Bbox(Bounding Box) åšæ¸¬è©¦ï¼Œå› ç‚ºèˆ‡ Bbox äº¤é»æ˜¯å®¹æ˜“å¾ˆå¤šçš„ï¼Œå¦‚æœèˆ‡ Bbox ç„¡äº¤é»å°±ä¹Ÿä¸ç”¨ç¹¼çºŒåšä¸‹å»äº†ã€‚åœ¨ Voxel äº¤é»æ¸¬è©¦ä¸­ï¼Œä¹Ÿæ‡‰ç•¶å…ˆèˆ‡æ•´å€‹ Voxel åšæ¸¬è©¦ï¼Œç¢ºå®šæœ‰äº¤é»å†å»è©¦è£¡é¢çš„å…©å€‹ä¸‰è§’å½¢ï¼Œé€™æ¨£å°±å¯ä»¥çœä¸‹å¾ˆå¤§é‡çš„åšç™½å·¥ã€‚ ä½†é€™æ¨£åšå®Œé‚„æ˜¯ä¸å¤ å¥½ï¼Œæ‰€ä»¥æˆ‘åˆ©ç”¨ CPU profiling ä¾†æ¸¬è©¦æˆ‘çš„ç¨‹å¼çš„ç“¶é ¸åˆ°åº•åœ¨å“ªè£¡â€¦.åˆ©ç”¨é€™æ¨£çš„æª¢æ¸¬ï¼Œæˆ‘é™¸çºŒåšäº†å¹¾æ¬¡å„ªåŒ–: åŸå› åŠæ”¹å–„æ–¹æ³• Intersect() èˆ‡æœªæœ€ä½³åŒ–æ™‚æ¯”è¼ƒ æœªæœ€ä½³åŒ–ã€‚ 90,274 100.0% ç™¼ç¾ ObjectBound() å¾ˆæ…¢ï¼Œæ”¹åœ¨ Heightfield construction æ™‚å°±å…ˆå­˜ minZ, maxZã€‚ 82,731 91.6% ç™¼ç¾åœ¨ç®— Voxel BBox ä½¿ç”¨çš„ Bbox(Union(Bbox, Bbox)) è¶…çˆ†æ…¢ï¼Œæ”¹ç”¨ Bbox(Point, Point)ã€‚ 53,408 59.1% ç™¼ç¾æœ‰ä¸å¿…è¦çš„åæ¨™ç³»è½‰æ›ï¼Œç”±æ–¼åœ¨ Voxel äº¤é»æ¸¬è©¦ä¸­æœƒå…ˆæ¸¬èˆ‡ Voxel Bbox äº¤é»ï¼Œæ‰€ä»¥æœ€å¥½ç›´æ¥çµ¦ä»–å·²è½‰å¥½çš„ Ray(Object Space)ã€‚ 46,922 51.9% ç”±æ–¼ Bbox(Point, Point) å»ºæ§‹æ™‚éƒ½è¦é‡æ–°åˆ¤æ–· min maxï¼Œæ”¹ç”¨å…ˆå»ºæ§‹ç©ºçš„ Bbox å†ç›´æ¥çµ¦å€¼(pmin, pmax)çœå»å»ºæ§‹æ™‚é–“ã€‚ 36,768 40.7% æŠŠç”¨ä¸åˆ°çš„ Bbox çµ¦ Voxel äº¤é»æ¸¬è©¦ä¸­å†åˆ©ç”¨ï¼Œç¯€çœ Construction Time(é¿å…é‡æ–° relocate è¨˜æ†¶é«”ä½ç½®ä»¥åŠå»ºæ§‹ç©º Bbox çš„æ™‚é–“)ã€‚ 32,742 36.2% Intersect() æ¬„çš„æ•¸å­—æ˜¯æŒ‡ CPU æ¡æ¨£æ™‚è½åœ¨é€™å‡½å¼çš„ç¸½æ¨£æœ¬æ•¸ï¼Œè¶Šå¤šè¡¨ç¤ºåŸ·è¡Œæ™‚é–“è¶Šé•· æ¸¬è©¦çš„æ˜¯ landsea-2.pbrtï¼Œä¸¦ä¸”ä½¿ç”¨ â€“ncores 1 ä»¥æ¸›å°‘å¤šåŸ·è¡Œç·’çš„èª¤å·® ç¶“éå¹¾æ¬¡æœ€ä½³åŒ–å¾Œï¼ŒæˆåŠŸå£“ä½åŸ·è¡Œæ™‚é–“(å–®ä½ç‚ºç§’)ï¼Œæ•ˆèƒ½æ¯”è¼ƒå¦‚ä¸‹: æ•ˆèƒ½æ¯”è¼ƒã€‚[3] é›œè«‡èªªçœŸçš„é€™å¤§æ¦‚æ˜¯æˆ‘åšéæ•¸ä¸€æ•¸äºŒé›£çš„ä½œæ¥­äº†ï¼Œè€Œä¸”ç«Ÿç„¶åªæ˜¯ä½œæ¥­ä¸€â€¦.å…¶å¯¦å¯«çš„éç¨‹ä¹Ÿä¸æ˜¯æˆ‘è‡ªå·±æƒ³åˆ°çš„ï¼Œè€å¸«ä¹Ÿæœ‰çµ¦æç¤ºï¼Œç”šè‡³ç¶²è·¯ä¸Šå…¶å¯¦æ ¹æœ¬æœ‰ç­”æ¡ˆâ€¦.(ä¸è¦‹å¾—æ˜¯æœ€ä½³è§£å°±æ˜¯äº†)ç‚ºäº†é€™ä½œæ¥­æˆ‘ç”šè‡³é‚„ä¸Š Stack overflow å•äº†äººç”Ÿç¬¬ä¸€å€‹å•é¡Œ å“ˆå“ˆ(é›–ç„¶å•é¡Œè·Ÿæ¼”ç®—æ³•æ²’é—œä¿‚)åªèƒ½èªªä¸æ„§æ˜¯ Stanford çš„é¡Œç›®å›‰ï¼Ÿ è¨»: [1] å¯ä»¥çœ‹é€™ç¯‡ä»‹ç´¹ IKEA æ¸²æŸ“å‹éŒ„ [2] åŸåœ–ä¾†è‡ª Physically Based Rendering, Second Edition [3] åŸ·è¡Œæ™‚é–“ç”¨ bash å…§å»º time æŒ‡ä»¤ä¾†é‡æ¸¬","categories":[],"tags":[{"name":"c++","slug":"c","permalink":"https://ssarcandy.tw/tags/c/"},{"name":"rendering","slug":"rendering","permalink":"https://ssarcandy.tw/tags/rendering/"},{"name":"pbrt","slug":"pbrt","permalink":"https://ssarcandy.tw/tags/pbrt/"}]},{"title":"ä¸€äº› Python ç­†è¨˜","slug":"python-note","date":"2016-09-09T16:28:57.000Z","updated":"2025-10-22T00:51:26.606Z","comments":true,"path":"2016/09/09/python-note/","link":"","permalink":"https://ssarcandy.tw/2016/09/09/python-note/","excerpt":"æœ€è¿‘çš„å°ˆæ¡ˆéœ€è¦ç”¨åˆ° OpenCVï¼Œå®˜æ–¹æœ‰æä¾› C++ ä»¥åŠ Python çš„ç‰ˆæœ¬ã€‚æˆ‘ä»¥å‰éƒ½ç”¨ C++ï¼Œé€™æ¬¡æƒ³èªªä¾†æ›æ›å£å‘³ä½¿ç”¨ Python å¥½äº†ï¼Œå¦‚æœç”¨çš„é †æ‰‹ä»¥å¾Œå°±éƒ½é€™æ¨£æ­é…è‘—ç”¨(Python + OpenCV)ã€‚èªªæ˜¯é€™æ¨£èªªï¼Œä½†å…¶å¯¦æˆ‘å° Python æ ¹æœ¬ä¸€ç«…ä¸é€šï¼Œå¾ä¾†æ²’åœ¨æ¯”è¼ƒå¤§çš„å°ˆæ¡ˆä¸­ä½¿ç”¨éï¼Œæ‰€ä»¥æ–°æ‰‹å¦‚æˆ‘è‡ªç„¶å°±é‡åˆ°å¾ˆå¤šå‘(?)","text":"æœ€è¿‘çš„å°ˆæ¡ˆéœ€è¦ç”¨åˆ° OpenCVï¼Œå®˜æ–¹æœ‰æä¾› C++ ä»¥åŠ Python çš„ç‰ˆæœ¬ã€‚æˆ‘ä»¥å‰éƒ½ç”¨ C++ï¼Œé€™æ¬¡æƒ³èªªä¾†æ›æ›å£å‘³ä½¿ç”¨ Python å¥½äº†ï¼Œå¦‚æœç”¨çš„é †æ‰‹ä»¥å¾Œå°±éƒ½é€™æ¨£æ­é…è‘—ç”¨(Python + OpenCV)ã€‚èªªæ˜¯é€™æ¨£èªªï¼Œä½†å…¶å¯¦æˆ‘å° Python æ ¹æœ¬ä¸€ç«…ä¸é€šï¼Œå¾ä¾†æ²’åœ¨æ¯”è¼ƒå¤§çš„å°ˆæ¡ˆä¸­ä½¿ç”¨éï¼Œæ‰€ä»¥æ–°æ‰‹å¦‚æˆ‘è‡ªç„¶å°±é‡åˆ°å¾ˆå¤šå‘(?) æˆ‘é€™æ¬¡å°ˆæ¡ˆæ˜¯ Python 2.7 + OpenCV 3.1ã€‚å®‰è£ OpenCV ä¸€ç›´éƒ½æ˜¯å¾ˆéº»ç…©çš„äº‹æƒ…ï¼ŒC++ çš„å…ä¸äº†è¦è‡ªå·± buildï¼Œè©³ç´°çš„æ–¹æ³•åœ¨æˆ‘ä¹‹å‰å¯«çš„å¦ä¸€ç¯‡æœ‰æ•™å­¸ï¼›è€Œ Python å®‰è£ OpenCV ç¨å¾®ç°¡å–®ä¸€é»ï¼ŒæŠŠ cv2.pyd æ”¾åˆ° C:\\Python27\\Lib\\site-packages å°±å¯ä»¥äº† [1]ã€‚åœ¨ Mac&#x2F;Linux ä¸Šæ›´ç°¡å–®ï¼Œå¯ä»¥ä½¿ç”¨ conda [2] ä¾†å¹«ä½ å®‰è£ã€‚ å¥½ï¼Œæ¥ä¸‹ä¾†å°±æ˜¯ç”¨åˆ°ç¾åœ¨æ‰€åšçš„ä¸€äº›ç­†è¨˜ï½ Coding-stylePython çš„ Coding-style åŸºæœ¬ä¸Šå°±æ˜¯åƒè€ƒ PEP8ï¼Œç°¡çµä¸€ä¸‹é‡é»: ç¸®æ’ç”¨ç©ºæ ¼ ä¸€è¡Œä¸è¦è¶…é 80 å€‹å­—å…ƒï¼Œè¶…éå°±æ›è¡Œã€‚ é™¤äº† ClassName ä»¥å¤–ï¼Œä¸€å¾‹ç”¨ snake_case ç‚ºå‘½åè¦å‰‡ã€‚ æ–‡ä»¶é¦–è¡Œè¦åŠ ä¸Šç·¨ç¢¼ï¼Œä¸€èˆ¬ utf-8 å°±æ˜¯åŠ ä¸Šé€™è¡Œ # -*- coding: utf-8 -*- DivisionPython2 çš„é™¤æ³•å¾ˆç‰¹åˆ¥ï¼Œç«Ÿç„¶åªé™¤åˆ°æ•´æ•¸ï¼Œæ„æ€å°±æ˜¯ 5 / 2 = 2ï¼Œä¸éé€™å…¶å¯¦å°±è·Ÿ C++ ä¸€æ¨£å˜›ï¼Œå¼·åˆ¶è½‰å‹ä¸€ä¸‹å°±å¥½: 123print(5 / 2) # æœƒç„¡æ¢ä»¶æ¨å»å°æ•¸é»ï¼Œå°å‡º 2print(5 / 2.0) # 2.5print(5 / float(2)) # 2.5 ä¸éé€™æ¨£å¥½éº»ç…©ï¼Œæœ‰æ²’æœ‰ä¸€å‹æ°¸é€¸çš„æ–¹æ³•ï¼Ÿæœ‰ï¼å°±æ˜¯ç”¨ç¥å¥‡çš„ __future__ 12# åœ¨æ–‡ä»¶é–‹é ­è™•åŠ ä¸Šé€™è¡Œfrom __future__ import division future æ˜¯ Python2 å¾ˆç‰¹åˆ¥çš„æ±è¥¿ï¼Œæ„Ÿè¦ºä¸Šå°±æ˜¯æŠ“ Python3 çš„åŠŸèƒ½ä¾†ç”¨ï¼Œè€Œé€™é‚Š import division å°±æ˜¯ä½¿é™¤æ³•çš„è¡Œç‚ºèˆ‡ Python3 ä¸€è‡´ï¼Œè©³ç´°é‹ä½œåŸç†å¯ä»¥åƒè€ƒ stackoverflow ä¸Šçš„èªªæ³•: The internal difference is that without that import, / is mapped to the __div__() method, while with it, __truediv__() is used. Classç¶²è·¯ä¸Šæœ‰è¨±å¤šå®£å‘Š Class çš„æ•™å­¸ï¼Œä¸éå¥½åƒå¤§éƒ¨åˆ†çš„éƒ½ä¸å°æˆ–éæ™‚äº†ã€‚åœ¨ Python2 ä¸­ï¼ŒClass å®£å‘Šæ–¹å¼å¦‚ä¸‹ï¼š class.py123456789101112131415class Foo(object): def __init__(self): self.bar1 = &#x27;hello&#x27; self.bar2 = &#x27;world&#x27; def hello_world(self): print(self.bar1 + &#x27; &#x27; + self.bar2) def __private_func(self): print(&#x27;I am private function&#x27;) foo = Foo() # new ä¸€å€‹æ–°çš„ Foofoo.hello_world() # ä¸ç”¨å¸¶ä»»ä½•åƒæ•¸foo.__private_func() # ç„¡æ³•å‘¼å«ï¼Œæœƒå™´ Error: AttributeError: &#x27;Foo&#x27; object has no attribute &#x27;__private_func&#x27; ç¬¬ä¸€è¡Œçš„ object æ˜¯å¿…é ˆçš„ã€‚ __init__ é€™å€‹ function ä¹Ÿæ˜¯å¿…é ˆçš„ï¼Œé€™æ˜¯ Class Constructorã€‚ æ¯å€‹ function çš„ç¬¬ä¸€å€‹åƒæ•¸å¿…é ˆæ”¾ selfï¼Œé€™èˆ‡ C++ Class ä¸­çš„ this ç›¸ä¼¼ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯æ‹¿ä¾†å­˜å–è‡ªå·±ç”¨çš„ã€‚ ä¾‹å¦‚ hello_world() ä¸­å°±æœ‰å­˜å– bar1 è·Ÿ bar2ï¼Œè€Œåœ¨å‘¼å«æ™‚ self æœƒè¢«è·³éã€‚ å¦‚æœè¦å¯« private method [3]ï¼Œå°±åœ¨ function name å‰åŠ ä¸Šé›™åº•ç·š __ï¼Œå¦‚åŒä¸Šé¢çš„ç¬¬ 9 è¡Œè™•ã€‚ Pathæª”æ¡ˆè·¯å¾‘ä¹Ÿæ˜¯ä¸€å€‹æ»¿éº»ç…©çš„äº‹æƒ…ï¼Œå‡è¨­è¦è®€ä¸€å€‹æª”æ¡ˆï¼Œä¸€é–‹å§‹å¯èƒ½æœƒé€™æ¨£å¯«ï¼š 1cv2.imread(&#x27;../data/foo.jpg&#x27;) # cv2.imread æ˜¯ opencv çš„è®€åœ–å‡½å¼ é€™æ¨£ç•¶ç„¶å¯ä»¥è®€çš„åˆ°ï¼Œä½†ç•¶ä½ æ›äº†ä¸€å€‹å·¥ä½œç’°å¢ƒï¼Œåƒæ˜¯ Windowsï¼Œé€™æ¨£å¯«å°±ç‚¸äº†ï½(å› ç‚º Window è·¯å¾‘æ˜¯ç”¨åæ–œç·š \\)Python æä¾›äº†å€‹å¥½å·¥å…· os.path.join()ï¼Œç°¡å–®ä¾†èªªå°±æ˜¯å¹«å¿™è™•ç†æ–œç·šã€‚æ‰€ä»¥ä¸Šé¢é‚£å€‹ä¾‹å­å¯ä»¥æ”¹å¯«æˆé€™æ¨£ï¼š 12import oscv2.imread(os.path.join(&#x27;..&#x27;, &#x27;data&#x27;, &#x27;foo.jpg&#x27;)) é€™æ¨£çš„å¯«æ³•å°±å¯ä»¥é †åˆ©åœ°åœ¨å„å¹³å°é‹ä½œï½ï¼ Function name and Variable nameæ¯å€‹ç¨‹å¼èªè¨€éƒ½æœ‰ä¿ç•™å­—ï¼Œåƒæ˜¯ for, while, if ä¹‹é¡çš„éƒ½æ˜¯å¸¸è¦‹çš„ä¿ç•™å­—ï¼Œè€Œ Python ä¹Ÿä¸ä¾‹å¤–ï¼Œä½ å¯ä»¥åœ¨é€™é‚Šçœ‹åˆ°å…¨éƒ¨çš„ä¿ç•™å­—ã€‚è€Œé€šå¸¸ function name ä¹Ÿè·Ÿä¿ç•™å­—ä¸€æ¨£ä¸èƒ½ç•¶ä½œè®Šæ•¸åç¨± [4]ã€‚ç‰¹åˆ¥çš„æ˜¯ Python å…è¨±è®Šæ•¸åç¨±èˆ‡ function åç¨±ä¸€æ¨£ï¼Œåƒæ˜¯ï¼š 123sum = sum([1,2,3,4,5]) # sum() is built-in function for pythonprint(sum) # 15print(sum([1,2,3,4,5])) # 15 ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹åˆ°ï¼ŒPython èƒ½å¤ æ¸…æ¥šçš„åˆ†è¾¨é€™å€‹ sum æ˜¯æŒ‡è®Šæ•¸é‚„æ˜¯å…§å»ºå‡½å¼ã€‚javascript å°±ä¸è¡Œï¼š 123btoa = btoa(&#x27;hello&#x27;) // btoa() is built-in function for javascriptconsole.log(btoa) // aGVsbG8=console.log(btoa(&#x27;hello&#x27;)) // Uncaught TypeError: btoa is not a function å¯ä»¥ç™¼ç¾åœ¨ç¬¬ä¸‰è¡Œå°±å™´éŒ¯äº†ï¼Œå› ç‚º btoa åœ¨ç¬¬ä¸€è¡Œå·²ç¶“è¢«è“‹æ‰äº†ï¼Œå¾Œé¢è¦ç”¨ btoa() å°±æœƒä»¥ç‚ºä½ æ˜¯æŒ‡é‚£å€‹è®Šæ•¸ï¼Œè€Œè®Šæ•¸ç•¶ç„¶ä¸æ˜¯ function å›‰ã€‚ The Zen of PythonPython ä½œè€… Tim Peters æŠŠä¸€é¦–è©©è—åœ¨ import this ä¸­ï¼Œ Beautiful is better than ugly.Explicit is better than implicit.Simple is better than complex.Complex is better than complicated.Flat is better than nested.Sparse is better than dense.Readability counts.Special cases arenâ€™t special enough to break the rules.Although practicality beats purity.Errors should never pass silently.Unless explicitly silenced.In the face of ambiguity, refuse the temptation to guess.There should be oneâ€“ and preferably only one â€“obvious way to do it.Although that way may not be obvious at first unless youâ€™re Dutch.Now is better than never.Although never is often better than right now.If the implementation is hard to explain, itâ€™s a bad idea.If the implementation is easy to explain, it may be a good idea.Namespaces are one honking great idea â€“ letâ€™s do more of those! å¯« Python å°±æ˜¯è¦è¿½æ±‚ä¹¾æ·¨ã€æ˜“è®€ã€ç°¡å–®ï¼Œé€™ä¹Ÿæ˜¯æˆ‘é€™å¹¾å‘¨ä½¿ç”¨ Python æ‰€æ„Ÿè¦ºåˆ°çš„ã€‚å†å¼•ç”¨ David è€å¸«æ‰€è¨€ï¼Œ å¯« Python å°±åƒæ˜¯åœ¨å¯« pseudo-code ä¸€æ¨£çˆ½ï¼ References cv.pyd å¯ä»¥åœ¨ build å¥½çš„ opencv è³‡æ–™å¤¾ä¸­æ‰¾åˆ°ã€‚ OpenCV ä¸èƒ½ç”¨ pip å®‰è£ï¼Œè€Œ conda æ˜¯é¡ä¼¼ pip çš„ Python å¥—ä»¶ç®¡ç†è»Ÿé«”ã€‚ Python æ˜¯æ²’æœ‰ private function çš„ï¼Œåªæ˜¯åœ¨ runtime è—‰ç”±æ›´æ”¹ function name ä¾†é”åˆ°é€™æ¨£çš„æ•ˆæœï¼Œè©³ç´°å¯ä»¥åƒè€ƒé€™ç¯‡ã€‚ å‡½å¼åå­ä¸ä¸€å®šä¸èƒ½ç•¶ä½œè®Šæ•¸åç¨±ï¼Œåœ¨ C&#x2F;C++ ä¸­æœƒæœ‰ Compile-time Errorï¼Œåœ¨ javascript ä¸­æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯æœƒè¦†è“‹å…¶å…§å®¹ã€‚ h1+ol { list-style-type: none; counter-reset: list-counter; padding-left: 0; } h1+ol li { position: relative; padding-left: 3em; } h1+ol li::before { counter-increment: list-counter; content: \"[\" counter(list-counter) \"] \"; position: absolute; left: 0; width: 25px; text-align: right; }","categories":[],"tags":[{"name":"note","slug":"note","permalink":"https://ssarcandy.tw/tags/note/"},{"name":"opencv","slug":"opencv","permalink":"https://ssarcandy.tw/tags/opencv/"},{"name":"python","slug":"python","permalink":"https://ssarcandy.tw/tags/python/"}]},{"title":"è«‡è«‡ vim plugin-manager","slug":"vim-plugin-manager","date":"2016-08-17T03:02:10.000Z","updated":"2025-10-22T00:51:26.606Z","comments":true,"path":"2016/08/17/vim-plugin-manager/","link":"","permalink":"https://ssarcandy.tw/2016/08/17/vim-plugin-manager/","excerpt":"æˆ‘ç”¨éäº†å¹¾ä¹æ‰€æœ‰æœ‰åçš„ vim plugin-managerï¼ŒåŒ…å« Pathogen, Vundle ä»¥åŠæ¯”è¼ƒæ–°çš„ vim-plugã€‚è€Œä»¥æ™‚é–“åºä¾†èªªä¹Ÿæ˜¯ Pathogen -&gt; Vundle -&gt; vim-plug å…ˆä¾†è«‡è«‡ç”¨éé€™ä¸‰å€‹åˆ†åˆ¥çš„æ„Ÿæƒ³å¥½äº†ï¼š","text":"æˆ‘ç”¨éäº†å¹¾ä¹æ‰€æœ‰æœ‰åçš„ vim plugin-managerï¼ŒåŒ…å« Pathogen, Vundle ä»¥åŠæ¯”è¼ƒæ–°çš„ vim-plugã€‚è€Œä»¥æ™‚é–“åºä¾†èªªä¹Ÿæ˜¯ Pathogen -&gt; Vundle -&gt; vim-plug å…ˆä¾†è«‡è«‡ç”¨éé€™ä¸‰å€‹åˆ†åˆ¥çš„æ„Ÿæƒ³å¥½äº†ï¼š Pathogenç°¡å–®å¥½ç”¨ï¼Œèˆ‡å…¶èªªæ˜¯ plugin-managerï¼Œå€‹äººè¦ºå¾—æ¯”è¼ƒåƒæ˜¯å€‹ç´”ç²¹çš„ run-time loaderï¼Œæ²’æœ‰ä»€éº¼å…¶ä»–çš„åŠŸèƒ½ã€‚ä½†å·²ååˆ†å¥½ç”¨ï¼Œè¦æ–°å¢ä»€éº¼ pluginï¼Œåªéœ€æŠŠ plugin çš„è³‡æ–™å¤¾æ”¾åœ¨ bundle/ åº•ä¸‹å°±å®Œå·¥äº†ï¼åˆªé™¤ä¹Ÿæ˜¯ï¼Œç›´æ¥ç æ‰ bundle/ åº•ä¸‹å°æ‡‰è³‡æ–™å¤¾å°±OK Vundleç›®å‰æ‡‰è©²æ˜¯é€™ä¸‰è€…ä¸­ github stars æœ€å¤šçš„ã€‚plugin å®‰è£æ–¹å¼æ˜¯åœ¨ .vimrc ä¸­å¯«ä½ è¦çš„ plugin name 1Plugin &#x27;tpope/vim-fugitive&#x27; ç„¶å¾Œåœ¨ vim ä¸­æ‰“ :PluginInstall å°±æœƒå¹«ä½ å®‰è£ã€‚ é€™æ¨£çš„å¥½è™•æ˜¯ä½ è£éä»€éº¼ä¸€ç›®äº†ç„¶ï¼Œè€Œä¸”åˆ°æ–°ç’°å¢ƒè¦é‡æ–°è¨­ç½®çš„æ™‚å€™ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œç›´æ¥:PluginInstallå°±å®Œæˆäº†ã€‚(å¦‚æœç”¨ Pathogen å°±å¿…é ˆè‡ªå·±æŠŠè¦ç”¨çš„ plugins clone ä¸‹ä¾†ã€‚) vim-plugæˆ‘ç›®å‰åœ¨ä½¿ç”¨çš„ plugin-manager ï¼Œçµ¦æˆ‘çš„æ„Ÿè¦ºå°±æ˜¯ Vundle çš„åŠ å¼·ç‰ˆã€‚æ–°å¢ plugin çš„æ–¹å¼è·Ÿ Vundle å¾ˆåƒ(åªæ˜¯é—œéµå­—ä¸åŒ)ï¼Œéƒ½æ˜¯åœ¨ .vimrc ä¸­å¯«ä½ è¦çš„ plugin name 1Plug &#x27;tpope/vim-fugitive&#x27; å®‰è£ä¹Ÿæ˜¯è·Ÿ Vundle å·®ä¸å¤šï¼Œé—œéµå­—ä¸ä¸€æ¨£è€Œå·² (:PlugInstall) æ¯”è¼ƒå²å®³çš„æ˜¯ vim-plug å¯ä»¥ on-demand loadingï¼åƒæ˜¯ vim-go(å¼·å¤§çš„ Golang Dev-plugin)ï¼Œé€™ç¨®åªæœ‰åœ¨å¯« golang æ™‚å€™æ‰è¦çš„ pluginï¼Œå°±æ‡‰è©²åªåœ¨å‰¯æª”åæ˜¯.goçš„æ™‚å€™è¼‰å…¥å°±å¥½ï¼›NERDTree ä¹Ÿæ˜¯ï¼Œæœ‰æ™‚å€™åªæ˜¯æ‰“é–‹ä¸€å€‹æª”æ¡ˆè¦ç·¨è¼¯è€Œå·²ï¼Œç”¨ä¸è‘—é€™å€‹å¥—ä»¶ï¼Œåªæœ‰ç•¶çœŸçš„è§¸ç™¼é–‹å•Ÿ NERDTree çš„æ™‚å€™å†è¼‰å…¥å°±å¥½ã€‚é€™äº› vim-plug éƒ½å¯ä»¥è¨­å®š(è¨­å®šæ–¹å¼è©³è¦‹ readme)ï¼Œå¤§å¹…æå‡ vim é–‹å•Ÿé€Ÿåº¦ï½ æ•ˆèƒ½æˆ‘å¾ Pathogen æ›åˆ° Vundle æ˜¯ç‚ºäº†å¯ä»¥å¾ˆå®¹æ˜“çš„åœ¨æ–°ç’°å¢ƒè¨­å®šå¥½ vimï¼Œè€Œå¾ Vundle æ›åˆ° vim-plug å‰‡æ˜¯ç‚ºäº†ä»–çš„ on-demand loadingã€‚ æ‰€ä»¥èªªåˆ°åº•æ•ˆèƒ½å·®å¤šå°‘ï¼Ÿå…¶å¯¦æˆ‘ä¸¦ä¸æ˜¯å€‹é‡åº¦ plugins ä½¿ç”¨è€…ï¼Œæœ‰åœ¨ç”¨çš„ plugins å¤§æ¦‚ 20 å€‹å§ã€‚æ‰€ä»¥å¾ Vundle æ›åˆ° vim-plug èªªå¯¦åœ¨ä¸¦æ²’æœ‰é¡¯è‘—æ•ˆèƒ½å·®ç•°ã€‚ä¸éé‚„æ˜¯å¯ä»¥çœ‹çœ‹åˆ¥äººçš„å¯¦é©— ä¸åŒ plugin-manager çš„é–‹å•Ÿé€Ÿåº¦(plug = vim-plug)ã€‚åœ–ç‰‡å‡ºè‡ª vim-plugins-and-startup-time ä¸é›£ç™¼ç¾ï¼Œæœ‰ on-demand loading çš„ plugin-manager é–‹å•Ÿé€Ÿåº¦æœƒå¿«ä¸å°‘ï¼Œä»¥åœ–ä¸­ç‚ºä¾‹å¤§æ¦‚éƒ½å¯ä»¥å¿«ä¸Šå€‹ 30% ï¼å¦‚æœæœ‰èˆˆè¶£ï¼Œä¹Ÿå¯ä»¥è‡ªå·±è©¦è©¦ vim çš„é–‹å•Ÿé€Ÿåº¦ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹çš„æ–¹æ³•æ¸¬é‡ã€‚ 1$ vim --startuptime vim.log è©³ç´°é–‹å•Ÿè³‡è¨Šéƒ½æœƒå¯«å…¥ vim.log References vim-plugins-and-startup-time vim.tw h1+ol { list-style-type: none; counter-reset: list-counter; padding-left: 0; } h1+ol li { position: relative; padding-left: 3em; } h1+ol li::before { counter-increment: list-counter; content: \"[\" counter(list-counter) \"] \"; position: absolute; left: 0; width: 25px; text-align: right; }","categories":[],"tags":[{"name":"vim","slug":"vim","permalink":"https://ssarcandy.tw/tags/vim/"}]},{"title":"ç”¨ Travis CI è‡ªå‹•éƒ¨å±¬ hexo åˆ° GitHub","slug":"hexo-auto-deploy","date":"2016-07-28T16:51:43.000Z","updated":"2025-10-22T00:51:26.605Z","comments":true,"path":"2016/07/28/hexo-auto-deploy/","link":"","permalink":"https://ssarcandy.tw/2016/07/28/hexo-auto-deploy/","excerpt":"å…¶å¯¦ hexo ä½œè€… TC å·²ç¶“æœ‰ç™¼éä¸€ç¯‡æ–‡ç« åœ¨è¬›é€™å€‹ä¸»é¡Œäº†ï¼Œä¹Ÿè¬›å¾—å¾ˆæ¸…æ¥šäº†ï¼ŒåŸºæœ¬ä¸ŠçŸ‡è‘—çœ¼ç›ç…§åšå°±è¡Œäº†ã€‚è€Œé€™ç¯‡ä¸»è¦æ˜¯å†è£œå……å¹¾å€‹ç´°ç¯€ã€‚","text":"å…¶å¯¦ hexo ä½œè€… TC å·²ç¶“æœ‰ç™¼éä¸€ç¯‡æ–‡ç« åœ¨è¬›é€™å€‹ä¸»é¡Œäº†ï¼Œä¹Ÿè¬›å¾—å¾ˆæ¸…æ¥šäº†ï¼ŒåŸºæœ¬ä¸ŠçŸ‡è‘—çœ¼ç›ç…§åšå°±è¡Œäº†ã€‚è€Œé€™ç¯‡ä¸»è¦æ˜¯å†è£œå……å¹¾å€‹ç´°ç¯€ã€‚ SSH KEYçŸ‡è‘—çœ¼ç…§åšé‚£ç¯‡ï¼Œåˆ°é€™è¡Œ: 1$ travis encrypt-file ssh_key --add é€™é‚Šæœƒå¹«ä½ ä¸Šå‚³ ssh_key åˆ° Travis ä¸Šï¼Œ --add é€™å€‹ flag å¯ä»¥å¹«ä½ æ’å…¥è§£å¯†æŒ‡ä»¤åˆ° .travis.yml çš„ before_install ã€‚ä¸éé€™ flag çœŸçš„å¾ˆæ©Ÿè»Šï¼ŒæœƒæŠŠä½ çš„ .travis.yml æ’ç‰ˆå…¨æäº‚ï¼Œé †ä¾¿æŠŠè¨»è§£åˆªå…‰å…‰ï¼å»ºè­°ä¸è¦åŠ  --add è‡ªå·±æ‰‹å‹•æ’å…¥è§£å¯†æŒ‡ä»¤ï¼Œæ’ç‰ˆå°±ä¸æœƒäº‚æ‰ã€‚è€Œä¸”ç”¨ Windows çš„äººæœƒåœ¨è§£å¯†æ–‡ä»¶æ™‚è«åå¤±æ•—ï¼Œæ‰€ä»¥åªèƒ½ç”¨ Mac æˆ– Unix ç’°å¢ƒåšé€™ä»¶äº‹(File decryption fails on Windows)ï¼Œè¶…é›·â€¦ å¦å¤–ï¼Œå¦‚æœå› æŸç¨®å¤©ç½äººç¦å°è‡´å¿˜è¨˜æˆ–æ²’è¾¦æ³•ç”¨æŒ‡ä»¤æ’å…¥è§£å¯†æŒ‡ä»¤ï¼Œé‚„æ˜¯å¯ä»¥ä¸Š Travis ä¸Šçš„è¨­å®šä¸­çœ‹åˆ°ç’°å¢ƒè®Šæ•¸åç¨±ã€‚ repository > more options å¯ä»¥è¨­å®šã€çœ‹åˆ° Travis çš„ç’°å¢ƒè®Šæ•¸ USE SSHTravis æ˜¯ç”¨ GitHub çš„ Deploy key ä¾†å­˜å– repository çš„ï¼Œé—œæ–¼å¦‚ä½•ç”¢ç”Ÿä»¥åŠè¨­å®š Deploy key éƒ½ç…§è‘— TC é‚£ç¯‡æ–‡ç« åšå°±å¯ä»¥äº†ã€‚å¦‚æœä¸å¹¸åœ¨hexo deployæ™‚é‡åˆ°éŒ¯èª¤å¦‚ä¸‹: 12remote: Invalid username or password.fatal: Authentication failed for &quot;....&quot; é‚£å¯ä»¥æª¢æŸ¥ä¸€ä¸‹ hexo çš„_config.yml deployçš„éƒ¨åˆ†ï¼Œè¦ç”¨ ssh çš„å½¢å¼è¨­å®š repository _config.yml1234deploy: type: git repo: git@github.com:SSARCandy/ssarcandy.github.io.git branch: master SETTING UP .travis.ymlæˆ‘é€™å€‹ç¶²ç«™çµæ§‹å¦‚ä¸‹: [develop] -&gt; default branchï¼Œæˆ‘åœ¨é€™æ¢ branch æ–°å¢æ–‡ç« ã€ä¿®æ”¹æ¨£å¼ç­‰ç­‰[master] -&gt; æ”¾ static-filesï¼Œä¹Ÿå°±æ˜¯ hexo generate å‡ºä¾†çš„æ±æ± è®“ Travis è‡ªå‹•éƒ¨å±¬æ™‚ï¼ŒClone çš„æ˜¯ develop branchï¼Œ ç¶“éhexo generateå¾Œæ¨åˆ°master branch ä¸Šï¼Œç‚ºäº†é¿å… forced-updateï¼Œåœ¨.travis.ymlä¸­éœ€è¦å†è¨­å®šä¸€ä¸‹ã€‚ é™„ä¸Šæˆ‘çš„ .travis.ymlï¼ŒåŸºæœ¬ä¸Šè·Ÿ TC é‚£ç¯‡ 87% åƒå•¦â€¦ title: .travis.yml123456789101112131415161718192021222324252627282930313233language: node_jsnode_js: - &quot;4&quot; before_install: # Decrypt the private key - openssl aes-256-cbc -K $encrypted_d7634ff77415_key -iv $encrypted_d7634ff77415_iv -in .travis/ssh_key.enc -out ~/.ssh/id_rsa -d # Set the permission of the key - chmod 600 ~/.ssh/id_rsa # Start SSH agent - eval $(ssh-agent) # Add the private key to the system - ssh-add ~/.ssh/id_rsa # Copy SSH config - cp .travis/ssh_config ~/.ssh/config # Set Git config - git config --global user.name &quot;ssarcandy&quot; - git config --global user.email ssarcandy@gmail.com # Install Hexo - npm install hexo -g # Clone the repository - git clone https://github.com/SSARCandy/ssarcandy.github.io .deploy_git # My static-files store on master branch - cd .deploy_git &amp;&amp; git checkout master - cd .. script: - hexo generate - hexo deploy branches: only: - develop æ¯”è¼ƒéœ€è¦è§£èªªçš„æ˜¯é€™æ®µ 1234# Clone the repository- git clone https://github.com/SSARCandy/ssarcandy.github.io .deploy_git- cd .deploy_git &amp;&amp; git checkout master- cd .. .deploy_git æ˜¯ hexo æœƒç”¢ç”Ÿçš„è³‡æ–™å¤¾ï¼Œç”¨æ–¼ç´€éŒ„ git historyï¼Œä¸éç”±æ–¼æ¯æ¬¡ clone éƒ½æ˜¯å…¨æ–°çš„ï¼Œæ‰€ä»¥æ¯æ¬¡ .deploy_git ä¹Ÿéƒ½æœƒæ˜¯æ–°çš„ï¼Œé€™æœƒå°è‡´æ¯æ¬¡æ›´æ–°éƒ½æœƒæ˜¯ forced-updateã€‚æ‰€ä»¥ï¼Œè¤‡è£½ä¸€ä»½ repo (at master branch)ï¼Œä¸¦æ”¹åå«.deploy_gitå°±æ˜¯ç‚ºäº†è®“æ–°ç”¢ç”Ÿå‡ºçš„éœæ…‹æª”æ¡ˆå¯ä»¥æœ‰ä¹‹å‰çš„ git historyï¼Œå°±å¯ä»¥é¿å… forced-updateã€‚","categories":[],"tags":[{"name":"automation","slug":"automation","permalink":"https://ssarcandy.tw/tags/automation/"},{"name":"hexo","slug":"hexo","permalink":"https://ssarcandy.tw/tags/hexo/"}]},{"title":"è‡ªå‹•åˆ†äº«æ¯æ—¥å¤©æ–‡åœ–(APOD)åˆ° Dcard","slug":"bot-battle","date":"2016-07-26T16:16:45.000Z","updated":"2025-10-22T00:51:26.604Z","comments":true,"path":"2016/07/26/bot-battle/","link":"","permalink":"https://ssarcandy.tw/2016/07/26/bot-battle/","excerpt":"åŸæœ¬å…¶å¯¦åªæ˜¯è¦åšå€‹ Slack botï¼Œå› ç‚ºæˆ‘æ‡¶å¾—æ¯å¤©éƒ½ä¸Š APOD å®˜ç¶²çœ‹â€¦ä¹¾è„†åšå€‹ bot æ¯å¤©éƒ½æœƒåœ¨ä¸­åˆ 12:30 ç™¼ä»Šæ—¥çš„åœ–è·Ÿèªªæ˜åˆ° Slack channel è£¡ï½","text":"åŸæœ¬å…¶å¯¦åªæ˜¯è¦åšå€‹ Slack botï¼Œå› ç‚ºæˆ‘æ‡¶å¾—æ¯å¤©éƒ½ä¸Š APOD å®˜ç¶²çœ‹â€¦ä¹¾è„†åšå€‹ bot æ¯å¤©éƒ½æœƒåœ¨ä¸­åˆ 12:30 ç™¼ä»Šæ—¥çš„åœ–è·Ÿèªªæ˜åˆ° Slack channel è£¡ï½ è‡ªå‹•ç™¼æ–‡åˆ° slack channel è£¡ï¼Œç„¶å¾Œé‚„éš¨æ©Ÿæ­é…å…§å®¹è¾²å ´é¢¨æ ¼çš„ä¸€å¥è©±ã€‚ ä¸éé™¤äº†æˆ‘è‡ªå·±ä»¥å¤–å¥½åƒéƒ½æ²’ä»€éº¼äººæ§å ´ï¼Œå¹¾ä¹éƒ½è¢«ç„¡è¦– QQDavidè€å¸« é‚„è¡¨ç¤ºå¾ˆç…©è¦æˆ‘é—œæ‰ (æ˜æ˜ä¸€å¤©æ‰ Po ä¸€æ¬¡å•Šå•Šå•Š à² _à²  æ‰€ä»¥æˆ‘åªå¥½å¿ç—›å–æ¶ˆé€™å€‹ Slack botï¼Œæ”¹æˆç›´æ¥ç”¨ Direct message å‚³çµ¦ Davidè€å¸« XD çµæœ Davidè€å¸« ä¹Ÿåšäº†å€‹æ¯åŠå°æ™‚å°±ç™¼åè¨€ä½³å¥çµ¦æˆ‘çš„ botï¼Œå®³æˆ‘åªå¥½ä¹ŸæŠŠæˆ‘çš„ bot æ”¹æˆæ¯ååˆ†é˜éš¨æ©Ÿç™¼å¤©æ–‡åœ–çµ¦ä»–ï¼Œçœ‹èª°æ¯”è¼ƒè€å¾—ä½ç…©ï½ æ¯åŠå°æ™‚ç™¼çµ¦æˆ‘ä¸€å¥åè¨€ä½³å¥ï¼ŒçœŸæ˜¯ä¸–ç•Œç…©ã€‚ ç•¶ç„¶é€™ç¨®äº’ç›¸æ¯€æ»…çš„ bot å¤§æˆ°æŒçºŒæ²’å¤šä¹…å°±åœ¨é›™æ–¹è®“æ­¥ä¹‹ä¸‹éƒ½åœæ­¢äº†â€¦.. â€” ä»¥ä¸Šéƒ½æ˜¯å‰è¨€ â€” å³ä½¿ Slack ä¸Šéƒ½æ²’äººè¦é³¥æˆ‘ï¼Œæˆ‘é‚„æ˜¯ç§‰æŒè‘—æ¨å»£åŸºç¤å¤©æ–‡æ•™è‚²çš„å‰å¤§ç†å¿µï¼Œèªç‚ºå„ªè³ªçš„æ¯æ—¥å¤©æ–‡åœ–çš„ä¸æ‡‰è©²è¢«åŸ‹æ²’ï¼Œè¦è®“é€™æ¨£å„ªè³ªçš„å…§å®¹çµ¦æ›´å¤šäººæ¥è§¸åˆ°ï¼æœ€å¾Œçªç„¶æƒ³åˆ°ï¼šã€Œä¸ç„¶ä¹¾è„†ç™¼åœ¨ Dcard å»¢ç‰ˆå¥½äº†ï¼Œé‚£é‚Šæœ€å¤šäººåœ¨çœ‹äº†è€Œä¸”ä¸å—ç‰ˆè¦é™åˆ¶ã€å¯æ˜¯æ‡¶äººå¦‚æˆ‘æ˜¯ä¸å¯èƒ½æ¯å¤©ä¸Šå» Po æ–‡çš„ï¼Œæ‰€ä»¥åˆå¯«äº†å€‹ bot æ¯å¤©ä¸­åˆæˆ³ Dcard APIï¼Œç™¼å„ªè³ªå¤©æ–‡åœ–åˆ°å»¢ç‰ˆ(å»¢æ–‡ï¼Ÿ ç™¼å»¢æ–‡åˆ°å»¢ç‰ˆ çµæœæ„å¤–åæ‡‰é‚„ä¸éŒ¯ï¼Ÿé‚„æœ‰äººæƒ³è¦æˆ‘æ•´ç†ç³»åˆ—æ–‡ï¼Œä¸æ„§æ˜¯å»¢ç‰ˆç‰ˆå‹ï¼Œå°±æ˜¯æœ‰çœ¼å…‰ï¼ å¤§å®¶éƒ½å¾ˆæ§å ´ï¼Œè¦ºå¾—æº«é¦¨ â•°(ã€ï¸¶ã€) â•¯ ä¸çŸ¥é“è¦éå¤šä¹…æ‰æœƒæœ‰äººæœƒç™¼ç¾é€™éƒ½æ˜¯ bot åœ¨ç™¼æ–‡ XDD â€“æœ€å¾Œè‡ªå·±æ¨éŠ·ä¸€ä¸‹ï¼Œç”±æ–¼ APOD åªæœ‰ NASA æœ‰æä¾›å®˜æ–¹ APIï¼Œé™¤äº†è‹±æ–‡ä»¥å¤–å…¶ä»–èªè¨€çš„å­ç«™(åƒæ˜¯ä¸­æ–‡ç‰ˆ)éƒ½æ²’è¾¦æ³•ç°¡å–®çš„å–å¾—å…§å®¹ï¼Œæ‰€ä»¥æˆ‘å¯«äº†ä¸€å€‹ npm å¥—ä»¶ï¼Œå°ˆé–€è™•ç†å–å¾—æŒ‡å®šæ—¥æœŸã€æŒ‡å®šèªè¨€çš„ APOD å…§å®¹ã€‚Github: https://github.com/SSARCandy/node-apodDemo: http://ssarcandy.tw/node-apod/demo.html","categories":[],"tags":[{"name":"trashtalk","slug":"trashtalk","permalink":"https://ssarcandy.tw/tags/trashtalk/"},{"name":"automation","slug":"automation","permalink":"https://ssarcandy.tw/tags/automation/"}]},{"title":"Setting up OpenCV using Cmake GUI","slug":"Setting-up-OpenCV-using-Cmake-GUI","date":"2016-07-22T16:46:45.000Z","updated":"2025-10-22T00:51:26.604Z","comments":true,"path":"2016/07/22/Setting-up-OpenCV-using-Cmake-GUI/","link":"","permalink":"https://ssarcandy.tw/2016/07/22/Setting-up-OpenCV-using-Cmake-GUI/","excerpt":"Build OpenCV Download OpenCV and Cmake Build opencv with cmake Cmake configuration Press configure, choose visual studio 2015, finish Then press generate","text":"Build OpenCV Download OpenCV and Cmake Build opencv with cmake Cmake configuration Press configure, choose visual studio 2015, finish Then press generate Open OpenCV.sln under build/ Build it using Debug, Release Right click > build right click &gt; build switch to Release mode and build again [Windows] Setting up environment variable add &lt;opencv&gt;/bin into PATH Add new environment variable add new env named OpenCV_DIR, value as &lt;opencv&gt;/build it may need logout to apply setting, you can check it by echo %PATH%, echo %OpenCV_DIR% Build with EXTRA MODULES In step 2. Build opencv with cmake, press configure Set up OPENCV_EXTRA_MODULES_PATH to proper path(&lt;opencv_contrib&gt;/modules) Set OPENCV_EXTRA_MODULES_PATH as opencv_contrib/modules Press configure again, then generate To see more details instructions, see opencv_contrib README Travis.yml exampletitle: travis.yml12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061language: - cpp sudo: required compiler: - gcc # building opencv is time consuming, caching it is bettercache: apt: true ccache: true directories: - opencv-3.1.0 - opencv_contrib-3.1.0 install: # OpenCV dependencies - Details available at: http://docs.opencv.org/trunk/doc/tutorials/introduction/linux_install/linux_install.html - sudo apt-get install -y build-essential - sudo apt-get install -y cmake git libgtk2.0-dev pkg-config libavcodec-dev libavformat-dev libswscale-dev - sudo apt-get install -y python-dev python-numpy libtbb2 libtbb-dev libjpeg-dev libpng-dev libtiff-dev libjasper-dev libdc1394-22-dev # Download v3.1.0 .zip file and extract. - curl -sL https://github.com/Itseez/opencv/archive/3.1.0.zip &gt; opencv.zip - unzip -n opencv.zip &gt; log1 # Download EXTRA MODULES and extract. - curl -sL https://github.com/Itseez/opencv_contrib/archive/3.1.0.zip &gt; opencv_contrib.zip - unzip -n opencv_contrib.zip &gt; log2 # Create a new &#x27;build&#x27; folder. - cd opencv-3.1.0 - mkdir -p build - cd build # if Makefile is cached, then skip cmake opencv # Set build instructions for Ubuntu distro. - cat Makefile &gt; l1 || cmake -D OPENCV_EXTRA_MODULES_PATH=../../opencv_contrib-3.1.0/modules CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D WITH_TBB=ON -D BUILD_NEW_PYTHON_SUPPORT=ON -D WITH_V4L=ON -D INSTALL_C_EXAMPLES=ON -D INSTALL_PYTHON_EXAMPLES=ON -D BUILD_EXAMPLES=ON -D WITH_QT=ON -D WITH_OPENGL=ON .. # if Makefile is cached, then skip make opencv # Run &#x27;make&#x27; with four threads. - cat Makefile &gt; l2 ||make -j5 &gt; make_log # Install to OS. - sudo make install # Add configuration to OpenCV to tell it where the library files are located on the file system (/usr/local/lib) - sudo sh -c &#x27;echo &quot;/usr/local/lib&quot; &gt; /etc/ld.so.conf.d/opencv.conf&#x27; - sudo ldconfig - echo &quot;OpenCV installed.&quot; # We need to return to the repo &quot;root&quot; folder, so we can then &#x27;cd&#x27; into the C++ project folder. - cd ../../ - ls -al script: - cmake CMakeLists.txt - make - &quot;./a.out &gt; log1.txt&quot;","categories":[],"tags":[{"name":"note","slug":"note","permalink":"https://ssarcandy.tw/tags/note/"},{"name":"opencv","slug":"opencv","permalink":"https://ssarcandy.tw/tags/opencv/"},{"name":"cmake","slug":"cmake","permalink":"https://ssarcandy.tw/tags/cmake/"}]},{"title":"Travian å°äººé¡è¡Œç‚ºçš„å½±éŸ¿","slug":"Travian-Article-Submission","date":"2008-10-28T14:00:43.000Z","updated":"2025-10-22T00:51:26.604Z","comments":true,"path":"2008/10/28/Travian-Article-Submission/","link":"","permalink":"https://ssarcandy.tw/2008/10/28/Travian-Article-Submission/","excerpt":"Travian æœƒæ”¹è®Šä¸€å€‹äººçš„å„ç¨®è¡Œç‚ºã€‚ æˆ‘æ›¾ç¶“ç ”ç©¶éä¸€å€‹ç© Travian çš„åŒå­¸ï¼Œä½†æ‰ç ”ç©¶ä¸€å…©å€‹æ˜ŸæœŸï¼Œè‡ªå·±ä¹Ÿå°±è·‘å»ç©äº† ç—¾â€¦ ç ”ç©¶çµæœæ˜¯ï¼š Travian ç¢ºå¯¦æœƒå½±éŸ¿ä¸€å€‹äººçš„è¡Œç‚ºä¸¦ä¸”ç™¼ç¾å½±éŸ¿ç¨‹åº¦å¤§å°ä¾åºæ˜¯â”€â”€è…¦å­æ€ç¶­æ¨¡å¼ &gt; è¨˜æ†¶æœ‰é—œäº‹ç‰© &gt; ç®—æ•¸æ–¹é¢ &gt; åšäººè™•äº‹é“ç† æˆ–è¨±æœ‰äº›äººä¸é€™éº¼èªç‚ºï¼Œæ‰€ä»¥æˆ‘å°‡è¦ä¾å½±éŸ¿ç¨‹åº¦å¤§å°ä¾†è§£é‡‹ï¼š","text":"Travian æœƒæ”¹è®Šä¸€å€‹äººçš„å„ç¨®è¡Œç‚ºã€‚ æˆ‘æ›¾ç¶“ç ”ç©¶éä¸€å€‹ç© Travian çš„åŒå­¸ï¼Œä½†æ‰ç ”ç©¶ä¸€å…©å€‹æ˜ŸæœŸï¼Œè‡ªå·±ä¹Ÿå°±è·‘å»ç©äº† ç—¾â€¦ ç ”ç©¶çµæœæ˜¯ï¼š Travian ç¢ºå¯¦æœƒå½±éŸ¿ä¸€å€‹äººçš„è¡Œç‚ºä¸¦ä¸”ç™¼ç¾å½±éŸ¿ç¨‹åº¦å¤§å°ä¾åºæ˜¯â”€â”€è…¦å­æ€ç¶­æ¨¡å¼ &gt; è¨˜æ†¶æœ‰é—œäº‹ç‰© &gt; ç®—æ•¸æ–¹é¢ &gt; åšäººè™•äº‹é“ç† æˆ–è¨±æœ‰äº›äººä¸é€™éº¼èªç‚ºï¼Œæ‰€ä»¥æˆ‘å°‡è¦ä¾å½±éŸ¿ç¨‹åº¦å¤§å°ä¾†è§£é‡‹ï¼š æˆ‘åªæ˜¯æƒ³æ”¾ Travian çš„å»£å‘Šåœ–ã€‚ è…¦å­æ€ç¶­æ¨¡å¼åœ¨é€™è£¡æˆ‘å°‡èˆ‰å‡º4å€‹æ»¿çˆ†ç¬‘çš„å¯¦ä¾‹ä¾†è§£é‡‹ï¼Œæ€ç¶­æ¨¡å¼å¤§å¤§çš„è¢« Travian å½±éŸ¿ï¼ ç¬¬ä¸€ä»¶äº‹æœ‰ä¸€å¤©ï¼Œè€å¸«æ„Ÿå˜†æˆ‘å€‘ä¸­åˆå‰©èœå‰©é£¯å¤ªå¤šï¼Œæ–¼æ˜¯é–‹å§‹è¨“è©±ï¼šã€Œåœ°çƒä¸Šçš„è³‡æºæœ‰é™ï¼Œä½ å€‘æµªè²»ä¸€å£é£¯ï¼Œä¸–ç•Œä¸Šå°±æœ‰ä¸€å€‹äººå› ç‚ºæ²’æœ‰é€™ä¸€å£é£¯è€Œé¤“æ­»ï¼ã€ã€æ´ã€‘èªªï¼šã€Œå°é˜¿ï¼å°±ç®—åœ°çƒæœ‰ï¼‘ï¼•ï¼å€‹è¾²ç”°ï¼‹ï¼“å€‹é›™ç±³ç¶ æ´²ï¼‹é–‹é‡‘ï¼Œä¹Ÿæ²’è¾¦æ³•é¤Šæ´»å…­åå››å„„çš„äººé˜¿ã€‚ä½ å€‘é‚„ä¸€ç›´æµªè²»ç³§ï¼Ÿï¼ã€æˆ‘èªªï¼šã€Œå¯ä»¥å»æ¶åˆ¥äººç³§é˜¿ï¼¸ï¼¤ã€ã€æ´ã€‘é¦¬ä¸Šå›è©±èªªï¼šã€Œæ¶èª°ï¼Ÿï¼åœ°çƒä¸Šçš„äººéƒ½æ²’è³‡æºæ‹‰ï¼é›£é“ä½ è¦å»æ¶ç«æ˜Ÿé˜¿ã€æˆ‘ï¼šã€Œç—¾ç—¾ç—¾ï¼Œæœäº†ä½ â€¦ã€ ç¬¬äºŒä»¶äº‹ç•¶æ­·å²è€å¸«è¬›è¿°ç¾…é¦¬çš„æ™‚å€™èªªï¼šã€Œç•¶æ™‚äººæ°‘æœƒé¸å‡ºå…©å€‹åƒè­°å“¡ï¼Œä½†å¯¦æ¬Šå‰‡æ˜¯åœ¨å…ƒè€é™¢ä¸­â€¦ã€æˆ‘ç„¡æ„é–“å°±èªªå‡ºä¸€å¥è©±ï¼šã€Œå“‡ï¼å…©éš»åƒè­°å“¡è€¶ï¼å¥½å¼·é˜¿ã€ã€æ´ã€‘å›èªªï¼šã€Œæœ‰ç”šéº¼äº†ä¸èµ·ï¼æ–‡æ˜é»ä¸å¤ å°±è·Ÿå±ä¸€æ¨£ï¼ã€æˆ‘ï¼šã€Œä½ ä¸­çš„TRæ¯’ä¸€å®šæ¯”æˆ‘åš´é‡â€¦ã€ ç¬¬ä¸‰ä»¶äº‹æˆ‘å€‘åœ‹æ–‡è€å¸«å«æˆ‘å€‘ä¸€å¤©å¯«ä¸€å‰‡åè¨€ä½³å¥ï¼Œæœ‰ä¸€æ¬¡â€¦â€¦ã€æ´ã€‘èªªï¼šã€Œä»Šå¤©æˆ‘å¯«ã€å·±æ‰€ä¸æ¬²ï¼Œå‹¿æ–½æ–¼äººã€å¥½äº†ã€ç„¶å¾Œä»–å°±é‚Šå¯«é‚Šèªªï¼šã€Œæˆ‘ä»Šå¤©æ‰“ç®—è»Šæ‰ï¼¸ï¼¸ï¼¸ï¼Œä½ èªç‚ºå‘¢ï¼Ÿã€ã€Œéš¨ä¾¿ä½ å•¦ï½ã€å°±é€™æ¨£â€¦åˆ°äº†éš”å¤©ã€æ´ã€‘ï¼šã€Œé˜¿ï¼æˆ‘çš„åè¨€ä½³å¥è¢«åœˆèµ·ä¾†äº†ï¼ï¼Ÿé›£é“ã€å·±æ‰€ä¸æ¬²ï¼Œå‹¿æ–½æ–¼äººã€ä¸æ˜¯åè¨€ä½³å¥ï¼Ÿã€ç„¶å¾Œä»–å°±çµ¦æˆ‘çœ‹æˆ‘ä»”ç´°çœ‹ç™¼ç¾ï¼šã€Œä½ æ ¹æœ¬äº‚å¯«å˜›ï¼é€™ç”šéº¼æ±æ±ï¼Ÿã€å·±æ‰€ä¸æ¬²ï¼Œå‹¿è»Šåˆ¥äººã€ï¼Ÿï¼ã€ ç¬¬å››ä»¶äº‹æœ‰ä¸€æ¬¡è€å¸«æ­£åœ¨è«‡æ¾³æ´²çš„äººæ–‡åœ°å½¢ï¼šã€Œåœ¨æ¾³æ´²ï¼Œç¾Šæ˜¯æ¯”äººå¤šçš„ï¼Œç¾Šæ¯”äººå¤§ç´„æ˜¯ 5ï¼š1ï¼Œç„¶å¾Œâ€¦ã€ã€æ´ã€‘èªªï¼šã€Œé…·è€¶ï¼ã„Ÿï½ä¸è¦ç©ï¼³ï¼“äº†å•¦ï¼å»æ¾³æ´²ä¼ºæœå™¨å•¦ï½ä¸€å€‹äººå¯ä»¥åˆ†åˆ°ï¼•éš»ç¾Šè€¶ï¼ã€æˆ‘ï¼šã€Œ&amp;$#%@+%ã€(OSï¼šä½ ç˜‹äº†å—?ï¼ä½ è¢« TR æ´—è…¦äº†å•¦ï¼) é€™å››ä»¶äº‹ï¼Œå·²ç¶“å……åˆ†çš„é¡¯ç¤ºå‡ºï¼ŒTR å°äººçš„æ€ç¶­æ¨¡å¼å½±éŸ¿ä¸å¯å¿½è¦–@@ è¨˜æ†¶æœ‰é—œäº‹ç‰©æˆ‘ç›¸ä¿¡å¤§å®¶éƒ½å­¸éå¤–åœ‹å²å§?ï¼é‚£å„ä½æ‡‰è©²ä¹Ÿéƒ½çŸ¥é“è¥¿ç¾…é¦¬ã€æ±ç¾…é¦¬å¸åœ‹å’Œæ—¥è€³æ›¼æ°‘æ—(æ¢é “)å§ã€‚è¥¿å…ƒ476å¹´ï¼Œæ—¥è€³æ›¼æ°‘æ—å—ä¸‹æ»…äº†è¥¿ç¾…é¦¬å¸åœ‹ï¼Œåœ¨è¥¿ç¾…é¦¬å¸åœ‹çš„ä½å­åˆå»ºç«‹äº†è¨±å¤šå¤§å¤§å°å°çš„ç‹åœ‹ï¼Œè¨±å¤šäººè®€åˆ°é€™å…’å°±é ­ç—›ï¼Œå› ç‚ºæœ‰ä¸€å¤§å †ç‹åœ‹è¦èƒŒï¼Œä½†æˆ‘è·Ÿã€æ´ã€‘å»ä¸çŸ¥ä¸è¦ºçš„ç‰¢ç‰¢è¨˜ä½äº†ï¼Œæ±ªé”çˆ¾ã€æ±å“¥å¾·ã€è¥¿å“¥å¾·ã€æ³•è˜­å…‹å’Œç›æ ¼é­¯å…‹éœäººã€‚æ²’ç”šéº¼ç‰¹æ®ŠåŸå› ï¼Œåªæ˜¯å› ç‚ºæˆ‘å€‘Travianè£¡ç¨®æ—é¸çš„éƒ½æ˜¯æ¢é “ï¼ï¼ ç®—æ•¸æ–¹é¢æœ‰ä¸€å¤©çš„æ•¸å­¸å°è€ƒè€ƒå‹¾è‚¡å®šå¾‹ï¼Œã€æ´ã€‘å±…ç„¶æ‹¿æ»¿åˆ†ï¼ (é€šå¸¸æˆ‘çš„åˆ†æ•¸ =ã€æ´ã€‘çš„åˆ†æ•¸ä¹˜ 2 åˆ†ä¹‹ 3)æˆ‘å•ä»–ï¼šã€Œæ€éº¼çªç„¶è€ƒæ»¿åˆ†?ã€ã€æ´ã€‘èªªï¼šã€Œå› ç‚ºä½ èªªæˆ‘ä¸­ TR æ¯’å¾ˆæ·±é˜¿ï¼å‹¾è‚¡å®šå¾‹ç•¶ç„¶æœƒå¾ˆç†Ÿç·´é˜¿ï¼ã€æ–¼æ˜¯ä»–é–‹å§‹è¬›è§£ï¼šç•¶ä½ è¦è¨ˆç®—ä¸€å€‹åº§æ¨™åˆ°å¦ä¸€å€‹åº§æ¨™çš„ç›´ç·šè·é›¢ï¼Œé€™æ™‚å°±æœƒç”¨åˆ°ä¸Šèª²æ‰€å­¸çš„ã€å‹¾è‚¡å®šå¾‹ã€ï¼Œå¥—å…¥å…¬å¼ï¼š è¼•è€Œæ˜“èˆ‰çš„å°±ç®—å‡ºä¾†äº†ï¼ç„¶å¾Œåˆç¹¼çºŒèªªï¼šç­‰åŠ é€Ÿåº¦å…¬å¼ Travian ä¹Ÿç”¨çš„åˆ°é˜¿ï¼ä½ çœ‹å–”ï¼šç•¶ä½ è¦å‡ºé–€ï¼Œä½ åˆåœ¨ 24 å°æ™‚ç”¢å…µä¸­ï¼Œæ€•è‡ªå·±ç±³ä¸å¤ åƒ (è€Œä¸”æ˜¯è¶Šåƒè¶Šå¿« = = ï¼Œå› ç‚ºæ˜¯24å°æ™‚ç”¢å…µâ€¦) é€™æ™‚å€™åˆå¯ä»¥å¥—å…¥ç­‰åŠ é€Ÿåº¦å…¬å¼ï¼š ç­”æ¡ˆåˆé¦¬ä¸Šå‡ºä¾†äº†ï¼ ã€Œé…·è€¶ï¼ï¼é‚£é€™æ¨£å°±ä¸ç”¨ï¼°ï¼¬ï¼µï¼³äº†ï¼Œå•ä½ å°±å¥½å•¦ï½ã€ä¸åªé€™æ¨£å‘¢ï¼æˆ‘å€‘å…¬æ°‘èª²å­¸åˆ°çš„ã€æ©Ÿæœƒæˆæœ¬ã€æ¦‚å¿µä¹Ÿç”¨çš„åˆ°å–”ï¼æ–¼æ˜¯åˆé–‹å§‹è¬›è§£ï¼šç•¶ä½ ç™»å…¥ä¹‹å¾Œï¼Œæƒ³å¿…å°±æ˜¯æƒ³ç®¡ç®¡è‡ªå·±çš„æ‘èŠå§ï¼ç„¶è€Œï¼Œæƒ³è¦æŠŠä½ çš„æ‘èŠç®¡ç†å¥½ï¼Œå°±è¦åšå‡ºå°çš„é¸æ“‡ï¼Œæ¯æ¯ç™»å…¥ï¼Œç¸½æ˜¯æœƒæœ‰å¾ˆå¤šç¨®ç¶ è‰²çš„æŒ‰éˆ•ï¼Œé€™æ™‚ä½ å°±å¿…é ˆåšå‡ºé¸æ“‡ï¼Œå› ç‚ºåœ¨åŒä¸€å€‹æ™‚åˆ»è£¡ï¼Œæ¯å€‹æ‘éƒ½åªèƒ½é»ä¸€ç¨®æ±è¥¿ã€‚ã€Œé‚£ç¾…é¦¬å‘¢ï¼Ÿï¼ã€æˆ‘æ’å˜´èªªã€Œç¾…é¦¬ä¸ç®—å•¦ï¼ä»–å€‘ä¸€å€‹äººçš„æ‰‹ä¸€å®šä¸åªï¼’éš»ï¼ï¼è®“æˆ‘èªªå®Œå˜›ï¼ï¼ã€ç„¶å¾Œâ€¦â€¦æ‰€ä»¥é€™æ™‚å°±è¦åˆ©ç”¨ã€æ©Ÿæœƒæˆæœ¬ã€çš„æ¦‚å¿µï¼Œè‹¥ä½ æƒ³è¦å…¨åŠ›é€ å…µï¼Œé‚£ä½ å°±å¤±å»æŒ‰è³‡æºç”°çš„æ©Ÿæœƒï¼›åä¹‹ï¼Œè‹¥ä½ æƒ³æŒ‰è³‡æºç”°ï¼Œé‚£ä½ é€ å…µçš„æ•¸ç›®å°±æœƒè®Šå°‘ï¼Œè€ƒæ…®å“ªå€‹æ©Ÿæœƒæˆæœ¬æ¯”è¼ƒå°ï¼Œç„¶å¾Œå†é¸å‡ºä½ æœ€æƒ³è¦é»çš„é‚£å€‹ï¼ åšäººè™•äº‹æ–¹é¢æˆ‘æ›¾ç¶“æ“”ä»»é s3 çš„ä¸€å€‹å°ç›Ÿç›Ÿä¸»ï¼Œæ¯å¤©æ”¶ç™¼çš„ä¿¡ä»¶éƒ½è¶…é20å°ï¼Œæœ‰è¯é˜²çš„å•¦ã€ä½¯æ”»è¨ˆåŠƒé˜¿ã€è¨è«–æˆ°è¡“é˜¿ï¼Œæˆ–åªæ˜¯å–®ç´”èŠå¤©æ‰“å±ã€‚å¦‚æœä¸çŸ¥é“åšäººè™•äº‹çš„æ–¹æ³•ï¼Œä¸€ç›´ä»¥ç‚ºç›Ÿä¸»å¯ä»¥é«˜é«˜åœ¨ä¸Šçš„è©±â€¦â€¦ã€‚é€™æ™‚ã€æ´ã€‘æ¥ä¸‹å»èªªï¼šã€Œå¦‚æœä½ çœŸä»¥ç‚ºç›Ÿä¸»å¯ä»¥é«˜é«˜åœ¨ä¸Šçš„è©±â€¦ç•¶ä½ éœ€è¦å¹«åŠ©æ™‚ï¼Œæˆ‘è·Ÿå…¶ä»–äººä¹Ÿä¸€å®šæœƒåŠ©ä½ ä¸€è‡‚ä¹‹åŠ›â”€â”€å¹«å¿™ã€è½äº•ä¸‹çŸ³ã€ï¼ã€æ‰€ä»¥â€¦æœ‰è¬™è™›çš„æ…‹åº¦åŠ ä¸Šæ™‚å¸¸ä¸Šè¯ç›Ÿè«–å£‡é€£çµ¡å¤§å®¶æ„Ÿæƒ…ï¼Œè¾¦äº‹æ•ˆç‡ä¹Ÿå°±æœƒäº‹åŠåŠŸå€ï¼Œè€Œé€™ä¹Ÿæ‰æ˜¯å€‹å¥½çš„è¯ç›Ÿã€‚ é€™æ¨£èªªæ˜éå¾Œï¼Œæˆ‘ç›¸ä¿¡é‚£äº›ä¸ç›¸ä¿¡ Travian æœƒå½±éŸ¿ä¸€å€‹äººçš„è¡Œç‚ºçš„äººï¼Œä¹Ÿéƒ½ç›¸ä¿¡äº†å§ï¼ï¼Ÿ","categories":[],"tags":[{"name":"trashtalk","slug":"trashtalk","permalink":"https://ssarcandy.tw/tags/trashtalk/"}]}],"categories":[],"tags":[{"name":"unix","slug":"unix","permalink":"https://ssarcandy.tw/tags/unix/"},{"name":"note","slug":"note","permalink":"https://ssarcandy.tw/tags/note/"},{"name":"trashtalk","slug":"trashtalk","permalink":"https://ssarcandy.tw/tags/trashtalk/"},{"name":"automation","slug":"automation","permalink":"https://ssarcandy.tw/tags/automation/"},{"name":"c++","slug":"c","permalink":"https://ssarcandy.tw/tags/c/"},{"name":"cmake","slug":"cmake","permalink":"https://ssarcandy.tw/tags/cmake/"},{"name":"cloud","slug":"cloud","permalink":"https://ssarcandy.tw/tags/cloud/"},{"name":"docker","slug":"docker","permalink":"https://ssarcandy.tw/tags/docker/"},{"name":"slurm","slug":"slurm","permalink":"https://ssarcandy.tw/tags/slurm/"},{"name":"nodejs","slug":"nodejs","permalink":"https://ssarcandy.tw/tags/nodejs/"},{"name":"hexo","slug":"hexo","permalink":"https://ssarcandy.tw/tags/hexo/"},{"name":"javascript","slug":"javascript","permalink":"https://ssarcandy.tw/tags/javascript/"},{"name":"python","slug":"python","permalink":"https://ssarcandy.tw/tags/python/"},{"name":"pytorch","slug":"pytorch","permalink":"https://ssarcandy.tw/tags/pytorch/"},{"name":"machine learning","slug":"machine-learning","permalink":"https://ssarcandy.tw/tags/machine-learning/"},{"name":"paper","slug":"paper","permalink":"https://ssarcandy.tw/tags/paper/"},{"name":"opencv","slug":"opencv","permalink":"https://ssarcandy.tw/tags/opencv/"},{"name":"rendering","slug":"rendering","permalink":"https://ssarcandy.tw/tags/rendering/"},{"name":"react","slug":"react","permalink":"https://ssarcandy.tw/tags/react/"},{"name":"react native","slug":"react-native","permalink":"https://ssarcandy.tw/tags/react-native/"},{"name":"pbrt","slug":"pbrt","permalink":"https://ssarcandy.tw/tags/pbrt/"},{"name":"vim","slug":"vim","permalink":"https://ssarcandy.tw/tags/vim/"}]}