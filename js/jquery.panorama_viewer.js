!function(e){var n={repeat:false,direction:"horizontal",animationTime:700,easing:"ease-out",overlay:true,w:5e3};function i(e,n){var i,t,a=n;this.pause=function(){window.clearTimeout(i);a-=new Date-t};this.resume=function(){t=new Date;i=window.setTimeout(e,a)};this.resume()}function t(e){var n=e.changedTouches,i=n[0],t="";switch(e.type){case"touchstart":t="mousedown";break;case"touchmove":t="mousemove";break;case"touchend":t="mouseup";break;default:return}var a=document.createEvent("MouseEvent");var o=2;if(navigator.userAgent.match(/Android/i)){o=10}a.initMouseEvent(t,true,true,window,1,i.screenX,i.screenY,i.clientX*o,i.clientY*o,false,false,false,false,0,null);i.target.dispatchEvent(a)}e.fn.panorama_viewer=function(i){document.addEventListener("touchstart",t,true);document.addEventListener("touchmove",t,true);document.addEventListener("touchend",t,true);document.addEventListener("touchcancel",t,true);return this.each(function(){var t=e.extend({},n,i),a=e(this);a.find("> img").load(function(){a.find("> img").addClass("pv-pano");a.addClass("pv-container").wrapInner("<div class='pv-inner pv-animating'></div>");if(t.direction=="vertical"){a.addClass("pv-vertical")}a.find(".pv-animating").css({"-webkit-transition":"all "+t.animationTime+"ms "+t.easing,"-moz-transition":"all "+t.animationTime+"ms "+t.easing,"-ms-transition":"all "+t.animationTime+"ms "+t.easing,transition:"all "+t.animationTime+"ms "+t.easing});imgSrc=a.find(".pv-pano").attr("src");width=a.find(".pv-pano").width();height=a.find(".pv-pano").height();var n="no-repeat";if(t.repeat==true){n="repeat"}a.find(".pv-inner").css({height:height,width:width,background:"url("+imgSrc+") "+n,"background-size":"cover"});if(t.overlay==true){e("<div class='pv-overlay'><i class='pvicon-overlay'></i></div>").appendTo(a.find(".pv-inner"));a.find(".pv-inner").bind("mouseenter",function(){e(this).find(".pv-overlay ").fadeOut("fast")}).bind("mouseleave",function(){e(this).find(".pv-overlay ").fadeIn("fast")})}var i=a.find(".pv-inner"),o={w:parseInt(i.parent().width()),h:parseInt(i.parent().height())},s={w:width-o.w,h:height-o.h},r={x:0,y:0},d={x:0,y:0},u=false;function c(n){var i={x:false,y:false},a={x:d.x-(r.x-n.clientX),y:d.y-(r.y-n.clientY)};if(t.direction=="horizontal"){if(t.repeat==true){i.x=true}else{i.x=a.x<0&&a.x*-1<t.w-o.w}if(u&&i.x){d.x=a.x;d.y=0}}else{if(t.repeat==true){i.y=true}else{i.y=a.y<0&&a.y*-1<s.h}if(u&&i.y){d.y=a.y;d.x=0}}e(this).css("background-position",d.x+"px "+d.y+"px");r.x=n.clientX;r.y=n.clientY;n.stopPropagation();return false}function l(n){u=false;i.unbind("mousemove",c);if(n.type=="mousedown"){r.x=n.clientX;r.y=n.clientY;u=true;i.bind("mousemove",c)}else{e(document.body).focus()}n.stopPropagation();return false}function v(){d={x:0,y:0};e(this).css("backgroundPosition","0 0")}i.bind("mousedown mouseup mouseleave",l);i.bind("dblclick",v);a.find(".pv-pano").hide()})})}}(window.jQuery);