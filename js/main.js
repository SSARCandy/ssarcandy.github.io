(function(e,t){var n=t.body,i=t.getElementById("gotop"),s=t.getElementById("menu"),a=t.getElementById("header"),o=t.getElementById("mask"),l=t.getElementById("menu-toggle"),r=t.getElementById("menu-off"),d=t.getElementById("loading"),c=e.requestAnimationFrame,f=navigator.userAgent,u=f.indexOf("Mobile")!==-1||f.indexOf("Android")!==-1||f.indexOf("iPhone")!==-1||f.indexOf("iPad")!==-1||f.indexOf("KFAPWI")!==-1,v=u?"touchstart":"click",g=function(){},m=function(e){var t=e.offsetLeft,n=e.offsetTop;if(e.offsetParent){var i=arguments.callee(e.offsetParent);t+=i.x;n+=i.y}return{x:t,y:n}},h=f.indexOf("Firefox")!==-1?t.documentElement:n;var L={goTop:function(){var e=h.scrollTop;if(e>400){h.scrollTop=e-400;c(arguments.callee)}else{h.scrollTop=0}},toggleGotop:function(t){if(t>e.innerHeight/2){i.classList.add("in")}else{i.classList.remove("in")}},toggleMenu:function(t){if(t){s.classList.remove("hide");if(e.innerWidth<1241){o.classList.add("in");s.classList.add("show")}}else{s.classList.remove("show");o.classList.remove("in")}},fixedHeader:function(e){if(e>a.clientHeight){a.classList.add("fixed")}else{a.classList.remove("fixed")}},fixedToc:function(){var n=t.getElementById("post-toc");if(!n){return g}var i=m(n),s=i.y,a=n.offsetHeight,o=a>e.innerHeight,l=t.getElementById("post-content").querySelectorAll("h1, h2, h3, h4, h5, h6"),r=150,d=-1*(a-e.innerHeight)-r;function c(e){for(var t,i=0,s=l.length;i<s;i++){if(e>m(l[i]).y){t=l[i].id}}var e=r-n.querySelectorAll('a[href="#'+t+'"]')[0].offsetTop;n.style.top=(e<d?d:e)+"px"}return function(e){if(e>s){n.classList.add("fixed");if(o){c(e)}}else{n.classList.remove("fixed")}}}(),share:function(){var n=t.getElementById("global-share"),i=t.getElementById("menu-share"),s=t.createElement("div"),a=t.getElementsByClassName("share-sns"),l,r;s.innerHTML=BLOG_SHARE.summary;l=s.innerText;s=undefined;r="http://www.jiathis.com/send/?webid={service}&url="+BLOG_SHARE.url+"&title="+BLOG_SHARE.title+"&summary="+l+"&pic="+location.protocol+"//"+location.host+BLOG_SHARE.pic;function d(t){e.open(encodeURI(r.replace("{service}",t)))}function c(){o.classList.add("in");n.classList.add("in")}function f(){n.classList.remove("in");o.classList.remove("in")}[].forEach.call(a,function(e){e.addEventListener("click",function(){d(this.dataset.service)},false)});i.addEventListener(v,function(){c()},false);o.addEventListener(v,function(){f()},false)},search:function(){var e=t.getElementById("search-wrap");function n(){e.classList.toggle("in")}t.getElementById("search").addEventListener(v,n);t.getElementById("search").addEventListener(v,n)}};s.addEventListener("touchmove",function(e){e.preventDefault()});e.addEventListener("load",function(){d.classList.remove("active")});e.addEventListener("resize",function(){L.toggleMenu()});i.addEventListener(v,function(){c(L.goTop)},false);l.addEventListener(v,function(e){L.toggleMenu(true);e.preventDefault()},false);r.addEventListener(v,function(){s.classList.add("hide")},false);o.addEventListener(v,function(){L.toggleMenu()},false);t.addEventListener("scroll",function(){var e=h.scrollTop;L.toggleGotop(e);L.fixedHeader(e);L.fixedToc(e)},false);if(typeof BLOG_SHARE!=="undefined"){L.share()}Waves.init();Waves.attach(".global-share li",["waves-block"]);Waves.attach(".article-tag-list-link, #page-nav a, #page-nav span",["waves-button"])})(window,document);