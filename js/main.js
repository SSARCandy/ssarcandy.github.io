(function(e,t){var n=t.body,a=t.querySelector.bind(t),s=t.querySelectorAll.bind(t),o=t.getElementById("gotop"),c=t.getElementById("menu"),l=t.getElementById("main"),r=t.getElementById("header"),d=t.getElementById("mask"),f=t.getElementById("menu-toggle"),u=t.getElementById("menu-off"),v=t.getElementById("loading"),g=e.requestAnimationFrame,m=navigator.userAgent,h=m.indexOf("Mobile")!==-1||m.indexOf("Android")!==-1||m.indexOf("iPhone")!==-1||m.indexOf("iPad")!==-1||m.indexOf("KFAPWI")!==-1,L=h?"touchstart":"click",E=function(){},p=function(e){var t=e.offsetLeft,n=e.offsetTop;if(e.offsetParent){var i=arguments.callee(e.offsetParent);t+=i.x;n+=i.y}return{x:t,y:n}},y=m.indexOf("Edge")==-1?t.documentElement:n;var x={goTop:function(){var e=y.scrollTop;if(e>400){y.scrollTop=e-400;g(arguments.callee)}else{y.scrollTop=0}},toggleGotop:function(t){if(t>e.innerHeight/2){o.classList.add("in")}else{o.classList.remove("in")}},toggleMenu:function(t){if(t){c.classList.remove("hide");l.classList.add("offset-main");if(e.innerWidth<1241){d.classList.add("in");c.classList.add("show")}}else{c.classList.remove("show");d.classList.remove("in");l.classList.remove("offset-main")}},fixedHeader:function(e){if(e>r.clientHeight){r.classList.add("fixed")}else{r.classList.remove("fixed")}},toc:function(){var e=a("#post-toc");if(!e||!e.children.length){return{fixed:E,actived:E}}var t=a(".content-header").clientHeight,n=r.clientHeight,o=a("#post-content").querySelectorAll("h1, h2, h3, h4, h5, h6");e.querySelector('a[href="#'+o[0].id+'"]').parentNode.classList.add("active");Array.prototype.forEach.call(s('a[href^="#"]'),function(e){e.addEventListener("click",function(e){var t=p(a('[id="'+decodeURIComponent(this.hash).substr(1)+'"]')).y-n;y.scrollTop=t})});return{fixed:function(i){i>=t-n?e.classList.add("fixed"):e.classList.remove("fixed")},actived:function(t){for(i=0,len=o.length;i<len;i++){if(t>p(o[i]).y-n-5){e.querySelector("li.active").classList.remove("active");var a=e.querySelector('a[href="#'+o[i].id+'"]').parentNode;a.classList.add("active")}}if(t<p(o[0]).y){e.querySelector("li.active").classList.remove("active");e.querySelector('a[href="#'+o[0].id+'"]').parentNode.classList.add("active")}}}}(),share:function(){var n=t.getElementById("global-share"),i=t.getElementById("menu-share"),a=t.createElement("div"),s=t.getElementsByClassName("share-sns"),o,c;a.innerHTML=BLOG_SHARE.summary;o=a.innerText;a=undefined;c="http://www.jiathis.com/send/?webid={service}&url="+BLOG_SHARE.url+"&title="+BLOG_SHARE.title+"&summary="+o+"&pic="+location.protocol+"//"+location.host+BLOG_SHARE.pic;function l(t){e.open(encodeURI(c.replace("{service}",t)))}function r(){d.classList.add("in");n.classList.add("in")}function f(){n.classList.remove("in");d.classList.remove("in")}[].forEach.call(s,function(e){e.addEventListener("click",function(){l(this.dataset.service)},false)});i.addEventListener(L,function(){r()},false);d.addEventListener(L,function(){f()},false)},search:function(){var e=t.getElementById("search-wrap");function n(){e.classList.toggle("in")}t.getElementById("search").addEventListener(L,n);t.getElementById("search").addEventListener(L,n)}};c.addEventListener("touchmove",function(e){e.preventDefault()});e.addEventListener("load",function(){v.classList.remove("active");var e=y.scrollTop;x.toc.fixed(e);x.toc.actived(e)});e.addEventListener("resize",function(){x.toggleMenu()});o.addEventListener(L,function(){g(x.goTop)},false);f.addEventListener(L,function(e){x.toggleMenu(true);e.preventDefault()},false);u.addEventListener(L,function(){c.classList.add("hide");l.classList.remove("offset-main")},false);d.addEventListener(L,function(){x.toggleMenu()},false);t.addEventListener("scroll",function(){var e=y.scrollTop;x.toggleGotop(e);x.fixedHeader(e);x.toc.fixed(e);x.toc.actived(e)},false);if(typeof BLOG_SHARE!=="undefined"){x.share()}Waves.init();Waves.attach(".global-share li",["waves-block"]);Waves.attach(".article-tag-list-link, #page-nav a, #page-nav span",["waves-button"]);document.body.oncopy=function(e){var t=window.getSelection();var n=t.toString().length>20?"\n\nSource: "+window.location.href+"\n":"";e.clipboardData.setData("text/plain",t+n);return false}})(window,document);